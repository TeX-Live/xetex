$Header: /home/cvsroot/dvipdfmx/ChangeLog,v 1.141 2006/12/11 13:01:38 chofchof Exp $

ChangeLog: Changes for xdvipdfmx (teTeX / TeX live)
===================================================

2008-04-06  Peter Breitenlohner  <peb@mppmu.mpg.de>
	* configure.in: respect library dependencies.

2008-03-31  Peter Breitenlohner  <peb@mppmu.mpg.de>
	* Makefile.in, data/Makefile.in, src/Makefile.in: regenerated.

2008-03-04  Peter Breitenlohner  <peb@mppmu.mpg.de>

	* Makefile.am: added `ACLOCAL_AMFLAGS -I m4'
	* configure.in: moved macro definitions ...
	* m4/maw-time.m4 (new): ... to here
	* acinclude.m4 (removed): moved macro definitions ...
	* m4/maw-kpse.m4, maw-libs.m4, maw-macos.m4 (all new): ... to
	here; these files are the same as in ../dvipdfmx.

2008-02-21  Peter Breitenlohner  <peb@mppmu.mpg.de>

	Allow maintainer mode to regenerate files.
	* configure.in, acinclude.m4: added AC_DEFINES's third arg to
	provide autoheader templates.
	* configure.in: use AC_DEFINES for XETEX and XETEX_MAC.

ChangeLog: Changes for dvipdfmx
===============================

2006-12-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* mpost.c, pdfdev.c, pdfdev.h, spc_pdfm.c, pdfcolor.c, pdfcolor.h,
          pdfdraw.c, pdfdraw.h:
          Temporary implementation for mps files generated by mptopdf.

2006-12-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfcolor.c:
          Fixed the color bug reported by H. J. Lee and Pablo Rodriguez.

2006-12-07  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfobj.c:
          Fixed a bug with xref, reported by Paul Guyot.

2006-12-06  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* t1_load.c:
          Modified to work with broken fonts, e.g. belleek/blsy.pfb.

2006-12-06  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* dvipdfmx.c, dvi.c, dvi.h:
          Add xoffset and yoffset specials.

2005-12-18  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* dpxfile.c:
          Fixed a bug found by Karnes Kim.

2005-10-14  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* spc_tpic.c:
	  Fix a bug on spc_handler_tpic_bk() and spc_handler_tpic_wh();
	  reported by Akira Kakuto.

2005-08-31  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdoc.c, pdfdraw.c:
	  Stroke and fill color controls with gsave and grestore.

2005-08-30  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdraw.h, pdfdraw.c, mpost.c:
	  Fix a bug on MetaPost manipulation.

	* pdfobj.c:
	  Allow PDF images generated from Mac OS X.

	* truetype.c:
	  Fix a bug on PK Type3 font.

2005-08-24  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* spc_pdfm.c:
	  Fix a bug on finding XObject.

2005-08-23  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdraw.h, pdfdraw.c:
	  Fix a bug on matrix concatenation and inverse matrix.

	* spc_pdfm.c:
	  Fix a bug on giving object name in image.

2005-08-15  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdoc.c, spc_pdfm.c, specials.c:
	  Fix a bug on article|bead|thread specials.

2005-08-14  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* spc_html.c, spc_pdfm.c, specials.c:
	  Fix a bug causing memory leak, and correct a typo.

2005-08-12  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdev.c, pdfdev.h, spc_dvips.c, spc_pdfm.c, spc_util.c:
	  Modified transform_info structure using pdf_tmatrix.

2005-08-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfdoc.c, pdfdraw.c, pdfdraw.h, spc_pdfm.c:
	  Optimization of changing transform matrices.
	  The "pdf:literal" special works almost same as pdfTeX's
	  "\pdfliteral" primitive. But "pdf:literal direct" is slightly
	  different from pdfTeX's "\pdfliteral direct". It does not
	  affected by "pdf:literal".

2005-08-08  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* spc_pdfm.c:
	  Test implementation of \special{pdf:literal ...}.

	* spc_misc.c:
	  Ignores \special{pos: ...} too.

	* spec-dpx.tex:
	  Modified to fit the changes introduced in 2005-08-08.

2005-08-02  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* dvi.c, spc_pdfm.c:
	  Fixed a few bugs introduced by changes in 2005-08-01.

	* dvipdfmx.def, spec-dpx.tex:
	  Modified to fit the changes introduced in 2005-08-01.
	  ConTeXt module still has a bug, e.g., \handleMPfshow.

2005-08-01  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* specials.c, spc_html.c, spc_pdfm.c:
	  Various minor changes to specials.
	  Rewriting HTML special support.

2005-07-31  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* specials.c:
	  Fixed a bug introduced by changes in 2005-07-30.
	  (@page1 not handled correctly)

2005-07-30  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* colors.h: removed
	  Color definitions placed into spc_util.c.

	* pdfdev.c, pdfdraw:
	  Various changes.

	* pdfcolor, pdfdoc:
	  set_bgcolor pdfcolor --> pdfdoc.

	* cid.c:
	  Force fixedpitch option for printer/acro fonts.

	* spc_*, specials.c:

	* And many others....

2005-07-28  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfdev.c:
	  Simply use sprintf for printing numbers.................
	  Fixed an ancient bug causing very frequent (unnecessary)
	  font selection.

2005-07-21  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfencoding.c: Fixed bugs.

	* truetype.c: Update and various changes.
	  Apply ligature GSUB for glyph name "a_b" and glyph names
	  with AGL mapping to multiple Unicode character sequence.
	  Suffixes "liga", "dlig", "frac" ... are always recognized
	  as feature tag for glyph composition. But for "a_b.vert",
          dvipdfmx first compose glyph "a_b" (by some way) and then
	  apply "vert" substitution to composed glyph. It may often
	  behaves unexpectedly. Suffixes like "aalt1" is treated as
	  alternate substitution; e.g., "a.salt1" is interpreted as
	  first stylistic alternate of default glyph for "a". Those
	  features are just for completeness. (esp. alternate GSUB)
	  Reorganized various process of finding glyphs, but still
	  complicated. TTC is supported (but index is always 0).

2005-07-20  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdffont.c:
	  Minor changes.

	* pkfont.c:
	  Mostly rewritten. Allow .enc file to be specified
	  in fontmap. But it is not for reencoding but to get
	  glyph names for ToUnicode creation.

	* dpxfile.c:
	  Check file type.

	* pdfcolor.c, vf.c: Don't use strcasecmp, strncmp.

2005-07-18  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfximage.c:
	  Set image format conversion filter to NULL if empty
	  string "" is given. Put various system dependent things
	  into dpxfile.c.

	* dpxfile.c:
	  Creation of temporary files, call other program
	  via system() to apply filter to file.

	* dpxconf.c, dpxconf.h: new files
	  Currently paper format related codes.

	* dvipdfmx.c: cleanup
	  Papersize handling --> dpxconf.c
	  Removed undocumented extension for page label.

	* dvipdfmx.c:
	  's' option for MPS-to-PDF conversion mode.  Treat page
	  numbers as suffix. For "dvipdfmx -M -s 1-3 foo",
	  dvipdfmx first tries to open "foo". If "foo" exists,
	  it then start conversion of "foo" (ignore 's'), if not, 
	  "foo.1", "foo.2", and "foo.3" is searched and multi-page
	  PDF file is generated.

2005-07-17  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* spc_dvips.c:
	  Fixes in psfile special.

2005-07-17  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dpxutil.c, dpxutil.h:
	  Added few functions to make fontmap.c independent
	  from pdfparse.c. Various parse_xxx from pdfparse.c.
	  mangle_name() removed.

	* pdfparse.c, pdfparse.h, dpxutil.c, dpxutil.h, ...:
	  Several parsing routine moved to dpxutil.c.
	  parse_c_ident() is not really for "C" ident.
	  parse_c_string() is not really for "C" string.
	  And there are too many unclear parse_xxx routines
	  unrelated to PDF in "pdfparse". 
	  There are many uncertainty in parsing \special too.

	* spc_xxx:
	  skip_white() wrongly used in many places.
	  skip_white() skips from '%' to newline...

	* pdf:tounicode, pdf:mapfile, and pdf:mapline
	  using very different syntax than other pdf:
	  prefix specials.

	* dvi.c, pdffont.c:
	  Minor changes in debug and error message.

	* psimage.c, psimage.h, t1crypt.c, t1crypt.h: Removed.

	* t1_load.c: Merge t1crypt

	* pdfximage.c, pdfximage.h: Merge psimage
	  psimage.c is not really for PostScript support.
	  It just call external program to do conversion form
	  PS to PDF. There are no reason to restrict this to
	  from-PS conversion.

	* fontmap.c:
	  Do not use pdfparse.c. Added 'u' option to specify
	  "ToUnicode". This is for testing. Don't use this.

	* pdffont.c:
	  Read ToUnicode CMap specified in fontmap.

	* spc_util.c: HSB color...
	  Converted to RGB.

	* cidtype0.c, cidtype2.c:
	  Do not use mangle_name in dpxutil.c.

	* Various fixes related to pdflimits.h:
	  This only contains PDF_NAME_LEN_MAX.

2005-07-16  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* fontmap.c, fontmap.h
	  Create fontmap entries for each subfont, containing
	  SFD mapping information and "link" to fontmap entry
	  "foo@SFD@". Removed pdf_lookup_fontmap_record2().

	* dvi.c, mpost.c, pdfdev.c:
	  Modification needed by changes in fontmap handling.

	* spc_pdfm.c:
	  Minor changes in fontmap specials. Fixed leak in
	  "append" fontmap.

	* subfont.c, subfont.h:
	  Minor fixes and changes.

	* mpost.c: Bug fix.
	  Fixed a bug (typo) in mp_setfont.

2005-07-14  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* subfont.c, subfont.h:
	  xxx_sfd_yyy -> sfd_xxx_yyy
	  Added code for testing SFD file handling.
	  Added various comments.

	* fontmap.c:
	  Check if subfont ID is valid before loading
	  SFD mapping table for subfonts.
	  Changes related to the above changes in subfont.c.

2005-07-13  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c: minor fix
	  agl_set_verbose() called in pdffont.c too.

	* fontmap.c:
	  Workaround for problems in subfont fontmap lookup.
	  Delete all conflicting explicit fontmap entries for
	  subfonts in pdf_insert_fontmap_record() when adding
	  fontmap entry with @SFD@ extension.

	* subfont.c, subfont.h:
	  Scan SFD file for valid subfont IDs. (Required by
	  changes made to fontmap.c mentioned above.)
	  Removed unnecessary file static variables.
	  Simplified file reading and parsing.

	* dvi.c: set_verbose() for subfont.c

	* fontmap.c:
	  Correctly handle fontmap entry like "dmj@DNP@12".

2005-07-11  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* agl.c: Fixed various small bugs

2005-07-09  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* fontmap.c, fontmap.h, pdfdev.c: Fake-bold again
	  'b' option. This is experimental feature.

	* pdfdev.c:
	  Graphics state is not properly managed yet.
	  Fake-bold and set_rule changes linewidth without
	  using pdf_dev_setlinewidth().
	  Enclose set_rule with q and Q.

	* agl.c: Removed unused variable

2005-07-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_cmap.c: Bug fix
	  Format 12 cmap subtable support not working...

	* fontmap.c: Test for UCS-4
	  'p' option to specify UCS plane.
	  This is just for testing purpose. Don't use that.

2005-07-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_cmap.c: Bug fix in ToUnicode creation
	  ToUnicode CMap creation (inversion of TrueType cmap) was
	  not working for format 12 cmap subtable.

2005-06-27  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cid_basefont.h:
	  Add missing font definitions.

	* data/config/dvipdfmx.cfg:
	  Forgot to mention that 'D "..."' line is commented.
	  Now there are no default setting for image converter,
	  so PS inclusion will always fail unless you modify
          dvipdfmx.cfg.

2005-06-26  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* data/config/cid-x.map: empty
	  Contained examples for fonts with unclear license.
	  Not maintained for a long time.

	* data/CMap/Adobe-Identity-UCS2: removed
	  Wrongly named file. Content of this file is
	  actually identity mapping.

	* type0.c:
	  Create dummy ToUnicode CMap "Adobe-Identity-UCS2".

	* specials.c:
	  spc_push_object() always create label for objects.
	  Objects created with pdf:obj should always be written
	  to output.

	* ainclude.m4, configure.in:
	  Define __TDS_VERSION__, require xbasename in kpathsea,
	  removed unused macros, simplified.

	* dpxfile.c:
	  Use __TDS_VERSION__ instead of HAVE_KPSE_ENC_FORMAT
	  and others.

	* dvipdfmx.c:
	  Alwyas use xbasename().

	* fontmap.c, fontmap.h:
	  Fake bold and OTL options removed.

	* otl_conf.c:
	  Deactivated.

	* pdfdev.c:
	  Fake bold option removed. (undocumented)

	* configure.in, acinclude.m4:
	  Various changes. Error if kpathsea library doesn't
	  have xbasename().
	  Define __TDS_VERSION__, removed HAVE_KPSE_XXX_FORMAT.

	* configure and others: recreated

2005-06-20  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_gsub.c, tt_gsub.h: Alternate substitution
	  LookupType 3 (Alternate Substitution) GSUB lookup.
	  Unused.

2005-06-13  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_gsub.c:
	  Added support for LookupType 7 (Extension Substitution).
	  Large CJK fonts may want them. Not tested well.

2005-06-09  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_glyf.c:
	  Set top-side bearing to (sTypoAscender - bbox.ury) for
	  fonts without vmtx table (vertOriginY = sTypoAscender).

2005-06-09  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dpxfile.c:
	  Fixes for old kpathsea library.

2005-06-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dpxfile.c, dpxfile.h:
	  Fallback to old path searching behaviour.
	  Warn about files found in old location.

	* dvipdfmx.c:
	  set_verbose() for dpxfile.

2005-06-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cid_basefont.h: Update for Adobe Reader 7

	* cid.c, pdfobj.c: Accept version tag 1.6

2005-06-06  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* acconfig.h: removed

	* data/CMap/glyphlist.txt: --> data/config/
	  No appropriate place yet.

	* cmap_read.c:
	  Fixed a bug in reading CIDSystemInfo dict.

	* pdfencoding.c, pdfencoding.h:
	  pdf_load_ToUnicode_stream(). Load ToUnicode CMap from file and
	  then create ToUnicode stream object. 
	  See also changes in truetype, type1, type1c, and pdffont.

	* pdffont.c:
	  First try to load ToUnicode CMap with file name 'tfm_name'.
	  See also changes in truetype, type1, type1c, and pdfencoding.

	* truetype.c, type1.c, type1c.c
	  Don't create ToUnicode if fontdict already have them.
	  See also changes in pdffont and pdfencoding.

	* Makefile.am, data/Makefile.am, src/Makefile.am:
	  Fixes, simplified, updated...
	  There are problems in data/Makefile.am yet. Installation
	  directory for .map and .cmap is not correctly set.

	* Makefile.in and others: recreated

	* configure.in:

2005-05-07  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* spc_color.c:
	  Color special without push/pop allowed?

	* spc_pdfm.c:
	  pdf:literal broken for more than 2 years?
	  Fixed a bug in creating annot.

	* data/config/dvipdfmx.cfg:
	  Comments...

2005-05-04  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* README: update

	* pdfparse.c:
	  There were several problems in handling broken PDF files.

	* pdfobj.c:
	  There were several problems in handling broken PDF files.
	  Stream dict is freed twice when parsing stream object failed.

	* tfm.c:
	  PK font creation was not working due to incorrect design size
	  value returned by tfm_get_desing_size().

	* index.html:
	  Update and fixes for links. Many sentences doesn't make sense
	  when the document is printed. Stylesheet default to "plain"
	  style. Encoding set to "utf-8".

	* style.css: renamed to style_dflt.css

	* style_plain.css:
	  Plain style stylesheet.

2005-03-07  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfcolor.c:
	  Color not correctly reset at page break?
	  Maybe more bugs...

	* pdfdoc.c:
	  Encapsulating docxxx within single struct pdf_doc.

2005-03-05  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* mpost.c:
	  Text handling was not correct for subfonts.

	* pdfencoding.c:
	  Increased verbose level for ToUnicode warning.

2005-02-03  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* otl_conf.c, spc_pdfm.c:
	  Fixed remaining bugs related to MiKTeX file searching.

	* cvs tag: DVIPDFMX-20050201 (revised)

2005-02-01  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* cidtype2.c:
	  Fixed a critical bug on the DW entry for CIDType2 fonts.

	* cvs tag: DVIPDFMX-20050201

2005-01-06  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* dvi.c: Fixed a bug on converting subfont character numbers.

	* snapshot: two snapshots
	  DVIPDFMX-20040824 (release): before full update
	  DVIPDFMX-20040912 (current): with the bug fix on 2005-01-06

2004-09-12  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* specials: rewriting...
	  All \special related files renamed to spc_xxxx and specials.
	  Use function pointer table rather than doing everything with
	  if-else or switch-case.

	* pdfparse.c:
	  Few functions are expelled from pdfparse.c since they are not
	  related to PDF parse at all. pdfparse still contains dvipdfmx
	  only extension and they might be enabled even when parsing
	  ordinary PDF files.

	* spc_pdfm, pdfparse:
	  tounicode special moved to spc_pdfm.

2004-09-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* ttf, tt_*:
	  ttf.[ch] -> truetype.[ch], renamed few files, added tt_post.

	* unicode, pdfencoding:
	  ToUnicode support migrated to pdfencoding.

2004-09-05  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfencoding: encodings -> pdfencoding

	* bug fixes.

	* pdflimits: This was not pdflimits nor implementation limit
	  of PDF viewers at all.

2004-09-02  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pngimage, jpegimage:
	  Improvement on embedded ICC profile support.
	  Profiles with same MD5 checksum are shared among images.

	* pdfcolor:
	  Added something for managing color space resources. 

	* pkfont.c:
	  Depends on tfm.c again.

2004-08-30  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfdoc, pdfdev:
	  Mostly independent from dvi interpreter.
	  pdfparse still depend on dvi.c through pdfspecial.c due to
	  pdf: special @xpos and @ypos.

	* pdfdraw:
	  Primitive graphics drawing functions and graphics state
	  management: pdf_dev_moveto, pdf_dev_gsave, pdf_dev_lineto,
	  pdf_dev_flushpath, and so on (migrated from mpost.c).
	  PostScript, tpic, and all other graphics specials should not
	  directly access page content stream but must use those
	  functions instead. Text state and colors are still managed
	  completely differently.

	* Added many comments in source and headers...

	* Rearranged initialization process again.
	  pdf_init_fontmap:   Initialize fontmapping database.
	  pdf_open_document:  Open output file, initialize various
	    document resource handler, and set default media size...
	  pdf_init_device:    Unit conversion, precision and others.
	  pdf_doc_begin_page: Initialize graphics state, etc.

2004-08-27  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cidtype0.c:
	  Fixed several bugs in Type1 and CFF -> CID CFF converison.
	  There might be more bugs...

	* doc/dpxunicode.pdf: Update.

2004-08-24  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cid_basefont.h: Bug fix
	  Added missing '['.

	* doc/dpxunicode.pdf: Update

	* tt_cmap.c:

2004-08-22  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* otl_conf.[ch]: New file
	  OTL feature is managed by configuration file.

	* fontmap.c:
	  -S and -L option removed. Added option -l. 

	* doc/dpxunicode.pdf: Update.

2004-08-16  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Unicode support for CID OpenType.

2004-08-15  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* fontmap.c:
	  -f option changed to -S. Added -L for ligature substitution.

	* tt_gsub.c and others: New fontmap option -L
	  Map ligatures not in Unicode to PUA.
	  ToUnicode support handle substituted glyphs.
	  See, doc/dpxunicode.pdf for details.

2004-08-14  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* otl_opt.[ch]: New file
	  Handle fontmap options for OTL features.

2004-08-11  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c: Bug fix.
	  The seac operator support was broken since 2004-8-02.

	* fontmap.c: New fontmap option "-f tag" and "-b number".
	  Specify OpenType layout feature with -f option for "unicode"
	  endoding font. Glyph substituion specified by -f option is not
	  reflected in ToUnicode CMap yet. Only single substitution GSUB
	  subtable is supported.
	  The "-b" option specifies "boldness" parameter for fake-bold
	  (stroke line width of fill-then-stroke text).

	* ...:
	  Changes for new features mentioned above.

2004-08-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_cmap.c, cidtype0.c: Bug fixes

2004-08-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Makefile.in, Makefile.am:
	  cmap_parse --> cmap_read.

	* cmap_parse.[ch]: Remaned to cmap_read.[ch]

	* cmap_write.[ch]: New file
	  Create CMap PDF stream object. Output is not efficient yet.

	* dvi.c: Bug fix
	  Multiply pdf:pagesize special page height and page width by DVI
	  magnification factor.

	* agl.[ch], unicode.[ch], ....:
	  Use cmap_write.

	* dpxfile.[ch]: New file
	  .....

2004-08-07  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Type1 font accept "unicode" encoding.
	  Converted to CIDFontType 0 CIDFont.

2004-08-02  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* New files: t1_load.[ch], t1_char.[ch]
	  type1.c --> type1.c, t1_load.c, t1_char.c.
	  t1_load: load Type1 font (PFB) into cff_font structure.
	  t1_char: type 1 charstring interpreter and type 1 to type 2
	  charstring converter (type 2 encoder). There are many duplicated
	  code in cs_type2 and t1_char.

2004-07-31  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* New files: pdfdraw.[ch], pdfcolor.[ch]

	* mpost.c, tpic.c:
	  Use pdfdraw and pdfcolor.

	* pdfdev.c:
	  CTM affects box calculation in dev_expand_box(). Special
	  bann/eann set correct bounding box for rotated text.

	* New keyword "unicode" in fontmap:
	  The keyword "unicode" can be specified as encoding in fontmap.
	  With this option dvipdfmx creates Unicode-to-GID mapping CMap
	  and GID to Unicode (ToUnicode) CMap from TrueType cmap table
	  (format 4 Windows-UCS2 and format 12 Windows-UCS4 subtable is
	  supported) for TrueType font. All font with encoding "unicode"
	  is treated as Type0 font.
	  Currently supported only for Unicode TrueType font.


2004-07-27  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Many bug fixes.

	* fontmap.c: Bug fix.
	  Do not increment num_fontmap when replacing duplicate
	  entries.

	* mpost.c:
	  Support PS operator findfont etc. Not compatible with dvips.

2004-07-18  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* fontmap.c:
	  Add/replace/remove fontmap entries.
	  Added fontmap_add_map_record(). Scan single mapfile line.

	* fontmap.c, pdfdev.c:
	  fontmap_tex_name(), ... abort if invalid value is passed.

	* psspecial.c: bmpfile special
	  This is not PS special...

	* pdfobj.[ch], pdfspecial.c: 
	  Added pdf_copy_object(): Copy object data without changing
	  object label. Dvipdfmx now can handle pdf specials like:

	   \special{pdf:obj @foo << /Bar @bar >>}
	   \special{pdf:obj @bar << /Foo @foo >>}

	  Object reference can appear before definition of object.

2004-07-15  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cidtype2.c, type0.c:
	  Write CID glyph metrics for non-embedded TrueType fonts.

	* dvipdfmx.c, cidtype0.[ch], cidtype2.[ch], cid.[ch]:
	  Treat all CIDFont as fixed pitch font if bit 0x0004 is set
	  in "-C" option. (for backward compatibility)

2004-07-14  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* New files: bmpimage.c, bmpimage.h
	  Windows BMP image format support. (not tested well...)
	  1/4/8/24-bits per pixel images, uncompressed or 4-bit/8-bit RLE
	  compressed images are supported.

	* pdfparse.c:
	  Added dictionary key "T" to the list of strings to be
	  converted to Unicode...

2004-07-12  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c:
	  Added new option "-C".
	  Thumbnail support available again.

	* tpic.c, tpic.h:
	  Spline path ("sp" command) was not handled correctly.
	  Use (semi-)transparent color for shading, enabled by option
	  -C 2. (not enabled by default since it requires PDF version
	  1.4+) Apply shading only to closed paths.

	* psspecial.c:
	  epsbox support was broken.

	* pdfdoc.c: Thumbnail supported again

2004-07-04  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* configure, ...:
	  HAVE_KPSE_OPENTYPE_FORMAT and HAVE_KPSE_ENC_FORMAT is not
	  correctly set when compiled with gcc3.

2004-06-28  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfximage.c:
	  Do not clip PDF images when "clip" option is not given. 

2004-06-27  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Workaround for "three dot leader" problem.

2004-06-16  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Do not adjust refernece point of included images if users do
	  not supply bounding box.

	* Look for .ofm first.
	  Workaround for incompatibility introduced on change 2004-01-20.

	* pdfdoc.c: Fixed bug that dvipdfmx crushes with null string key in
	  name tree.

2004-06-02  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* pdfspecial.c: Bug fix on cropbox in do_bxobj().

2004-05-03  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* jpegimage.c: Uninitialized variable.

2004-04-09  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* README, index.html: update

	* contrib/patches/glyphlist-cm-add.txt: new file
	  Additional glyphlist for Computer Modern font.

	* NEWS: new file
	  Empty.

	* pdfdev.c:
	  Do not increase line width.

2004-04-03  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* README: update

2004-03-25  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* jpegimage.c: ICC profile
	  Added APP2 ICC_PROFILE support.
	  ICC profile is not deleted from JPEG stream.

	* Embedded ICC profile support for JPEG and PNG enabled.
	  ICC profiles are not cached. Alternate color space?

2004-03-24  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Thumbnail support removed.

	* index.html:
	  Quick check against WCAG 1.0. Lowercasified all HTML tags for
	  migration to XHTML.

	* pdfdoc.c:
	  Dvipdfm/dvipdfmx copyright notice remved from PDF Docinfo's
	  /Producer string, simplified to "dvipdfmx (VERSION)".

	* configure.in, configure:
	  Minor change.

2004-03-22  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pngimage.c: Minor changes.

	  Remaining things for complete PNG 1.1 support is:
	  Complete iCCP support. Support tEXt and other metadata chunks
	  using XML Metadata stream. pHYS (and oFFs) support (in ebb).
	  Preserve filter (PNG predictor) if possible, but some softwares
	  using filters very inefficiently. 16-bit RGB/Gray (PDF-1.5).

	  JPEG (JFIF) can also store ICC profile with APP2. Implementing
	  very basic ICC profile support might be useful.

2004-03-21  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* README: updated

	* data/config/cid-x.map:
	  "slant" option -s supported in vertical mode.

	* pngimage.c: Fixed a serious bug, more chunks supported.

	  Gamma obtained by png_get_gAMA() is inverse of screen gamma
	  that the image is prepared. Gamma is sometimes inverted...

	  Approximated CalRGB color space used along with /Intent if
	  sRGB chunk is found (not sure how to treat it).

	  Experimental iCCP support --enable-iccp.
	  Doesn't validate ICC profile embedded in PNG.
	  Range? Rendering Intent?

	* pdfdev.c:
	  A line width of zero means thinnest line drawable in target
	  device. dev_rule() was wrongly changed to increase line width
	  if the width is too thin.

2004-03-20  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* unicode.c, agl.c, type0.c: ToUnicode CMap support

	  Always create ToUnicode CMap for simple fonts regardless of
	  the existence of glyph list file. If 10% of glyph names can
	  not be converted to Unicode, ToUnicode CMap is not embedded.
	  The reason for the (non-zero) limit 10% is; ToUnicode CMap
	  is shared among fonts using same .enc file. In this case,
	  Unicode mapping is created for all glyphs in the .enc file
	  where non-standard glyph names like "visiblespace" is often
	  expected. But those glyphs are usually not used in the TeX's
	  output and hence it should be simply ignored if mapping is
	  not available.
	  Sharing ToUnicode CMap is not so efficient as expected for
	  simple fonts, "subsetted" ToUnicode CMap might be better. 

	  type0.c search ToUnicode CMap named as REGISTRY-ORDERING-UCS2
	  or FONTNAME-UCS2, the latter case is for CIDFontType 2 font
	  using font's internal glyph ordering. It does not care about
	  the content of CMap at all, especially usecmap is not checked.
	  Don't use it.

	* README, data/config/cid-x.map:

	  Description about -m option removed from README.
	  This option is no longer necessary for usual cases, and use
	  of it is not recommended as the original dvipdfm fails to read
	  fontmap file with this option.

	* cmap.c:

	  Increment n-1 th byte if n-th byte overflow in bfrange like:

	   <00> <01> <00 FF>

	  The dstCode string is treated like an integer, but the number
	  of bytes required for that character code is not increased.
	  Acrobat's "ToUnicode" CMap contains such bfrange entries and
	  causing a serious problem in Korean TrueType fonts.

2004-03-18  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfspecial.c:
	  pdf:literal direct should not translate origin.

2004-03-17  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c, type1c.c, cmap.c, ...: Memory leak.

2004-03-16  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* mpost.c, psspecialc.: Fixed bugs.

2004-03-14  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c:
	  Scan first page's paper size special first.

	* pdfparse.c: \x in PDF string - broken

	  This (undocumented) extension to the PDF string object disturbs
	  and interrupts PDF object parsing and subsequent text re-encoding
	  specified by tounicode special (another extension). And it makes
	  impossible to separate parsing and re-encoding process ("x" after
	  backslash representing Unicode hex value...).
	  
	  Support for this extension was removed since it is desirable to
	  move (or isolate) tounicode special to the appropriate place, not
	  pdfparse but pdfspecial, if possible.

	  Note that this kind of extension might be incompatible with all
	  other PDF applications, "\x" should be treated as a single "x" in
	  literal strings (like PostScript).

	* pdfspecial.c: Special image/uxobj is partially broken.

	  Special uxobj doesn't work for external images after the change
	  made on 2003-08-12. It only works for the grabbed page contents
	  created by special bxobj/exobj.

	  Access to XObject reference (but can't be placed in the document)
	  is now available again. Supporting uxobj is usually not necessary
	  for external images because they are always reused as a document
	  resource but allowing access to the (form) XObject's indirect
	  reference by name like @foo is usefull for using them as an entry
	  of appearance dictionary in annotations.

	* pdfspecial.c, pdfdev.c:

	  Special bann/eann does not take account of current transformation
	  matrix correctly. It result in incorrect /Rect for all annotations
	  created by special bann/eann if transformation is applied.

	  Not fixed yet.

	* pdfparse.c: "ToUnicode" special

	  Illegal PDF string is expected within pdf: specials.  Many users
	  try to use raw Shift-JIS text without properly escaping backslash
	  appears in the 2nd byte of double-byte character. The same problem
	  occurs in many other encodings.

	  As a workaround for this problem, backslashes are not treated as
	  "escape" in some situation when the current "ToUnicode" CMap name
	  contains a substring RKSJ, B5, GBK, or KSC.

	* cmap.c, ...:


2004-03-12  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* mpost.c:
	  Skip until %%EndProlog.

	* pdfspecial.c, pdfdev.c, pdfdoc.c:
	  pdf_doc_set_mediasize()/pdf_doc_get_mediasize().

	* tfm.c
	  tfm.c was highly wasteful and inflexible.
	  Preparing for 31-bits character code support.

2004-03-11  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c, dvi.[ch], pdfdev.[ch], pdfdoc.[ch],...: 
	  An effort to eliminate complicated initilization chain...

	* pdfximage.c, pdfximage.h: New file.
	  An effort to make image support more flexible.
	  Included images and grabbed page contents (forms) should be managed by
	  pdf_ximage as document resource (like font).

	* pdfspecial.c, psspecial.c:
	  Image support moved to pdfximage. (might be broken)

	* mpost.[ch], epdf.[ch], pngimage.[ch], jpegimage.[ch], psimage.[ch]:
	  Image support moved to pdfximage.

	* dvipdfmx.c, mpost.[ch]:
	  Experimental "mpspdfmx" mode -M.

	* pdfspecial.c, pdfdev.c, pdfdoc.c:
	  Hard to explain... There are many misleading/illogical things.

	* dvipdfmx.c, dvi.[ch]:
	  DVI specials related to page/paper size is pre-scanned.

	* dvipdfmx.c:
	  Page selection option "-s" accept page labels.
	  For example, command line option "-s 1-10/r,11-12/D:2:empty-page-,13-"
	  set page labels for page 1-10 to lowercase roman numerals, page 11-12
	  to arabic numerals starting with 2 and with prefix "empty-page-",...

	* dvipdfmx.c:
	  An option for "bookmark open lavel" -O.

	* pdfdoc.c:
	  Undocumented watermark/page decoration feature. Not completed yet.

	* thumbnail.c:
	  I can hardly think that thumbnail support is useful. Acrobat Reader
	  can create thumbnail image and other PDF viewers like gs* and Xpdf
	  doesn't support it. Currently broken due to changes in pngimage.c.

	* dvipdfmx.c, pdfdev.c:
	  The default precision set back to 2 fractional digits. Most sensitive
	  part is dev_set_string() but the accuracy of this part is essentially
	  limited to 0.01 point in the most cases. Increasing precision above 2
	  does not give good result (except DVI rules) but merely increases file
	  size.

2004-03-05  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfdoc.c:
	  Fixed a critical bug introduced on change 2004-02-29:
	  Consistency check was done after pages are free-ed.

	* pdfdoc.c, pdfspecial.c:
	  special pdf:names. Add name tree entry.

	* pdfobj.c, pdfparse.c:
	  Few functions added for manipulating PDF array.

2004-03-04  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfparse.c: Added missing () in macro PDF_TOKEN_END()

	* pdffont.c: Compiler warning on uninitialized variable.

2004-03-02  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Groff support:
	  Groff support was essentially broken. Dvipdfm(x) generated
	  very inaccurate result due to incorrect choice of scale/unit.
	  It should be fixed now. 

2004-02-29  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfspecial, pdfdoc, pdfobj, pdfparse:
	  Partially rewrote...

	* pdfdoc.c:
	  Moved static ... to static struct { ... } docXXX.
	  Removed (strange) optimization.
	  Outline item open/close.

	* tfm.c:
	  Partially rewote...

2004-02-25  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Too many warnings when compiled with -Wshadow...
	  pdfdoc.c need to be fixed.

	* -Wmissing-prototypes, -Wmissing-declarations
	  
2004-02-21  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type0.c:
	  Changes for New TDS/kpathsea.
	  Fixed a bug in get_tounicode_cmap()...

2004-02-19  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cidtype0.c, type0.c:
	  Write CID glyph metrics for non-embedded CFF/OpenType fonts.

2004-02-18  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tpic.c:
	  Ignore unpainted path in flush_path().
	  show_path() output 'n' operator for path without stroking nor filling
	  to avoid Acrobat error (bug?) "Illegal operation inside a path.".

2004-02-17  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pkfont.c, pkfont.h, pdfdev.c:
	  Removed dependency to TFM in pkfont.

	* type1.[ch], type1c.[ch], type0.[ch], ttf.[ch]:
	  No longer need to know font resource name and remap.

	* pdffont.c, pdffont.h:
	  Added new file.

	* type1.[ch], type1c.[ch], ttf.[ch], pkfont.[ch], pdfdev.c, dvipdfmx.c:
	  Simple font support will be unified to pdffont.c

2004-02-16  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c, type1c.c, cidtype0.c:
	  Remove UniqueID and XUID from CFF Top dict.

	* type1.c:
	  Keep original FontBBox instead of replacing it with tight one obtained
	  from glyph's charstrings to prevent Acrobat 4 from greeking text.
	  Acrobat 4 may display text drawn with fonts which only contain small
	  glyphs like period and minus-sign with greeked text.

	* tt_build.c:
	  TrueType output slightly optimized.

	* ttf.c, cidtype2.c:
	  Preserve 'name' table when embedding TrueType font.

2004-02-15  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1c.c, cs_type2.c, cs_type2.h, cidtype0.c:
	  Dependency to TFM removed. Widths are obtained from font file.

	* type1c.c:
	  Delete unused strings from CFF string index.

	* tfm.c, tfm.h:
	  Added tfm_get_codingscheme(). CODINGSCHEME from TFM header.

	* agl.c, agl.h, unicode.c, unicode.h, ttf.c:
	  Handle decomposed (in Unicode) glyphs in AGL and glyph names of a form
	  XXX_YYY_ZZZ in ToUnicode CMap. The glyph name with suffix, like "x.y",
	  is sotred as a glyph "x" with a suffix that implies a variant "y" of
	  "x" in AGL table, not as "x.y" glyph. (for future use)

2004-02-13  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c:
	  Bug fix. Skip first four bytes of encrypted PFB section.
	  Not warn about "dotsection" operator which exist only for
	  compatibility to Type 1 font rasterizer that can't do hint
	  replacement.

	* tfm.c, tfm.h:
	  Fixed a bug that calculation of tfm_string_height() was incorrect.
	  ASCII pTeX specific things are put within #ifndef WITHOUT_ASCII_PTEX.

2004-02-12  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c:
	  Another bug in flex handling. hmoveto and vmoveto allowed.

	* type1c.c, cmap.c, cidtype0.c, encodings.c, fontmap.c:
	  Changes for new TDS and teTeX/kpathsea.

	* encodings.c, encodings.h, pdfdev.c:
	  Removed get_encoding().

2004-02-10  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c:
	  Bug fix. Compression of vhcurveto-hvcurveto was not actually done.
	  One more bug in flex handling.

2004-02-08  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c:
	  paperinit() and paperdone().

	* tfm.c:
	  Bug fix. Read OFM level 1 header, required by get_design_size().

	* dvi.c, dvi.h, vf.c:
	  DVI specials in virtual fonts (patch by P. TJ MacPhee).

2004-02-05  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cid.c, cidtype2.c:
	  Use font's internal glyph ordering if CSI Adobe-Identity is
	  specified for TrueType font. This feature is intended to be
	  used with Identity CMap and /I option in fontmap.

	* configure, acinclude.m4, acconfig.h, config.h.in,...:
	  Check kpse_{enc,cmap,sfd,opentype}_format.

	* type1.c:
	  Fixed a bug in flex handling.

2004-02-04  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* dvipdfmx.c:
	  libpaper support. 

	* configure, acinclude.m4, acconfig.h, config.h.in:
	  --with-paper added for configure option. HAVE_LIBPAPER in config.h.

	* pdfspecial.c: Added "bp" and "truebp" in units[].

	* Accept w<unit>,h<unit> for papersize option.

2004-02-03  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c:
	  Counter control (othersubr #12 and #13) supported.

2004-02-01  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_build.c, tt_build.h, cidtype2.c, ttf.c:
	  Workaround for Ghostscript's bug.
	  Ghostscript doesn't handle CIDToGIDMap correctly.
	  Use Identity CIDToGIDMap. 

	* ttf.c:
	  Removed dependency to TFM. Glyph metric is obtained from font file.

	* type1.c:
	  Warn about "seac" operator.

2004-01-31  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c: Bug fix.

	* Added many 'const'.

2004-01-29  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* type1.c: Type 1 -> Type 1C conversion
	  PostScript Type 1 font is converted to Type 1C (CFF).
	  There are few limitations: Ghost hint is not converted to edge
	  hint. The Type 1 charstring operator "dotsection" is ignored.
	  The ExpertEncoding is not supported. The "seac" operator is not
	  supported. Counter control is not supported.

	* Makefile.in, Makefile.am, standardenc.h: standardenc.h removed.

	* pst.c:
	  Fixed a bug in skip_comments() that cause infinite loop.

2004-01-27  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cff.c, cff.h, cff_dict.c, cff_dict.h:
	  Added few functions for Type 1 -> Type 1C conversion.

2004-01-24  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pkfont.c:
	  Acrobat and MacOS X's Preview have some problem with Type 3 font.
	  Acrobat cannot handle non-invertible transformation matrix which
	  happens when PK glyph with width and/or height equals to zero is
	  embedded as Type 3 font. The preview app. of MacOS X 10.3 cannot
	  display few glyphs generated by dvipdfm with unknown reasons.

2004-01-21  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* cs_type2.c: Don't use rint().

2004-01-21  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* psimage.c, configure.in, config.h.in:
	  Use mkstemp() if available.

2004-01-20  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* tt_table.[ch], tt_build.[ch], cidtype[02].c:
	  CIDFont glyph metrics for embedded font.

2004-01-17  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* pdfobj.[ch], pdfparse.[ch], mpost.c, pdfencrypt.c, pngimage.c:
	  Removed pdf_*_stringx().

	* pdfobj.c, pdfparse.c: Changes for PDF-1.3 compliance.

2004-01-14  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* ToUnicode support for CFF/OpenType + built-in encoding.

	* Bug fix in cff.c, type1c.c

	* Workaround for Shift-JIS string parsing in pdfparse.c.

	* pngimage.c don't require PNG-write/MNG-feature/progressive-read.

	* Unicode: unsigned short --> long.

	* Removed winansi.h

2004-01-07  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* IMPORTANT CHANGE:
	  Searching order is reversed in fontmap.c.
	  Last match takes precedence in font mapping now.

	* Fixed bug in cff.c, cmap.c, and type1c.c.

2003-12-28  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Bug fixes in pdfparse.c and cid_basefont.h.

2003-12-15  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Minor fixes.

	* Added PDF special "fstream" - create PDF stream object from file.
	  This allows users to attach files in PDF.

2003-12-07  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* JPEG moved to jpegimage.c.

	* Bug fixes.

2003-12-06  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Changes in pdfspecail.c.

	* Fixed a bug in mpost.c.

2003-12-02  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Added a patch for dvipdfm's ebb.c. (PDF ArtBox support)

2003-11-29  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Bug fixes.

	* CFF/OpenType support for single-byte font.

2003-11-26  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Little enhancement to epdf.c.

	* Merged epsbox.sty patch by Noda.

2003-11-25  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Many part of font/encoding related code rewrote.

	* Unicode support for single-byte font.

2003-11-10  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug on the algorithm converting arc to cubic bezier
	  curves in arc() (tpic.c), which is reported by Werner Lemberg.

2003-11-04  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* PNG support completely rewritten. Color pallete images are
	  now not converted to 24-bit RGB, colorspace Indexed is used
	  instead. Added tRNS and alpha chunnel (transparency) support.
	  Experimental gAMA, cHRM and sRGB support.

2003-11-03  Shunsaku Hirata <hirata@project.ktug.or.kr>

	* Fixed bug that dvipdfmx stops with error "Invalid Subr Index"
	  when embedding CFF OpenType font.

2003-10-09  Jin-Hwan Cho <chofchof@ktug.or.kr>

        * Add a missing line including pdfparse.h in dvi.c, which is
	  reported by Akira Kakuto.

	* Changed the default font map files for teTeX 2.x as suggested
	  by Haruhiko Okumura.

2003-10-08  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* A bug on the paper size checking routine of dvi_paper_size()
	  in dvi.c is fixed, which is reported by Haruhiko Okumura.

2003-10-06  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* A bug on the kerning routine of dev_set_string() in pdfdev.c is
	  fixed, which is reported by Edward G.J. Lee.

2003-08-12  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Changed to embed images only one time.

	* Updated configure.in and config.h.in to support WORDS_BIGENDIAN
	  and SIZEOF_SHORT, SIZEOF_INT, SIZEOF_LONG.

2003-08-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* A faked font name was used for TrueType fonts without any PS
	  font name as suggested by Hin-Tak Leung.

2003-08-05  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Built-in codes (originally from libgcrypt-1.1.42) was used
	  for PDF encryption instead of the OpenSSL library as suggested
	  by Thomas Esser. 

2003-07-28  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* A significant bug reported from Haruhiko Okumura is fixed.
	  The bug occurs only if compiled with gcc 3.x, not gcc 2.x.

2003-03-26  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* New feature, hexadecimal Unicode, suggested by iNOUE Koich!
	  and Akira Kakuto is implemented.

2003-03-13  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed bugs on reading and writing OpenType fonts.

2003-03-12  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Applied changes for MiKTeX in ps_include() (psimage.c).

2003-03-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in cff_charsets_lookup() (cff.c).

2003-02-06  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in string_mode() (pdfdev.c) reported by iNOUE Koich!.

2002-12-30  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in writing null array.

	* Fixed a bug in reading CMap and encoding files in MiKTeX.

2002-11-28  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Support color shading feature in ConTeXt.

2002-11-25  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* New feature pdfdecimaldigits (default=3) is implemented.

	* Fixed a missing line in dvipdfmx.c.

	* Fixed a bug in page attribute boxes, e.g., CropBox, TrimBox.

2002-11-11  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* The "pdf: dest" special reads pdf_object not pdf_array.

	* Fixed a bug in finding encoding files with extension.

	* Look up the entries in miktex.ini while finding files.

2002-10-31  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in finding files with the kpathsea library 3.3.7.

2002-10-28  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* The project name was changed to dvipdfmx from dvipdfm-cjk.

	* Changed the way of finding files (MiKTeX and KPATHSEA)
	  (contributed by Akira Kakuto).

	* Support embedded MetaPost graphics in ConTeXt using new PDF
	  special \special{pdf:literal [direct|reverse] ...}.

2002-10-25  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Removed all files related to the original dvipdfm,
	  and all CMap files from Adobe.

	* Changed the executable file dvipdfm to dvipdfmx,
	  the configuration file config to dvipdfmx.cfg,
	  the Type0 map file cid.map to cid-x.map.

2002-10-24  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* It is possible to change the size of each page with the
	  special command \special{pdf:pagesize ...}. Override the
	  previous changes if there are two such commands in a page.

2002-10-17  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in parsing an array in two lines. (mpost.c)

	* Changed not to lookup the header to find fonts. (mpost.c)

2002-10-09  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Duplication is allowed for named_references[]. (pdfspecial.c)

2002-06-05  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed a bug in parse_key_val() found by Yasuhiro Okazaki.

2002-05-31  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Bug fixed for ToUnicode conversion in PDF outlines(bookmarks),
	  docinfo, and text annotations (contributed by Akira Kakuto).

	* Included the ToUnicode CMap, EUC-UCS2.

2002-05-22  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Support CJK characters in PDF outlines(bookmarks), docinfo, and
	  text annotations (contributed by Akira Kakuto).

2002-05-15  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* PDF encryption support with the OpenSSL library.

2002-04-30  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* ToUnicode CMap (only Unicode) support for Identity-H(V).

	* Included the ToUnicode CMap, Adobe-Identity-UCS2.

2002-04-22  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Included two CMaps, UniKSCms-UCS2-H(V) which fix a bug in
	  UniKS-UCS-H(V).

2002-04-17  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Changed xxx_set_debug() to #ifdef DEBUG.

2002-04-16  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Improved reading PNG image files.

	* Rearranged all files to work with GNU autotools.

	* Removed HAVE_TTF_FORMATS and HAVE_OFM_FORMATS.

2002-04-09  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Minor fix on 'source/pkfont.c'.

2002-04-07  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Fixed all warning messages generated with MSVC++.

	* Rewrote the functions 'xxx_locate_font()' again.

2002-04-04  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Changed the order of loading virtual and physical fonts as
	  suggested by Akira Kakuto <kakuto@fsci.fuk.kindai.ac.jp>.
	  If map entries are found, virtual fonts will not be used anymore.

2002-04-02  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Implemented no-embedding and stylistic variants for CIDFontType0.

2002-03-31  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Added two CMaps, ETenms-B5-H and ETenms-B5-V.

2002-03-30  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor fix on the patch by Takanori Uchiyama.

2002-03-29  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Applied the patch by Takanori Uchiyama <uchiyama@appi.keio.ac.jp>,
	  supporting the direction command of ASCII pTeX's extension in
	  virtual fonts.

	* Two CMaps, Identity-H and Identity-V are hard-coded in cmap.c.

2002-03-20  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Applied the patch by Jungshik Shin, not embedding the unnecessary
	  character /.notdef in type1 fonts. 

2002-03-20  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Modified cid_basefont.h.

2002-03-05  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Support for UTF8 encoding through Identity CMap.

2002-02-25  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Implemented no-embedding feature for CIDFontType2.

	* Implemented Bold, Italic, BoldItalic attributes for CIDFontType2
	  and CID predefined fonts.

2002-02-22  Jin-Hwan Cho <chofchof@ktug.or.kr>

	* Implemented subfont approach for CJK and HLaTeX.

2002-01-07  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed bug introduced on 2002-01-05.

2002-01-05  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Workaround for some bad TrueType fonts that does not have US-English
	  PostScript font name.

2001-12-27  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Changed to parse all charstrings. Check for the SEAC character.

	* Minor changes in CFF related codes.

2001-12-26  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Merged cmap and cmap_parse.

2001-12-25  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Cleaned up TrueType and CFF related codes.

	* Minor bug fixes.

2001-12-23  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed bug that always requires Private DICT(s) which may not exist.

	* Cleaned up TrueType and CFF related things.

2001-12-18  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Biased subroutine number is signed in cs_type2.c.

2001-12-14  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* macglyphs.h regenerated from apple's TTRefMan.

2001-12-13  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor cleanups.

	* Fixed typo (yacture -> yacute, Islash -> lslash) in macglyphs.h.

	* Fixed signedness of TureType cmap subtable format 0 data.

2001-12-11  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor fixes.

	* Fixed bug that interpretion of hmtx table is still wrong.

	* Fixed fixed().

	* More improved FontDescriptor for TrueType/OpenType fonts.

	* Support for PostScript glyph name in TrueType post table.
	  Full subsettting is also available for non-CJK TrueType fonts.
	  Cyrillic and other TrueType fonts can be used.
	  Requires post table with version 2.0.

2001-12-09  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Bug fixes.

2001-12-05  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed bug that last entry of the loca table may not be read.

	* DW is set to that of missing glyph (CIDFontType 2).

	* Bug fixes.

2001-12-04  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixes.

2001-12-03  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor charnges, cleanups.

	* Write CIDSet.

2001-12-02  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Initial CFF CID-Keyed Font support.
	  Only Type 2 charstring is supported.

2001-11-27  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor fixes, cleanups.

2001-11-26  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed (serious) bug that hmtx table is incorrectly interpreted.

	* Fixed bug that encoding ID of RPC and BIG5 are interchanged.

	* Added missing cast in cidtype2.c.

2001-11-25  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Bug fix.

2001-11-24  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Added missing free() (RELEASE) in cidtype2.c.

	* Minor fixes.

	* Fixed typos.

2001-11-22  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Clean up.

	* Allow `Preview & Print' licensed fonts to be embedded.
	  TrueType OS/2 table is preserved.

2001-11-20  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor cleanups. Fixed typos.

	* Strip out bad strings form PostScript names;
	  -WIN-RKSJ-H, -WINP-RKSJ-H, -WING-RKSJ-H, and -90pv-RKSJ-H.
	  Some font uses PostScript name one of above strings appended,
	  even if Shift-JIS encoding is not used.

2001-11-18  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Workaround for Omega: Omega uses setxxx (single-byte char) command
	  while double-byte font is in use. Pass character type to
	  dev_set_string() to distinguish single-byte and double-byte.
	  Maybe, it works with CJK-LaTeX by preparing set of CMaps.

	* Write double-byte strings as hex strings.
	  This makes bit faster and tend to generate smaller PDF in most cases.

	* CMap parser uses wrok_buffer in mfileio.

	* Reserved w_array and w2_array in struct cid_font for future use.

	* Now write /W array for TrueType, proportional latin and kana works
	  properly. The metric information are taken from font file, not from
	  TFM, to ensure we always have correct widths. The default width (DW)
	  is set to 1000.

	* Changed sizeof() appeared in sfnt_put_xxx() to expected values in
	  sfnt.h. I do not assume LONG to be exactly 32-bit long, ....

2001-11-17  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Added Chinese and Korean related stuff again. Chinese and Korean
	  languages are supported through Omega, or by achieving Ascii pTeX
	  compatibility.

	* Closing CMaps is missing. Added cmap_close_all(), which is invoked by
	  dev_close_all_fonts() in pdfdev.c.

	* Check length of output string for Type 0 font. It must be multiple of
	  2. Omega uses 8-bit and 16-bit mixed string even for double-byte
	  fonts. This causes problems.

	* Abort if missing/invalid character is used.

2001-11-15  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Bug fixes.

2001-11-12  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* (nearly) Completely rewritten.

	* Force Identity CMap. (double-byte character codes are mapped to CID)

	* Added CMap parser. (mkcidcct.pl is no longer needed)

	* Sync with jpatch.

2001-10-01  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Should return -1 when encoding_id >= 0 in type0_font().

2001-08-08  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed a bug that raster images show up incorrectly in vertical
	  writing mode.

2001-08-07  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Removed dev_set_string2(), use dev_set_string() instead.

	* set_dev_vwmode() is renamed to set_dev_wmode().
	  Added dev_wmode() and mp_mode flag in pdfdev.c.

	* Support for Japanized MetaPost (pdfparse.h, mpost.c).
	
2001-07-21  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed a bug that do not reset text state in vertical writing.

2001-07-20  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed wrong positioning for slanted non-CJK font in vertical writing.

2001-07-19  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Support OS/2 table version 0x0002.

2001-07-17  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Support multiple parents for a single CID-keyed font
	(incomplete).

	  TODO:
	    check the consistency of charcter collections.

	* Removed entries for unsupported CMaps.

	* Updated cid.map.

2001-07-15  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Better font metric info for CIDFontType2.

	* Added (partial) support for vertical writing.
	  Added wmode flag to struct a_type0_font and dev_font.

	  TODO:
	    GSUB support in CIDFontType2.
	    /W2 and /DW2.

	* Added support for vertical version of CMaps in mkcidcct.pl
	
2001-07-07  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Minor fixes.

	* Updated out2uni.c
	
2001-06-30  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* --> dvipdfm-0.13.2c

2001-06-29  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Fixed a bug that select incorrect indexToLocaFormat
	(cidtype2.c).

	* Fixed several bugs in cidtype2.c.

2001-06-27  Shunsaku Hirata <hira4scp@mbox.nc.kyushu-u.ac.jp>

	* Added support for CJK-TrueType font embedding.

	* Cleaned up Type0 and CID font handling code.
