commit e509d35cf1160f1449bc736b9445cdf61ab81d06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jul 11 14:56:45 2013 -0400

    [ft] hb_ft_get_glyph_from_name fails for the name of glyph id 0

    Based on patch from Jonathan Kew, as reported on the mailing list.

 src/hb-ft.cc | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 29b596ac67806c44441e65f3ece227df0fe2bb63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jul 8 08:37:15 2013 -0600

    [uniscribe] Fix buffer allocation

    Email from Jonathan Kew:

    My cygwin build kept aborting on certain test words when run with the
    uniscribe backend. Turned out this was caused by a bug in the
    allocation
    of scratch buffers in hb-uniscribe.cc.

    Commit 2a17f9568d9724e045d2c1d660e007f3acd747d9 introduced a new line

      ALLOCATE_ARRAY (SCRIPT_VISATTR, vis_attr, glyphs_size);

    but it failed to account for this in the computation of glyphs_size
    (the number of glyphs for which scratch buffer space is available),
    with the result that the vis_clusters array ends up overrunning the
    end of the scratch buffer and clobbering the beginning of the buffer's
    info[].

    AFAICS, the vis_attr array is not actually used, so the simple fix is
    to remove the line that allocates it. (If/when we -do- need to use
    vis_attr for something, we'll need to add another term to the earlier
    calculation of glyphs_size.)

    With this patch, the uniscribe backend runs reliably again.

    JK

 src/hb-uniscribe.cc | 1 -
 1 file changed, 1 deletion(-)

commit 9245e98742667dfffe06523e8051beda1bc04811
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Jun 26 20:57:58 2013 -0400

    [Indic] Add Javanese config

    We should add for other scripts too, send me the virama codepoint
    and script name...

 src/hb-ot-shape-complex-indic.cc | 1 +
 1 file changed, 1 insertion(+)

commit 5f85c80a07dd2d18348824866bf4e984ac711a24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Jun 26 20:14:18 2013 -0400

    [OT] Collect requiredFeature only if features are not provided

    As per Werner's report on the list.

 src/hb-ot-layout.cc | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 3f9e2dced298c3d00f31b2dfc38685bb071a3a22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Jun 26 19:46:55 2013 -0400

    Fix contextual lookup recursion indexing

    See email thread "Skipping Control for Attaching Marks using OpenType"
    from earlier this month.

 src/hb-ot-layout-gsubgpos-private.hh | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit f5da11e0fa5adf8f782883dc5c30d8faaafc9c27
Merge: 79d1007 89312b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat Jun 22 08:04:05 2013 -0700

    Merge pull request #3 from LogosBible/master

    Destroy lookups before blobs.

commit 89312b7417c0198a0635ca6b7e8ea11f6af2a4f8
Author: Bradley Grainger <bgrainger@gmail.com>
Date:   Fri Jun 21 15:02:18 2013 -0700

    Destroy lookups before blobs.

    'layout->gsub' may depend on data owned by 'layout->gsub_blob',
    so it must
    be deinitialized before the blob is destroyed.

 src/hb-ot-layout.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 79d1007a501fd63c0ba4d51038c513e6b8b94740
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jun 13 19:01:07 2013 -0400

    If variation selector is not consumed by cmap, pass it on to GSUB

    This changes the semantics of get_glyph() callback and expect that
    callbacks return false if the requested variant is not available, and
    then we will call them back with variation_selector=0 and will retain
    the glyph for the selector in the glyph stream.

    Apparently most Mongolian fonts implement the Mongolian Variation
    Selectors using GSUB, not cmap.

    https://bugs.freedesktop.org/show_bug.cgi?id=65258

    Note that this doesn't fix the Mongolian shaping yet, because the way
    that's implemented is that the, say, 'init' feature ligates the letter
    and the variation-selector.  However, since currently the variation
    selector doesn't have the 'init' mask on, it will not be matched...

 src/hb-ft.cc                 |  3 +--
 src/hb-ot-shape-normalize.cc | 14 ++++++++++++--
 2 files changed, 13 insertions(+), 4 deletions(-)

commit c7a84917208528040aaf9ad0a9a0b26aabeabc9c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jun 6 20:17:32 2013 -0400

    Skip over multiple variation selectors in a row

 src/hb-ot-shape-normalize.cc | 6 ++++++
 1 file changed, 6 insertions(+)

commit 7235f33f9e5e031622a00a84f4b2e98f16803579
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 10 14:39:51 2013 -0400

    Fix misc warnings reported by cppcheck

    https://bugs.freedesktop.org/show_bug.cgi?id=65544

 src/hb-common.cc            |  2 +-
 src/hb-coretext.cc          |  3 ---
 src/hb-font-private.hh      | 17 +++++++++++------
 src/hb-private.hh           |  2 +-
 src/hb-shape.cc             |  2 +-
 test/api/test-font.c        |  1 -
 util/ansi-print.cc          |  1 +
 util/hb-ot-shape-closure.cc |  5 +++--
 util/hb-shape.cc            |  5 ++++-
 util/shape-consumer.hh      |  6 ++++--
 util/view-cairo.hh          |  6 ++++--
 11 files changed, 30 insertions(+), 20 deletions(-)

commit 570bcccd3f41b9aecd51765a401299833a6d8ebd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 10 13:56:51 2013 -0400

    Fix PKG_CHECK_MODULES usage

    Oops.

    Bug 65246 - Fix build without graphite2

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 270cfd7a9c01dfb1b1789929f020943ad63aca99
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jun 6 18:57:15 2013 -0400

    Fix PKG_CHECK_MODULES usage

    Bug 65246 - Fix build without graphite2

    If we don't provide ACTION-IF-NOT-FOUND, configure aborts if it can't
    find the libraries.  We handle that ourselves so we don't want the
    macro to abort.

 configure.ac | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 2fd0e02706857bcaf61bf5151657eac96cfa73b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Jun 6 17:16:01 2013 -0400

    Minor

 src/Makefile.am | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit b4c5c52944a44ba863a22a53035ff561af7318ca
Author: Chun-wei Fan <fanchunwei@src.gnome.org>
Date:   Mon Jun 3 17:55:29 2013 +0800

    util/ansi-print.cc: Use fallback implementation for lround on MSVC

    Unfortuately Visual Studio (still) does not support the C99 function
    lround, so provide a fallback implementation for it.

 util/ansi-print.cc | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit a4446b10bfe0a9e7236bf941fa69a96697939e11
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 3 18:39:14 2013 -0400

    Fix build for C89 compilers

 test/api/test-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ddf937242048c4a044ada4559e26664a0c09b48
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Jun 3 18:36:26 2013 -0400

    Remove unnecessary stdint.h include

 src/hb-ucdn/ucdn.c | 1 -
 1 file changed, 1 deletion(-)

commit 93a04b8b5e6d8067cb925fdf532aadc24c1d4861
Author: Chun-wei Fan <fanchunwei@src.gnome.org>
Date:   Mon Jun 3 17:49:37 2013 +0800

    hb-uniscribe.cc: Re-enable build under Visual Studio

    -Declare hinstLib at the top of block
    -Fix the definitions of the typedefs of ScriptItemizeOpenType,
     ScriptShapeOpenType and ScriptPlaceOpenType

 src/hb-uniscribe.cc | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 280e52ae95df0cbee0bb305f5354381bc1d563f4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 30 18:04:24 2013 -0400

    Fix ChangeLog regen

 Makefile.am | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit c1824daefa1253507636e4bfdf46374f835f10b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed May 29 15:30:54 2013 -0400

    Update TODO

 TODO | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 2966d3603259430800cb5880491d28a1c5ea2314
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 17:34:37 2013 -0400

    Fix test build

 test/api/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6873f6cc42aa1405e71be903bd0f39a7a15320ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 17:33:16 2013 -0400

    Minor

 TODO | 2 --
 1 file changed, 2 deletions(-)

commit 4014aa4e53bddb29d939a168bd733942d3683732
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 17:28:59 2013 -0400

    0.9.18

 NEWS         | 28 ++++++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 29 insertions(+), 1 deletion(-)

commit d70be29831bb99e34fe18744129088f45d5b2023
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 17:23:56 2013 -0400

    Fix dist

 src/Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit 22ce0961742df0a213f2cc86ca3d5a72453c00b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 17:18:30 2013 -0400

    Generate harfbuzz-icu.pc

    Currently it only works with ICU that has .pc files.  I'll
    wait till someone complains before fixing it for icu-config
    systems.

 Makefile.am            |  3 ---
 configure.ac           |  5 ++---
 harfbuzz.pc.in         | 11 -----------
 src/Makefile.am        | 13 +++++++++++++
 src/harfbuzz-icu.pc.in | 13 +++++++++++++
 src/harfbuzz.pc.in     | 11 +++++++++++
 6 files changed, 39 insertions(+), 17 deletions(-)

commit d9afa111330771461b6182ada9f4edd68bcfce77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 15:27:40 2013 -0400

    Build hb-icu into libharfbuzz-icu.so

 src/Makefile.am      | 29 +++++++++++++++--------------
 src/hb-unicode.cc    |  2 +-
 test/api/Makefile.am |  1 +
 3 files changed, 17 insertions(+), 15 deletions(-)

commit 7d395c2a255a44fd0d65365ea9b525dba70c062c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 15:25:06 2013 -0400

    Minor

 test/api/test-c.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 2a17f9568d9724e045d2c1d660e007f3acd747d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 28 13:10:51 2013 -0400

    Bug 55494 - ScriptItemizeOpenType doesn't exists under Windows XP

    Fallback to older API if OpenType variants are not available.

 configure.ac        |  14 +--
 src/hb-uniscribe.cc | 322
 +++++++++++++++++++++++++++++++++++++++++++---------
 2 files changed, 271 insertions(+), 65 deletions(-)

commit f8087ffbadc83a15d59367ba82976eae675736a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:43:48 2013 -0400

    Add --with-cairo

 configure.ac | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 82eddfe5d658ef791d6ef6a566401c50601dfb1c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:33:36 2013 -0400

    Add --with-freetype

    Defaults to auto.

 configure.ac | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 5e25eb77a49e7f95b6a6d540b26d60d430f89d4c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:30:48 2013 -0400

    Default glib to auto again

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit eb63e786f37468867c81707504128cf8a4016e5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:29:09 2013 -0400

    Add --with-coretext

    Defaults to no.

 configure.ac | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit ab2af17bc6faa8394656e6e82948dc3e9f437626
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:27:43 2013 -0400

    Add --with-uniscribe

    Defaults to no.

 configure.ac | 55 +++++++++++++++++++++++++++++++++++++++----------------
 1 file changed, 39 insertions(+), 16 deletions(-)

commit 58db2c2542717858acbdf480b3f19a8aef4918cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:10:33 2013 -0400

    Disable UCDN if glib is available

    We only want UCDN if we don't have any other Unicode provider.
    I'm going to remove ICU from the list of default Unicode providers
    as part of moving hb-icu into its own library.  As such, the only
    providers will be UCDN and glib.

 configure.ac | 3 +++
 1 file changed, 3 insertions(+)

commit ca65326cbd49b48792c4e3125af6c5006364f194
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:09:50 2013 -0400

    Minor

 configure.ac | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 7ae14973ecb4614a83769d2bbd01f33d8474ffc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:06:50 2013 -0400

    Disable icu_le shaper

    Will add a way to enable it later.

 configure.ac | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 7e6ebf76236cc5ea69302e68186bdf8166d04a98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:05:23 2013 -0400

    Remove icu-config fallback for icu_le shaper

    Bug 64878 - compile error with ICU but not ICU

 configure.ac | 18 ------------------
 1 file changed, 18 deletions(-)

commit 932b7471479c639244051b4dbae678e7d47ae99f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 19:04:40 2013 -0400

    Bug 65053 - Add configure option to enable/disable ICU support

 configure.ac | 46 ++++++++++++++++++++++++++++------------------
 1 file changed, 28 insertions(+), 18 deletions(-)

commit cf2c1c7eb81b54a344ed5cf36d5fbd3cd297eed1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 18:54:30 2013 -0400

    Disable hb-old shaper

    Will add proper way to enable it later.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5a78d23f255a649353044af8e5df315f62907b7f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 18:47:58 2013 -0400

    Bug 65054 - Add configure option to enable/disable Graphite2

    Add --with-graphite2.  Defaults to off.

 configure.ac | 20 +++++++++++++++-----
 1 file changed, 15 insertions(+), 5 deletions(-)

commit 61e7775fa75c7c1bdc29a6992c8c215897364600
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 18:24:56 2013 -0400

    Remove hb-icu dependency from hb-icu-le shaper

 src/hb-icu-le.cc | 33 +++++++++++++++++++++++++++++----
 1 file changed, 29 insertions(+), 4 deletions(-)

commit 7e08f1258da229dfaf7e1c4b5c41e5bb83906cb0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 27 14:48:34 2013 -0400

    Don't zero advance of mark-non-mark ligatures

    If there's a mark ligating forward with non-mark, they were
    inheriting the GC of the mark and later get advance-zeroed.
    Don't do that if there's any non-mark glyph in the ligature.

    Sample test: U+1780,U+17D2,U+179F with Kh-Metal-Chrieng.ttf

    Also:
    Bug 58922 - Issue with mark advance zeroing in generic shaper

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++++
 src/hb-ot-layout-private.hh          | 6 ++++++
 2 files changed, 10 insertions(+)

commit cf059ac69d10d9eb09f0d2a29b1bd989647bd800
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 24 15:28:11 2013 -0400

    [icu_le] Support non-BMP text

 src/hb-icu-le.cc | 35 ++++++++++++++++++++++++++++-------
 1 file changed, 28 insertions(+), 7 deletions(-)

commit a447c528e68cabc9ca6e24e2c436f3d605ef9aaa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 23 17:05:39 2013 -0400

    [icu_le] A bit better scaling

 src/hb-icu-le.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit fb502a22787f4110472771ef771619342e64577a
Merge: b9408d2 9d9e72e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 23 15:54:52 2013 -0400

    Merge commit '9d9e72e94e7914f82ce62a304e7242f79c13edaf'

commit b9408d24f3029f5287b17779235b1c750ff5158a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 23 15:43:02 2013 -0400

    [icu_le] Fix scaling

    Seems to work...

 src/hb-icu-le.cc                       |  2 ++
 src/hb-icu-le/PortableFontInstance.cpp | 23 +++++++++++++++--------
 src/hb-icu-le/PortableFontInstance.h   |  9 ++++++++-
 3 files changed, 25 insertions(+), 9 deletions(-)

commit 601526392dec5d8432f147c91658ba50ed6a4322
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 21 17:22:13 2013 -0400

    Copy stdint.h boilerplate to ucdn

 src/hb-ucdn/ucdn.h | 24 +++++++++++++++++++++++-
 1 file changed, 23 insertions(+), 1 deletion(-)

commit f1b02f4f3c0db9fbfa6747188429df828b000010
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 20 09:23:58 2013 -0400

    0.9.17

 NEWS         | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit d785fa0c45f7f25f5e5f352b933a5f6fa29be5c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 20 09:18:52 2013 -0400

    Minor refactoring

 src/hb-ot-shape.cc | 54
 ++++++++++++++++++++++++++++--------------------------
 1 file changed, 28 insertions(+), 26 deletions(-)

commit 127daf15e0b2f509ebd29a104236c8b38884efb0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon May 20 09:11:35 2013 -0400

    Arabic mark width-zeroing regression

    Mozilla Bug 873902 - Display Arabic text with diacritics is bad
    https://bugzilla.mozilla.org/show_bug.cgi?id=873902

 src/hb-ot-shape-complex-arabic.cc  |  2 +-
 src/hb-ot-shape-complex-default.cc |  2 +-
 src/hb-ot-shape-complex-myanmar.cc |  2 +-
 src/hb-ot-shape-complex-private.hh |  6 ++++--
 src/hb-ot-shape-complex-thai.cc    |  2 +-
 src/hb-ot-shape.cc                 | 36
 ++++++++++++++++++++++++++++--------
 6 files changed, 36 insertions(+), 14 deletions(-)

commit fa3d0a0ce60a9fcf2b7f906dec916463b1319eda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 14 15:30:55 2013 -0400

    Bug 64476 - Typo in hb_set_t.get_min()

    Fixes previous commit's test.

 src/hb-set-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dfbd115e6c1a86a5f1b8d15200672f1e9410b5de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue May 14 15:30:17 2013 -0400

    [test] Add test for hb_set_get_min() bug

    Failing now.

    Bug 64476 - Typo in hb_set_t.get_min()

 test/api/test-set.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 9d9e72e94e7914f82ce62a304e7242f79c13edaf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 3 18:10:10 2013 -0400

    [OTLayout] Use is_inplace() when flipping buffers

 src/hb-ot-layout.cc | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 45f3d980c9503bd94e64f6e3f67f97688347d00c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 3 17:49:44 2013 -0400

    [OTLayout] Merge / templateize apply_string()

 src/hb-ot-layout-gpos-table.hh | 25 ---------------
 src/hb-ot-layout-gsub-table.hh | 48 ----------------------------
 src/hb-ot-layout.cc            | 72
 ++++++++++++++++++++++++++++++++++++++++--
 3 files changed, 69 insertions(+), 76 deletions(-)

commit e015b8f2187d1102b9c34d1a63504e7b05ee20ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 3 17:34:29 2013 -0400

    [OTLayout] Minor

 src/hb-ot-layout-gpos-table.hh | 5 +++++
 1 file changed, 5 insertions(+)

commit 780cd930a974165d76dbf7a87701d11b7f15db06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 3 17:33:16 2013 -0400

    [OTLayout] Minor

 src/hb-ot-layout-gpos-table.hh | 2 +-
 src/hb-ot-layout-gsub-table.hh | 2 +-
 src/hb-ot-layout.cc            | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 2e0c44f4bedd3e24c731c0e9e23358e9a4891a35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 24 16:42:05 2013 -0400

    [OTLayout] Add is_inplace() method to GSUB

 src/hb-ot-layout-gpos-table.hh       |   8 +-
 src/hb-ot-layout-gsub-table.hh       |  58 ++++++++++++-
 src/hb-ot-layout-gsubgpos-private.hh | 158
 +++++++++++++++++++++++++++++++++++
 3 files changed, 222 insertions(+), 2 deletions(-)

commit bac1dd6a0ff4d4fae4254506d38ae662b7e9dda7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 18:52:24 2013 -0400

    [OTLayout] Refactor a bit more

 src/hb-ot-layout-gsubgpos-private.hh       |  10 +--
 src/hb-ot-layout-private.hh                |  26 ++++----
 src/hb-ot-layout.cc                        | 100
 ++++++++++++++---------------
 src/hb-ot-map-private.hh                   |   7 +-
 src/hb-ot-shape-complex-arabic-fallback.hh |   7 +-
 src/hb-ot-shape-fallback.cc                |   3 +-
 6 files changed, 78 insertions(+), 75 deletions(-)

commit d2c96819de9a7428b65ef0adf794416224221f36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 18:18:24 2013 -0400

    Move code around

 src/hb-ot-layout.cc | 52
 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-map.cc    | 43 -------------------------------------------
 2 files changed, 52 insertions(+), 43 deletions(-)

commit 45fd9424c723f115ca98995b8f8a25185a6fc71d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 18:06:51 2013 -0400

    [OTLayout] Add hb_ot_layout_lookup_accelerator_t

 src/hb-ot-layout-private.hh                | 21 +++++++++++++++++--
 src/hb-ot-layout.cc                        | 33
 +++++++++++++++---------------
 src/hb-ot-shape-complex-arabic-fallback.hh | 10 +++++----
 3 files changed, 41 insertions(+), 23 deletions(-)

commit 76ea563673d24ae1673a5aa3a21da6014479d433
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sat May 4 16:01:20 2013 -0400

    [OTLayout] Add note about collect_glyphs() and recursive lookups

 src/hb-ot-layout-gsubgpos-private.hh | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit a8bf0e91f18341e1e20f4e3341fc7dcdd0c990e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri May 3 14:45:04 2013 -0400

    Add U+061C ARABIC LETTER MARK to Default_Ignorable

 src/hb-unicode-private.hh | 4 ++++
 1 file changed, 4 insertions(+)

commit 5d59f999204aedfc433ab4989664d875f96b0364
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 14:44:45 2013 -0400

    [OTLayout] Make MultipleSubst in-place for sequences of len=1

 src/hb-ot-layout-gsub-table.hh | 15 +++++++++++----
 1 file changed, 11 insertions(+), 4 deletions(-)

commit 54f84a6b8571ac7aaaa66f3eff562d23d69d7552
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 15:27:53 2013 -0400

    [OTLayout] Whitespace

 src/hb-ot-layout-gsub-table.hh | 56
 +++++++++++++++++++++---------------------
 1 file changed, 28 insertions(+), 28 deletions(-)

commit 3276c354daaff3acabecff11f8e4b5c54d53fc25
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 15:16:59 2013 -0400

    [OTLayout] Minor refactoring

 src/hb-ot-map-private.hh |  4 ++++
 src/hb-ot-map.cc         | 46
 +++++++++++++++++++++++++---------------------
 2 files changed, 29 insertions(+), 21 deletions(-)

commit ea86efa486a5076e9bf844239bccf86d67577f88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 14:41:39 2013 -0400

    Minor

 src/hb-ot-map-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8b63efb6f80b2e9b2de5ec6ab24d6e15826565cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 14:29:32 2013 -0400

    Minor

 src/hb-buffer-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit 2265be0a620bc76ab65f12fedde67791beb51314
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 14:25:09 2013 -0400

    Minor

 src/hb-ot-map-private.hh   | 17 ++++++++++-------
 src/hb-ot-map.cc           |  2 ++
 src/hb-ot-shape-private.hh |  3 +--
 3 files changed, 13 insertions(+), 9 deletions(-)

commit e6f19af08717a6a63ad0b5bf4bf368778edc63f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu May 2 13:59:46 2013 -0400

    Minor

 src/hb-set-private.hh | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 6c15ddfe2b45383824b64058ae69939d002183a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 30 11:34:00 2013 -0400

    Renamed DEBUG to something else

    Some infrastructures use DEBUG as a generic symbol.

 src/hb-buffer.cc  | 6 +++---
 src/hb-private.hh | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 00b93f6610f36d8d14ca65fb99864be6d5bdb1ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 29 13:48:49 2013 -0400

    Fix icu linking by requesting the library searchpath from icu-config

    This is not ideal as we don't like -L/usr/lib in our linker line.
    But this is only relevant to environments that don't have pkgconfig
    files for ICU...

    https://github.com/behdad/harfbuzz/pull/2

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 03adf38b22a37216dffac50d075ea9c881f1a22d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Mon Apr 29 13:40:52 2013 -0400

    Make both old autoconf and new automake happy

    Sigh..

    Bug 64039 - undefined macro AM_PROG_AR

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ed79dff517bacfc87279079d5d42d079c21a0373
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 21 15:39:25 2013 -0400

    Minor

 src/hb-ot-layout-gpos-table.hh | 5 -----
 1 file changed, 5 deletions(-)

commit 893f57b32f01da3411b5596d59170bc340e9fa39
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 21 15:21:49 2013 -0400

    Minor renaming

 src/hb-ot-map-private.hh | 10 +++++-----
 src/hb-ot-map.cc         | 22 +++++++++++-----------
 2 files changed, 16 insertions(+), 16 deletions(-)

commit 8ac3c9c0b6b8e76bce282825b9bb706c0c78c2a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 21 15:19:38 2013 -0400

    Rename "pause" to "stage"

    The compile() function is starting to become illegible...

 src/hb-ot-map-private.hh | 24 ++++++++++++------------
 src/hb-ot-map.cc         | 38 +++++++++++++++++++-------------------
 2 files changed, 31 insertions(+), 31 deletions(-)

commit dd0641a432691f9b6186b081c38053858c8bc5c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 21 15:13:57 2013 -0400

    Minor

 src/hb-ot-map.cc | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 06a44e859328f5f1e2f6034e711b474116d22e22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Sun Apr 21 15:13:08 2013 -0400

    Remove unneeded code

    We always push a pause at the end such that each lookup falls
    in exactly
    one pause_map_t.  Now, only if I can find a better name for that...

 src/hb-ot-map-private.hh |  2 +-
 src/hb-ot-map.cc         | 12 +-----------
 2 files changed, 2 insertions(+), 12 deletions(-)

commit a408d2375aa2ad96b58e56aef18e5000daf2516b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 19 16:32:06 2013 -0400

    0.9.16

 NEWS         | 13 ++++++++++++-
 configure.ac |  2 +-
 2 files changed, 13 insertions(+), 2 deletions(-)

commit 8659c636087e433f56da458351e8b4d85fdb347c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 19 14:33:17 2013 -0400

    Hand-code bsearch in the hot inner loop.

    Saves another 3 / 4 percent with Amiri.

 src/hb-open-type-private.hh | 29 +++++++++++++++--------------
 1 file changed, 15 insertions(+), 14 deletions(-)

commit 797d76d07f80d796a825d850772087104e5a2575
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 18 19:04:12 2013 -0400

    Minor

 src/hb-ot-layout-common-private.hh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit e4046080c5d785c8dbf9ec9e3478ab9acc83e479
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 23:49:54 2013 -0400

    [util] Unbreak --show-text / --show-unicode

 util/shape-consumer.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0dc3a4e0349d28f387a3b4c60a2f51962742738e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 23:04:03 2013 -0400

    Obssesive optimization

    Not measurable by any means, but conceptually this is faster since
    the mask matches more often than the digest.

 src/hb-ot-layout-gpos-table.hh | 4 ++--
 src/hb-ot-layout-gsub-table.hh | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit f9a611026785a80baa4cbff31ad0847beb70ca9a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 19:01:49 2013 -0400

    Remove HB_DEBUG_SET_DIGESTS

    Wasn't correct with the new combiner.  I should add it back somehow,
    but for now the digests seem to be working very well...

 src/hb-set-private.hh | 16 +---------------
 src/hb-set.cc         | 14 --------------
 2 files changed, 1 insertion(+), 29 deletions(-)

commit f7466ee76f2bd3812209426e2c39fe517227406d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 18:20:44 2013 -0400

    Remove hb_set_digest_common_bits_t

    Was unused.

 src/hb-set-private.hh | 38 --------------------------------------
 1 file changed, 38 deletions(-)

commit 0d5798a137b52d9be7ef88c79e59f9bf01d54f3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 18:19:21 2013 -0400

    Improve hb_set_digest_t

    Make Amiri rendering faster a whopping 45% again!  Speends up pretty
    much anything I tested.

 src/hb-set-private.hh | 28 +++++++++++++++++++++++-----
 1 file changed, 23 insertions(+), 5 deletions(-)

commit c7851efcd3a1e5317ab4ea57535cb755bace0848
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 17:45:39 2013 -0400

    Templatize hb_set_digest_lowest_bits_t filter

 src/hb-set-private.hh | 21 +++++++++++++++++----
 1 file changed, 17 insertions(+), 4 deletions(-)

commit 0edd0fd255790471118fae1fd7a1309a2b77cf62
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Wed Apr 17 17:26:56 2013 -0400

    Add comment

 src/hb-set-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit b40f2c0372acbc51b13be5cda7dd013e74e3e11a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 23:21:38 2013 -0400

    Add hb_set_digest_combiner_t

 src/hb-set-private.hh | 33 ++++++++++++++++++++-------------
 1 file changed, 20 insertions(+), 13 deletions(-)

commit 02e5e583688999c4dc04f11b3924da65f99af7e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 23:13:10 2013 -0400

    Speed up Speed up hb_set_digest_common_bits_t calcs

    Correctly this time.

 src/hb-set-private.hh | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 893991fc9d2d3a57c4c148f3a9c3b98263cf3aed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 21:50:33 2013 -0400

    Initialize set digests

    We were not initializing the digests properly and as a result
    they were
    being initialized to zero, making digest1 to never do any useful work.

    Speeds up Amiri shaping significantly.

 src/hb-ot-layout.cc                        | 6 ++++++
 src/hb-ot-shape-complex-arabic-fallback.hh | 4 +++-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 4d2813d3e980c8e6150caafa604a78cc44bf62a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 21:57:21 2013 -0400

    Print set-digest hit ratio with HB_DEBUG_SET_DIGESTS

 src/hb-set-private.hh | 13 +++++++++++++
 src/hb-set.cc         | 13 +++++++++++++
 2 files changed, 26 insertions(+)

commit 1357c2dd120d005ceecfa83ed328d05dc634d7bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 21:47:40 2013 -0400

    Revert "Speed up hb_set_digest_common_bits_t calcs"

    This reverts commit 3d1b66a35e1ab3be19335705f310b278d76d66d2.

    The calculations were buggy.  It's not worth optimizing right now.

 src/hb-set-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 2b712bba3f7c459653737dfa2f7d26f17f3b9f64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 16 16:11:09 2013 -0400

    Fix typo in unused macro

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 50067e280f381918b8e90b26df9e7bf20f98f0bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 11 16:31:01 2013 -0400

    [util] Add --num-iterations

    Useful for profiling shapers.

 util/options.cc        |  1 +
 util/options.hh        |  2 ++
 util/shape-consumer.hh | 15 +++++++++------
 3 files changed, 12 insertions(+), 6 deletions(-)

commit 08677c250767bfc2c0dd1fc934dea92984741291
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 11 14:45:58 2013 -0400

    [old] Speed up Unicode properties access in hb-old shaper

    Just to be sure it's not punishing the old shaper performance
    numbers.  Doesn't seem to have a measurable effect.

 src/hb-old/harfbuzz-arabic.c   | 44
 +++++++++++++++++++++---------------------
 src/hb-old/harfbuzz-external.h | 18 ++++++++---------
 src/hb-old/harfbuzz-greek.c    |  2 +-
 src/hb-old/harfbuzz-hebrew.c   |  2 +-
 src/hb-old/harfbuzz-indic.cpp  | 10 +++++-----
 src/hb-old/harfbuzz-shaper.cpp |  6 ++++--
 src/hb-old/harfbuzz-shaper.h   |  1 +
 7 files changed, 43 insertions(+), 40 deletions(-)

commit 36a661c0a03d958b95c9ea64a435b55bcd99c3d6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 11 13:38:37 2013 -0400

    [git.mk] Update

 git.mk | 33 ++++++++++++++++++++-------------
 1 file changed, 20 insertions(+), 13 deletions(-)

commit ef9e02eddfc9a37d50723e96839635d79191d849
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Tue Apr 9 14:06:54 2013 -0400

    Minor

 src/test.cc | 1 +
 1 file changed, 1 insertion(+)

commit 22e47456154ca0b8173268486e56ef3a0e1e7150
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 5 18:02:43 2013 -0400

    0.9.15

 NEWS         | 10 ++++++++++
 configure.ac |  2 +-
 2 files changed, 11 insertions(+), 1 deletion(-)

commit 4d4fc920496c95621d5bb4800282ea8c028cdde3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 5 17:58:25 2013 -0400

    [git.mk] Ignore ar-lib

 git.mk | 1 +
 1 file changed, 1 insertion(+)

commit 587e5753e088b4d0b82c74ddbde790a8369a7517
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Fri Apr 5 12:38:58 2013 -0400

    Add note re Hangul shaping

 src/hb-ot-shape-complex-private.hh | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit 269de14dda7a86a20917fa9ea6a5864929c41364
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 4 23:06:54 2013 -0400

    Don't compose Hangul jamo

    See thread "an issue regarding discrepancy between Korean and Unicode
    standards" on the mailing list for the rationale.  In short: Uniscribe
    doesn't, so fonts are designed to work without it.

 src/hb-ot-shape-complex-default.cc   |  6 ------
 src/hb-ot-shape-normalize-private.hh |  1 -
 src/hb-ot-shape-normalize.cc         | 11 +++++------
 3 files changed, 5 insertions(+), 13 deletions(-)

commit 1f970609850bb4999b94e1e11b764ab4279cbd38
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 4 15:02:03 2013 -0400

    Put back MemoryBarrier fallback implementation on MINGW32

    This almost reverts 2761e8a632c14353f286708898be8df6ebad7407,
    but only if under MINGW32, so it doesn't affect MSVC.

 src/hb-atomic-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit f368ba4a9edec4e297616698097546e8e6c89e53
Author: Behdad Esfahbod <behdad@behdad.org>
Date:   Thu Apr 4 14:25:36 2013 -0400

    [Arabic] Zero marks by GDEF, not Unicode category

    Testing shows that this is closer to what Uniscribe does.

    Reported by Khaled Hosny:

    """
    commit 568000274c8edb5f41bc4f876ce21fcc8bdaeed8
    ...
    This commit is causing a regression with Amiri, the string
    “هَٰذ” with
    Uniscribe and HarfBuzz before this commit, gives:

	[uni0630.fina=3+965|uni0670.medi=0+600|uni064E=0@-256,0+0|uni0647.init=0+926]

    But now it gives:

	[uni0630.fina=3+965|uni0670.medi=0+0|uni064E=0@-256,0+0|uni0647.init=0+926]

    i.e. uni0670.medi is zeroed though it has a base glyph GDEF class.
    """

    The test case is U+0647,U+064E,U+0670,U+0630 with Amiri.

 src/hb-ot-shape-complex-arabic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b80674c50b8c3133848a4034f7106b2b9bfe224
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 4 12:06:46 2013 -0400

    Bug 63107 - FTBFS on ppc64: symbols marked with 'D' on powerpc64
    instead

 src/check-symbols.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7148dc1a978610af25b4f490691a62d709c8c463
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 2 14:08:53 2013 -0400

    [graphite2] Don't crash if language is not set

    https://bugs.webkit.org/show_bug.cgi?id=113796

 src/hb-graphite2.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a88a62f70f87563725d47b9b6824565e5d6b78ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 21 21:02:16 2013 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 0a2b2a505b647f6b4802750c87cd9c5f0baaadef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 21 16:26:39 2013 -0400

    Remove gthread leftovers

    We don't use gthread anymore, remove leftovers.

 configure.ac	      | 6 ------
 test/api/Makefile.am | 4 ++--
 test/api/hb-test.h   | 3 ---
 3 files changed, 2 insertions(+), 11 deletions(-)

commit b93de1ea085bfc0661ce3ad0e21fb5eba722c951
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 21 16:25:20 2013 -0400

    Minor

 configure.ac | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit f872a17462a75a3493623747bf3a3fbe54556c7b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 21 13:38:06 2013 -0400

    0.9.14

 NEWS	      | 14 ++++++++++++++
 configure.ac |  2 +-
 2 files changed, 15 insertions(+), 1 deletion(-)

commit cc50bf5b13bfe88137fa7a42782872c40fb9aefb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 19 06:59:40 2013 -0400

    Remove Hangul filler characters from Default_Ignorable chars

    See discussion on mailing list.

 src/hb-unicode-private.hh					|
 10 +++++++---
 .../texts/in-tree/shaper-default/script-hangul/misc/misc.txt	|  1 +
 2 files changed, 8 insertions(+), 3 deletions(-)

commit a8cf7b43fa795150ae3d42d64424bb6e0373d0b2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 19 05:53:26 2013 -0400

    [Indic] Futher adjust ZWJ handling in Indic-like shapers

    After the Ngapi hackfest work, we were assuming that fonts
    won't use presentation features to choose specific forms
    (eg. conjuncts).  As such, we were using auto-joiner behavior
    for such features.	It proved to be troublesome as many fonts
    used presentation forms ('pres') for example to form conjuncts,
    which need to be disabled when a ZWJ is inserted.

    Two examples:

	U+0D2F,U+200D,U+0D4D,U+0D2F with kartika.ttf
	U+0995,U+09CD,U+200D,U+09B7 with vrinda.ttf

    What we do now is to never do magic to ZWJ during GSUB's main input
    match for Indic-style shapers.  Note that backtrack/lookahead
    are still
    matched liberally, as is GPOS.  This seems to be an acceptable
    compromise.

    As to the bug that initially started this work, that one needs to
    be fixed differently:

      Bug 58714 - Kannada u+0cb0 u+200d u+0ccd u+0c95 u+0cbe does not
      provide same results as Windows8
      https://bugs.freedesktop.org/show_bug.cgi?id=58714

    New numbers:

    BENGALI: 353689 out of 354188 tests passed. 499 failed (0.140886%)
    DEVANAGARI: 707305 out of 707394 tests passed. 89 failed (0.0125814%)
    GUJARATI: 366349 out of 366457 tests passed. 108 failed (0.0294714%)
    GURMUKHI: 60706 out of 60747 tests passed. 41 failed (0.067493%)
    KANNADA: 951030 out of 951913 tests passed. 883 failed (0.0927606%)
    KHMER: 299070 out of 299124 tests passed. 54 failed (0.0180527%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048102 out of 1048334 tests passed. 232 failed
    (0.0221304%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271666 out of 271847 tests passed. 181 failed (0.0665816%)
    TAMIL: 1091753 out of 1091754 tests passed. 1 failed (9.15957e-05%)
    TELUGU: 970555 out of 970573 tests passed. 18 failed (0.00185457%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-layout-gsubgpos-private.hh		    | 30
 ++++++++--------------
 src/hb-ot-layout-private.hh			    |  4 +--
 src/hb-ot-layout.cc				    |  8 +++---
 src/hb-ot-map-private.hh			    |  8 +++---
 src/hb-ot-map.cc				    | 18 ++++++-------
 src/hb-ot-shape-complex-arabic-fallback.hh	    |  2 +-
 src/hb-ot-shape-complex-indic.cc		    | 30
 +++++++++++-----------
 src/hb-ot-shape-complex-myanmar.cc		    |  4 +--
 src/hb-ot-shape-complex-sea.cc			    |  4 +--
 src/hb-ot-shape-fallback.cc			    |  2 +-
 .../indic/script-bengali/misc/misc.txt		    |  1 +
 .../indic/script-malayalam/misc/misc.txt	    |  1 +
 12 files changed, 53 insertions(+), 59 deletions(-)

commit 8226fb56f131362db877dc4be6857c684b8fd022
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 19 05:22:27 2013 -0400

    Allow disabling ICU by using a fake icu-config script

 configure.ac | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a1f3e8ccbfad0d1148b905ae008ba63a26090cb9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 11 20:18:49 2013 -0400

    [travis] Install libicu

 .travis.yml | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 14cfab52daa8d22b843110f32ca09af5bbc855a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 11 19:53:44 2013 -0400

    Add build system fallback to icu-config

    Ubuntu doesn't (or didn't until recently?) ship icu pkg-config
    files.  That's quite unfortunate.  Work around it.

    Bug 57608 - ICU Detection fallback for non-pkgconfig systems

 configure.ac | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit 190e19e6842875c7a487c66235300ee6b42fb5da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 9 20:30:22 2013 -0500

    [ft] Remove TODO items that I'm not going to fix

 src/hb-ft.cc | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

commit 392ee97431b368ee74e1b521fd539b69d2efadfb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 9 20:27:55 2013 -0500

    [ft] Remove TODO item re FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH

    That flag is redundant, deprecated, and ignored since April 2011.
    From FreeType git log:

    commit 8c82ec5b17d0cfc9b0876a2d848acc207a62a25a
    Author: Behdad Esfahbod <behdad@behdad.org>
    Date:   Thu Apr 21 08:21:37 2011 +0200

	Always ignore global advance.

	This makes FT_LOAD_IGNORE_GLOBAL_ADVANCE_WIDTH redundant,
	deprecated, and ignored.  The new behavior is what every
	major user
	of FreeType has been requesting.  Global advance is broken in many
	CJK fonts.  Just ignoring it by default makes most sense.

	* src/truetype/ttdriver.c (tt_get_advances),
	src/truetype/ttgload.c (TT_Get_HMetrics, TT_Get_VMetrics,
	tt_get_metrics, compute_glyph_metrics, TT_Load_Glyph),
	src/truetype/ttgload.h: Implement it.

	* docs/CHANGES: Updated.

 src/hb-ft.cc | 2 --
 1 file changed, 2 deletions(-)

commit c5d91f39802078fc6f6de71940739ec4d04eca07
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 9 04:34:21 2013 -0500

    Add hb_auto_array_t

 src/hb-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit ee5464d17fa4c59f5adaaa13dde70dd5264dbc64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 9 01:59:30 2013 -0500

    [OTLayout] Move code around

 src/hb-ot-layout-gpos-table.hh |  33 ++++++------
 src/hb-ot-layout-gsub-table.hh | 115
 +++++++++++++++++++++--------------------
 2 files changed, 75 insertions(+), 73 deletions(-)

commit 9c5a9ee967120c8a968a1160c420e03620d46c24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 9 01:55:04 2013 -0500

    [OTLayout] Rename process() to dispatch()

 src/hb-open-type-private.hh	      |  2 +-
 src/hb-ot-layout-gpos-table.hh       | 80
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-table.hh       | 78
 +++++++++++++++++------------------
 src/hb-ot-layout-gsubgpos-private.hh | 36 ++++++++--------
 4 files changed, 98 insertions(+), 98 deletions(-)

commit 2761e8a632c14353f286708898be8df6ebad7407
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 7 20:51:30 2013 -0500

    [win32] Remove MemoryBarrier() fallback implementation

    I added these because the older mingw32 toolchain didn't have
    MemoryBarrier().  The newer mingw-w64 toolchain however has.
    As reported by John Emmas this was causing build failure with
    MSVC (on glib) because of inline issues.  But that reminded me
    that we may be taking this path even if the system implements
    MemoryBarrier as a function, which is a waste.  So, just remove
    it.

 src/hb-atomic-private.hh | 14 +-------------
 1 file changed, 1 insertion(+), 13 deletions(-)

commit ea11abfc5de8bc5cf651b37c9570593eed6a8f9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 6 20:21:11 2013 -0500

    [build] Port to newer automake recommended syntax

 test/api/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c39def9bc71559d59325a2c3282c1cec4286b2ae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 6 20:20:45 2013 -0500

    Move valgrind suppressions to the correct directory

 test/.valgrind-suppressions	 | 0
 test/api/.valgrind-suppressions | 0
 2 files changed, 0 insertions(+), 0 deletions(-)

commit a8ac1d33c731f6200ee472ab6c37a80b72770564
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 6 20:05:34 2013 -0500

    [build] Add AM_PROG_AR

    Newer automake / libtools warns otherwise.

 configure.ac | 1 +
 1 file changed, 1 insertion(+)

commit 5594c2d112c295147ee69215a2ce9dfd99984aa0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 6 19:37:31 2013 -0500

    [FT] Just return if glyph name not found

    The fallback happens in higher level already.  No need to do here.

 src/hb-ft.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit fb7c182bf92142540bff1ad7fb82de0d115fb2b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 6 00:53:24 2013 -0500

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8144936d072f94104242edf9e7aaa31d315b4094
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 5 20:08:59 2013 -0500

    [Indic] Work around fonts with broken new-spec tables

    See comments, and this thread:

    http://lists.freedesktop.org/archives/harfbuzz/2013-March/002990.html

    Originally reported here:

    https://code.google.com/p/chromium/issues/detail?id=96143

    Doesn't change test suite numbers.

 src/hb-ot-shape-complex-indic.cc | 42
 +++++++++++++++++++++++++++-------------
 1 file changed, 29 insertions(+), 13 deletions(-)

commit dfb799f57572e8123035a42a30f93c7fc4d37692
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 5 17:23:33 2013 -0500

    [travis] Oops.  Run make check, not make test!

 .travis.yml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8bdce1cac1be9e79344c1f9a9811d98ed2e5c5fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 5 02:35:31 2013 -0500

    Run autogen.sh, not configure, in travis-ci

 .travis.yml | 1 +
 1 file changed, 1 insertion(+)

commit 5f705b437cb116275a8c20366e694d740bce715c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 5 01:37:44 2013 -0500

    Add .travis.yml for continuous building with travis-ci.org

    Notifications sent to IRC channel and mailing list.

 .travis.yml | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit cd54d505d1a2467a67e5ff96fe0eb101b953b265
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 4 21:29:38 2013 -0500

    Fix distcheck

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 22c625a490bbaac52ead2cd29ee49b170e6e9845
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 4 20:56:15 2013 -0500

    [git.mk] Update to commit efc928222179576270c5910416d8055dd7a97896

	Move reusable list of files into variable definitions modules can
	reuse

 Makefile.am | 22 ++++------------------
 git.mk      | 59
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 60 insertions(+), 21 deletions(-)

commit 66f7b3509a121b8f3289ad4c4aed2b5b10a6de2e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 4 18:52:12 2013 -0500

    Add libtool m4 macros to MAINTAINERCLEANFILES

 Makefile.am | 5 +++++
 1 file changed, 5 insertions(+)

commit 41732f1fe3ce856d8bb95850635034537b6ba047
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 20:40:54 2013 -0500

    [Indic] Help compiler put indic_features table in .rodata

    The overridden "or" operator was preventing the flag expression from
    being const, and putting the table in .data instead or .rodata.

 src/hb-ot-map-private.hh	  |  2 ++
 src/hb-ot-shape-complex-indic.cc | 24 ++++++++++++------------
 2 files changed, 14 insertions(+), 12 deletions(-)

commit 778d7f844cb330289830c95431269db06ba1c969
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 18:47:26 2013 -0500

    [buffer] Better parse glyph names

 src/hb-buffer-deserialize-json.rl | 9 ++++++---
 src/hb-buffer-deserialize-text.rl | 5 ++++-
 2 files changed, 10 insertions(+), 4 deletions(-)

commit 20b817ac21147e0a8edbf23ef071c2f4ce6c2b95
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 18:39:37 2013 -0500

    [buffer] Implement buffer deserialization for format=json

    Using a ragel machine.

 src/Makefile.am		   |   2 +
 src/hb-buffer-deserialize-json.rl | 129
 ++++++++++++++++++++++++++++++++++++++
 src/hb-buffer-deserialize-text.rl |  52 +--------------
 src/hb-buffer-serialize.cc	   |  45 +++++++++++--
 src/hb-private.hh		   |   6 +-
 src/hb-shape.cc		   |   2 -
 src/test-buffer-serialize.cc	   |   4 +-
 7 files changed, 179 insertions(+), 61 deletions(-)

commit 847794e929831750e97525137ab5e285ccd1064e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 17:59:28 2013 -0500

    [buffer] Implement buffer deserialization for format=text

    Using a ragel machine.

 src/Makefile.am		   |   2 +
 src/hb-buffer-deserialize-text.rl | 169
 ++++++++++++++++++++++++++++++++++++++
 src/hb-buffer-private.hh	   |   3 +-
 src/hb-buffer-serialize.cc	   |  36 +++-----
 src/hb-buffer.cc		   |  13 ++-
 src/hb-buffer.h		   |   2 +-
 src/hb-private.hh		   |   5 +-
 src/hb-shape.cc		   |   9 +-
 src/test-buffer-serialize.cc	   |  16 +++-
 9 files changed, 221 insertions(+), 34 deletions(-)

commit 4ee803b42a3baae4b0f295a07cb7ad591a538e4c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 16:09:55 2013 -0500

    [buffer] Fix serializing of buffer with invalid direction

 src/hb-buffer-serialize.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e54dd26300f50eb19907a9d39269a363279b3e07
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 13:01:02 2013 -0500

    [buffer] Start implementing buffer deserialization

 src/Makefile.am	      |  12 ++++-
 src/hb-buffer-serialize.cc   |  64 ++++++++++++++++++++++--
 src/hb-buffer.h	      |   2 +-
 src/test-buffer-serialize.cc | 114
 +++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 187 insertions(+), 5 deletions(-)

commit bcc8f32b4c46cd73f591924c64a6f63df6eaf9e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 12:02:42 2013 -0500

    [buffer] Minor

 src/hb-buffer-serialize.cc | 10 +++++++---
 src/hb-buffer.h	    |  4 ++--
 2 files changed, 9 insertions(+), 5 deletions(-)

commit d3e14aafff60e1314d0ef66e42cdde6bf949bb66
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 11:06:36 2013 -0500

    [buffer] Move buffer serialization code to a new file

 Android.mk		    |	1 +
 src/Makefile.am	    |	1 +
 src/hb-buffer-serialize.cc | 251
 +++++++++++++++++++++++++++++++++++++++++++++
 src/hb-buffer.cc	    | 228 ----------------------------------------
 4 files changed, 253 insertions(+), 228 deletions(-)

commit 8da51112696ec8641d7dd9184b7ab1dd48458813
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 27 17:48:31 2013 -0500

    Minor

 src/hb-shape.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 94789fd6012125acc8426dd88df97f03b0948ea5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 26 21:22:37 2013 -0500

    [Indic] Sort pre-base reordering consonants with post-forms

    Before, we were marking them as below-form for initial reordering.
    However, there is a rule that says "post consonants should follow
    below consonsnts" for base determination purposes.	Malayalam has
    port-form YA/VA, and RA is pre-base.  As such, for a sequence like
    YA,Virama,YA,Virama,RA, the correct base is at index 0.  But
    because the code was seeing RA as a below-base, it was stopping at
    the second YA as base, instead of jumping it as a post-base.

    By treating prebase-reordering consonants like post-forms, this
    is fixed.

    MALAYALAM went down from 351 to 265.  Other numbers didn't change:

    BENGALI: 353686 out of 354188 tests passed. 502 failed (0.141733%)
    DEVANAGARI: 707305 out of 707394 tests passed. 89 failed (0.0125814%)
    GUJARATI: 366262 out of 366457 tests passed. 195 failed (0.0532122%)
    GURMUKHI: 60706 out of 60747 tests passed. 41 failed (0.067493%)
    KANNADA: 950680 out of 951913 tests passed. 1233 failed (0.129529%)
    KHMER: 299074 out of 299124 tests passed. 50 failed (0.0167155%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048069 out of 1048334 tests passed. 265 failed
    (0.0252782%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271539 out of 271847 tests passed. 308 failed (0.113299%)
    TAMIL: 1091753 out of 1091754 tests passed. 1 failed (9.15957e-05%)
    TELUGU: 970555 out of 970573 tests passed. 18 failed (0.00185457%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6d69a2cec158061ef097c488d08813c9503824b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 26 19:35:50 2013 -0500

    [tests] Add Malayalam tests frim cibu

 .../indic/script-malayalam/misc/MANIFEST	    |	1 +
 .../indic/script-malayalam/misc/cibu.txt	    | 188
 +++++++++++++++++++++
 2 files changed, 189 insertions(+)

commit 1edc6b97b67363d55cfb5914c991ae54d42a6440
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 26 15:01:45 2013 -0500

    Update Android.mk

 Android.mk | 3 +++
 1 file changed, 3 insertions(+)

commit 05d5d3cd63ba2fadfdb62190dd24ef80ee3df40c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 23:57:51 2013 -0500

    Fix "comparison between signed and unsigned" warnings

    Patch from Jonathan Kew.

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 07a52b62115f10caea5c2d174a4272eb9ddb2284
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 19:09:57 2013 -0500

    Give up sanitizing after 100 edit requests

    Such fonts are *definitely* really broken.	Give up.
    Limits time spent in sanitize for extremely / deliberately broken
    fonts.  For example, two fonts with these md5sum / names:

      9343f0a1b8c84b8123e7d201cae62ffd.ttf
      eb8c978547f09d368fc204194fb34688.ttf

    were spending over a second in sanitize!  Not anymore.

 src/hb-open-type-private.hh | 7 +++++++
 1 file changed, 7 insertions(+)

commit 29ff25481584e20a2fa39195f295c8eb4bf3bad0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 19:04:56 2013 -0500

    Add HB_DEBUG_VERBOSE

    Only affects the verbosity of function name printing right now.

 src/hb-private.hh | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 05686b5f697ed40dd21b330d044c3c286461fb26
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 18:19:20 2013 -0500

    0.9.13

 NEWS	      | 29 +++++++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 30 insertions(+), 1 deletion(-)

commit 9e5ac7b8c02c86a4f28c79173a5237503eaa7115
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 17:54:10 2013 -0500

    Fix blob test to match c3ba49b6fa1865e8318926eaa6c0f2063d1053bb

 test/api/test-blob.c | 57
 ++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 51 insertions(+), 6 deletions(-)

commit c3ba49b6fa1865e8318926eaa6c0f2063d1053bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 25 17:06:35 2013 -0500

    Always create sub-blobs in MEMORY_MODE_READONLY

    This fixes a design bug with sanitize and sub-blobs that can
    cause crashes.  Jonathan and I found and debugged this issue
    when we tested a corrupt font with the md5sum / filename:
    ea395483d37af0cb933f40689ff7b60a.  Two hours of intense
    debugging we found out that the font has overlapping GSUB/GPOS
    tables, and as such, sanitizing the second table can modify
    the first one, which can cause all kinds of undefined behavior.

    The correct way to fix this is to make sure sub-blobs are
    always created readonly, since we consider the parent blob
    to be a shared resource and can't modify it, even if it *is*
    writable.

    This essentially makes the READONLY_MAY_MAKE_WRITABLE mode
    unused...  Maybe we should simply remove / deprecate it.

 src/hb-blob.cc |  2 +-
 src/hb-blob.h	| 26 ++++++++++++++++++++++++++
 2 files changed, 27 insertions(+), 1 deletion(-)

commit 57542d7f411c71d9b8110ce6f64090b2c0f6a925
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 15:54:05 2013 -0500

    Minor

 src/hb-ot-layout-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit d46606e119b48dcca375d6313abd0f93ba5d09c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 15:39:57 2013 -0500

    Port TrueType-kerning to use skippy iterator

    It skips joiners and default ignorables now.  Skips marks too,
    but only
    if there is proper GDEF classes for marks.

 src/hb-ot-shape-fallback.cc | 50
 +++++++++++++++++++++++++--------------------
 1 file changed, 28 insertions(+), 22 deletions(-)

commit 722e8b857eafc52e07dee5d9b253b88ed5c5c8ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 15:37:51 2013 -0500

    Fixup previous commit

    Was not decreasing num_items.  Ouch!

 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit ba87b8fc89bf745068ccd19264a2631ea0904846
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 15:23:39 2013 -0500

    Move code around

 src/hb-ot-shape-fallback-private.hh |	5 +++++
 src/hb-ot-shape-fallback.cc	     | 40
 +++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape.cc		     | 38
 +----------------------------------
 3 files changed, 46 insertions(+), 37 deletions(-)

commit 2b2a6e8944144755ab641f2842e36d9a847719f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 15:07:03 2013 -0500

    [OTLayout] Correctly skip Default_Ignorable when match_func not set

    When a match_func was not set on the matcher_t object (ie. from GPOS),
    then the Default_Ignorables (including joiners) were never skipped.
    This meant that they were not skipped as they should during GPOS
    matching.  Fix that.

    A few Indic numbers have "regressed": BENGALI and DEVANAGARI went
    up from 290 and 58 respectively, but in both cases new results are
    superior to Uniscribe, as they apply GPOS when we weren't (and
    Uniscribe isn't) before.
    BENGALI: 353686 out of 354188 tests passed. 502 failed (0.141733%)
    DEVANAGARI: 707305 out of 707394 tests passed. 89 failed (0.0125814%)
    GUJARATI: 366262 out of 366457 tests passed. 195 failed (0.0532122%)
    GURMUKHI: 60706 out of 60747 tests passed. 41 failed (0.067493%)
    KANNADA: 950680 out of 951913 tests passed. 1233 failed (0.129529%)
    KHMER: 299074 out of 299124 tests passed. 50 failed (0.0167155%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1047983 out of 1048334 tests passed. 351 failed
    (0.0334817%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271539 out of 271847 tests passed. 308 failed (0.113299%)
    TAMIL: 1091753 out of 1091754 tests passed. 1 failed (9.15957e-05%)
    TELUGU: 970555 out of 970573 tests passed. 18 failed (0.00185457%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-layout-gsubgpos-private.hh | 32
 ++++++++++++++++++++++----------
 1 file changed, 22 insertions(+), 10 deletions(-)

commit ff93ac8cb24cbc3d9dc1a2bfb0faa88950f4a507
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 21 14:51:40 2013 -0500

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit e0486fc1affd3796fb8f664e2e7fc208f1d2106c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 19 00:58:10 2013 -0500

    [tests] Add Myanmar torture tests from Martin Hosken

 .../shaper-myanmar/script-myanmar/misc/MANIFEST    |  1 +
 .../shaper-myanmar/script-myanmar/misc/torture.txt | 23
 ++++++++++++++++++++++
 2 files changed, 24 insertions(+)

commit a3df9a7bf87aeba7a3d6110cd5e01a65bd0b16d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 19 00:50:46 2013 -0500

    Minor

    Moving files around

 test/shaping/texts/in-tree/MANIFEST					|
 2 --
 test/shaping/texts/in-tree/script-default/MANIFEST			|
 1 -
 test/shaping/texts/in-tree/script-default/misc/MANIFEST		|
 1 -
 test/shaping/texts/in-tree/script-default/misc/misc.txt		|
 1 -
 test/shaping/texts/in-tree/shaper-default/MANIFEST			|
 2 ++
 test/shaping/texts/in-tree/shaper-default/script-hangul/MANIFEST	|
 1 +
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/MANIFEST	|
 1 +
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/misc.txt	|
 3 +++
 test/shaping/texts/in-tree/shaper-default/script-tibetan/MANIFEST	|
 1 +
 test/shaping/texts/in-tree/shaper-default/script-tibetan/misc/MANIFEST |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-tibetan/misc/misc.txt |
 1 +
 test/shaping/texts/in-tree/shaper-hangul/MANIFEST			|
 1 -
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/MANIFEST	|
 1 -
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/misc/MANIFEST	|
 1 -
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/misc/misc.txt	|
 3 ---
 15 files changed, 10 insertions(+), 11 deletions(-)

commit b1f440759161cb5a54e1b1b910f3a8383b8e8472
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Feb 17 12:12:37 2013 -0500

    [SEA] Fix order of pre-base reordering Ra and left matras

    The code was confused because it was expecting left matra to have
    POS_PRE_M, like we do in the Myanmar shaper, but that is not what
    we were doing in this shaper.  Rewrite to rely on category only.

    Test case: U+AA06,U+AA34,U+AA2F

 src/hb-ot-shape-complex-sea.cc				     | 13
 +++++++------
 .../texts/in-tree/shaper-sea/script-cham/misc/misc.txt      |	1 +
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 99fa9ea020f26ed2697f38a7690ee1e1b5d946c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 11:47:24 2013 -0500

    Minor

 src/hb-ot-layout-gsub-table.hh | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 27589620ba2dcf356fd7fa21cd80221a07803202
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 11:47:09 2013 -0500

    [OTLayout] Remove unused code

 src/hb-open-type-private.hh | 5 -----
 1 file changed, 5 deletions(-)

commit ebb77b9c5e357ff7c9badb0f4bf1c3a965c3e91d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 09:33:10 2013 -0500

    Remove TODO items that don't make sense

    The spec says those features need to be disabled by default.

 TODO | 2 --
 1 file changed, 2 deletions(-)

commit c2a1cdc4c4cc51f4680ebc4ec2c462cb660f9492
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 09:27:02 2013 -0500

    [Arabic] Fix shaping of left-joining 'Phags-Pa U+A872

    This is the first character in Unicode to have Arabic left-joining
    behavior.  Update the machine to recognize that.

    Test case: U+A840,U+A872,U+A840.

 src/hb-ot-shape-complex-arabic.cc | 40
 +++++++++++++++++++--------------------
 1 file changed, 19 insertions(+), 21 deletions(-)

commit 05ac87813d17d9ebbfa315eee3f80f25b53135c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 09:26:41 2013 -0500

    [tests] Add Syriac Alaph shaping test cases

 .../shaper-arabic/script-syriac/misc/MANIFEST	    |  1 +
 .../shaper-arabic/script-syriac/misc/alaph.txt     | 98
 ++++++++++++++++++++++
 2 files changed, 99 insertions(+)

commit c462b32dcb883a7aca066af24c4d28c7a2b7fa28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 07:51:47 2013 -0500

    Disable automatic segment properties guessing

    Before, if one called hb_shape() without setting script, language, and
    direction on the buffer, hb_shape() was calling
    hb_buffer_guess_segment_properties() on the user's behalf to guess
    these.

    This is very dangerous, since any serious user of HarfBuzz must set
    these properly (specially important is direction).	So now, we don't
    guess properties by default.  People not setting direction will get
    an abort() now.  If the old behavior is desired (fragile, good for
    simple testing only), users can call
    hb_buffer_guess_segment_properties() on the buffer just before calling
    hb_shape().

 src/hb-fallback-shape.cc | 1 -
 src/hb-ot-shape.cc	  | 2 --
 src/hb-shape.cc	  | 2 --
 util/options.hh	  | 1 +
 4 files changed, 1 insertion(+), 5 deletions(-)

commit 7abddbb47a489aaac8e76ac6e700cd815739b1d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 07:46:57 2013 -0500

    Add assertions for a couple programmer errors

 src/hb-shape-plan.cc | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 038c98f6866fe1177b04bd2ae3bb461b2f0fd1ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 07:41:07 2013 -0500

    Allow disabling of TrueType kerning

    Responds to the same feature tag that GPOS kerning does:
    'kern' for horizontal and 'vkrn' for vertical.

 TODO		    |  2 --
 src/hb-ot-shape.cc | 55
 ++++++++++++++++++++++++++++++++++--------------------
 2 files changed, 35 insertions(+), 22 deletions(-)

commit 398238a2526d322eb79e255c24634a275473920f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 07:40:10 2013 -0500

    Fix partial disabling of default-on features

    Surprisingly, if user ever tried to turn a default feature off
    partially
    (say, disable liga for a range), the feature was being turned off
    globally!  Fixed now.

 src/hb-ot-map.cc | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit cb90b1bbe6d27ca6968b70d2dbfea7ab7fb73293
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 07:02:08 2013 -0500

    [OTLayout] Respect syllable boundaries for backtrack/lookahead
    matching

    Originally we meant to match backtrack/lookahead across syllable
    boundaries.  But a bug in the code meant that this was NOT done for
    backtrack.	We "fixed" that in
    2c7d0b6b80d412de3fddd443ed1a485ea1cbb03c,
    but that broke Myanmar shaping.

    We now believe that for Indic-like shapers (which is where syllables
    are
    used), all basic shaping forms should be fully contained within their
    syllables, so now we limit backtrack/lookahead matching to the
    syllable
    too.  Unbreaks Myanmar.

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ee9c3a17d0bf263c5eee479fd778db97cff8e189
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 15 06:22:26 2013 -0500

    Minor refactoring

 src/hb-ot-shape-complex-myanmar.cc | 36
 ++++++++++--------------------------
 src/hb-ot-shape-complex-sea.cc     | 37
 ++++++++++---------------------------
 src/hb-ot-shape.cc		    | 17 ++++++-----------
 3 files changed, 26 insertions(+), 64 deletions(-)

commit cfc507c5432e6327e8484b07b9e091212653bc92
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 10:40:12 2013 -0500

    [Indic-like] Disable automatic joiner handling for basic shaping
    features

    Not for Arabic, but for Indic-like scripts.  ZWJ/ZWNJ have special
    meanings in those scripts, so let font lookups take full control.

    This undoes the regression caused by automatic-joiners handling
    introduced two commits ago.

    We only disable automatic joiner handling for the "basic shaping
    features" of Indic, Myanmar, and SEAsian shapers.  The "presentation
    forms" and other features are still applied with automatic-joiner
    handling.

    This change also changes the test suite failure statistics, such that
    a few scripts show more "failures".  The most affected is Kannada.
    However, upon inspection, we believe that in most, if not all, of the
    new failures, we are producing results superior to Uniscribe.  Hard to
    count those!

    Here's an example of what is fixed by the recent joiner-handling
    changes:

      https://bugs.freedesktop.org/show_bug.cgi?id=58714

    New numbers, for future reference:

    BENGALI: 353892 out of 354188 tests passed. 296 failed (0.0835714%)
    DEVANAGARI: 707336 out of 707394 tests passed. 58 failed (0.00819911%)
    GUJARATI: 366262 out of 366457 tests passed. 195 failed (0.0532122%)
    GURMUKHI: 60706 out of 60747 tests passed. 41 failed (0.067493%)
    KANNADA: 950680 out of 951913 tests passed. 1233 failed (0.129529%)
    KHMER: 299074 out of 299124 tests passed. 50 failed (0.0167155%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1047983 out of 1048334 tests passed. 351 failed
    (0.0334817%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271539 out of 271847 tests passed. 308 failed (0.113299%)
    TAMIL: 1091753 out of 1091754 tests passed. 1 failed (9.15957e-05%)
    TELUGU: 970555 out of 970573 tests passed. 18 failed (0.00185457%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-layout-gsubgpos-private.hh	    | 35
 +++++++++++++++++++-----------
 src/hb-ot-layout-private.hh		    |  6 +++--
 src/hb-ot-layout.cc			    | 10 +++++----
 src/hb-ot-map-private.hh		    | 12 ++++++----
 src/hb-ot-map.cc			    | 32
 +++++++++++++++++++++------
 src/hb-ot-shape-complex-arabic-fallback.hh |  2 +-
 src/hb-ot-shape-complex-indic.cc	    | 29 +++++++++++++------------
 src/hb-ot-shape-complex-myanmar.cc	    |  4 ++--
 src/hb-ot-shape-complex-sea.cc		    |  4 ++--
 9 files changed, 85 insertions(+), 49 deletions(-)

commit 0b45479198d61d5135dad771e9c68408eb13f930
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 10:46:52 2013 -0500

    [OTLayout] Add fine-grained control over ZWJ matching

    Not used yet.  Next commit...

 src/hb-ot-layout-gsubgpos-private.hh | 10 ++++++++--
 src/hb-ot-layout-private.hh	      | 11 +++++++++--
 2 files changed, 17 insertions(+), 4 deletions(-)

commit 607feb7cff0e50f8738d2e49ca463fc9d7d494de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 07:43:13 2013 -0500

    [OTLayout] Ignore default-ignorables when matching GSUB/GPOS

    When matching lookups, be smart about default-ignorable characters.
    In particular:

    Do nothing specific about ZWNJ, but for the other default-ignorables:

    If the lookup in question uses the ignorable character in a sequence,
    then match it as we used to do.  However, if the sequence match will
    fail because the default-ignorable blocked it, try skipping the
    ignorable character and continue.

    The most immediate thing it means is that if Lam-Alef forms a
    ligature,
    then Lam-ZWJ-Alef will do to.  Finally!

    One exception: when matching for GPOS, or for backtrack/lookahead of
    GSUB, we ignore ZWNJ too.  That's the right thing to do.

    It certainly is possible to build fonts that this feature will result
    in undesirable glyphs, but it's hard to think of a real-world case
    that that would happen.

    This *does* break Indic shaping right now, since Indic Unicode has
    specific rules for what ZWJ/ZWNJ mean, and skipping ZWJ is breaking
    those rules.  That will be fixed in upcoming commits.

 src/hb-ot-layout-gpos-table.hh       |   1 +
 src/hb-ot-layout-gsub-table.hh       |   2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 279
 ++++++++++++++++++++++++-----------
 src/hb-ot-layout-private.hh	      |  45 ++++++
 src/hb-ot-shape-private.hh	      |  44 ------
 5 files changed, 237 insertions(+), 134 deletions(-)

commit ec5448667b30ad662401c2b4f5fc0da524c013fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 11:25:10 2013 -0500

    Add hb_ot_map_feature_flags_t

    Code cleanup.  No (intended) functional change.

 src/hb-ot-map-private.hh	    | 29 +++++++++++++++++---
 src/hb-ot-map.cc		    | 24 ++++++++---------
 src/hb-ot-shape-complex-arabic.cc  |  4 +--
 src/hb-ot-shape-complex-indic.cc   | 55
 +++++++++++++++++++-------------------
 src/hb-ot-shape-complex-myanmar.cc |  4 +--
 src/hb-ot-shape-complex-sea.cc     |  2 +-
 src/hb-ot-shape.cc		    |  6 +++--
 7 files changed, 74 insertions(+), 50 deletions(-)

commit e7ffcfafb1108801ac504f18f820e497226bf07f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 11:05:56 2013 -0500

    Clean-up add_bool_feature

 src/hb-ot-map-private.hh	    |  4 ++--
 src/hb-ot-shape-complex-arabic.cc  | 16 ++++++++--------
 src/hb-ot-shape-complex-default.cc |  2 +-
 src/hb-ot-shape-complex-indic.cc   |  8 ++++----
 src/hb-ot-shape-complex-myanmar.cc |  8 ++++----
 src/hb-ot-shape-complex-sea.cc     |  8 ++++----
 src/hb-ot-shape.cc		    | 10 +++++-----
 7 files changed, 28 insertions(+), 28 deletions(-)

commit e7562f53fe6a506d2c6d59d6688e4fa468bba462
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 11:05:36 2013 -0500

    Fix compile warnings for ragel-generated machines

 src/hb-ot-shape-complex-indic-machine.rl   | 2 +-
 src/hb-ot-shape-complex-myanmar-machine.rl | 2 +-
 src/hb-ot-shape-complex-sea-machine.rl     | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 4e51df73a337f7232a7dfa85df78a4f19b24771b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 07:42:42 2013 -0500

    [OTLayout] Remove unused function

 src/hb-ot-layout-gsubgpos-private.hh | 5 -----
 1 file changed, 5 deletions(-)

commit 8820bb235b1f63e4d93c8a2f5c08b44d89e06b78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 07:41:03 2013 -0500

    [OTLayout] Port apply_lookup to skippy_iter

 src/hb-ot-layout-gsubgpos-private.hh | 50
 +++++++++++++++++++++++++-----------
 1 file changed, 35 insertions(+), 15 deletions(-)

commit dfca269f069dae2f99990dac24da15d316eccb9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 07:20:52 2013 -0500

    [OTLayout] Port ligate_input to skippy_iter

 src/hb-ot-layout-gsubgpos-private.hh | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 7e53415c2d8859e8b5948a2edb38c39a8f78b825
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 14 06:24:30 2013 -0500

    [OTLayout] Minor fix for apply_lookup()

    Should NOT change behavior, since first glyph is a match.

 src/hb-ot-layout-gsubgpos-private.hh | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 6880f7e19d44c50e45ecb86d26381aad956d9acb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 12:17:25 2013 -0500

    [OTLayout] Make table type known to apply context

 src/hb-ot-layout-gsubgpos-private.hh	    | 5 ++++-
 src/hb-ot-layout.cc			    | 4 ++--
 src/hb-ot-shape-complex-arabic-fallback.hh | 2 +-
 3 files changed, 7 insertions(+), 4 deletions(-)

commit 2c7d0b6b80d412de3fddd443ed1a485ea1cbb03c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 12:10:08 2013 -0500

    [OTLayou] Unbreak backtrack matching

    Was introduced by 28b9d502bb69a8045818d5f6113ded9c59a56bd7.

 src/hb-ot-layout-gsubgpos-private.hh | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit c074ebc466dcc9bcc0d8a5dd7e942dea974ff718
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 11:22:42 2013 -0500

    [OTLayout] Minor refactoring

 src/hb-ot-layout-gpos-table.hh       |  9 ++++++---
 src/hb-ot-layout-gsubgpos-private.hh | 30 +++++++++++++++++-------------
 2 files changed, 23 insertions(+), 16 deletions(-)

commit 407fc12466ef460d0edf11b89f0d04c4d724875f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 11:13:06 2013 -0500

    [OTLayout] Remove bogus caching of glyph property

 src/hb-ot-layout-gpos-table.hh       | 21 ++++++++-----------
 src/hb-ot-layout-gsub-table.hh       |  7 +++----
 src/hb-ot-layout-gsubgpos-private.hh | 40
 ++++++++++++++----------------------
 3 files changed, 26 insertions(+), 42 deletions(-)

commit 6b1e3502e23c110dd810f854ba021f83baab1548
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 11:02:54 2013 -0500

    Remember ZWNJ

    To be used in upcoming changes.

 src/hb-ot-shape-private.hh | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 1f91c39677f840a1f630696d16d083060069abf5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 09:38:40 2013 -0500

    Indent

 src/hb-ot-shape-complex-indic.cc | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit a0cb9f33ee064628debe8e848094dfd661334640
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 09:26:55 2013 -0500

    [Indic] Improve base finding in final_reordering

    Fixes 5 Malayalam failures!

    MALAYALAM: 1048016 out of 1048334 tests passed. 318 failed
    (0.0303338%)

 src/hb-ot-shape-complex-indic.cc | 7 +++++++
 1 file changed, 7 insertions(+)

commit 126f39cd16cea87b2696f66467c83a585bd4c2cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 08:29:21 2013 -0500

    Add more dot-reph tests

 .../shaper-indic/indic/script-malayalam/misc/dot-reph.txt	|
 10 ++++++++++
 1 file changed, 10 insertions(+)

commit f22b7e77783fa2f44365e0fe6413c4474c07048d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 07:32:46 2013 -0500

    [Indic] Track base position when reordering things

    Ouch, how did things ever work without this?!  The added test that
    has a
    dot-reph as well as a pre-base reordering Ra perfectly demonstrates
    the
    bug (tested with Nirmala font from Win8 for example).  Testing
    suggests
    that Win8 shaper has the *exact* same bug / behavior that we used to
    have.  Odd.

 src/hb-ot-shape-complex-indic.cc				     |
 6 ++++++
 .../in-tree/shaper-indic/indic/script-malayalam/misc/dot-reph.txt   | 1 +
 2 files changed, 7 insertions(+)

commit bc11de144c0a7a95fa0945aa7f053d8117af282a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 05:59:06 2013 -0500

    [SEA] Don't zero any mark advances

    Keep the logic simple, easier to explain to font developers.

 src/hb-ot-shape-complex-sea.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0291a6528685f1f593707655943fb2360579cb9e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 13 05:57:24 2013 -0500

    Further adjust mark advance zeroing

    This is a followup to 568000274c8edb5f41bc4f876ce21fcc8bdaeed8.
    Looks like in the Latin shaper, Uniscribe zeroes all Unicode NSM
    advances *after* GPOS, not before.	Match that.

    Can be tested using DejaVu Sans Mono, since that font has GPOS
    rules to zero the mark advances on its own.

 src/hb-ot-shape.cc | 33 +++++++++++++++++++++++----------
 1 file changed, 23 insertions(+), 10 deletions(-)

commit 85c51ec2e1d518019e32801ae38659c74fc20d80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 18:17:39 2013 -0500

    [Indic] Fix Eyelash Ra with old Devanagari spec

 src/hb-ot-shape-complex-indic.cc | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit cc5f24cde079b451799562b3af7ce06d932cbe6b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 18:17:12 2013 -0500

    [tests] Add tests for Devanagary Eyelash Ra

    Currently broken with Sanskrit 2003 font.

 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/MANIFEST	|
 1 +
 .../in-tree/shaper-indic/indic/script-devanagari/misc/eyelash.txt	|
 3 +++
 2 files changed, 4 insertions(+)

commit 63e48bc33b68f940c351af623a55a4cf650db102
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 17:57:49 2013 -0500

    [Indic] Apply 'blwf' before 'half'

    This reverts 167b625d988b74572d6b2f646c285b666b650d49.  It didn't
    matter before, but that's going to change with next commit.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 70d656571194d2bd32671244530edbe159722cec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 18:01:21 2013 -0500

    [Indic] Apply 'vatu' before 'cjct'

    This essentially reverts 1d6846db9ebf84561bb30a4e48c6c43184914099,
    but that commit is from way back when.  We should be better
    following the spec order now again.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 64bb2ae857cfda35dd71c7f1e962722069674ec6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 16:29:25 2013 -0500

    Didn't mean to push this out

    Ouch!

 test/shaping/hb_test_tools.py | 1 -
 1 file changed, 1 deletion(-)

commit f9b660534c269d2257d6b5e8ec2173ee71668f2f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 16:13:56 2013 -0500

    [Myanmar] Use master Indic table for syllable data

 src/hb-ot-shape-complex-myanmar.cc | 144
 +++++++++----------------------------
 test/shaping/hb_test_tools.py	    |	1 +
 2 files changed, 35 insertions(+), 110 deletions(-)

commit f60793e854393c32337a483c5d1700bf17d767fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 15:45:59 2013 -0500

    [tests] Add Cham sample

 test/shaping/texts/in-tree/shaper-sea/script-cham/misc/misc.txt | 1 +
 1 file changed, 1 insertion(+)

commit e2aab4b5db88c368c11cee81368b9ad41399e585
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 15:35:32 2013 -0500

    Improve checks for setmode()

    As reported by Jonathan, OS X has setmode() that is something other
    than what setmode() is on Win32.  So, limit invocation to Windows
    platforms only.

 configure.ac	 | 4 ++--
 util/options.cc | 4 ++--
 util/options.hh | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit a6c1e040e594faeefd61b456ef995c7886cdea78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 15:31:58 2013 -0500

    Improve check for Windows platforms

    Instead of checking for compiler, check for platform.

 src/hb-atomic-private.hh | 2 +-
 src/hb-mutex-private.hh  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9e1f80ab3eea4a74cdaa6a390e4925a479ece1c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 15:28:21 2013 -0500

    [SEA] Treat Consonant_Final like Consonant_Medial

 src/hb-ot-shape-complex-indic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bab02d339f39ed5168daaef9461227f78e596a2f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 15:26:45 2013 -0500

    Rename HB_OT_INDIC_OPTIONS env var to HB_OPTIONS

    The Myanmar shaper now respects the uniscribe-bug-compatibility
    option too.

 src/hb-common.cc		    | 20 ++++++++++++--
 src/hb-ot-shape-complex-indic.cc   | 53
 ++++----------------------------------
 src/hb-ot-shape-complex-myanmar.cc |  7 ++---
 src/hb-private.hh		    | 29 +++++++++++++++++++++
 4 files changed, 54 insertions(+), 55 deletions(-)

commit 3a83d33ec0b1be6f5992816ff5ebb0f43c8dff00
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 12:14:10 2013 -0500

    Add South-East Asian shaper

    Handles Tai Tham, Cham, and New Tai Lue for now.

 src/Makefile.am				    |  12 +-
 src/gen-indic-table.py				    |	9 +-
 src/hb-ot-shape-complex-indic-private.hh	    | 241 +-----
 src/hb-ot-shape-complex-indic-table.cc		    | 869
 ++++++++++++++++++++
 src/hb-ot-shape-complex-indic-table.hh		    | 872
 ---------------------
 src/hb-ot-shape-complex-indic.cc		    | 239 ++++++
 src/hb-ot-shape-complex-myanmar.cc		    |	2 +-
 src/hb-ot-shape-complex-private.hh		    |  28 +-
 src/hb-ot-shape-complex-sea-machine.rl		    | 102 +++
 src/hb-ot-shape-complex-sea.cc			    | 400 ++++++++++
 test/shaping/texts/in-tree/MANIFEST		    |	1 +
 .../in-tree/shaper-indic/south-east-asian/MANIFEST |	1 -
 .../south-east-asian/script-new-tai-lue/MANIFEST   |	1 -
 .../script-new-tai-lue/misc/MANIFEST		    |	1 -
 .../script-new-tai-lue/misc/misc.txt		    |	1 -
 test/shaping/texts/in-tree/shaper-myanmar/MANIFEST |	1 +
 test/shaping/texts/in-tree/shaper-sea/MANIFEST     |	3 +
 .../texts/in-tree/shaper-sea/script-cham/MANIFEST  |	1 +
 .../in-tree/shaper-sea/script-cham/misc/MANIFEST   |	1 +
 .../in-tree/shaper-sea/script-cham/misc/misc.txt   |	1 +
 .../in-tree/shaper-sea/script-new-tai-lue/MANIFEST |	1 +
 .../shaper-sea/script-new-tai-lue/misc/MANIFEST    |	1 +
 .../shaper-sea/script-new-tai-lue/misc/misc.txt    |	1 +
 .../in-tree/shaper-sea/script-tai-tham/MANIFEST    |	1 +
 .../shaper-sea/script-tai-tham/misc/MANIFEST	    |	1 +
 .../shaper-sea/script-tai-tham/misc/misc.txt	    |	2 +
 26 files changed, 1661 insertions(+), 1132 deletions(-)

commit fb960212063016656dfaba83f072c81d1efc3202
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 10:33:58 2013 -0500

    Minor test reshufflings

 test/shaping/texts/in-tree/MANIFEST
 | 1 +
 test/shaping/texts/in-tree/script-default/MANIFEST
 | 1 +
 test/shaping/texts/in-tree/script-default/misc/MANIFEST
 | 1 +
 test/shaping/texts/in-tree/script-default/misc/misc.txt
 | 1 +
 test/shaping/texts/in-tree/shaper-indic/MANIFEST
 | 1 -
 test/shaping/texts/in-tree/shaper-indic/south-asian/MANIFEST
 | 1 -
 .../texts/in-tree/shaper-indic/south-asian/script-tibetan/MANIFEST
 | 1 -
 .../texts/in-tree/shaper-indic/south-asian/script-tibetan/misc/MANIFEST
 | 1 -
 .../texts/in-tree/shaper-indic/south-asian/script-tibetan/misc/misc.txt
 | 1 -
 test/shaping/texts/in-tree/shaper-indic/south-east-asian/MANIFEST
 | 1 -
 .../texts/in-tree/shaper-indic/south-east-asian/script-thai/MANIFEST
 | 1 -
 .../in-tree/shaper-indic/south-east-asian/script-thai/misc/MANIFEST
 | 0
 12 files changed, 4 insertions(+), 7 deletions(-)

commit 5676d5d52784e16068ae483103d59111a8081854
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 10:31:14 2013 -0500

    [Indic] Make sure New Tai Lue works!

 src/hb-ot-shape-complex-private.hh			      | 12
 ++++++++----
 .../texts/in-tree/shaper-indic/south-east-asian/MANIFEST     |  1 +
 .../south-east-asian/script-new-tai-lue/MANIFEST	      |  1 +
 .../south-east-asian/script-new-tai-lue/misc/MANIFEST	      |  1 +
 .../south-east-asian/script-new-tai-lue/misc/misc.txt	      |  1 +
 5 files changed, 12 insertions(+), 4 deletions(-)

commit 568000274c8edb5f41bc4f876ce21fcc8bdaeed8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 09:44:57 2013 -0500

    Adjust mark advance-width zeroing logic for Myanmar

    Before, we were zeroing advance width of attached marks for
    non-Indic scripts, and not doing it for Indic.

    We have now three different behaviors, which seem to better
    reflect what Uniscribe is doing:

      - For Indic, no explicit zeroing happens whatsoever, which
	is the same as before,

      - For Myanmar, zero advance width of glyphs marked as marks
	*in GDEF*, and do that *before* applying GPOS.	This seems
	to be what the new Win8 Myanmar shaper does,

      - For everything else, zero advance width of glyphs that are
	from General_Category=Mn Unicode characters, and do so
	before applying GPOS.  This seems to be what Uniscribe does
	for Latin at least.

    With these changes, positioning of all tests matches for Myanmar,
    except for the glitch in Uniscribe not applying 'mark'.  See preivous
    commit.

 src/hb-ot-layout-gpos-table.hh     | 12 ++++--------
 src/hb-ot-layout-private.hh	    |  3 +--
 src/hb-ot-layout.cc		    |  4 ++--
 src/hb-ot-shape-complex-arabic.cc  |  2 +-
 src/hb-ot-shape-complex-default.cc |  2 +-
 src/hb-ot-shape-complex-indic.cc   |  2 +-
 src/hb-ot-shape-complex-myanmar.cc |  2 +-
 src/hb-ot-shape-complex-private.hh |  9 ++++++++-
 src/hb-ot-shape-complex-thai.cc    |  2 +-
 src/hb-ot-shape.cc		    | 31 +++++++++++++++++++++++++++++--
 10 files changed, 49 insertions(+), 20 deletions(-)

commit 99749ca8e0c4c8dbea4620f07c4d0e6d1515cc65
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 12 09:44:35 2013 -0500

    [Myanmar] Add note re Uniscribe NOT applying 'mark'

 src/hb-ot-shape-complex-myanmar.cc | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

commit b8427801381180da9611b2e3e0f0b3514274de81
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 17:02:17 2013 -0500

    Minor

 src/hb-atomic-private.hh | 2 +-
 src/hb-mutex-private.hh  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 419c933ed1b5d97c7561546536ef5810a7b0ebd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 16:16:16 2013 -0500

    [Myanmar] Fix handling of Punctuation and Symbol types

    Testing with "clusters" now on par with testing without them.  15
    failures both.

 src/hb-ot-shape-complex-myanmar.cc | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 0572c1410a9cb0ac5dd5dc84a8034698cc5c4892
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 16:06:02 2013 -0500

    [Myanmar] Fixup handling of joiners and GB characters

 src/hb-ot-shape-complex-myanmar-machine.rl |  6 ++----
 src/hb-ot-shape-complex-myanmar.cc	    | 19 +++++++++++++++++--
 2 files changed, 19 insertions(+), 6 deletions(-)

commit 1c8654ead41ca746d577549c92d2a41c594ab639
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 14:27:02 2013 -0500

    [Myanmar] Prevent reordering between Asat and Dot below

    Implemented as a hack for now.  Myanmar failures down from 23 to 15.

    MYANMAR: 1123868 out of 1123883 tests passed. 15 failed (0.00133466%)

    The remaining 15 cases are all where the syllable is wrong according
    to
    the OpenType spec.	We insert dottedcircle.  Uniscribe fails to
    do that,
    but it also fails to reorder the prebase-reordering medial-Ra.  So it
    gets it wrong.

 src/hb-unicode-private.hh | 3 +++
 1 file changed, 3 insertions(+)

commit bed687f886b8def06642ad986648e9149a935add
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 14:24:03 2013 -0500

    Shuffle test data around

 test/shaping/texts/in-tree/MANIFEST		    |  1 +
 .../in-tree/shaper-indic/south-east-asian/MANIFEST |  1 -
 .../south-east-asian/script-myanmar/MANIFEST	    |  1 -
 .../south-east-asian/script-myanmar/misc/MANIFEST  |  2 --
 .../south-east-asian/script-myanmar/misc/misc.txt  |  1 -
 .../south-east-asian/script-myanmar/misc/utn11.txt | 34
 ----------------------
 .../south-east-asian/script-thai/misc/MANIFEST     |  1 -
 .../south-east-asian/script-thai/misc/misc.txt     | 11 -------
 .../in-tree/shaper-myanmar/script-myanmar/MANIFEST |  1 +
 .../shaper-myanmar/script-myanmar/misc/MANIFEST    |  2 ++
 .../shaper-myanmar/script-myanmar/misc/misc.txt    |  1 +
 .../shaper-myanmar/script-myanmar/misc/utn11.txt   | 34
 ++++++++++++++++++++++
 .../in-tree/shaper-thai/script-thai/misc/MANIFEST  |  1 +
 .../in-tree/shaper-thai/script-thai/misc/misc.txt  | 11 +++++++
 14 files changed, 51 insertions(+), 51 deletions(-)

commit 98628cac9f733f2674d6409954cddb7d0634c233
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 13:36:23 2013 -0500

    Add Win8-style Myanmar shaper

    Myanmar failures down from 51% to 0.00204648%!

    MYANMAR: 1123860 out of 1123883 tests passed. 23 failed (0.00204648%)

 src/Makefile.am			    |  14 +-
 src/hb-ot-shape-complex-indic.cc	    |	2 -
 src/hb-ot-shape-complex-myanmar-machine.rl | 127 ++++++
 src/hb-ot-shape-complex-myanmar.cc	    | 599
 +++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-private.hh	    |	5 +-
 5 files changed, 740 insertions(+), 7 deletions(-)

commit 1df56449586bd32275a6fa69dcadd5fb77a84f82
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 14:17:54 2013 -0500

    Minor

 src/hb-ot-shape-complex-indic.cc | 3 ---
 1 file changed, 3 deletions(-)

commit 54f7b4d9ec13f8454aa298534da318c023fa3c63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 13:27:17 2013 -0500

    [OTLayout] Respect lookup-flags skipping over non-mark glyphs

    Before, when matching ligatures, we never skipping over base / liga
    glyphs even if that was what the LookupFlags asked for.

    Fixed now.	We carefully reviewed all instances of this, and
    tested with
    Amiri as well as some Indic scripts, and are confident that this
    should
    NOT break anyone's fonts.  It's also how Uniscribe does it, from what
    we can tell.

 src/hb-ot-layout-gpos-table.hh       |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 25 ++++++++++---------------
 2 files changed, 11 insertions(+), 16 deletions(-)

commit 9082efc4aacb34de8574d6a4a3c037987df58bd8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 13:14:15 2013 -0500

    [OTLayout] s/mark_skipping/skipping/

    In aticipation of upcoming changes.

 src/hb-ot-layout-gpos-table.hh       | 12 ++++++------
 src/hb-ot-layout-gsubgpos-private.hh | 28 ++++++++++++++--------------
 2 files changed, 20 insertions(+), 20 deletions(-)

commit 9621e0ba294c9cc6d458bbf632e63e92fda71e10
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 06:58:27 2013 -0500

    [Indic] Fix bug introduced in 8b217f5ac54aa0dcbba2dd6d59aa89dde33e56c2

    Was breaking reph formation logic when the Ra is the only consonant.
    Devanagari regression fixed.  Down to 57 failures again.  Ouch.

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6e74c64211b6aaac48bae8c87f9420d8dc03fd93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 11 06:50:17 2013 -0500

    Improve normalization heuristic

    Before, for most scripts, we were not trying to recompose two
    characters
    if the second one had ccc=0.  That fails for Myanmar where U+1026
    decomposes to U+1025,U+102E, both of which have ccc=0.  However, we do
    want to try to recompose those.  We now check whether the second is a
    mark, using general category instead.

    At the same time, remove optimization that was conflicting with this.

    [Let the Ngapi hackfest begin!]

 src/hb-ot-shape-normalize.cc | 39 +++++++++++++--------------------------
 1 file changed, 13 insertions(+), 26 deletions(-)

commit 614242efb043f2ed78916377138d456279a20a54
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 6 23:45:27 2013 -0500

    Revert "Include config.h.in in tree"

    This reverts commit 01013a0f5c58d5d54a37e5b4d6692e0bbd4baf80.

    Conflicts:
	config.h.in

    Same argument as previous commit.

 Makefile.am |	 1 +
 config.h.in | 153
 ------------------------------------------------------------
 2 files changed, 1 insertion(+), 153 deletions(-)

commit adff3778155facb7b149ce66ab7d573368e048de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 6 23:43:27 2013 -0500

    Revert "[Indic] Import ragel-generated Indic machine in git"

    This reverts commit fab7a71f110ed646745d54b23284537c50058c21.

    Conflicts:
	src/hb-ot-shape-complex-indic-machine.hh

    Keeping that generated file in-tree causes problems with processes
    like
    tinderbox  that automatically fetch and build harfbuzz.  It's harder
    to
    bootstrap harfbuzz now (as was previously), but I'm willing to
    give this
    another chance and see how it goes.

 autogen.sh				  |    6 +
 src/Makefile.am			  |    1 +
 src/hb-ot-shape-complex-indic-machine.hh | 1443
 ------------------------------
 3 files changed, 7 insertions(+), 1443 deletions(-)

commit 5898fa94d12b19686f649104bd6efe8daa1ba0c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 6 15:29:07 2013 -0500

    Don't use $(ENV)

    As reported by Peter Breitenlohner:

    I think this is a very bad idea because ENV is used to specify
    a startup
    file to be read by some/all shells.

 test/api/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52d66c26a2102bd1a49463b8e8f04612598f8ac1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 4 23:31:24 2013 -0500

    Add color-tests automake option

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9de5f98f363d96f308adc33f1c2286e5c33117de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 4 23:28:22 2013 -0500

    Bug 60035 - intermittent make install failure on hb-version.h

 src/Makefile.am | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 6c1e8b614cfd6ed016fba6bf20af1e422e79eb71
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 4 23:24:16 2013 -0500

    Bug 59637 - check-exported-symbols.sh & check-internal-symbols.sh
    fail on mips/mipsel

 src/check-symbols.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bafdf3d983dcc277d6e7e322277c0bb25b41a173
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 4 23:06:50 2013 -0500

    Merge check-internal-symbols.sh and check-exported-symbols.sh

 src/Makefile.am	       |  3 +--
 src/check-exported-symbols.sh | 40 ----------------------------------
 src/check-internal-symbols.sh | 34 -----------------------------
 src/check-symbols.sh	       | 50
 +++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 51 insertions(+), 76 deletions(-)

commit ceeae30f47b9d628484ae398bc38f3f60ee8eab4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 31 19:27:36 2013 -0500

    Really fix setmode this time

    Thanks to Khaled for spotting it.

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7cba8a673b4b436a737fc4ffe85dc84ddd2bf41f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 31 18:37:10 2013 -0500

    Fixup previous commit

    Now, it looks like this breaks Cygwin again.  Have to figure out
    what's
    going on.

 util/options.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bc76449f51f20491a4540b4f240f5a3e0dcb20fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 31 18:18:05 2013 -0500

    Use setmode() instead of _setmode()

    Looks like Cygwin / MSVC declare it that way, and it still works on
    MinGW32 cross.

 config.h.in	 | 6 +++---
 configure.ac	 | 2 +-
 util/options.cc | 2 +-
 util/options.hh | 2 +-
 4 files changed, 6 insertions(+), 6 deletions(-)

commit e9171af55cc6a402eb20db4ea74c86a0b1e70e85
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 29 22:45:00 2013 -0500

    Bug 60053 - hb-common.cc:181:6: warning: ‘void free_langs()’
    defined but not used

 src/hb-common.cc | 2 +-
 src/hb-ft.cc	  | 2 +-
 src/hb-shape.cc  | 2 +-
 src/hb-shaper.cc | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 09b5393874e56fcfd63a92d28e6c1c2ddeee0942
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 18 17:10:47 2013 -0600

    0.9.12

 NEWS	      | 7 +++++++
 configure.ac | 2 +-
 2 files changed, 8 insertions(+), 1 deletion(-)

commit eb45c0a2fbaeeb34e77a2935934e8d1302728ec8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 16 22:07:50 2013 -0600

    Minor

 src/hb-ot-layout.cc | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 52c8d1226f3509276b11a1fadbd29e5363c0ecd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 14 13:51:46 2013 -0600

    Minor

 src/hb-blob.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f88d3bd7e407d332bb04688344c54756d24128c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 14 00:33:58 2013 -0600

    Fix build with Sun compiler

 src/hb-blob.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 08b29c08094097f1c23ec53b10084bc390cea833
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 14 00:32:12 2013 -0600

    Revert "Minor"

    This reverts commit 0a492357016bc9a614d2a726f2006c10af68ca58.

    Enables code on more compilers.

 src/hb-warning.cc | 33 ++++++++++++++++++++++++++++++---
 1 file changed, 30 insertions(+), 3 deletions(-)

commit e78463211e7d85f237bd55afab7e8e5dae42346c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 14 00:27:21 2013 -0600

    Fix linking with non-gcc compilers

 configure.ac	 | 2 ++
 src/Makefile.am | 6 +++++-
 2 files changed, 7 insertions(+), 1 deletion(-)

commit de649f07f1f8fdeb998a0b049759f4f7363e25d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 14 00:26:43 2013 -0600

    Fix residuals from fontconfig changes

 src/hb-atomic-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit cf81fb3624466b9df2250b58b27a92187c5b5b5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 10 09:06:34 2013 -0600

    0.9.11

 NEWS	      | 14 ++++++++++++++
 configure.ac |  2 +-
 2 files changed, 15 insertions(+), 1 deletion(-)

commit 2dcb333f52492018816f0d5d67a47634a612e49c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 10 01:17:59 2013 -0600

    Add atomic ops for Solaris

    Based on fontconfig patch from Raimund Steger.

 config.h.in		  |  5 ++++-
 configure.ac		  | 27 +++++++++++++++++++++++++--
 src/hb-atomic-private.hh | 12 ++++++++++++
 3 files changed, 41 insertions(+), 3 deletions(-)

commit 69fd6e157c7ec83a5d5d8731fc14675ce4509b09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 10 00:03:36 2013 -0600

    Fix crasher during multi-thread shaper data creation

    Sample crash:

    0  _hb_graphite2_shaper_face_data_destroy (data=0xffffffffffffffff)
	at ../../src/hb-graphite2.cc:129
    1  0x00007ffff4271d7d in hb_graphite2_shaper_face_data_ensure (
	face=<optimized out>) at ../../src/hb-shaper-list.hh:35
    2  hb_shape_plan_plan (shaper_list=<optimized out>,
    num_user_features=0,
	user_features=0x0, shape_plan=0xf7b490) at
	../../src/hb-shaper-list.hh:35
    3  hb_shape_plan_create (face=<optimized out>, props=<optimized out>,
	user_features=0x0, num_user_features=0, shaper_list=<optimized
	out>)
	at ../../src/hb-shape-plan.cc:108
    4  0x00007ffff4272c93 in hb_shape_plan_create_cached (face=0x10cf2b0,
	props=0x11980d8, user_features=0x0, num_user_features=<optimized
	out>,
	shaper_list=0x0) at ../../src/hb-shape-plan.cc:283

 src/hb-shaper-private.hh | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit ecd454b3cd75050e0c95e1d2aa55744559338ec8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 8 18:09:46 2013 -0600

    [Indic] In old-spec shaping, don't move viramas around if seq ends
    with one

    For example: u0c9a u0ccd u0c9a u0ccd with Lohit.  See:

    https://bugs.freedesktop.org/show_bug.cgi?id=59118

 src/hb-ot-shape-complex-indic.cc				    |
 7 ++++---
 .../texts/in-tree/shaper-indic/indic/script-kannada/misc/misc.txt  | 1 +
 2 files changed, 5 insertions(+), 3 deletions(-)

commit e95e031b5682809488cc965883e15404cb9cfb6a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 8 16:15:46 2013 -0600

    [GPOS] If an Anchor offset is NULL, return false

    If in a MarkPos table, a base has no anchor for a particular mark
    class,
    return NULL such that the subsequent subtables get a chance at it.

    Test case:
    hb-shape ./EBGaramond12-Regular.otf ἂ --features="ss20","smcp"

 src/hb-open-type-private.hh	| 14 ++++++++++++--
 src/hb-ot-layout-gpos-table.hh | 10 ++++++++--
 2 files changed, 20 insertions(+), 4 deletions(-)

commit e5dbf39900fa63051f64cc447a6742665cbee339
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 7 17:34:24 2013 -0600

    Bug 58638 - Building fails with ICU due to not passing required flags

 configure.ac | 1 +
 1 file changed, 1 insertion(+)

commit 1172dc736280566426eb6dade1a886b2a0ca9aa4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 7 16:46:37 2013 -0600

    Rename hb_buffer_clear() to hb_buffer_clear_contents()

    The previous name was clashing with harfbuzz.old.  There are systems
    that need to link both...

    Clash-free now again.

 src/hb-buffer.cc	| 2 +-
 src/hb-buffer.h	| 2 +-
 test/api/test-buffer.c | 2 +-
 util/options.hh	| 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 7b912c1936c3e8a7df27a30782ca127d0a83822d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 4 01:25:27 2013 -0600

    Remove a few unnecessary const's

    Apparently helps with MSVC compilation.

 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 34e6c3e3e452bdf6f93df565a70453a6e74d4c6e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 3 00:14:24 2013 -0600

    0.9.10

 NEWS	      | 24 ++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 25 insertions(+), 1 deletion(-)

commit f0c82410dbe800cb6429ba4aa7cfd9f5a11cc70c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 3 00:07:16 2013 -0600

    [OTLayout] Always collect default language system in collect_lookups

    Not sure if this is the most desired behavior.  It's the most easily
    defined though.

 src/hb-ot-layout.cc | 7 +++++++
 1 file changed, 7 insertions(+)

commit 15e9e4e1ddaad655988144e7a56a765e8adf8782
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 3 00:04:40 2013 -0600

    [OTLayout] Fix feature iteration in collect_lookups

    Previous logic was just wrong.

 src/hb-ot-layout.cc | 46 ++++++++++++++++++++++++++++++++--------------
 1 file changed, 32 insertions(+), 14 deletions(-)

commit 733e8c0d7bf0765884f2cc953c8edcd7ab7fb49b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 3 00:00:23 2013 -0600

    [OTLayout] Whitespace

 src/hb-ot-layout.cc | 82
 ++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 68 insertions(+), 14 deletions(-)

commit d37ae38047bee12639741af9bb083b857fab950d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 23:57:36 2013 -0600

    [OTLayout] Handle required_feature_index in collect_lookups

 src/hb-ot-layout.cc | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 11fba79ee9383eb995ddf7eb924dd64c67e2df63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 23:36:37 2013 -0600

    [OTLayout] Fix various introspection issues with ClassDef's

    As reported by Jonathan Kew.

 src/hb-ot-layout-gsubgpos-private.hh | 19 +++++++++++++++----
 1 file changed, 15 insertions(+), 4 deletions(-)

commit e81aff9ef785be28751aab1fcd484af550656181
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 23:22:54 2013 -0600

    [tests] Finish test-set.c

    All passing now.

 test/api/test-set.c | 373
 +++++++++++++++++++++-------------------------------
 1 file changed, 149 insertions(+), 224 deletions(-)

commit 7b1b720a8da69b68b775ce17104a40d55401b7ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 23:02:59 2013 -0600

    Protect sets in-error from further modication

    Fixes test-set.c

 src/hb-set-private.hh | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 8165f2765b93e99577ecc79b7956ae38c614bc78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 22:50:36 2013 -0600

    [tests] Start adding tests for hb-set.h

    Fails now.	Fixing.

 TODO		       |   2 -
 src/hb-set-private.hh |   6 +
 src/hb-set.cc	       |   9 +-
 src/hb-set.h	       |   3 +
 test/api/Makefile.am  |   1 +
 test/api/test-set.c   | 312
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 330 insertions(+), 3 deletions(-)

commit b9d28f696c433b94c5ffbad8d7c87cf3acff4056
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 22:49:58 2013 -0600

    [tests] Add set object to test-object.c

 test/api/test-object.c | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit 11d2956553f0d4a0086166a04ffc352fcfacf56e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 2 17:41:27 2013 -0600

    Minor

 src/hb-atomic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 596740db04e7c1dadae0d8be6e401089fcaffc2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 19:41:04 2012 -0500

    [Indic] Insert dottedcircle after a lone Malayalam dot-reph

 src/hb-ot-shape-complex-indic-machine.hh | 1617
 ++++++++++++++++--------------
 src/hb-ot-shape-complex-indic-machine.rl |    2 +-
 src/hb-ot-shape-complex-indic.cc	  |   13 +-
 3 files changed, 881 insertions(+), 751 deletions(-)

commit 3cdce6497b2b9aeb2841bf077daa9dd9b196429d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:54:22 2012 -0500

    Remove TODO that I don't intend to fix

 TODO | 1 -
 1 file changed, 1 deletion(-)

commit 6f69fa283e0a488da811df78bc83c41ed248b688
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:51:15 2012 -0500

    Minor

 src/hb-shape.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f4abcbfc628718bb276363746440df06e7658f6e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:48:51 2012 -0500

    Minor

 src/hb-buffer.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4a765f092d71bb4adeb468c004987a9121d39db5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:48:47 2012 -0500

    Minor

 util/hb-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9815a88111072aa51e78e258c5f660993b47d4df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:46:53 2012 -0500

    [util] List supported output formats in --help output

 util/hb-shape.cc     | 6 +++---
 util/helper-cairo.cc | 2 +-
 util/helper-cairo.hh | 1 +
 util/options.cc      | 9 ++++++++-
 util/options.hh      | 5 ++++-
 util/view-cairo.hh   | 2 +-
 6 files changed, 18 insertions(+), 7 deletions(-)

commit f95a87b7b813f588c7910ad4785ee68bb452e864
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:35:28 2012 -0500

    [util] List supported output formats in hb-view

 TODO		      |  1 -
 util/helper-cairo.cc | 30 +++++++++++++++++++++++++++++-
 2 files changed, 29 insertions(+), 2 deletions(-)

commit 6bad092aa87bc3e6bbf0b9faf07693e6ebbe55f2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 16:01:52 2012 -0500

    [util] Default to "text" output format in hb-shape

    If you say:

      hb-shape font.ttf text --output-file out.txt

    This was previously failing:

      Unknown output format `txt'; supported formats are: TEXT / JSON

    Now we simply fallback to TEXT if no explicit format was requested.

 util/hb-shape.cc | 11 ++++++++---
 util/options.hh  |  5 +++++
 2 files changed, 13 insertions(+), 3 deletions(-)

commit 8b217f5ac54aa0dcbba2dd6d59aa89dde33e56c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 15:48:32 2012 -0500

    [Indic] Reorder Malayalam dot-reph to after base

    Test sequence is simple: U+0D4E,U+0D15.  The doth-reph should be
    reordered to after the Ka.

    https://bugzilla.redhat.com/show_bug.cgi?id=799565

 src/hb-ot-shape-complex-indic.cc			     | 13
 ++++++++++---
 .../shaper-indic/indic/script-malayalam/misc/MANIFEST	     |	1 +
 .../shaper-indic/indic/script-malayalam/misc/dot-reph.txt   |	1 +
 3 files changed, 12 insertions(+), 3 deletions(-)

commit 742c4ee97e1311e000ebcdf9f33361c4dc6400a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 15:35:03 2012 -0500

    Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 94afeb6ebe27534fc80d7173cc6f67375c3aaca6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 21 11:54:50 2012 -0500

    Add Android.mk

 Android.mk  | 74
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 Makefile.am |	1 +
 2 files changed, 75 insertions(+)

commit d16ddbcbbee39b07a028776995c635119fe3cd98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 20 01:02:36 2012 -0500

    Add build confirmation notice to configure

 configure.ac | 25 +++++++++++++++++++++++++
 1 file changed, 25 insertions(+)

commit e24d8dab749a1a796e7484e18572da5f7a733bd4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 19 15:23:02 2012 -0500

    [TODO] Remove done items

 TODO | 7 -------
 1 file changed, 7 deletions(-)

commit 044d38527664d933c18c751c38fcf6fb4b5f888e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 19 13:00:16 2012 -0500

    Bug 58498 - Tests fail with gold linker on ARM

 src/check-exported-symbols.sh | 2 +-
 src/check-internal-symbols.sh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b68b86daf1a8478b86aeae44a8c39a606ed873cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 18 20:39:40 2012 -0500

    Use C++ linker if ICU is disabled

    Bug 54948 - Undefined symbols: "operator delete(void*)" "operator
    new(unsigned long)" "___cxa_pure_virtual"

 src/Makefile.am | 4 ++++
 1 file changed, 4 insertions(+)

commit 1ffd23cb47a61465d52a7aeebb9c1b676e7c9a7e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 17 23:29:15 2012 -0500

    [OTLayout] Limit alternate-location FeatureParams to 'size' feature

 src/hb-ot-layout-common-private.hh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit efe252e6000558f78075adadb2a3dba25ab67c04
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 17 23:21:05 2012 -0500

    [OTLayout] Fix 'size' featureParams implementation

    Looks at alternate location now.

 src/hb-ot-layout-common-private.hh | 133
 ++++++++++++++++++++++++++++---------
 src/hb-ot-layout.cc		    |  93 ++++----------------------
 2 files changed, 117 insertions(+), 109 deletions(-)

commit e77b4425746ac9eb407ca4e742d962f1955971b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 17 18:42:59 2012 -0500

    [OTLayout] Fix tracing

 src/hb-open-type-private.hh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9b54562d63f1a9e0e5b33d71c32bd1588759ebf1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 17 13:55:36 2012 -0500

    [OTLayout] Towards correct FeatureParams handling

 src/hb-open-type-private.hh	    |  8 +++++++-
 src/hb-ot-layout-common-private.hh | 25 +++++++++++++++++++++++--
 2 files changed, 30 insertions(+), 3 deletions(-)

commit 87e43b7f2be25840748f920ca33ff553833da45f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 14 17:48:23 2012 -0500

    [OTLayout] Wire tag and list start all the way to Feature

    To fix FeatureParam issues.  No actual fix yet, just plumbing.

 src/hb-ot-layout-common-private.hh | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

commit 85bc44b90a19c6a669ed567a9cd8513448600afe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 12 11:38:49 2012 -0500

    [OTLayout] More 'size' feature sanity checking

    We still don't look for the old incorrect place of the featureParams.
    I'll wait till someone actually complains about it...

 src/hb-ot-layout.cc | 99
 ++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 79 insertions(+), 20 deletions(-)

commit 0bae50a36f3022f9bb6b2c001c191eeaaa4ef954
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 11 16:01:31 2012 -0500

    [OTLayout] Add FeatureParamsCharacterVariants struct

    No API yet.

 src/hb-ot-layout-common-private.hh | 52
 +++++++++++++++++++++++++++++++++++---
 1 file changed, 49 insertions(+), 3 deletions(-)

commit bd61bc13ea8ff350ada5449b2cfeb612e66ecafa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 11 16:00:43 2012 -0500

    [OTLayout] Add UINT24 type

 src/hb-open-type-private.hh | 33 ++++++++++++++++++++++-----------
 src/hb-private.hh	     |	4 ++++
 2 files changed, 26 insertions(+), 11 deletions(-)

commit 9cf7f9d4f61741932570afbefdee5edf61f79ae4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 11 14:31:13 2012 -0500

    Make test-size-params write size in points

 src/test-size-params.cc | 18 ++++--------------
 1 file changed, 4 insertions(+), 14 deletions(-)

commit 372fe2b67b1757e809bf33e1e9055a00c5bed304
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 11 14:30:57 2012 -0500

    [OTLayout] Make hb_ot_layout_get_size_params() do some checks

 src/hb-ot-layout.cc | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit 875a5cbc9c37f4264241c43b80afad2628eab749
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 11 14:17:01 2012 -0500

    [OTLayout] Change hb_ot_layout_get_params() API

    And add implementation for StylisticSet UINameID.  No API yet.

 src/hb-ot-layout-common-private.hh | 85
 ++++++++++++++++++++++++++++++++++++--
 src/hb-ot-layout.cc		    | 28 +++++++++----
 src/hb-ot-layout.h		    |  8 +++-
 src/test-size-params.cc	    |  9 +++-
 4 files changed, 115 insertions(+), 15 deletions(-)

commit 5e7e52ddf2b0c4fbc9d933d24336100368d39a5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 10 17:44:22 2012 -0500

    [uniscribe] Enable Uniscribe backend only if it has
    ScriptShapeOpenType()

    Bug 55494 - ScriptItemizeOpenType doesn't exists under Windows XP

 config.h.in  |  6 ------
 configure.ac | 14 +++++++++++++-
 2 files changed, 13 insertions(+), 7 deletions(-)

commit d41c0c955b8ad9b52191ca47e1f3b1bfe606deb1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 10 16:41:20 2012 -0500

    Update config template

 config.h.in | 4 ----
 1 file changed, 4 deletions(-)

commit c48a04e5ea899b82465a0f3f2cfdcffb3bf38f61
Author: John Ralls <jralls@ceridwen.fremont.ca.us>
Date:	Mon Dec 10 16:24:24 2012 -0500

    [coretext] Better test for CoreText

    Instead of checking for ApplicationServices.h, which is present in all
    versions of MacOSX, check for CTFontRef, a CoreText basic type.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0e9f0f3e5f16a45951423a1229af42dc2fd798c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 10 15:25:21 2012 -0500

    Fix atomic ops on iOS

    Patch from John Ralls.

 src/hb-atomic-private.hh | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 5f9569c1391c65d7addff363ad6e5ec9b087f01a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 10 13:38:42 2012 -0500

    Make older MSVC happy

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 071d5b831e6de5f3b24160dc77b139cb040ab886
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 10 00:57:00 2012 -0500

    Work around missing OSAtomicCompareAndSwapPtrBarrier() on OS X 10.4

    Not sure how to handle iOS.

 src/hb-atomic-private.hh | 11 +++++++++++
 1 file changed, 11 insertions(+)

commit e923e6487b25ab86f6f629af480b291e8e5407b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 19:39:40 2012 -0500

    [coretext] Fixed typo

    Oops.  Thanks Khaled for catching this.

 src/hb-coretext.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9a8395824bf51c2ff2cfe0887ecad52b3d2c02e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:47:36 2012 -0500

    [coretext] Add hb_coretext_face_get_cg_font()

    Not sure if it's useful, but it was missing.

 src/hb-coretext.cc | 20 ++++++++++++++------
 src/hb-coretext.h  |  3 +++
 2 files changed, 17 insertions(+), 6 deletions(-)

commit 86112356885fde32163882b6c9dd19a494304f7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:47:09 2012 -0500

    [coretext] Remove hack around GlyphID

    We not namespace our types, so the hack is not needed anymore.

 src/hb-coretext.cc | 4 ----
 1 file changed, 4 deletions(-)

commit 8e58459aeb949591bb5bca340ef9bdd5cfd54e47
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:45:47 2012 -0500

    [graphite2] "Update to new API"

    Part of patch from Martin Hosken.  I believe he knows what he's doing
    :).

 src/hb-graphite2.cc | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

commit a5a4ab3846ef06769784e6469d76eace35e68805
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:44:41 2012 -0500

    [graphite2] Add hb_graphite2_face_get_gr_face and
    hb_graphite2_font_get_gr_font

    Based on patch from Martin Hosken.	I believe it returns NULL if the
    font doesn't have graphite tables, but have not tested.

 src/hb-graphite2.cc | 14 ++++++++++++++
 src/hb-graphite2.h  |	8 +++++++-
 2 files changed, 21 insertions(+), 1 deletion(-)

commit 737ba156442f723d126c7c58c73729786b67c17a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:43:03 2012 -0500

    [graphite2] Preload all tables

    Part of patch from Martin Hosken.

 src/hb-graphite2.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0ae6dbf1b4de8a0326b8a2f201597427cecfb6db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:37:38 2012 -0500

    Minor

 src/hb-uniscribe.cc | 32 ++++++++++++++++----------------
 1 file changed, 16 insertions(+), 16 deletions(-)

commit 3fe5c159d3532f8ce8a85d217a00681225dd8ed1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 9 18:20:19 2012 -0500

    Remove excess return

    Oops!

 src/hb-uniscribe.cc | 1 -
 1 file changed, 1 deletion(-)

commit ba2d543004573e8e4e56df70b7fe2a66a42bc83f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Dec 8 19:28:41 2012 -0500

    Update OT language tags

    Patch from Roozbeh Pournader.

 src/hb-ot-tag.cc | 212
 +++++++++++++++++++++++++++++--------------------------
 1 file changed, 110 insertions(+), 102 deletions(-)

commit aba38173c6b464c2884b73ef6cd4577d4efcebbc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 19:54:48 2012 -0500

    Minor

 src/hb-ot-tag.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 61865745e35eb60aeb59968e7826e37059090780
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 19:42:10 2012 -0500

    Fix test with gold linker

    Bug 57633 - Symbol tests should ignore __bss_start, _edata, _end

 src/check-exported-symbols.sh | 2 +-
 src/check-internal-symbols.sh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b71b0bd9ee64feadd7289e195bc58f6361ce707a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 19:20:31 2012 -0500

    [Indic] Add link to Sinhala split matra section of the Sinhala spec

 src/hb-ot-shape-complex-indic.cc | 5 +++++
 1 file changed, 5 insertions(+)

commit 9a34a50daac3563464e0031f377e85f0c704f2d6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 19:18:18 2012 -0500

    Fix build with C++11

 util/options.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 0beb66e3a61ae8bb1fa66e54b1ff1abb2f8711e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 18:46:04 2012 -0500

    Fix warnings

 src/hb-fallback-shape.cc		    | 10 +++++-----
 src/hb-glib.cc				    |  2 +-
 src/hb-icu-le.cc			    |  6 +++---
 src/hb-old.cc				    | 14 +++++++-------
 src/hb-open-type-private.hh		    |  4 +---
 src/hb-ot-layout-gsubgpos-private.hh	    | 24 ++++++++++++------------
 src/hb-ot-shape-complex-arabic-fallback.hh |  4 ++--
 src/hb-ot-shape-complex-arabic.cc	    |  2 +-
 src/hb-ot-shape-complex-indic-machine.hh   |  2 +-
 src/hb-ot-shape-complex-indic-machine.rl   |  2 +-
 src/hb-ot-shape-complex-indic.cc	    |  6 +++---
 src/hb-ot-shape-complex-thai.cc	    |  2 +-
 src/hb-ot-shape-fallback.cc		    |  4 ++--
 src/hb-private.hh			    |  8 ++++----
 src/hb-ucdn.cc				    | 27
 +++++++++++++++------------
 src/hb-utf-private.hh			    |  4 ++--
 16 files changed, 61 insertions(+), 60 deletions(-)

commit c6408a1009d2370fbdcfa694898819d99d53c3df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 17:36:52 2012 -0500

    0.9.9

 NEWS	      | 8 ++++++++
 configure.ac | 2 +-
 2 files changed, 9 insertions(+), 1 deletion(-)

commit 130bb3f6144afe5c88bb5b4e4c98e7cba03b1e26
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 5 16:49:47 2012 -0500

    Rename VOID and void_t to have HarfBuzz prefix

    Fixes build on Windows.  Ouch!

 src/hb-ot-layout-gsubgpos-private.hh | 22 +++++++++++-----------
 src/hb-private.hh		      | 12 ++++++------
 2 files changed, 17 insertions(+), 17 deletions(-)

commit 4a350d0eb25db60d95638664c892d4c8dacf050b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 17:13:09 2012 -0500

    [OTLayout] Reuse context in collect_glyphs() recursion

 src/hb-ot-layout-gsubgpos-private.hh | 19 +++++++++++++++----
 1 file changed, 15 insertions(+), 4 deletions(-)

commit 8303593ba1db06e402eab52df47f21f13049112d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 17:08:41 2012 -0500

    Minor

    Use pointers instead of references, in preparation for upcoming
    change.

 src/hb-ot-layout-gpos-table.hh       | 28 +++++++++++++-------------
 src/hb-ot-layout-gsub-table.hh       | 30 ++++++++++++++--------------
 src/hb-ot-layout-gsubgpos-private.hh | 38
 ++++++++++++++++++------------------
 3 files changed, 48 insertions(+), 48 deletions(-)

commit 1bcfa06d1173f219809542a7380ce77f1c907bec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 16:58:09 2012 -0500

    [OTLayout] Don't recurse in collect_glyphs() for GPOS

 src/hb-ot-layout-gpos-table.hh       | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 4 ++++
 2 files changed, 5 insertions(+), 1 deletion(-)

commit b5e04c7dc6b78e311d1a14f1f808fac76a64c889
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 15:57:02 2012 -0500

    [ucdn] Match upstream changes

 src/hb-ucdn/ucdn.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit a52f51b21635c626f6e5ccdba505c4df19bcff2c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 15:43:38 2012 -0500

    0.9.8

 NEWS	      | 16 ++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 17 insertions(+), 1 deletion(-)

commit 7babfe5a7904c26060c5b8441ca1bf23e1444f35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 00:35:54 2012 +0200

    Move object mutext into the user-data array

    We are not using it for anything lse it seems.

 src/hb-common.cc	  | 12 ++----------
 src/hb-object-private.hh | 24 ++++++++++--------------
 2 files changed, 12 insertions(+), 24 deletions(-)

commit a1900114770952778563dd6f3bc79334b0ca8df5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 4 00:29:35 2012 +0200

    Remove unused functions

 src/hb-object-private.hh | 20 --------------------
 1 file changed, 20 deletions(-)

commit 88b7564183ae1cf59500b13c7e48756fe200c7cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 2 19:14:29 2012 +0200

    "Update" to Unicode 6.2.0 tables

    Nothing changed...

 src/hb-ot-shape-complex-arabic-table.hh |  4 ++--
 src/hb-ot-shape-complex-indic-table.hh  | 12 ++++++------
 2 files changed, 8 insertions(+), 8 deletions(-)

commit 4ab99fb8c363cfc6a4f5952e69a19757f0cab344
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 15:02:04 2012 +0200

    Minor

 src/hb-ot-layout.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6748b96d27477b35dd69129e55d861259d66bf9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 12:02:21 2012 +0200

    Minor

 src/hb-ot-layout.cc | 1 -
 1 file changed, 1 deletion(-)

commit 624933f67642997ee0a46d5acea285362e837142
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 11:46:35 2012 +0200

    Add Persian test cases from Mehran Mehr

 test/shaping/texts/in-tree/shaper-arabic/script-arabic/MANIFEST   | 1 +
 .../in-tree/shaper-arabic/script-arabic/language-persian/MANIFEST | 1 +
 .../shaper-arabic/script-arabic/language-persian/mehran.txt	   |
 8 ++++++++
 3 files changed, 10 insertions(+)

commit 0f3f5299047e3cfc4d1202fee83d484b871279ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 09:06:59 2012 +0200

    Add test-size-params

    Eventually this will become part of a yet-to-be-written hb-ot cmdline
    tool.

 src/Makefile.am	 | 10 ++++-
 src/test-size-params.cc | 98
 +++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 107 insertions(+), 1 deletion(-)

commit 8465a05a89742295d4b009a9b4442eb0a899fd80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:46:43 2012 +0200

    Fix hb_buffer_guess_segment_properties() for empty buffer

    Was causing assertion failure in shape_plan().

 src/hb-buffer.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e75943de803f571b7ad2cf2f777119753a209656
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:38:24 2012 +0200

    [OTLayout] Fix collect_glyphs() recursion in ContextFormat3

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3038ae6adbb61e55d6c665dea0c5271e0c9f0ed8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:24:13 2012 +0200

    [OTLayout] Minor

 src/hb-ot-layout-gpos-table.hh | 4 ----
 src/hb-ot-layout-gsub-table.hh | 4 ----
 src/hb-ot-layout.cc		| 4 ++--
 3 files changed, 2 insertions(+), 10 deletions(-)

commit 0dff11f6bfbda444a153ca75ff2b947f94e9b3c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:14:20 2012 +0200

    [OTLayout] Look for any 'size' feature, not only in DFLT script

    The old code doesn't work with all fonts, as Khaled has reported.

 src/hb-ot-layout.cc | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit e9ad71dee845407da74ccacfbb53ad7ededf07fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:10:26 2012 +0200

    [OTLayout] Rename hb_ot_layout_position_get_size() to
    hb_ot_layout_get_size_params()

 src/hb-ot-layout.cc | 4 ++--
 src/hb-ot-layout.h  | 7 ++++---
 2 files changed, 6 insertions(+), 5 deletions(-)

commit f18ff5a84d9fe859c40a7a0c9a207cb40df0e84a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 30 08:07:06 2012 +0200

    [OTLayout] Return correct value from recursion

    Commit 4c4e8f0e754b79ac6190d21878eaaf0b790c7579 broke contextual
    lookups
    by making the recurse() function always return false.

    Reported by Khaled.  Test case: لا in Amiri.

 src/hb-ot-layout-gsubgpos-private.hh | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit f54cce3c6a0432268ce159dbe6c5c6b7f583b87a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 26 14:02:31 2012 +0200

    [OTLayout] Implement 'size' feature

 src/hb-ot-layout-common-private.hh | 36
 ++++++++++++++++++++++++++++++++++--
 src/hb-ot-layout.cc		    | 31 +++++++++++++++++++++++++++++++
 src/hb-ot-layout.h		    |  5 +++++
 3 files changed, 70 insertions(+), 2 deletions(-)

commit 2dc1141d7d0a9f5818862b09d6b9cfe0a27f1fc1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 19:16:34 2012 -0500

    [OTLayout] Remove operator() from ClassDef

 src/hb-ot-layout-common-private.hh   | 2 --
 src/hb-ot-layout-gpos-table.hh       | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 3 files changed, 6 insertions(+), 8 deletions(-)

commit b67881b171a7cf865af58df146da52fc1e27b160
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 19:13:55 2012 -0500

    [OTLayout] Remove operator() from Coverage

 src/hb-ot-layout-common-private.hh   |  2 --
 src/hb-ot-layout-gdef-table.hh       |  4 ++--
 src/hb-ot-layout-gpos-table.hh       | 24 ++++++++++++------------
 src/hb-ot-layout-gsub-table.hh       | 24 ++++++++++++------------
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++--------
 5 files changed, 34 insertions(+), 36 deletions(-)

commit a88e7160217b9f44e4e5b4b814d0ca98c457ee40
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 02:31:02 2012 -0500

    [OTLayout] Implement hb_ot_layout_collect_lookups()

    Untested.

 src/hb-ot-layout.cc | 97
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout.h  |	4 +--
 2 files changed, 98 insertions(+), 3 deletions(-)

commit 1ea375da446bf68f705a70ce4a480db9fb9d13f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 02:05:52 2012 -0500

    [OTLayout] Only collect output glyphs during recursion in
    collect_glyphs()

 src/hb-ot-layout-gsubgpos-private.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit f1b12781d279a73b5754afee31e930b5cd87aac6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 01:55:34 2012 -0500

    [OTLayout] Implement ChainContext collect_glyphs()

    All of collect_glyphs() complete and untested now.

 src/hb-ot-layout-gsubgpos-private.hh | 103
 ++++++++++++++++++++++++++++++++---
 1 file changed, 96 insertions(+), 7 deletions(-)

commit cdd756b9f40665a201f5c4e65a87b9a27c390601
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 01:38:41 2012 -0500

    [OTLayout] Implement GPOS collect_glyphs()

 src/hb-ot-layout-gpos-table.hh | 95
 +++++++++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout.cc		|  9 ++--
 2 files changed, 99 insertions(+), 5 deletions(-)

commit 4c4e8f0e754b79ac6190d21878eaaf0b790c7579
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 01:13:20 2012 -0500

    [OTLayout] Reuse apply context for recursion

 src/hb-ot-layout-gpos-table.hh       | 7 ++++++-
 src/hb-ot-layout-gsub-table.hh       | 7 ++++++-
 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 3 files changed, 16 insertions(+), 6 deletions(-)

commit 53a69f49e58ef4c4226958e0496fc22455ee6c87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Nov 24 01:03:05 2012 -0500

    [OTLayout] Remove unused members

 src/hb-ot-layout-gsubgpos-private.hh | 3 ---
 1 file changed, 3 deletions(-)

commit d0a5233785eb327c4080432f597fe470a1046af3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 18:54:59 2012 -0500

    [OTLayout] Implement Context::collect_glyphs()

 src/hb-ot-layout-gsubgpos-private.hh | 122
 +++++++++++++++++++++++++++++++----
 1 file changed, 111 insertions(+), 11 deletions(-)

commit 26514d51b6669f092d9ccb7523443a5ece74169a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 18:13:48 2012 -0500

    [OTLayout] More collect_glyphs()

 src/hb-ot-layout-gpos-table.hh       |  6 ++---
 src/hb-ot-layout-gsub-table.hh       | 32 +++++++++++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 51
 ++++++++++++++++++++++++++++++++----
 3 files changed, 71 insertions(+), 18 deletions(-)

commit c6fb843f2a1c26322c6f4c85d1589f01a9e7a2ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 18:04:08 2012 -0500

    [OTLayout] Templatize process_recurse_func

 src/hb-ot-layout-gpos-table.hh | 10 ++++++++++
 src/hb-ot-layout-gsub-table.hh |  8 +++++---
 2 files changed, 15 insertions(+), 3 deletions(-)

commit 9b34677f362fb0ef5a7cb8a284a9e06d1a4cc03b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:55:40 2012 -0500

    [OTLayout] Clean up closure() a bit

 src/hb-ot-layout-gsub-table.hh       | 29 ++++++++++++++---------------
 src/hb-ot-layout-gsubgpos-private.hh |  7 ++++---
 src/hb-ot-layout.cc		      |  6 +++++-
 3 files changed, 23 insertions(+), 19 deletions(-)

commit adf7758a27a11fb1a8a14a2673867589437d22a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:32:00 2012 -0500

    Improve debug log format in presence of templates

 src/hb-private.hh | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 2c53bd3c3ec4f81eff126c5bf84b7f2ddf2f0fef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:29:05 2012 -0500

    [OTLayout] Start porting sanitize() to process()

 src/hb-open-type-private.hh	      | 12 +++++++++++-
 src/hb-ot-layout-gsubgpos-private.hh |  8 ++++----
 2 files changed, 15 insertions(+), 5 deletions(-)

commit f48ec0e83432c038b50d9715a38ba1469e82e1e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:23:41 2012 -0500

    [OTLayout] Add process() tracing

 src/hb-ot-layout-gpos-table.hh       | 60
 ++++++++++++++++++++----------------
 src/hb-ot-layout-gsub-table.hh       | 51 +++++++++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh | 17 +++++-----
 3 files changed, 72 insertions(+), 56 deletions(-)

commit ed2e13594479c6ed7909401509962ea2f03f9a6e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:10:40 2012 -0500

    [OTLayout] More Extension templatizing

 src/hb-ot-layout-gpos-table.hh       | 11 -----------
 src/hb-ot-layout-gsub-table.hh       | 11 -----------
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++++++--
 3 files changed, 10 insertions(+), 24 deletions(-)

commit 7dddd4e72bc35be962d93dc1b76c7e26c63aaa6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 17:04:55 2012 -0500

    [OTLayout] More templatizing Extension

 src/hb-ot-layout-gpos-table.hh       |  7 +------
 src/hb-ot-layout-gsub-table.hh       |  9 ++-------
 src/hb-ot-layout-gsubgpos-private.hh | 10 +++++++++-
 3 files changed, 12 insertions(+), 14 deletions(-)

commit 653eeb26450053b731b46346606931f5ae88db72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 16:57:36 2012 -0500

    Make Extension a template

 src/hb-ot-layout-gpos-table.hh       | 11 +----------
 src/hb-ot-layout-gsub-table.hh       | 11 +----------
 src/hb-ot-layout-gsubgpos-private.hh |  7 +++++++
 3 files changed, 9 insertions(+), 20 deletions(-)

commit 08f1eede1bbc01ece2adf89847614a0670e50443
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 16:51:43 2012 -0500

    Minor

 src/hb-ot-layout-gpos-table.hh | 19 ++-----------------
 src/hb-ot-layout-gsub-table.hh | 19 ++-----------------
 2 files changed, 4 insertions(+), 34 deletions(-)

commit 2c9d6485a1f89c11f84e720d3c7978dc11a5039a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 16:49:19 2012 -0500

    More tracing fixup

 src/hb-private.hh | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit a1733db1c6ff40aae71fa142a12b1fea7b53dd37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 16:40:04 2012 -0500

    [OTLayout] Start adding process() tracing

 src/hb-ot-layout-gsubgpos-private.hh | 44
 +++++++++++++++++++++++++++---------
 src/hb-private.hh		      |  6 +++--
 2 files changed, 37 insertions(+), 13 deletions(-)

commit 73c18ae1b982a4e65086afe5177afa79e721e2c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 15:34:11 2012 -0500

    Cleanup

 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++------------
 1 file changed, 4 insertions(+), 12 deletions(-)

commit be218c688cbb037a99c8c64bb835f3c980040c0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 15:32:14 2012 -0500

    Pass this object to trace macros

 src/hb-open-file-private.hh	      |  10 +--
 src/hb-open-type-private.hh	      |  34 +++++-----
 src/hb-ot-head-table.hh	      |   2 +-
 src/hb-ot-hhea-table.hh	      |   2 +-
 src/hb-ot-hmtx-table.hh	      |   2 +-
 src/hb-ot-layout-common-private.hh   |  36 +++++------
 src/hb-ot-layout-gdef-table.hh       |  20 +++---
 src/hb-ot-layout-gpos-table.hh       |  80 +++++++++++------------
 src/hb-ot-layout-gsub-table.hh       | 122
 +++++++++++++++++------------------
 src/hb-ot-layout-gsubgpos-private.hh | 100 ++++++++++++++--------------
 src/hb-ot-maxp-table.hh	      |   2 +-
 src/hb-ot-name-table.hh	      |   6 +-
 12 files changed, 208 insertions(+), 208 deletions(-)

commit 902cc8aca0b3ff25eeee50b3a84d729e31731ef3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 15:06:59 2012 -0500

    [OTLayout] Start unbreaking tracing

 src/hb-open-type-private.hh	      | 37
 +++++++++++++++++++++---------------
 src/hb-ot-layout-gsubgpos-private.hh | 37
 +++++++++++++++++++++++++-----------
 src/hb-private.hh		      | 30 +++++++++++++++++++----------
 3 files changed, 68 insertions(+), 36 deletions(-)

commit dabe698fcbeb02911128b17aa8e3b2d864795960
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 14:21:35 2012 -0500

    Minor

 src/hb-open-type-private.hh	      |  5 -----
 src/hb-ot-layout-gsubgpos-private.hh | 10 ++++------
 src/hb-private.hh		      | 27 +++++++++++++++++++++++++--
 3 files changed, 29 insertions(+), 13 deletions(-)

commit c779d82b2fc801eec0d349a106c0e860448fcf4e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 14:07:24 2012 -0500

    Fix warnings

 src/hb-ot-layout-gpos-table.hh       | 2 --
 src/hb-ot-layout-gsub-table.hh       | 8 +++-----
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 src/hb-private.hh		      | 2 +-
 4 files changed, 5 insertions(+), 9 deletions(-)

commit 81822528efc63d867cb2343a8ff7af64fac1c70d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 23 13:27:16 2012 -0500

    Minor

 src/hb-open-type-private.hh	      | 6 ++++++
 src/hb-ot-layout-gsubgpos-private.hh | 3 ---
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 1d67ef980f35ae30d4f8975f65ee07b8cc5deeea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 22 16:47:53 2012 -0500

    Move code around

 src/hb-ot-layout-gsubgpos-private.hh | 44
 ++++++++++++++++++------------------
 1 file changed, 22 insertions(+), 22 deletions(-)

commit ec35a72a44301934b8f123ab2833f59d8c875a09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 22 16:05:59 2012 -0500

    [OTLayout] Port apply() operator to process() template

 src/hb-ot-layout-gpos-table.hh       | 117
 ++++-------------------------------
 src/hb-ot-layout-gsub-table.hh       | 108
 +++-----------------------------
 src/hb-ot-layout-gsubgpos-private.hh |  99 +++++++++++++----------------
 src/hb-ot-layout.cc		      |   2 +-
 4 files changed, 65 insertions(+), 261 deletions(-)

commit 2005fa5340fc528c32dc2af945ad2431964a47d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 22 14:38:10 2012 -0500

    [OTLayout] Port would_apply() and get_coverage() to process()
    templates

 src/hb-ot-layout-gpos-table.hh       | 175
 +++++++++++--------------------
 src/hb-ot-layout-gsub-table.hh       | 198
 ++++++++++++-----------------------
 src/hb-ot-layout-gsubgpos-private.hh |  76 +++++---------
 3 files changed, 156 insertions(+), 293 deletions(-)

commit 44fc237b53ebfbaf8a539de16ad735d2c6afc52b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 21 23:33:13 2012 -0500

    [OTLayout] Port closure() to process() template

 src/hb-ot-layout-gsub-table.hh       | 297
 ++++++++---------------------------
 src/hb-ot-layout-gsubgpos-private.hh | 209 ++++++++++++------------
 src/hb-ot-layout.cc		      |  10 +-
 3 files changed, 171 insertions(+), 345 deletions(-)

commit 5be86b1bb4fbb37b50a1e2798df0c9a3a528b6b2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 22 16:26:22 2012 -0500

    [ucdn] Make data tables const!

 src/hb-ucdn/ucdn.c	      | 16 ++++++++--------
 src/hb-ucdn/unicodedata_db.h | 28 ++++++++++++++--------------
 2 files changed, 22 insertions(+), 22 deletions(-)

commit 7c5b7fe686c9163afe2f31fbeac6f8c8512f5516
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 22 14:15:08 2012 -0500

    Fix hb_shape_plan_get_shaper()

 src/hb-shape-plan.cc | 1 +
 1 file changed, 1 insertion(+)

commit 4c8963576573483269b327c6465f6ec99f489e05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 21 01:20:56 2012 -0500

    0.9.7

 NEWS	      | 86
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 87 insertions(+), 1 deletion(-)

commit ac064a2db2b7a010d99527e183145286215aea81
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 21 01:14:19 2012 -0500

    Rename hb_set_population() to hb_set_get_population()

 src/hb-set.cc | 2 +-
 src/hb-set.h  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 16c914c2a6efeb6999054333985b1f711e33cf94
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 21 01:04:15 2012 -0500

    [Indic] One more try at unbreaking Khmer fonts

    See comments and discussion on the list.

 src/hb-ot-shape-complex-private.hh | 16 ++++++++++------
 1 file changed, 10 insertions(+), 6 deletions(-)

commit e8cfdd7fa8d0fb66e0a261f3547e5824897e5131
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 19:07:06 2012 -0800

    Start implementing collect_glyphs() operation

    Not functional yet.

 src/hb-ot-layout-gsub-table.hh       | 185
 +++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gsubgpos-private.hh |  57 +++++++++++
 src/hb-ot-layout.cc		      |  29 ++++++
 src/hb-ot-layout.h		      |   4 +-
 4 files changed, 272 insertions(+), 3 deletions(-)

commit 7d52e6601f0e695690cd168a288466746cf25300
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 18:49:54 2012 -0800

    Whitespace

 src/hb-coretext.cc		      |  32 +++++-----
 src/hb-icu-le.cc		      |   2 +-
 src/hb-old.cc			      |  10 ++--
 src/hb-open-file-private.hh	      |   2 +-
 src/hb-open-type-private.hh	      |   2 +-
 src/hb-ot-head-table.hh	      |   2 +-
 src/hb-ot-hhea-table.hh	      |   2 +-
 src/hb-ot-hmtx-table.hh	      |   2 +-
 src/hb-ot-layout-common-private.hh   |   2 +-
 src/hb-ot-layout-gdef-table.hh       |   2 +-
 src/hb-ot-layout-gpos-table.hh       |   2 +-
 src/hb-ot-layout-gsub-table.hh       |   2 +-
 src/hb-ot-layout-gsubgpos-private.hh |   2 +-
 src/hb-ot-maxp-table.hh	      |   2 +-
 src/hb-ot-name-table.hh	      |   2 +-
 src/hb-ot-shape-complex-default.cc   | 109
 ++++++++++++++++++-----------------
 src/hb-tt-font.cc		      |   2 +-
 17 files changed, 87 insertions(+), 92 deletions(-)

commit 51bb498b7b07bff4a447405b72f09b68d07a3e95
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 14:08:05 2012 -0800

    Minor

 src/hb-ot-shape.cc | 1 +
 1 file changed, 1 insertion(+)

commit 89ca8eeb83fedde06727d386369a0a39d410f12b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 13:53:40 2012 -0800

    Implement hb_ot_layout_get_glyphs_in_class()

 src/hb-ot-layout-common-private.hh | 24 ++++++++++++++++++++++++
 src/hb-ot-layout-gdef-table.hh     |  2 ++
 src/hb-ot-layout.cc		    |  8 ++++++++
 src/hb-ot-layout.h		    |  5 ++---
 4 files changed, 36 insertions(+), 3 deletions(-)

commit 5a08ecf9200a6ac9b4ebb7ec5c13dcb42d8820ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 13:34:29 2012 -0800

    Implement hb_ot_layout_get_glyph_class()

 src/hb-ot-layout-gdef-table.hh       | 10 +++++-----
 src/hb-ot-layout-gpos-table.hh       |  8 ++++----
 src/hb-ot-layout-gsub-table.hh       |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 10 +++++-----
 src/hb-ot-layout-private.hh	      | 10 +++++++++-
 src/hb-ot-layout.cc		      |  6 ++++++
 src/hb-ot-layout.h		      | 14 ++++++--------
 src/hb-ot-shape.cc		      |  4 ++--
 8 files changed, 38 insertions(+), 26 deletions(-)

commit f9edd5d56bd219625f5b16b23eac53b4c4a8b194
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 13:23:37 2012 -0800

    Implement hb_shape_plan_get_shaper()

    Untested.

 src/hb-shape-plan-private.hh | 1 +
 src/hb-shape-plan.cc	      | 7 +++++++
 src/hb-shape-plan.h	      | 4 +---
 3 files changed, 9 insertions(+), 3 deletions(-)

commit 43b653150081a2f9dc6b7481229ac4cd952575dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 13:12:35 2012 -0800

    [Indic] Another try to unbreak Sinhala split matras

    Just read the comments...

 src/hb-ot-shape-complex-indic.cc		    | 43
 ++++++++++++++++++----
 .../indic/script-sinhala/misc/MANIFEST		    |  1 +
 .../indic/script-sinhala/misc/split-matras.txt     |  4 ++
 3 files changed, 40 insertions(+), 8 deletions(-)

commit 977f1740ace730dcdff8221a17f2a592c2ec7c74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 13:10:07 2012 -0800

    Unbreak tests

 src/hb-ot-layout.h  | 14 +++++++-------
 src/hb-shape-plan.h |	2 +-
 2 files changed, 8 insertions(+), 8 deletions(-)

commit eba312c8d1b2bbe8cb9b6414e843e78d2c521aa4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 16 12:39:23 2012 -0800

    Plumbing to get shape plan and font into complex decompose function

    So we can handle Sinhala split matras smartly...  Coming soon.

 src/hb-ot-shape-complex-default.cc   |  6 ++--
 src/hb-ot-shape-complex-indic.cc     | 14 ++++-----
 src/hb-ot-shape-complex-private.hh   | 16 +++++------
 src/hb-ot-shape-normalize-private.hh | 22 ++++++++++++--
 src/hb-ot-shape-normalize.cc	      | 56
 ++++++++++++++----------------------
 src/hb-ot-shape.cc		      |  2 +-
 6 files changed, 61 insertions(+), 55 deletions(-)

commit 3f82f8ff07a9d16a7c047129658c1bbedfdb5436
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 18:45:31 2012 -0800

    Rename hb_buffer_guess_properties() to
    hb_buffer_guess_segment_properties()

 src/hb-buffer-private.hh | 2 +-
 src/hb-buffer.cc	  | 6 +++---
 src/hb-buffer.h	  | 2 +-
 src/hb-fallback-shape.cc | 2 +-
 src/hb-ot-shape.cc	  | 2 +-
 src/hb-shape.cc	  | 2 +-
 6 files changed, 8 insertions(+), 8 deletions(-)

commit f30641038ba96e83950729b1bd9d86d2e98e46c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 18:39:46 2012 -0800

    Bunch of independent changes (ouch)

    API additions:

	hb_segment_properties_t
	HB_SEGMENT_PROPERTIES_DEFAULT
	hb_segment_properties_equal()
	hb_segment_properties_hash()

	hb_buffer_set_segment_properties()
	hb_buffer_get_segment_properties()

	hb_ot_layout_glyph_class_t

	hb_shape_plan_t
	hb_shape_plan_create()
	hb_shape_plan_create_cached()
	hb_shape_plan_get_empty()
	hb_shape_plan_reference()
	hb_shape_plan_destroy()
	hb_shape_plan_set_user_data()
	hb_shape_plan_get_user_data()
	hb_shape_plan_execute()

	hb_ot_shape_plan_collect_lookups()

    API changes:

	Rename hb_ot_layout_feature_get_lookup_indexes() to
	hb_ot_layout_feature_get_lookups().

    New header file:

	hb-shape-plan.h

    And a bunch of prototyped but not implemented stuff.  Coming soon.
    (Tests fail because of the prototypes right now.)

 src/Makefile.am	      |   2 +-
 src/hb-buffer-private.hh     |  37 ---------------
 src/hb-buffer.cc	      |  45 +++++++++++++++++-
 src/hb-buffer.h	      |  47 +++++++++++++++++--
 src/hb-ot-layout-private.hh  |   8 ----
 src/hb-ot-layout.cc	      |  12 ++---
 src/hb-ot-layout.h	      | 108
 ++++++++++++++++++++++++++++++++++++++++---
 src/hb-ot-map-private.hh     |   2 +-
 src/hb-ot-map.cc	      |  15 +++---
 src/hb-ot-shape-private.hh   |  11 ++++-
 src/hb-ot-shape.cc	      |  52 ++++++++++++++-------
 src/hb-ot.h		      |   1 +
 src/hb-shape-plan-private.hh |   3 +-
 src/hb-shape-plan.cc	      |  23 +++++++--
 src/hb-shape-plan.h	      |  50 +++++++++++++-------
 src/hb-shaper-private.hh     |   2 -
 src/hb-shaper.cc	      |   2 +-
 src/hb.h		      |   1 +
 18 files changed, 304 insertions(+), 117 deletions(-)

commit 75da37dcb17aacc0be6bb006683a84aa31155938
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 18:39:23 2012 -0800

    Minor

 util/hb-ot-shape-closure.cc | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit e05a999495e6575f7cebd7f35db087d964f11ef6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 16:23:21 2012 -0800

    Add hb_face_[sg]et_glyph_count()

 src/hb-font-private.hh |  9 +++++++++
 src/hb-font.cc		| 29 ++++++++++++++++++++++++++++-
 src/hb-font.h		|  7 +++++++
 3 files changed, 44 insertions(+), 1 deletion(-)

commit aec89de5641fbe1c3031d63dd5f40ec99bf2a538
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 16:15:42 2012 -0800

    Add / modify set API a bit

 src/hb-ot-shape.cc	     |	2 +-
 src/hb-set-private.hh	     | 35 ++++++++++++++++--
 src/hb-set.cc		     | 86
 ++++++++++++++++++++++++++++++---------------
 src/hb-set.h		     | 55 +++++++++++++++++++----------
 util/hb-ot-shape-closure.cc |	2 +-
 5 files changed, 128 insertions(+), 52 deletions(-)

commit c54599ad269380c7aa28d885fcfd660fc2c10a7b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 16:14:23 2012 -0800

    Minor

 src/hb-buffer.cc | 2 +-
 src/hb-buffer.h  | 8 +++-----
 2 files changed, 4 insertions(+), 6 deletions(-)

commit d1aa143ca434fe272de21d2002768c83387b583b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 15:38:08 2012 -0800

    [Thai] Remove U+0E2C from "AC" consonants

    WinXP doesn't include it.

 src/hb-ot-shape-complex-thai.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 362a990b2246f5448ecb9d600761f710aea7d42d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 14:57:31 2012 -0800

    Rename hb_ot_layout_would_substitute_lookup() and
    hb_ot_layout_substitute_closure_lookup()

    To match upcoming API.

 src/hb-ot-layout-private.hh	  | 2 +-
 src/hb-ot-layout.cc		  | 8 ++++----
 src/hb-ot-layout.h		  | 4 ++--
 src/hb-ot-map.cc		  | 2 +-
 src/hb-ot-shape-complex-indic.cc | 2 +-
 src/test-would-substitute.cc	  | 2 +-
 6 files changed, 10 insertions(+), 10 deletions(-)

commit a4bef84e375b090c1bc7e4221b8e0ee435dfcbba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 13:29:51 2012 -0800

    [util] Make hb-shape err if output-format is not understood

    And list supported formats.

 util/hb-shape.cc | 6 ++++++
 1 file changed, 6 insertions(+)

commit 3cec819d39e45470d03085bb6fa132882cc85943
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 13:15:39 2012 -0800

    Make the OT shaper default, even if CoreText or Uniscribe is enabled

 src/hb-shaper-list.hh | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit 072ae7a982bf640804eee0b41525e7c328806bf5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 13:14:12 2012 -0800

    Add hb_buffer_serialize_list_formats()

 src/hb-buffer.cc | 6 ++++++
 src/hb-buffer.h  | 3 +++
 2 files changed, 9 insertions(+)

commit f9edf1672511c3bcc3796cc79578ffea43b2bda1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 12:14:09 2012 -0800

    Add buffer serialization / deserialization API

    Two output formats for now: TEXT, and JSON.  For example:

      hb-shape --output-format=json

    Deserialization API is added, but not implemented yet.

 src/hb-buffer.cc | 222
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-buffer.h  |  42 +++++++++++
 util/hb-shape.cc |  21 +++++-
 util/options.cc  |  57 +++++---------
 util/options.hh  |   7 +-
 5 files changed, 304 insertions(+), 45 deletions(-)

commit fd0de881f4fc004da6f36d50a91d0e62f8eb4d8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 10:47:14 2012 -0800

    Avoid C++ undefined behavior

    https://bugzilla.mozilla.org/show_bug.cgi?id=810823

 src/hb-open-type-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f41dc2d35b23220d59d38990bb66f1cbd66a55b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 15 10:36:43 2012 -0800

    Fix undefined behavior in Indic dottedcircle

    Chromium Issue 158998:	Conditional jump in harfbuzz-ng
    http://code.google.com/p/chromium/issues/detail?id=158998

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1eb3e94fe99a072ce422e60ac4d4d89ef489b08a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 17:25:03 2012 -0800

    [Thai] Implement PUA-based fallback shaping

    As explained here:

      http://linux.thai.net/~thep/th-otf/shaping.html

    Our output now matches Uniscribe for old fonts (eg. XP Tahoma) with no
    Thai GSUB table.

 src/hb-ot-shape-complex-thai.cc | 217
 ++++++++++++++++++++++++++++++++++++++++
 1 file changed, 217 insertions(+)

commit 851784f8372004e0a40b698c0cdc2d7db8629aa2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 16:24:05 2012 -0800

    Improve shaper selection

 src/hb-ot-map-private.hh	    |  8 ++++----
 src/hb-ot-map.cc		    |  6 ++++--
 src/hb-ot-shape-complex-indic.cc   |  2 +-
 src/hb-ot-shape-complex-private.hh | 13 ++++++++-----
 src/hb-ot-shape-complex-thai.cc    | 24 ++++++++++++++++++++++--
 5 files changed, 39 insertions(+), 14 deletions(-)

commit f3584d3a3a627e38dfd7769975a670db340d2a48
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:55:17 2012 -0800

    Add test cases for Thai PUA shaping

 .../texts/in-tree/shaper-thai/script-thai/misc/MANIFEST       |  1 +
 .../in-tree/shaper-thai/script-thai/misc/pua-shaping.txt      |
 11 +++++++++++
 2 files changed, 12 insertions(+)

commit 43f04a7456419153cb03e610a825056a47824780
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:51:54 2012 -0800

    Move Thai shaper into a separate file

 src/Makefile.am		    |	3 +-
 src/hb-ot-shape-complex-default.cc | 225 ++++++++++++++++++++++++
 src/hb-ot-shape-complex-misc.cc    | 339
 -------------------------------------
 src/hb-ot-shape-complex-thai.cc    | 141 +++++++++++++++
 4 files changed, 368 insertions(+), 340 deletions(-)

commit ba82325b7a6311b787ae47f41a56964e2f2cba9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:36:53 2012 -0800

    Add note re 'Phags-pa letter U+A872, which is Joining_Type=L

 src/hb-ot-shape-complex-arabic.cc | 1 +
 1 file changed, 1 insertion(+)

commit d469fadce8290c7dda559c5927dd19df65f91c1a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:07:36 2012 -0800

    [Indic] Exchange abort() for assert()

 src/hb-ot-shape-complex-indic.cc | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 0f80a89de99293ddbf0b8b815fe360677d057e38
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:05:19 2012 -0800

    Don't route Kharoshthi through the Indic shaper

    It's a simple, right-to-left, script.

 src/hb-ot-shape-complex-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e67072bb179a5c17db04075de74215597fb43c82
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 15:00:53 2012 -0800

    [Indic] Handle overstruck matra position

 src/hb-ot-shape-complex-indic-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 7e99e4f0740e47efda5882604954cb7d12700a4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 14:09:46 2012 -0800

    Reposition Lao marks

    Lao marks are center-aligned, unlike Thai ones.

 src/hb-ot-shape-fallback.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 865745b5b87236651f5663cae3461db9cb505eed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 13:48:26 2012 -0800

    Don't do fallback positioning for Indic and Thai shapers

 src/hb-ot-shape-complex-arabic.cc  |  1 +
 src/hb-ot-shape-complex-indic.cc   |  1 +
 src/hb-ot-shape-complex-misc.cc    |  2 ++
 src/hb-ot-shape-complex-private.hh |  1 +
 src/hb-ot-shape.cc		    | 20 +++++---------------
 5 files changed, 10 insertions(+), 15 deletions(-)

commit 981748cb2e9b48b77177b19ec1f972cab7afda89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 13:38:16 2012 -0800

    [Indic] If Khmer fonts have a 'liga' feature, use generic shaper

    Seems to produce more coherent results than trying the Indic shaper on
    them.  I'm looking at you, Kh-* fonts...

 src/hb-ot-shape-complex-private.hh | 21 +++++++++++++++++----
 1 file changed, 17 insertions(+), 4 deletions(-)

commit 6b19fa48621dbf36d471d5005f6ae20df350954f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 11:38:50 2012 -0800

    Adjust diff rule for the new hb-shape output format

 test/shaping/hb_test_tools.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dde5506fd963e3cec27c3389bb1fc092f86d1e06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 11:37:04 2012 -0800

    [Indic] Don't move virama with left matra

    This is important for the Sinhala U+0DDA split matra since it
    decomposes
    to U+0DD9,U+0DCA where U+0DD9 is a left matra and U+0DCA is the
    virama.
    We don't want to move the virama with the left matra.
    TEST: U+0D9A,U+0DDA

    Note that we were already doing this in the Uniscribe bug
    compatibility
    mode.  We now do it all the time.

 src/hb-ot-shape-complex-indic.cc | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 82c4d9880a2cd321f6426888511c5f0318f96ad5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 10:56:02 2012 -0800

    Add Sinhala test case for split matra U+0DDA

 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit d04b12853167d756a8cccaf4154f0fd894bce6de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 14 10:53:10 2012 -0800

    Fix test

 test/api/test-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 92f9bfed42f720c1fd78e795845542661aaf4f8a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 16:50:45 2012 -0800

    Minor

 src/hb-buffer.h | 26 ++++++++++++++------------
 1 file changed, 14 insertions(+), 12 deletions(-)

commit 66ac2ff32e24f0d5658ca172147613081a133847
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 16:26:32 2012 -0800

    API change: Remove "mask" from hb_buffer_add()

    I don't expect anybody using hb_buffer_add(), so this shouldn't break
    anyone's code.

 src/hb-buffer-private.hh | 1 -
 src/hb-buffer.cc	  | 8 +++-----
 src/hb-buffer.h	  | 1 -
 3 files changed, 3 insertions(+), 7 deletions(-)

commit 407f80d62589774f845ef1a6a0a7d841b09d57c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 15:33:27 2012 -0800

    [util] Add --bot / --eot / --preserve-default-ignorables

 util/options.cc |  3 +++
 util/options.hh | 12 ++++++++++++
 2 files changed, 15 insertions(+)

commit 78d41d8d69142ae95928b51215c0c0c5e3f5b3f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 15:15:09 2012 -0800

    Minor

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 321f73c16efa0730c96e001d65268f4927a0f735
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 15:12:24 2012 -0800

    [util] Add --text-before and --text-after to hb-shape / hb-view

    Use with Arabic, for example, to see the effect on joining.

 util/hb-ot-shape-closure.cc |	4 +++-
 util/main-font-text.hh      |	2 +-
 util/options.cc	     |	2 ++
 util/options.hh	     | 18 ++++++++++++++++--
 util/shape-consumer.hh      |	6 ++++--
 5 files changed, 26 insertions(+), 6 deletions(-)

commit e13f8d280bafc6a6b6e31e2eee587660b8333c56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 15:12:06 2012 -0800

    Fix UTF-8 backward iteration

    Ouch!

 src/hb-utf-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 5669a6cf418f3a8b9281c36e9d662d843be80433
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 15:11:51 2012 -0800

    [Arabic] Fix post-context handling

    Ouch!

 src/hb-ot-shape-complex-arabic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0c7df2222862122ebbdc8665a21d6771ef5e0252
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 14:42:35 2012 -0800

    Add buffer flags

    New API:

	hb_buffer_flags_t

	HB_BUFFER_FLAGS_DEFAULT
	HB_BUFFER_FLAG_BOT
	HB_BUFFER_FLAG_EOT
	HB_BUFFER_FLAG_PRESERVE_DEFAULT_IGNORABLES

	hb_buffer_set_flags()
	hb_buffer_get_flags()

    We use the BOT flag to decide whether to insert dottedcircle if the
    first char in the buffer is a combining mark.

    The PRESERVE_DEFAULT_IGNORABLES flag prevents removal of characters
    like
    ZWNJ/ZWJ/...

 src/hb-buffer-private.hh	   |  1 +
 src/hb-buffer.cc		   | 18 ++++++++++++++++++
 src/hb-buffer.h		   | 13 +++++++++++++
 src/hb-ot-shape-complex-arabic.cc | 40
 ++++++++++++++++++++-------------------
 src/hb-ot-shape.cc		   |  9 ++++++---
 test/api/test-buffer.c		   |  9 +++++++++
 6 files changed, 68 insertions(+), 22 deletions(-)

commit 1c7e55511a870f2689680ca8f977e00879f3b3e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 14:42:22 2012 -0800

    Minor fix

    Ouch

 src/hb-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c8d4f8b0fe56ce909e3ca07f8a30cb4fb940868b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 14:10:19 2012 -0800

    Minor

 test/api/test-object.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 82ecaff736e245e117d70b6ec1497508c6eb08d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 13:57:52 2012 -0800

    Add hb_buffer_clear()

    Which is like _reset(), but does NOT clear unicode-funcs.

 src/hb-buffer-private.hh |  1 +
 src/hb-buffer.cc	  | 15 +++++++++++++++
 src/hb-buffer.h	  |  4 ++++
 test/api/test-buffer.c   | 22 +++++++++++++++++++++-
 4 files changed, 41 insertions(+), 1 deletion(-)

commit da43a92b04929e93356ae393803ef101154d2267
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 13:48:26 2012 -0800

    0.9.6

 NEWS	      | 28 ++++++++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 29 insertions(+), 1 deletion(-)

commit 0736915b8ed789a209205fec762997af3a8af89c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 12:35:35 2012 -0800

    [Indic] Decompose Sinhala split matras the way old HarfBuzz /
    Pango did

    Had to do some refactoring to make this happen...

    Under uniscribe bug compatibility mode, we still plit them
    Uniscrie-style, but Jonathan and I convinced ourselves that there
    is no
    harm doing this the Unicode way.  This change makes that happen, and
    unbreaks free Sinhala fonts.

 src/hb-ot-shape-complex-arabic.cc    |   2 +
 src/hb-ot-shape-complex-indic.cc     |  74 +++++++++-
 src/hb-ot-shape-complex-misc.cc      | 133 ++++++++++++++++-
 src/hb-ot-shape-complex-private.hh   |  28 +++-
 src/hb-ot-shape-normalize-private.hh |   6 +-
 src/hb-ot-shape-normalize.cc	      | 278
 ++++++++++-------------------------
 src/hb-ot-shape.cc		      |   5 +-
 7 files changed, 312 insertions(+), 214 deletions(-)

commit c8149ca85ed97112778590bc9f090f3ee0254100
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 13 11:07:20 2012 -0800

    [hb-shape] Adjust postioning output format

    1. If there is any offset (x or y), print out both x and y offsets.

    2. Always print out the advance in the major direction of the buffer.
    Ie. even for zero-advance glyphs, print a "+0".  This is more
    intuitive.

 util/options.cc | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 6fd5335622087e87739684f581aa9f88635ff970
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:42:18 2012 -0800

    [Indic] Update auto-generated Indic machine to reflect previous commit

 src/hb-ot-shape-complex-indic-machine.hh | 1126
 +++++++++++++++---------------
 1 file changed, 567 insertions(+), 559 deletions(-)

commit 9cac1338c4bc3e9034cbfa104291ed0329debefe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:41:22 2012 -0800

    [Indic] Allow Consonant_Medial's after Consonant's

    Mostly affects Myanmar, but also Tai Tham, Javanese, and Cham.  The
    latter three are untested (no fonts!).

 src/hb-ot-shape-complex-indic-machine.rl | 3 ++-
 src/hb-ot-shape-complex-indic-private.hh | 7 ++++---
 2 files changed, 6 insertions(+), 4 deletions(-)

commit d187099cbab8e75f870a2bc9c23b6a1cf226905e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:38:06 2012 -0800

    [Indic] Categorize Myanmar "tone marks" as nuktas

 src/hb-ot-shape-complex-indic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8173f23f3f16972c2e8e0a120724533100acfda2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:37:20 2012 -0800

    [Indic] Add config for Myanmar

 src/hb-ot-shape-complex-indic.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 9e92978c8aa3d3cdab4d20c81698c56adbb3dbdd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:36:10 2012 -0800

    [Indic] Route "new" Myanmar tag through the Indic shaper

    Windows 8 adds a Myanmar shaper using the 'mym2' tag.  Route that
    through the Indic shaper.  It's still very broken, but at least this
    does NOT break old-style Myanmar shaping using the generic shaper.

 src/hb-ot-shape-complex-private.hh | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 5ab3855f8106158ee7e68797e8c35e63e9216e5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:27:42 2012 -0800

    Choose shaper based on chosen OT script tag

    For Arabic and Indic shapers, if the font doesn't have a script system
    for the script, use default shaper.

    Make an exception for Arabic script since we have fallback logic for
    that one.

 src/hb-ot-map-private.hh	    |  4 ++++
 src/hb-ot-shape-complex-private.hh | 11 +++++++++--
 2 files changed, 13 insertions(+), 2 deletions(-)

commit 9b37b4c5800b158f61602d2aba8a01349e24d251
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 18:23:38 2012 -0800

    Make planner available to complex shaper choosing logic

 src/hb-ot-shape-complex-private.hh | 4 ++--
 src/hb-ot-shape.cc		    | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 6fddf2d7397411bba8a23ac535e8b851495d3105
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 17:57:24 2012 -0800

    Refactoring ot-map building to make chosen script available earlier

 src/hb-ot-map-private.hh   | 13 ++++++++----
 src/hb-ot-map.cc	    | 51
 ++++++++++++++++++++++++++--------------------
 src/hb-ot-shape-private.hh |  4 ++--
 3 files changed, 40 insertions(+), 28 deletions(-)

commit f17ed8116e7b6429af3fa60bb43d5f4fac66eae3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 17:48:26 2012 -0800

    Minor TODO

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit de796a6fb98f4deda276caa82266b7c830978e0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 17:27:51 2012 -0800

    Add "new" Myanmar OT Script tag

    Windows 8 added support for Myanmar shaping using the "mym2"
    script tag,
    even though Windows never supported the old "mymr" tag.

 src/hb-ot-tag.cc	| 2 ++
 test/api/test-ot-tag.c | 1 +
 2 files changed, 3 insertions(+)

commit 27f52dc3f6bbb97594a44f27b180aed73d9e5608
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 16:54:03 2012 -0800

    Add Myanmar tests from UTN#11

 .../south-east-asian/script-myanmar/misc/MANIFEST  |  1 +
 .../south-east-asian/script-myanmar/misc/utn11.txt | 34
 ++++++++++++++++++++++
 2 files changed, 35 insertions(+)

commit e9334ce97bb7f1de87fb211bb5a8168033629b14
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 14:57:02 2012 -0800

    Break build when ragel is needed and missing

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dba186711e3f5e723f917b7104e849c4c525d3b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 14:48:33 2012 -0800

    [Indic] Make more room in the table

    To be used in upcoming commits.

 src/hb-ot-shape-complex-indic-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit c4be9917438c45b972ec76dc68409014110f0837
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 14:27:33 2012 -0800

    Typo

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 56be677781736bbedc80df6f6aaa2b5f0bc4041c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 14:09:40 2012 -0800

    [Indic] Port 'pref' logic to look into font tables

    ...instead of using a hardcoded list of Ra characters.

 src/hb-ot-shape-complex-indic.cc | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit f2c0f59043c93c225274fc0c8177077d16c89d61
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 14:02:02 2012 -0800

    [Indic] Port reph handling logic to look into font features

    ...instead of using a hardcoded list of Ra characters.

 src/hb-ot-shape-complex-indic.cc | 48
 +++++++++++++++++++++++++---------------
 1 file changed, 30 insertions(+), 18 deletions(-)

commit 43149afbc0007ea075a7017c0e56056c3c0f3614
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 13:34:17 2012 -0800

    Route MEETEI_MAYEK through the Indic shaper

    Since it has a couple of left-"matras".

 src/hb-ot-shape-complex-private.hh | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit d0905c3400085f9c0901c558ba1b81b5039510e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 13:02:20 2012 -0800

    Minor

 src/hb-ot-head-table.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 365f27ab5ba025bf1be6a882ed213c695cbfed7e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 11:16:57 2012 -0800

    Work around older compilers

    As reported on the list:

    I am seeing a similar problem building harfbuzz 0.9.5 with Apple gcc
    4.0.1 on OS X 10.5 Leopard:

    hb-ot-layout-common-private.hh:406: error: 'struct
    OT::CoverageFormat1::Iter' is private
    hb-ot-layout-common-private.hh:646: error: within this context
    hb-ot-layout-common-private.hh:500: error: 'struct
    OT::CoverageFormat2::Iter' is private
    hb-ot-layout-common-private.hh:647: error: within this context
    make[4]: *** [libharfbuzz_la-hb-ot-layout.lo] Error 1

    Also reported as happening with MSVC 2005.

 src/hb-ot-layout-common-private.hh | 6 ++++++
 1 file changed, 6 insertions(+)

commit 6b389ddc3623d042ded4731f4d62dc354002fdd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 11:02:56 2012 -0800

    [Indic] Don't apply 'liga'

    Uniscribe doesn't.	And some fonts abuse this feature to get Indic
    shaping working in non-complex applications like Adobe's apps.

    No change in numbers:

    BENGALI: 353897 out of 354188 tests passed. 291 failed (0.0821598%)
    DEVANAGARI: 707337 out of 707394 tests passed. 57 failed (0.00805774%)
    GUJARATI: 366440 out of 366457 tests passed. 17 failed (0.00463902%)
    GURMUKHI: 60704 out of 60747 tests passed. 43 failed (0.0707854%)
    KANNADA: 951046 out of 951913 tests passed. 867 failed (0.0910798%)
    KHMER: 299074 out of 299124 tests passed. 50 failed (0.0167155%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048011 out of 1048334 tests passed. 323 failed
    (0.0308108%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271666 out of 271847 tests passed. 181 failed (0.0665816%)
    TAMIL: 1091754 out of 1091754 tests passed. 0 failed (0%)
    TELUGU: 970557 out of 970573 tests passed. 16 failed (0.00164851%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic.cc | 2 ++
 1 file changed, 2 insertions(+)

commit d05ac7dc3f2949e85f1fe996315b31b7aae370fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 10:26:50 2012 -0800

    Fix hb-ft glyph name for broken fonts that return empty glyph names

 src/hb-ft.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3bc22eb7b843c77706bb13fc332009097f247813
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 12 10:07:28 2012 -0800

    Minor

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4899801155cc0fef7a8aa58c33ac2d30ba34bcc3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 8 15:08:26 2012 -0800

    U+A872 PHAGS-PA SUPERFIXED LETTER RA is "Right"-Joining

 src/hb-ot-shape-complex-arabic.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 22a685836a59d1c02914761c02d3852810b83ec5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 5 15:20:10 2012 -0800

    Adjust Mongolian shaping

    For U+1880..U+1886 Uniscribe thinks they are non-joining.
    For U+1887 Uniscribe thinks it's joining, but looks wrong to me.
    For now, match Uniscribe.

 src/hb-ot-shape-complex-arabic.cc | 3 +++
 1 file changed, 3 insertions(+)

commit e6b86c8519f894bf7fe18d5c143276521fcacece
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 5 15:18:49 2012 -0800

    Add test for non-joining Mongolian letters

    For U+1880..U+1886 Uniscribe thinks they are non-joining.
    For U+1887 Uniscribe thinks it's joining, but looks wrong to me.

 .../texts/in-tree/shaper-arabic/script-mongolian/misc/MANIFEST    | 1 +
 .../in-tree/shaper-arabic/script-mongolian/misc/non-joining.txt   |
 8 ++++++++
 2 files changed, 9 insertions(+)

commit c26a52fbe62e5ba4d0e1e2ba13bfb6ceb3f773dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Nov 4 16:48:45 2012 -0800

    Minor

 src/hb-ot-shape-fallback.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f60d3ed35d94f1adcfd73ca05d03d7e81fb5de03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Nov 4 16:44:47 2012 -0800

    Minor

 src/hb-set-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f5e55754f962184d2fb7dcab837cdba56e8c7731
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 2 13:53:18 2012 -0700

    Add Tifinagh test data

 test/shaping/texts/in-tree/shaper-default/MANIFEST	       |  2 ++
 .../texts/in-tree/shaper-default/script-tifinagh/MANIFEST     |  1 +
 .../in-tree/shaper-default/script-tifinagh/misc/MANIFEST      |  1 +
 .../in-tree/shaper-default/script-tifinagh/misc/misc.txt      |
 11 +++++++++++
 4 files changed, 15 insertions(+)

commit 10a33296e674ee84b9ed2df25cf373de7d020b8d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 2 13:38:55 2012 -0700

    Minor

 src/hb-ot-tag.cc | 2 ++
 1 file changed, 2 insertions(+)

commit c21498afd857e78230f761ee5c9e73adece89dd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 2 10:21:26 2012 -0700

    Add Mongolian and 'Phags-pa joining test cases

 test/shaping/texts/in-tree/shaper-arabic/MANIFEST	    |  1 +
 .../in-tree/shaper-arabic/script-mongolian/misc/misc.txt   |  3 +++
 .../texts/in-tree/shaper-arabic/script-phags-pa/MANIFEST   |  1 +
 .../in-tree/shaper-arabic/script-phags-pa/misc/MANIFEST    |  1 +
 .../in-tree/shaper-arabic/script-phags-pa/misc/misc.txt    | 14
 ++++++++++++++
 5 files changed, 20 insertions(+)

commit 3ba7bc14ea652d27639f34109e51a497a678a54a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 1 20:05:04 2012 -0700

    Implement 'Phags-pa shaping

    Through the Arabic shaper.	It's similar to Mongolian.

 src/hb-ot-shape-complex-arabic.cc  | 15 ++++++++++++---
 src/hb-ot-shape-complex-private.hh |  4 +---
 2 files changed, 13 insertions(+), 6 deletions(-)

commit 431bef2e16c7888ca3960f5797432d3a20903550
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 1 16:26:01 2012 -0700

    Minor build fix

 test/api/Makefile.am | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit da70111ab234e8b740ce6fb1789a1809fbec0c44
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 31 13:45:30 2012 -0700

    Don't clear buffer pre-context if no new context is being provided

    Patch from Jonathan Kew.

    Part of fixing:

    Mozilla Bug 801410 - avoid inserting dotted-circle for run-initial
    Unicode combining characters in "simple" scripts such as Latin

    https://bugzilla.mozilla.org/show_bug.cgi?id=801410

 src/hb-buffer.cc | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 0bc7a38463bfb37f12efeb1b8cb2024cf4a347bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 22:02:45 2012 -0700

    [OT] Fix ReverseChainingSubst

    We should make it clear that we don't want output buffer in this case,
    otherwise buffer->backtrack_len() would be wrong.

 src/hb-buffer-private.hh	|  1 +
 src/hb-buffer.cc		| 13 +++++++++++++
 src/hb-ot-layout-gsub-table.hh |  1 +
 3 files changed, 15 insertions(+)

commit 2616689d159024d2b1cb1e68f9936b2129bf9be6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 21:51:56 2012 -0700

    More tracing fixups

 src/hb-ot-layout-gsubgpos-private.hh | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit 937f8d3871863b8b1ed1d8900cf41999d92ba30f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 21:49:33 2012 -0700

    [Arabic] Enable dlig and mset for Arabic

    That's what the spec says, and what Uniscribe does.

 src/hb-ot-shape-complex-arabic.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 911ed096980630fd4a37bf2024036daae13a6056
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 19:42:19 2012 -0700

    Ignore gid0 in test results

 test/shaping/hb_test_tools.py | 1 +
 1 file changed, 1 insertion(+)

commit bc513add7999baf32f126ceebbd318105ee66985
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 19:03:55 2012 -0700

    Add missing TRACE_RETURN

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10b88d89ef1efcfddbbfabd3669399b472c8a900
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 18:18:24 2012 -0700

    Add Ethiopic test case

    This sequence: U+120B,U+135F,U+120B with the Nyala font from Win7
    exposes a GPOS bug in Uniscribe, in that the positioned mark is
    wrongly
    moved as a result a following kern.

    This is the one "failure" in the Ethiopic test suite :-).

    ETHIOPIC: 118900 out of 118901 tests passed. 1 failed (0.000841036%)

 test/shaping/texts/in-tree/shaper-default/script-ethiopic/MANIFEST	 |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-ethiopic/misc/MANIFEST |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-ethiopic/misc/misc.txt |
 1 +
 3 files changed, 3 insertions(+)

commit 88d3c98e309e14c3115825d1d8d40d0b3eec2d97
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 16:27:02 2012 -0700

    [Indic] Position pre-base reordering Ra after Chillus in Malayalam

    The logic for pre-base reordering follows the left matra logic.
    We had an exception for Malayalam/Tamil in the left matra
    repositioning
    which was not reflected in pre-base reordering.

    Malayalam failures down from 337 to 323.

    BENGALI: 353996 out of 354285 tests passed. 289 failed (0.0815727%)
    DEVANAGARI: 707339 out of 707394 tests passed. 55 failed (0.00777502%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60769 out of 60809 tests passed. 40 failed (0.0657797%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299106 out of 299124 tests passed. 18 failed (0.00601757%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048011 out of 1048334 tests passed. 323 failed
    (0.0308108%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271726 out of 271847 tests passed. 121 failed (0.0445103%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970558 out of 970573 tests passed. 15 failed (0.00154548%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic.cc | 35 +++++++++++++++++++++--------------
 1 file changed, 21 insertions(+), 14 deletions(-)

commit 21bf796954678d02f136709cade43adef6f8f42b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 14:21:09 2012 -0700

    Add missed file

 src/hb-ucdn/COPYING | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 01013a0f5c58d5d54a37e5b4d6692e0bbd4baf80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 29 10:56:04 2012 -0700

    Include config.h.in in tree

    I typically don't like including generating files in tree.
    But like to
    make an exception for this, since this forms the canonical list of
    options one would need to go through when building with alternative
    build systems.

 Makefile.am |	 1 -
 config.h.in | 160
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 160 insertions(+), 1 deletion(-)

commit 02ed52169ad3bb48f4989f721b0c6572e064a712
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 28 21:26:19 2012 -0700

    Improve license information

 COPYING		   | 2 ++
 src/hb-icu-le/COPYING	   | 2 ++
 src/hb-icu-le/Makefile.am | 2 +-
 src/hb-ucdn/Makefile.am   | 2 +-
 src/hb-ucdn/README	   | 7 +++++++
 5 files changed, 13 insertions(+), 2 deletions(-)

commit 4c1d9244617e472464722e64d2cdbc1f9e8827f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 28 20:27:25 2012 -0700

    Minor

 src/hb-icu-le.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 38b015e57ffa75d3b078a368c23685beb7c3f946
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 28 20:11:47 2012 -0700

    Fix hb_buffer_set_length(buffer, 0)

    Was causing invalid realloc()s.

 src/hb-buffer.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b7115b63be72e109b51f538ba581aed1017b2d55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 28 20:11:42 2012 -0700

    Add XXX

 src/hb-icu-le.cc | 1 +
 1 file changed, 1 insertion(+)

commit 71ee1f24503cd066ffc1a36cc5dd9a3c1d1a6dfd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 28 19:18:11 2012 -0700

    Port to ICU LayoutEngine C API

    Incidentally, this makes it not crash with icu-le-hb anymore...
    I'm not smart / stupid enough to spend two more days debugging C++
    linking issues, and this is ABI-stable at least.

 src/hb-icu-le.cc | 31 ++++++++++++++++---------------
 1 file changed, 16 insertions(+), 15 deletions(-)

commit 0144f05e57088b30ac894cdae8b04b265d4dfbe7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 26 13:48:06 2012 -0700

    Remove unused members

 src/hb-icu-le/PortableFontInstance.h | 3 ---
 1 file changed, 3 deletions(-)

commit cf3afd8979b1db76d437f428cbd51cb363e0d18e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 25 16:32:54 2012 -0700

    Rename and revamp is_zero_width() to be is_default_ignorable()

    That's really the logic desired.  Except that MONGOLIAN VOWEL
    SEPARATOR
    is not default_ignorable but it really should be.  Reported to
    Unicode.

    Based on suggestion from Konstantin Ritt.

 src/hb-fallback-shape.cc   |  2 +-
 src/hb-ot-shape-private.hh |  4 +--
 src/hb-ot-shape.cc	    |  2 +-
 src/hb-unicode-private.hh  | 90
 +++++++++++++++++++++++++++++-----------------
 4 files changed, 62 insertions(+), 36 deletions(-)

commit a724139e641bf1592b1ff786a75a9de2ea8163cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 24 14:02:15 2012 -0700

    Update TODO

 TODO | 14 ++++++++++----
 1 file changed, 10 insertions(+), 4 deletions(-)

commit 13c058472913b7b6d689f9022226079da65420b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 14 18:37:09 2012 -0500

    0.9.5

 NEWS	      | 23 +++++++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 24 insertions(+), 1 deletion(-)

commit fecdfa95daf4916695f23e7dab89ab363be11b89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 7 17:19:58 2012 -0400

    Fixup hb_ot_shape_closure()

    Broke it when merged cmap mapping and normalizer.  Ouch!

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2d1dcb3ce3354c2d5e2b4d1d291beb8d23cdea22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 7 17:13:46 2012 -0400

    Mark debug message functions static

 src/hb-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 9947bd6daffb5ec76b67536575e7617ba4f10b1e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 20:44:43 2012 -0400

    Update UCDN to upstream commit
    3f159c87824230b59af56e40e2db32caf6afa51a

    - Unicode 6.2.0 goodness,
    - Unassigned codepoints now have correct properties.  Passes test
    suite.

 src/hb-ucdn/unicodedata_db.h | 1966
 ++++++++++++++++++++++--------------------
 1 file changed, 1036 insertions(+), 930 deletions(-)

commit 32dbfcf763d1ae497d3c95de986a83441331678f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 17:42:13 2012 -0400

    Fix visibility of UCDN symbols

 src/hb-ucdn.cc     |  2 --
 src/hb-ucdn/ucdn.h | 19 +++++++++++++++++++
 2 files changed, 19 insertions(+), 2 deletions(-)

commit 3f33f0d1f2603f22e86adffe3c3836136ba5e5fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 16:03:18 2012 -0400

    Import UCDN into source tree

    https://github.com/grigorig/ucdn

 configure.ac		      |   11 +-
 src/Makefile.am	      |    7 +
 src/hb-ucdn.cc		      |  207 ++
 src/hb-ucdn/Makefile.am      |   18 +
 src/hb-ucdn/README	      |   33 +
 src/hb-ucdn/ucdn.c	      |  282 +++
 src/hb-ucdn/ucdn.h	      |  290 +++
 src/hb-ucdn/unicodedata_db.h | 4648
 ++++++++++++++++++++++++++++++++++++++++++
 src/hb-unicode.cc	      |    3 +
 9 files changed, 5498 insertions(+), 1 deletion(-)

commit 0e292eb2a2abbac152eeea2060e58b7a66449745
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 14:59:00 2012 -0400

    Remove Glib thread-safety support

    Now that we have pthread detection in configure, we don't need Glib
    anymore.  Glib will only be a Unicode data provider.

 configure.ac		  |  8 ++++----
 src/hb-atomic-private.hh | 13 -------------
 src/hb-mutex-private.hh  | 20 --------------------
 3 files changed, 4 insertions(+), 37 deletions(-)

commit 66efe896483c58f3ef9bd218c02bb7ea604f68ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 14:55:32 2012 -0400

    Check for pthreads

 configure.ac	 | 7 +++++++
 src/Makefile.am | 5 +++++
 2 files changed, 12 insertions(+)

commit 10a8162dddb8b39ae130fe5bb7d1819471fa7e06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 14:46:34 2012 -0400

    Add ax_pthread.m4

 m4/ax_pthread.m4 | 309
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 309 insertions(+)

commit 8ac34bc6ff1d0646503a45659b1846d8cf9c0603
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 14:46:04 2012 -0400

    Add pkg.m4 to git repo

 m4/pkg.m4 | 157
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 157 insertions(+)

commit c7afac0aa6e51e6a49ebf13f72537398698c9e49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 2 14:44:47 2012 -0400

    Add AC_CONFIG_MACRODIR

 Makefile.am  | 2 ++
 configure.ac | 2 ++
 2 files changed, 4 insertions(+)

commit f2eb3fa9dca8d21fae20c9b9dddad3245df74a05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 21:35:35 2012 -0400

    [OT] Only insert dottedcircle if at the beginning of paragraph

    If the first char in the run is a combining mark, but there is text
    before the run, don't insert dottedcircle.

    Part of addressing:
    https://bugzilla.redhat.com/show_bug.cgi?id=858736

 src/hb-ot-shape.cc | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit bdc2fc8294da7f374701aafe9f5a82d60633946f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 21:32:35 2012 -0400

    [Arabic] Respect Arabic joining from neighboring context

    Now we respect Arabic joining across runs.

 src/hb-ot-shape-complex-arabic.cc | 31 +++++++++++++++++++++++++++++--
 1 file changed, 29 insertions(+), 2 deletions(-)

commit 05207a79e0ae1769c5feaebe3fd99bdf9cfcf834
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 17:44:53 2012 -0400

    [buffer] Save pre/post textual context

    To be used for a variety of purposes.  We save up to five characters
    in each direction.	No public API changes, everything is taken care
    of already.  All clients need to do is to call hb_buffer_add_utf* with
    the full text + segment info (or at least some context) instead of
    just passing in the segment.

    Various operations (hb_buffer_reset, hb_buffer_set_length,
    hb_buffer_add*) automatically reset the relevant contexts.

 src/hb-buffer-private.hh | 13 ++++++++++++-
 src/hb-buffer.cc	  | 44
 ++++++++++++++++++++++++++++++++++++++++----
 src/hb-buffer.h	  |  2 +-
 3 files changed, 53 insertions(+), 6 deletions(-)

commit 89ac39dbbe028e6379f64392f2e590e3f1fdd847
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 13:59:24 2012 -0400

    Add hb_utf_prev()

 src/hb-utf-private.hh | 71
 +++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 69 insertions(+), 2 deletions(-)

commit 70ea4ac6887c7057113d714a98e55738b6196562
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 12:30:16 2012 -0400

    Slightly optimize UTF-8 parsing

 src/hb-utf-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4445e5e2ecc257a5d0fa2f2715bb7181a47346da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 12:26:12 2012 -0400

    [buffer] Cleanup / optimize UTF-16 parsing a bit

 src/hb-utf-private.hh | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 1f66c3c1a0eb869c0d85a015235313177e0cec62
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 11:42:16 2012 -0400

    Add hb_utf_strlen()

    Speeds up UTF-8 parsing by calling strlen().

 src/hb-buffer.cc      | 13 ++-----------
 src/hb-utf-private.hh | 22 ++++++++++++++++++++++
 2 files changed, 24 insertions(+), 11 deletions(-)

commit 7f19ae7b9f806a2e35206b2ad41651c5f80b2537
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 11:22:28 2012 -0400

    [buffer] Templatize UTF handling

    Also move UTF routines into a separate file, to be reused from shapers
    that need it.

 src/Makefile.am       |   1 +
 src/hb-buffer.cc      | 157
 +++++++++++++-------------------------------------
 src/hb-utf-private.hh | 113 ++++++++++++++++++++++++++++++++++++
 3 files changed, 155 insertions(+), 116 deletions(-)

commit 0e0a4da9b7677a09e00d27313236e1f333864dd6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 11:09:04 2012 -0400

    [buffer] Towards template'izing different UTF adders

 src/hb-buffer.cc | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 7d37280600c157f3c4eae8746e99511702a58e8f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 11:04:41 2012 -0400

    Minor

 src/hb-buffer.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 54d5da4ee9d902ff36473cec558137eef8f23825
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 25 10:50:41 2012 -0400

    Remove unused indic.cc

 src/Makefile.am |  6 +-----
 src/indic.cc	 | 51 ---------------------------------------------------
 2 files changed, 1 insertion(+), 56 deletions(-)

commit fab7a71f110ed646745d54b23284537c50058c21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 24 21:51:13 2012 -0400

    [Indic] Import ragel-generated Indic machine in git

    I don't expect ragel to be creating too much noise in its generated
    output, and including this in-tree helps users right now.  We can
    revisit this later if it proved to be too much trouble.

 autogen.sh				  |    6 -
 src/Makefile.am			  |    1 -
 src/hb-ot-shape-complex-indic-machine.hh | 1314
 ++++++++++++++++++++++++++++++
 3 files changed, 1314 insertions(+), 7 deletions(-)

commit 20a840c7cd08069720050782b4533cde505df09a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 24 20:23:00 2012 -0400

    Use a C++ linker on Windows

    On Windows we don't care whether or not we link to libstdc++.
    Seems to fix build with mingw32 on msys, as reported by Werner.

 src/Makefile.am | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit eb7669a38072b66eef3bd905a93c4815bef3f0e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 18 19:42:06 2012 -0400

    Better autofoo

 src/Makefile.am | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit d00f7d83750258eff915a3826700c4819e63e481
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 17 20:59:09 2012 -0400

    Fix dependencies

 src/Makefile.am | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 811eefe225d20b20f1de20c6e62a0ebd6d89102a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 10 09:56:27 2012 -0400

    Return NULL, not false

    Oh well...

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 166b5cf7ec2d37fb54a909c437ccdec1edaf37aa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 7 14:55:07 2012 -0400

    [Indic] Find syllables before any features are applied

    With FreeSerif, it seems that the 'ccmp' feature does ligature
    substituttions.  That was then causing syllable match failures.
    We now
    find syllables before any features have been applied.

    Test sequence: U+0D9A,U+0DCA,U+200D,U+0DBB,U+0DCF

 src/hb-ot-shape-complex-indic-machine.rl	    |  4 +-
 src/hb-ot-shape-complex-indic.cc		    | 56
 +++++++++++++++-------
 .../indic/script-sinhala/misc/misc.txt		    |  1 +
 3 files changed, 43 insertions(+), 18 deletions(-)

commit 96fdc04e5c6daafce3d45e7508418e4db94df44c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 22:26:16 2012 -0400

    Add hb_buffer_[sg]et_content_type

    And hb_buffer_content_type_t and enum values.

 TODO			  |  1 +
 src/hb-buffer-private.hh |  2 ++
 src/hb-buffer.cc	  | 34 ++++++++++++++++++++++++++++++++++
 src/hb-buffer.h	  | 14 ++++++++++++++
 src/hb-shape.cc	  |  5 +++++
 5 files changed, 56 insertions(+)

commit e30ebd2794b37bd8ec716a258d5cb017fb1dfadc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 22:09:06 2012 -0400

    Add hb_feature_to/from_string()

 TODO		  |   4 +-
 src/hb-common.cc |   9 +++
 src/hb-common.h  |   6 +-
 src/hb-shape.cc  | 168
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-shape.h   |  13 +++++
 util/options.cc  | 132 ++-----------------------------------------
 6 files changed, 201 insertions(+), 131 deletions(-)

commit f67917161bbe317a33d6407fbc62ebffcafe7154
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 17:22:31 2012 -0400

    [OT] Do per-ligature-component fallback mark positioning

    With this in place, you can remove GDEF/GSUB/GPOS tables from Arabic
    fonts and still get per-component marks positioned on
    oh-yeah-fallback-formed LAM-ALEF ligatures with marks in between
    the LAM
    and ALEF.

    Now *that*'s pretty cool, if a bit anachronistic...

 src/hb-ot-shape-fallback.cc | 43
 ++++++++++++++++++++++++++++++++++++-------
 1 file changed, 36 insertions(+), 7 deletions(-)

commit 525c6855783a018d52867b9ece2ee90868ff1f91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 16:02:07 2012 -0400

    [OT] Make fallback mark positioning more robust

    ...with clusters spanning multiple base characters.

 src/hb-ot-shape-fallback.cc | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 5d502443f5a07cbd0aa860dd71a0fa4ea8b6ff9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 15:29:29 2012 -0400

    [old] Clear offset array

 src/hb-old.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 9433c218b4853442dd9ad53d0588a837a33dbf1e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 14:27:15 2012 -0400

    [OT] Simplify fallback positioning condition

 src/hb-ot-shape-fallback.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 028a1706f898bfcee0d14acfba47ebe1de09f0c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 14:25:48 2012 -0400

    Refactor common macro

 src/hb-ot-shape-fallback.cc  | 5 +----
 src/hb-ot-shape-normalize.cc | 5 +----
 src/hb-ot-shape.cc	      | 5 +----
 src/hb-unicode-private.hh    | 9 +++++++++
 4 files changed, 12 insertions(+), 12 deletions(-)

commit 07cfbe21b511056d5c3c75cbfe84e4e982c3e8fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 01:16:39 2012 -0400

    [OT] Streamline Arabic fallback shaping table

 src/gen-arabic-table.py		    |	6 +-
 src/hb-ot-shape-complex-arabic-fallback.hh |	2 +-
 src/hb-ot-shape-complex-arabic-table.hh    | 266
 ++++++++++++++---------------
 3 files changed, 137 insertions(+), 137 deletions(-)

commit 82f6b6f388b801a1483854cb56a2cadbb94e0f2b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 6 01:12:50 2012 -0400

    Minor

 src/hb-ot-shape-complex-arabic-fallback.hh | 13 +++++++------
 1 file changed, 7 insertions(+), 6 deletions(-)

commit fabd3113a98c5f4114f48920fa7ea38bd65a8d32
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 22:19:28 2012 -0400

    [OT] Port Arabic fallback shaping to synthetic GSUB

    All of init/medi/fina/isol and rlig implemented.

    Let there be dragons... ⻯

 src/Makefile.am			    |	1 +
 src/hb-open-type-private.hh		    |  69 +++++---
 src/hb-ot-layout-common-private.hh	    |	9 +-
 src/hb-ot-layout-gsub-table.hh		    |  11 +-
 src/hb-ot-map-private.hh		    |	6 +
 src/hb-ot-map.cc			    |	1 +
 src/hb-ot-shape-complex-arabic-fallback.hh | 252
 +++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-arabic.cc	    | 158 ++++++------------
 src/hb-ot-shape.cc			    |	7 +-
 src/hb-private.hh			    |  11 +-
 10 files changed, 369 insertions(+), 156 deletions(-)

commit f0b8ed1b6dd9f1d2b9084c101a6fc5dee0cc22a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 17:32:57 2012 -0400

    [Indic] Allow "H,ZWJ,M"

    Uniscribe accepts a Halant,ZWJ before matras.  Allow that.

    BENGALI down from 295 to 291
    DEVANAGARI down from 69 to 57
    GUJARATI down from 19 to 17
    KANNADA down from 871 to 867
    MALAYALAM down from 340 to 337
    TELUGU down from 20 to 16

    Currently at:

    BENGALI: 353897 out of 354188 tests passed. 291 failed (0.0821598%)
    DEVANAGARI: 707337 out of 707394 tests passed. 57 failed (0.00805774%)
    GUJARATI: 366440 out of 366457 tests passed. 17 failed (0.00463902%)
    GURMUKHI: 60704 out of 60747 tests passed. 43 failed (0.0707854%)
    KANNADA: 951046 out of 951913 tests passed. 867 failed (0.0910798%)
    KHMER: 299077 out of 299124 tests passed. 47 failed (0.0157125%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1047997 out of 1048334 tests passed. 337 failed
    (0.0321462%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271666 out of 271847 tests passed. 181 failed (0.0665816%)
    TAMIL: 1091754 out of 1091754 tests passed. 0 failed (0%)
    TELUGU: 970557 out of 970573 tests passed. 16 failed (0.00164851%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ed717ef61813fa16cf74f2874848e9feb81568f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 17:21:17 2012 -0400

    [Indic] Relax grammar

    Now that we insert dotted-circle, tests break more easily when
    our indic
    machine breaks.

    In particular, a few Devanagari tests were having sequences like
    "C,H,ZWJ,N", and because of the ZWJ the Nukta does NOT get reordered
    to
    before the Halant as the grammar used to expect...	Fixup.

    Another case is as simple as "C,ZWJ,SM".

    Fixes 10 out of 79 failures:

    DEVANAGARI: 707325 out of 707394 tests passed. 69 failed (0.00975411%)

 src/hb-ot-shape-complex-indic-machine.rl | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit aa7141efe49991a1160489106984e95163fe2ab8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 15:54:21 2012 -0400

    [Indic] Fix Khmer syllable-final coeng-consonant

    Brings down Khmer failures from 162 to 47.

    KHMER: 299077 out of 299124 tests passed. 47 failed (0.0157125%)

    Also rebaselined some of the test files that had only-inherited lines.
    Removing those, the stats are:

    BENGALI: 353893 out of 354188 tests passed. 295 failed (0.0832891%)
    DEVANAGARI: 707315 out of 707394 tests passed. 79 failed (0.0111678%)
    GUJARATI: 366438 out of 366457 tests passed. 19 failed (0.00518478%)
    GURMUKHI: 60704 out of 60747 tests passed. 43 failed (0.0707854%)
    KANNADA: 951042 out of 951913 tests passed. 871 failed (0.0915%)
    KHMER: 299077 out of 299124 tests passed. 47 failed (0.0157125%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1047994 out of 1048334 tests passed. 340 failed
    (0.0324324%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271666 out of 271847 tests passed. 181 failed (0.0665816%)
    TAMIL: 1091754 out of 1091754 tests passed. 0 failed (0%)
    TELUGU: 970553 out of 970573 tests passed. 20 failed (0.00206064%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

    Still some regressions, but some of the more egregious cases are
    addressed.

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit efb8d3eb713bca7cbfca41380a012bdb4d380e5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 15:50:47 2012 -0400

    Fixup test failure reporting

    After we implemented dotted-circle, we were still ignoring any tests
    that had dottedcircle in it for any of the shapers.  That meant
    that if
    we wrongly outputted dottedcircle, the test was being ignored.  Ouch!

    Fixing that shows regressions across the board.  Most are Uniscribe
    bugs: NOT inserting dotted-circle when it should.  Some are arou
    machine bugs.  This is in fact a nice way to catch Indic-machine
    deficiencies and when I fix the regressions, our clusters should be
    much closer to Uniscribe.  For now, we regressed from:

    BENGALI: 353997 out of 354285 tests passed. 288 failed (0.0812905%)
    DEVANAGARI: 707339 out of 707394 tests passed. 55 failed (0.00777502%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60769 out of 60809 tests passed. 40 failed (0.0657797%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299106 out of 299124 tests passed. 18 failed (0.00601757%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048104 out of 1048416 tests passed. 312 failed
    (0.0297592%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271747 out of 271847 tests passed. 100 failed (0.0367854%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970558 out of 970573 tests passed. 15 failed (0.00154548%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

    To:

    BENGALI: 353990 out of 354285 tests passed. 295 failed (0.0832663%)
    DEVANAGARI: 707315 out of 707394 tests passed. 79 failed (0.0111678%)
    GUJARATI: 366447 out of 366506 tests passed. 59 failed (0.016098%)
    GURMUKHI: 60707 out of 60809 tests passed. 102 failed (0.167738%)
    KANNADA: 951042 out of 951913 tests passed. 871 failed (0.0915%)
    KHMER: 298962 out of 299124 tests passed. 162 failed (0.0541581%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048074 out of 1048416 tests passed. 342 failed
    (0.0326206%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271666 out of 271847 tests passed. 181 failed (0.0665816%)
    TAMIL: 1091835 out of 1091837 tests passed. 2 failed (0.000183178%)
    TELUGU: 970553 out of 970573 tests passed. 20 failed (0.00206064%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

    Investigating.

 test/shaping/hb_test_tools.py | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 27bd55bd2ca599d501f10c2fae81861137517e46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 5 15:11:14 2012 -0400

    [Indic] Tamil does not have half-forms either

    The Win7 Tamil font does not realy on this behavior, but the WinXP
    version does.  Handle Tamil like Malayalam: Matras always move to
    before base.

    WinXP Tamil failures went down from 168964 (15.4752%) to 167
    (0.0152953%) (two orders of magnitude reduction!).

    Included in this is a minor fixup that actually fixed a few tests
    with non-Tamil too.  Numbers at:

    BENGALI: 353997 out of 354285 tests passed. 288 failed (0.0812905%)
    DEVANAGARI: 707339 out of 707394 tests passed. 55 failed (0.00777502%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60769 out of 60809 tests passed. 40 failed (0.0657797%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299106 out of 299124 tests passed. 18 failed (0.00601757%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048104 out of 1048416 tests passed. 312 failed
    (0.0297592%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271747 out of 271847 tests passed. 100 failed (0.0367854%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970558 out of 970573 tests passed. 15 failed (0.00154548%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic.cc | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 87b75d0a4aa03fe7a03e3bf7baf8ece131aec1bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 23:06:38 2012 -0400

    [OT] Allow adding features with fallback implementation

 src/hb-ot-map-private.hh | 7 ++++---
 src/hb-ot-map.cc	  | 6 ++++--
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 1d3947a6bda6986c9c7d993589053051c119cc81
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 22:42:17 2012 -0400

    Minor

 src/hb-ot-layout-gpos-table.hh | 2 +-
 src/hb-ot-layout-gsub-table.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b3b89b66586897a69b410ef02e7434691de84ae6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 21:13:17 2012 -0400

    [OT] Add SubstLookup serialize API

 src/hb-ot-layout-common-private.hh |  2 +-
 src/hb-ot-layout-gsub-table.hh     | 65
 +++++++++++++++++++++++++++++++++++++-
 2 files changed, 65 insertions(+), 2 deletions(-)

commit 715e03bc21d6adaa8e1f647235843839dc47dad1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 20:10:17 2012 -0400

    Minor

 src/hb-open-type-private.hh | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 652d1e0d64e47313ead2fc8318d1236f0e0d80ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 20:00:44 2012 -0400

    [OT] Start adding Lookup-level serialize API

 src/hb-ot-layout-common-private.hh | 20 +++++++++++++++++++-
 1 file changed, 19 insertions(+), 1 deletion(-)

commit a930c68e9c50aade78c1eb0eef075c9c117e4ef6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 18:17:57 2012 -0400

    [OT] More serialize.  Implements all basic GSUB subtables

 src/hb-open-type-private.hh	    |  53 +++++++++++++++-
 src/hb-ot-layout-common-private.hh |	8 ++-
 src/hb-ot-layout-gsub-table.hh     | 125
 +++++++++++++++++++++++++++++--------
 3 files changed, 156 insertions(+), 30 deletions(-)

commit 1b38b4e817d871b9549be65af6030bd0eea7f775
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 18:17:21 2012 -0400

    Minor

 src/hb-ot-layout-gsub-table.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f7e81ce0b882aa942ae33c787e741c5e8e5a0173
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 15:32:37 2012 -0400

    0.9.4

 NEWS	      | 18 ++++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 19 insertions(+), 1 deletion(-)

commit 2bd9fe359839a653f7caae534bf768af1735f155
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 15:15:19 2012 -0400

    Refactor

 src/hb-ot-layout-gpos-table.hh       |  7 ++-----
 src/hb-ot-layout-gsub-table.hh       | 16 +++++-----------
 src/hb-ot-layout-gsubgpos-private.hh | 13 +++----------
 src/hb-ot-layout.cc		      | 23 +++++++++++++++++------
 src/hb-ot-shape-complex-arabic.cc    |  4 +---
 5 files changed, 28 insertions(+), 35 deletions(-)

commit a5ddd9e31cd7906c4b559aa5b2fafdae4b9c8935
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 4 14:55:00 2012 -0400

    [OT] Really fix possible NULL dereference this time

 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 src/hb-ot-layout.cc		      | 6 +++---
 src/hb-ot-shape-complex-arabic.cc    | 4 +++-
 3 files changed, 10 insertions(+), 8 deletions(-)

commit 29416833584d7831ece84aaeada6f5ebba7828c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 3 23:31:14 2012 -0400

    [OT] Implement serialize() for AlternateSubst

 src/hb-ot-layout-gsub-table.hh | 33 +++++++++++++++++++++++++++++++++
 1 file changed, 33 insertions(+)

commit 1f07e3382a1608b054cbf88b89fef74f6c485434
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 3 23:28:34 2012 -0400

    [OT] Implement serialize() for MultiSubst

 src/hb-open-type-private.hh	| 10 ++++++++++
 src/hb-ot-layout-gsub-table.hh | 43
 ++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 53 insertions(+)

commit 4912030dfba740c822e200d33cbb5c6dbbeaf79e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 3 20:58:03 2012 -0400

    Minor

 src/hb-open-type-private.hh	| 4 ++--
 src/hb-ot-layout-gsub-table.hh | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit f8fa2b5cf67b02d74514dec7885d03de73ec7349
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 3 20:19:46 2012 -0400

    Fix possible NULL dereference

    As reported by Kenichi Ishibashi.

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4b312fb288faa383a2c5bd3be0428f0e58e02699
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 21:56:06 2012 -0400

    [OT] Remove serialize alignment

    Will reintroduce in a different way when we actually need it.

 src/hb-open-type-private.hh | 24 +++++++++++-------------
 1 file changed, 11 insertions(+), 13 deletions(-)

commit c61be03d6df122f18eebda3b29e42c9e768d45b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 21:43:38 2012 -0400

    [OT] A bit more serialize

 src/hb-open-type-private.hh	    | 14 +++++++++++++
 src/hb-ot-layout-common-private.hh |  2 +-
 src/hb-ot-layout-gsub-table.hh     | 43
 ++++++++++++++++++++++++++++++++++++--
 3 files changed, 56 insertions(+), 3 deletions(-)

commit abcc5ac1fde1c493e4055dd2f27b8aade7713156
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 21:30:17 2012 -0400

    [OT] Improve serialize syntax

    For some definition of improvement...

 src/hb-open-type-private.hh	| 6 ++++--
 src/hb-ot-layout-gsub-table.hh | 3 +--
 2 files changed, 5 insertions(+), 4 deletions(-)

commit bc5be24014371ceb811b9ffd37062ede63d87bb1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 20:48:22 2012 -0400

    [OT] Restart work on serialize()

 src/hb-open-type-private.hh	    | 39 ++++++++++++++++++------
 src/hb-ot-layout-common-private.hh | 61
 +++++++++++++++++++-------------------
 src/hb-ot-layout-gsub-table.hh     | 13 ++++++++
 3 files changed, 73 insertions(+), 40 deletions(-)

commit 6912e476dd92639c3ddf07ca51c8d4a262c8b3a5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 20:38:45 2012 -0400

    [OT] Insert dotted-circle for run-initial marks

    Unfortunately if the font has GPOS and 'mark' feature does
    not position mark on dotted-circle, our inserted dotted-circle
    will not get the mark repositioned to itself.  Uniscribe cheats
    here.

    If there is no GPOS however, the fallback positioning kicks in
    and sorts this out.

    I'm not willing to address the first case.

 src/hb-ot-shape.cc | 32 ++++++++++++++++++++++++++++++++
 1 file changed, 32 insertions(+)

commit 1d581ec384bc1780995e32e1c44103af57596eda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 20:06:26 2012 -0400

    [OT] Fallback-position ccc=0 Thai / Lao marks

    Not perfect, but so is fallback positioning in 2012...

 src/hb-ot-shape-fallback.cc | 56
 +++++++++++++++++++++++++++++++++++++--------
 1 file changed, 46 insertions(+), 10 deletions(-)

commit 3992b5ec4cb43d114d87ff7ee2b992bcf819c9cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 1 19:20:41 2012 -0400

    Move code around

 src/hb-ot-shape-fallback-private.hh |	5 ++++
 src/hb-ot-shape-fallback.cc	     | 46
 +++++++++++++++++++++++++------------
 src/hb-ot-shape-private.hh	     |	6 +++++
 src/hb-ot-shape.cc		     |	4 ++++
 4 files changed, 46 insertions(+), 15 deletions(-)

commit b85800f9de8976a7418ef9df467d3080c6ab0199
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 31 18:12:01 2012 -0400

    [Indic] Implement dotted-circle insertion for broken clusters

    No panic, we reeally insert dotted circle when it's absolutely broken.

    Fixes most of the dotted-circle cases against Uniscribe. (for
    Devanagari
    fixes 80% of them, for Khmer 70%; the rest look like Uniscribe being
    really bogus...)

    I had to make a decision.  Apparently Uniscribe adds one dotted circle
    to each broken character.  I tried that, but that goes wrong
    easily with
    split matras.  So I made it add only one dotted circle to an entire
    broken syllable tail.  As in: "if there was a dotted circle here, this
    would have formed a correct cluster."  That works better for split
    stuff, and I like it more.

 src/hb-buffer-private.hh		  |  1 +
 src/hb-buffer.cc			  | 10 +++++
 src/hb-ot-shape-complex-indic-machine.rl |  4 +-
 src/hb-ot-shape-complex-indic-private.hh |  2 +-
 src/hb-ot-shape-complex-indic.cc	  | 67
 +++++++++++++++++++++++++++++---
 src/hb-ot-shape-normalize-private.hh	  |  1 +
 src/hb-ot-shape-normalize.cc		  | 11 +++---
 7 files changed, 83 insertions(+), 13 deletions(-)

commit 327d14ef188396006d54af976506ab6f8bb2869a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 31 16:49:34 2012 -0400

    [Indic] Start adding dotted-circle instrastructure

 src/hb-ot-shape-complex-indic-machine.rl | 19 +++++++------
 src/hb-ot-shape-complex-indic.cc	  | 46
 +++++++++++++++++++++++++++++---
 2 files changed, 51 insertions(+), 14 deletions(-)

commit 1be368e96fb7de8c77bf992874e0d5bd6b272ebe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 31 16:29:17 2012 -0400

    Minor

 src/hb-buffer-private.hh | 16 +++++++++++++++-
 src/hb-buffer.cc	  | 15 ---------------
 2 files changed, 15 insertions(+), 16 deletions(-)

commit 784f29d061a2939562eca0c4943feb01174aee00
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 31 14:06:26 2012 -0400

    Minor

 src/hb-ot-shape.cc | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 5a7f18767a87a3f07269d0814f984a98f86ab852
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 30 22:53:29 2012 -0400

    [OT] Better fallback-position Thai / Lao ccc!=0 marks

 src/hb-ot-shape-fallback.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 9f2348de58f0f85593027378169bc03c4dd64e59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 21:08:59 2012 -0400

    [OT] Add serialize() for Coverage

 src/hb-open-type-private.hh	    | 34 +++++++++++++++++----
 src/hb-ot-layout-common-private.hh | 62
 ++++++++++++++++++++++++++++++++++++++
 2 files changed, 90 insertions(+), 6 deletions(-)

commit e901b954c6ec44ac3ae7fb3c326e6e7a40718e4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 20:26:08 2012 -0400

    [OT] Start adding serialize() API

 src/hb-open-type-private.hh | 77
 +++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 77 insertions(+)

commit 965c280de09b49d711cb78d629da321c802084de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 13:59:16 2012 -0400

    Add HB_BUFFER_ASSERT_VAR

    To be used in places we access buffer vars...

 src/hb-buffer-private.hh |  3 +++
 src/hb-buffer.cc	  | 16 ++++++++++++++++
 2 files changed, 19 insertions(+)

commit 0ccf9b64736559a230425fd131c9eb8aa3048221
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 11:53:26 2012 -0400

    Move code around

 src/hb-ot-shape.cc | 21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)

commit 2fcbbdb41a322f54b61d9ce983ab54434504c5ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 11:11:54 2012 -0400

    Port Arabic fallback ligating to share code with GSUB

    This will eventually allow us to skip marks, as well as (fallback)
    attach marks to ligature components of fallback-shaped Arabic.
    That would be pretty cool.	I kludged GDEF props in, so mark-skipping
    works, but the produced ligature id/components will be cleared later
    by substitute_start() et al.

    Perhaps using a synthetic table for Arabic fallback shaping was
    a better
    idea.  The current approach has way too many layering violations...

 src/hb-ot-layout-gsubgpos-private.hh |  4 ++
 src/hb-ot-shape-complex-arabic.cc    | 72
 ++++++++++++++++++++++++------------
 src/hb-ot-shape.cc		      |  4 +-
 3 files changed, 56 insertions(+), 24 deletions(-)

commit 5e399a8a45bddb49e06e2ca39df1ed04398c0aff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 29 10:40:49 2012 -0400

    Minor

 src/hb-ot-layout-gsub-table.hh       | 1 -
 src/hb-ot-layout-gsubgpos-private.hh | 1 -
 2 files changed, 2 deletions(-)

commit a177d027d1d0ad9539e30ed75d8652e0e8da20ff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 23:18:22 2012 -0400

    [GSUB] Move ligation logic over

 src/hb-ot-layout-gsub-table.hh       | 78
 ++++-------------------------------
 src/hb-ot-layout-gsubgpos-private.hh | 80
 ++++++++++++++++++++++++++++++++++++
 2 files changed, 89 insertions(+), 69 deletions(-)

commit 191fa885d9e0a2dce92dd8727cddd18495e62409
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 22:58:55 2012 -0400

    [GSUB] Merge Ligature and context input matching

    Looks better now...

 TODO				      |  4 --
 src/hb-ot-layout-gsub-table.hh       | 71
 +++++++-----------------------------
 src/hb-ot-layout-gsubgpos-private.hh | 29 ++++++++++++++-
 3 files changed, 40 insertions(+), 64 deletions(-)

commit 93814ca7dc2a7251f861c1c47ba155ba6e6bdf19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 22:24:51 2012 -0400

    Start converging Ligature and match_input

 src/hb-ot-layout-gsub-table.hh       | 58
 +++++++++++++++++----------------
 src/hb-ot-layout-gsubgpos-private.hh | 62
 ++++++++++++++++++++++++++++--------
 2 files changed, 78 insertions(+), 42 deletions(-)

commit 2eef71737ea29ffadbb5a2be4a898b44f53f66ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 19:16:38 2012 -0400

    [hb-icu-le] Add visbility

 src/hb-icu-le/FontTableCache.h		|  6 +++++-
 src/hb-icu-le/PortableFontInstance.cpp | 39
 ----------------------------------
 src/hb-icu-le/PortableFontInstance.h	|  7 ++++--
 src/hb-icu-le/cmaps.cpp		|  2 +-
 src/hb-icu-le/cmaps.h			|  5 ++++-
 src/hb-icu-le/letest.h			| 14 ++++++++++++
 src/hb-icu-le/sfnt.h			|  6 +++++-
 7 files changed, 34 insertions(+), 45 deletions(-)

commit d59e28e49204ed609d8a1bf3c0f21ab5fc178337
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 19:08:36 2012 -0400

    Minor

 src/Makefile.am	   | 6 +++++-
 src/check-libstdc++.sh    | 2 +-
 src/check-static-inits.sh | 4 ++--
 3 files changed, 8 insertions(+), 4 deletions(-)

commit af169d2813ff8075288cd4a7811f0715e4fea3da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 19:08:22 2012 -0400

    Minor

 src/hb-icu-le/PortableFontInstance.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 52ff2681d88886e2165ced397966ba29c2073583
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 18:03:35 2012 -0400

    Use VisualStudio-style atomic intrinsics on mingw32

 src/hb-atomic-private.hh | 25 ++++++++++++++++++-------
 1 file changed, 18 insertions(+), 7 deletions(-)

commit 7c8e844d92aa604fc4b396343721ea90eb83adb8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 17:57:49 2012 -0400

    Use namespace for OpenType tables

    Avoids USHORT, SHORT, ULONG, LONG clashes with Windows API.

 src/hb-font.cc			      | 12 ++---
 src/hb-open-file-private.hh	      |  4 ++
 src/hb-open-type-private.hh	      |  9 ++--
 src/hb-ot-head-table.hh	      |  4 ++
 src/hb-ot-hhea-table.hh	      |  5 ++
 src/hb-ot-hmtx-table.hh	      |  6 +++
 src/hb-ot-layout-common-private.hh   |  5 ++
 src/hb-ot-layout-gdef-table.hh       |  4 ++
 src/hb-ot-layout-gpos-table.hh       |  4 ++
 src/hb-ot-layout-gsub-table.hh       |  4 ++
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++
 src/hb-ot-layout-private.hh	      | 12 +++--
 src/hb-ot-layout.cc		      | 91
 ++++++++++++++++++------------------
 src/hb-ot-maxp-table.hh	      |  4 ++
 src/hb-ot-name-table.hh	      |  4 ++
 src/hb-uniscribe.cc		      |  8 ++--
 src/main.cc			      |  2 +
 17 files changed, 117 insertions(+), 65 deletions(-)

commit dc5df5af6b349c3d9e4ab876864d9dec8096401f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 28 16:31:23 2012 -0400

    Revert "Minor"

    This reverts commit 3e0a03978b91994bb7fa7922593cbdfc50878dfc.

    I know remember why that line is there :).

 src/hb-ot-shape-complex-arabic.cc | 1 +
 1 file changed, 1 insertion(+)

commit 3e0a03978b91994bb7fa7922593cbdfc50878dfc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 27 17:10:02 2012 -0400

    Minor

 src/hb-ot-shape-complex-arabic.cc | 1 -
 1 file changed, 1 deletion(-)

commit 667218a5b134728863a318c73070f4e323590bbd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 27 17:00:44 2012 -0400

    Minor

 src/hb-ot-shape-fallback.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 30dd62251fcd04c2cbaa9b979d47ddbf62c6d460
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 27 16:54:34 2012 -0400

    Only fallback-position glyphs if we have the ccc

    Previously, ccc=0 Thai / Lao marks were being
    mispositioned.  Don't touch them.

 src/hb-ot-shape-fallback.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e1ba62811a61afb046d349e578cd141363c7fb34
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 27 16:28:05 2012 -0400

    Center unknown marks horizontally

 src/hb-ot-shape-fallback.cc | 1 +
 1 file changed, 1 insertion(+)

commit a4e75e4128751bb902117abc1a59dce4f2147672
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 27 15:54:15 2012 -0400

    Minor

 test/shaping/hb_test_tools.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 23b0e9d7dc801e11640979af3c2b00649a519bb1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 26 14:30:18 2012 -0400

    [Indic] Fix switch

    D'oh.  Was working by pure chance :)).

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ae4d4e1de6b4512576080e95896383887b30982f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 26 14:27:44 2012 -0400

    Bug 53815 - CoreText backend doesn't link

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ec0e46376a2afec4ff7606f95582b0ec49c2a44a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 24 00:44:53 2012 -0400

    Remove TODO items

 TODO | 4 ----
 1 file changed, 4 deletions(-)

commit 56e878ab875ff06d74702145e380e198be967bd6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 24 00:41:51 2012 -0400

    [graphite2] Cleanup scratch buffer allocation

 src/hb-graphite2.cc | 77
 ++++++++++++++++++++++++++++++-----------------------
 1 file changed, 44 insertions(+), 33 deletions(-)

commit 2f7586c6229096143ca0a96712a27416ee0d3c85
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 23:59:55 2012 -0400

    [icu-le] Implement icu layout engine shaper

 configure.ac	       |   2 +-
 src/hb-icu-le.cc      | 113
 +++++++++++++++++++++++++++++++++++++++++++++-----
 src/hb-icu-le/cmaps.h |   1 -
 src/hb-shaper-list.hh |   4 ++
 4 files changed, 108 insertions(+), 12 deletions(-)

commit ba7f6c3797e5b440557bacd9b666bf09713dca76
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 21:52:44 2012 -0400

    [icu-le] Hook up to hb_face_t

 src/hb-icu-le.cc			|  17 +++-
 src/hb-icu-le/FontTableCache.cpp	|  34 ++++----
 src/hb-icu-le/FontTableCache.h		|   9 ++-
 src/hb-icu-le/PortableFontInstance.cpp | 144
 +++------------------------------
 src/hb-icu-le/PortableFontInstance.h	|  21 ++---
 src/hb-icu-le/README			|   1 +
 6 files changed, 57 insertions(+), 169 deletions(-)

commit e96bb36995b2a5321b4d32bb11906e1701aaf115
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 21:37:51 2012 -0400

    [icu-le] Actually use the FontTableCache

 src/hb-icu-le/PortableFontInstance.cpp | 25 ++++++++-----------------
 1 file changed, 8 insertions(+), 17 deletions(-)

commit 7d242364ea647f655a7092bda25f9a10774c57f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 21:23:41 2012 -0400

    [icu-le] Start adding a icu-layout-engine backend

    Import PortableFontInstance and add shaper stub.

 configure.ac				|   9 +
 src/Makefile.am			|   8 +
 src/hb-icu-le.cc			| 111 ++++++++
 src/hb-icu-le/FontTableCache.cpp	|  91 +++++++
 src/hb-icu-le/FontTableCache.h		|  41 +++
 src/hb-icu-le/Makefile.am		|  25 ++
 src/hb-icu-le/PortableFontInstance.cpp | 436
 ++++++++++++++++++++++++++++++++
 src/hb-icu-le/PortableFontInstance.h	| 117 +++++++++
 src/hb-icu-le/README			|   2 +
 src/hb-icu-le/cmaps.cpp		| 200 +++++++++++++++
 src/hb-icu-le/cmaps.h			|  85 +++++++
 src/hb-icu-le/letest.h			|  49 ++++
 src/hb-icu-le/license.html		|  51 ++++
 src/hb-icu-le/sfnt.h			| 449
 +++++++++++++++++++++++++++++++++
 14 files changed, 1674 insertions(+)

commit b5584ee4be46b47e1678acf28426970a6d670b4f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 16:26:07 2012 -0400

    [Indic] For old-spec, match non-zero context

    Fixes consonant-position with old-spec Malayalam.  Uniscribe seem
    to be
    doing this.  Fixes below-base La (eg. Pa,H,La) with AnjaliNewLipi.ttf.
    Doesn't regress new-spec or other scripts.

 src/hb-ot-shape-complex-indic.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit d9b204d3d24cde165167714728bf380267903d6a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 16:22:28 2012 -0400

    [GSUB] Allow non-zero-context matching in would_apply()

    To be used in the next patch.

 src/hb-ot-layout-gsubgpos-private.hh |  6 ++++--
 src/hb-ot-layout-private.hh	      |  3 ++-
 src/hb-ot-layout.cc		      | 14 ++++++++------
 src/hb-ot-layout.h		      |  7 ++++---
 src/hb-ot-map.cc		      | 12 ++----------
 src/hb-ot-shape-complex-indic.cc     |  2 +-
 src/test-would-substitute.cc	      |  2 +-
 7 files changed, 22 insertions(+), 24 deletions(-)

commit 1f2bb172fe9a173ecfd61054f1fdd850943ef059
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 16:10:37 2012 -0400

    Revert "[Indic/GSUB] Ignore context when matching would_apply()"

    This reverts commit 24dd4e56743c6ce5e01cb710ca9e01b3e527af58.

    Oops.  My bad.  The change _regressed_ Malayalam test suite, not
    improved it.  I'll redo it, differentiating between old-spec and
    new-spec cases.

 src/hb-ot-layout-gsubgpos-private.hh | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 24dd4e56743c6ce5e01cb710ca9e01b3e527af58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 15:47:10 2012 -0400

    [Indic/GSUB] Ignore context when matching would_apply()

    The MS Indic specs say "...all classifications are determined
    ... using
    context-free substitutions."  However, testing shows that MS's
    Malayalam
    shapers (both old and new), "match" even if there is no zero-context
    rule.
    We follow.

    Fixes below-base La (eg. Pa,H,La) with AnjaliNewLipi.ttf (old spec).
    Moreover, test suite Malayalam failures are down to 312 from 875!  No
    change in other scripts.

    Current numbers:

    BENGALI: 353996 out of 354285 tests passed. 289 failed (0.0815727%)
    DEVANAGARI: 707339 out of 707394 tests passed. 55 failed (0.00777502%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60769 out of 60809 tests passed. 40 failed (0.0657797%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299106 out of 299124 tests passed. 18 failed (0.00601757%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1047541 out of 1048416 tests passed. 875 failed
    (0.0834592%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271726 out of 271847 tests passed. 121 failed (0.0445103%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970558 out of 970573 tests passed. 15 failed (0.00154548%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-layout-gsubgpos-private.hh | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 6732d62e78b13842ead9549c97bede25c73976cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 15:19:45 2012 -0400

    [Indic] Implement pre-base reordering Ra for old-spec Malayalam

    Fixes Pa,H,Ra sequence with AnjaliNewLipi.ttf.

 src/hb-ot-shape-complex-indic.cc | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 80cd92326f8a3f48a7821e720e8ecb2072e73286
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 12:06:14 2012 -0400

    [Indic] Only apply basic features per-syllable

    Free up syllables and let features work across syllables for the
    presentation forms features and GPOS.

    Fixed:
    - 1 GURMUKHI test (remains 40)
    - 12 KHMER tests (remains 18)
    - 11 SINHALA tests (remains 121)

    Regresses:
    - 5 MALAYALAM tests (up to 312)

    Current numbers:

    BENGALI: 353996 out of 354285 tests passed. 289 failed (0.0815727%)
    DEVANAGARI: 707339 out of 707394 tests passed. 55 failed (0.00777502%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60769 out of 60809 tests passed. 40 failed (0.0657797%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299106 out of 299124 tests passed. 18 failed (0.00601757%)
    LAO: 53611 out of 53644 tests passed. 33 failed (0.0615167%)
    MALAYALAM: 1048104 out of 1048416 tests passed. 312 failed
    (0.0297592%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271726 out of 271847 tests passed. 121 failed (0.0445103%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970558 out of 970573 tests passed. 15 failed (0.00154548%)
    TIBETAN: 208469 out of 208469 tests passed. 0 failed (0%)

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit df5d5c68f3a5cab17bf4a429802a1a1a834c3456
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 23 09:33:30 2012 -0400

    Whitespace

 src/hb-ot-layout-gpos-table.hh | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 7fe00d15da20193ca94a8ead9aee60df24074a9e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 18 13:59:46 2012 -0400

    Release 0.9.3

 NEWS	      | 16 ++++++++++++++++
 configure.ac |  2 +-
 2 files changed, 17 insertions(+), 1 deletion(-)

commit 7068e534c4ef7ed2eb7ef8e1370fd4a449556ce8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 18 13:56:10 2012 -0400

    Fix ChangeLog generation rule

 Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f1747ed7d28148807ad07eb8e22db3ab5c54966
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 16 11:46:46 2012 -0400

    Add comment

 src/hb-ot-shape-complex-arabic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit bd08d5d126aa878d1dbf7bfd4b1a764c170cd9ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 16 11:35:50 2012 -0400

    [OT] Fix Arabic shaper OOB access

    https://bugzilla.mozilla.org/show_bug.cgi?id=782908

 src/hb-ot-shape-complex-arabic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b161bfc4f6f2db0edea780b95b798ff7b559cf33
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 16 08:09:44 2012 -0400

    [configure] Cleanup check for ICU

    Check for upstream-provided 'icu-uc' pkgconfig package.

 configure.ac | 21 +--------------------
 1 file changed, 1 insertion(+), 20 deletions(-)

commit daf0731865f91da960446928667d4095bde471ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 16 07:32:59 2012 -0400

    [ICU] Fix includes

    As reported by Steven Loomis, including uversion.h works everywhere.

 src/hb-icu.cc | 6 ------
 1 file changed, 6 deletions(-)

commit a67ba9c0fe6798a3500af9f4acee8d678f5144ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 15 18:52:17 2012 -0400

    Whitespace

 src/hb-old/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9fe76051f7003d6b6a10486c5595bf1a4dbf5fe6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 15 17:24:28 2012 -0400

    [NEWS] Fix date

    Oops!

 NEWS | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 45c1383cc7315f89c23c0ed388b99e87224884e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 14 09:33:18 2012 -0400

    Minor

 src/hb-coretext.cc	  | 8 ++++----
 src/hb-fallback-shape.cc | 8 ++++----
 src/hb-graphite2.cc	  | 8 ++++----
 src/hb-uniscribe.cc	  | 8 ++++----
 4 files changed, 16 insertions(+), 16 deletions(-)

commit 4ac4c6f2e12ddc8bf5e750671321458218b6e0c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 13 10:52:52 2012 -0400

    Fix ICU build with older ICUs

 src/hb-icu.cc | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 883cbf5ed79d2b60191f803a5ee3f3e4496f3441
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 12 17:11:27 2012 -0400

    Minor

 contrib/README | 2 ++
 1 file changed, 2 insertions(+)

commit b7a4d37d0b162f2222b65d09b9271b8c636086f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 21:32:23 2012 -0400

    minor

 configure.ac | 2 ++
 1 file changed, 2 insertions(+)

commit d5045a5f4017631a4660f985fe451c5a64c42ca0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 21:26:25 2012 -0400

    [ICU] Use new normalizer2 compose/decompose API

    It's considerably faster than the fallback implementation we had
    previously!

 src/hb-buffer.cc	   |  9 +++---
 src/hb-glib.cc		   | 26 +++++++---------
 src/hb-icu.cc		   | 75
 +++++++++++++++++++++++++++++++++++++----------
 src/hb-unicode-private.hh | 13 ++------
 src/hb-unicode.cc	   | 35 ++++++++++++++++++++--
 src/hb-warning.cc	   |  8 -----
 6 files changed, 110 insertions(+), 56 deletions(-)

commit 2b73a1f112c489c2553743c08dc03cd89f60cb2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 19:17:54 2012 -0400

    Add TODO

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit 9f9f04c2229227bb0712166e824157bbbf5cef80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 18:34:13 2012 -0400

    [OT] Unbreak Thai shaping and fallback Arabic shaping

    The merger of normalizer and glyph-mapping broke shapers that
    modified text stream.  Unbreak them by adding a new preprocess_text
    shaping stage that happens before normalizing/cmap and disallow
    setup_mask modification of actual text.

 src/hb-ot-shape-complex-arabic.cc  | 42
 ++++++++++++++++++++++++++++----------
 src/hb-ot-shape-complex-indic.cc   |  1 +
 src/hb-ot-shape-complex-misc.cc    | 12 ++++++-----
 src/hb-ot-shape-complex-private.hh | 15 +++++++++++---
 src/hb-ot-shape.cc		    |  3 +++
 5 files changed, 54 insertions(+), 19 deletions(-)

commit e9f28a38f54b98fa59f9159ccaaa3be6027e1378
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 18:20:28 2012 -0400

    [OT] Add shape_plan to Arabic shaper

 src/hb-ot-shape-complex-arabic.cc | 82
 +++++++++++++++++++++++++--------------
 1 file changed, 53 insertions(+), 29 deletions(-)

commit 344cc56698a8c84c4c1a05a71d829e5171aa3a60
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 11 17:36:23 2012 -0400

    Add TODO

 TODO | 4 ++++
 1 file changed, 4 insertions(+)

commit daf13afb0801740dcc7900c4af190e24b80a05c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 16:38:44 2012 -0400

    [OT] Implement fallback mark positioning for "double" combining marks

 src/hb-ot-shape-fallback.cc | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit d345313104d9e3c8a8533ccdebd74e0648d0bee3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 16:34:04 2012 -0400

    [OT] Fix fallback mark positioning with left-to-right text

    Ouch!

 src/hb-ot-shape-fallback.cc | 13 +++++++++++--
 1 file changed, 11 insertions(+), 2 deletions(-)

commit e297ee4acd6f9d950f8542fc6ad71fd580b69284
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 14:49:37 2012 -0400

    Bump version to 0.9.2

    A *real* release this time, with NEWS, ChangeLog, etc.

 AUTHORS      |   8 ++++
 COPYING      |   9 ++--
 Makefile.am  |  13 +++---
 NEWS	      | 136
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 THANKS       |   7 +++
 configure.ac |   4 +-
 6 files changed, 165 insertions(+), 12 deletions(-)

commit 6efe1200b97cefe019857b0b5951a4a87deeb02b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 13:49:32 2012 -0400

    Bump version to 0.9.1

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 206ab6057303273590a3d005660e075bdcee0f5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 09:06:30 2012 -0400

    [test] Move around

 .../in-tree/shaper-arabic/script-arabic/MANIFEST   |	 2 +-
 .../shaper-arabic/script-arabic/crulp/MANIFEST     |	 1 -
 .../script-arabic/crulp/ligatures/2grams.txt	    |  601 --
 .../script-arabic/crulp/ligatures/3grams.txt	    | 3415 -----------
 .../script-arabic/crulp/ligatures/4grams.txt	    | 6316
 --------------------
 .../script-arabic/crulp/ligatures/5grams.txt	    | 5029
 ----------------
 .../script-arabic/crulp/ligatures/6grams.txt	    | 1542 -----
 .../script-arabic/crulp/ligatures/7grams.txt	    |  354 --
 .../script-arabic/crulp/ligatures/8grams.txt	    |	26 -
 .../script-arabic/crulp/ligatures/LICENSE	    |	 3 -
 .../script-arabic/crulp/ligatures/MANIFEST	    |	 7 -
 .../script-arabic/crulp/ligatures/README	    |	16 -
 .../script-arabic/crulp/ligatures/SOURCES	    |	 4 -
 .../script-arabic/language-urdu/MANIFEST	    |	 1 +
 .../script-arabic/language-urdu/crulp/MANIFEST     |	 1 +
 .../language-urdu/crulp/ligatures/2grams.txt	    |  601 ++
 .../language-urdu/crulp/ligatures/3grams.txt	    | 3415 +++++++++++
 .../language-urdu/crulp/ligatures/4grams.txt	    | 6316
 ++++++++++++++++++++
 .../language-urdu/crulp/ligatures/5grams.txt	    | 5029
 ++++++++++++++++
 .../language-urdu/crulp/ligatures/6grams.txt	    | 1542 +++++
 .../language-urdu/crulp/ligatures/7grams.txt	    |  354 ++
 .../language-urdu/crulp/ligatures/8grams.txt	    |	26 +
 .../language-urdu/crulp/ligatures/LICENSE	    |	 3 +
 .../language-urdu/crulp/ligatures/MANIFEST	    |	 7 +
 .../language-urdu/crulp/ligatures/README	    |	16 +
 .../language-urdu/crulp/ligatures/SOURCES	    |	 4 +
 26 files changed, 17316 insertions(+), 17315 deletions(-)

commit 7a484c601e0958533eb85a6902296733c39537fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 09:05:29 2012 -0400

    [test] Add Urdu ligature sequences from CRULP

 .../in-tree/shaper-arabic/script-arabic/MANIFEST   |	 1 +
 .../shaper-arabic/script-arabic/crulp/MANIFEST     |	 1 +
 .../script-arabic/crulp/ligatures/2grams.txt	    |  601 ++
 .../script-arabic/crulp/ligatures/3grams.txt	    | 3415 +++++++++++
 .../script-arabic/crulp/ligatures/4grams.txt	    | 6316
 ++++++++++++++++++++
 .../script-arabic/crulp/ligatures/5grams.txt	    | 5029
 ++++++++++++++++
 .../script-arabic/crulp/ligatures/6grams.txt	    | 1542 +++++
 .../script-arabic/crulp/ligatures/7grams.txt	    |  354 ++
 .../script-arabic/crulp/ligatures/8grams.txt	    |	26 +
 .../script-arabic/crulp/ligatures/LICENSE	    |	 3 +
 .../script-arabic/crulp/ligatures/MANIFEST	    |	 7 +
 .../script-arabic/crulp/ligatures/README	    |	16 +
 .../script-arabic/crulp/ligatures/SOURCES	    |	 4 +
 13 files changed, 17315 insertions(+)

commit f4cb4762986a28634fa7de9b706f9d37859b881e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 03:51:44 2012 -0400

    [OT] Slightly adjust normalizer

    The change is very subtle.	If we have a single-char cluster that
    decomposes to three or more characters, then try recomposition, in
    case the farther mark may compose with the base.

 src/hb-ot-shape-normalize.cc | 81
 +++++++++++++++++++++++++++++---------------
 1 file changed, 54 insertions(+), 27 deletions(-)

commit 07d682806349aee81f53114778ce0beb23909ed7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 10 03:28:50 2012 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 25 ++++++++-----------------
 src/hb-ot-shape.cc	      |  2 +-
 2 files changed, 9 insertions(+), 18 deletions(-)

commit b00321ea78793d9b3592b5173a9800e6322424fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 22:33:32 2012 -0400

    [OT] Avoid calling get_glyph() twice

    Essentially move the glyph mapping to normalization process.
    The effect on Devanagari is small (but observable).  Should be more
    observable in simple text, like ASCII.

 src/hb-ot-shape-normalize-private.hh |  2 +
 src/hb-ot-shape-normalize.cc	      | 76
 +++++++++++++++++++++++++-----------
 src/hb-ot-shape.cc		      | 44 ++++++++++-----------
 3 files changed, 77 insertions(+), 45 deletions(-)

commit 12c0875eafa4bd92db650e5acca046d99594d1e6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 22:00:53 2012 -0400

    [OT] Remove redundant check

 src/hb-ot-shape.cc | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit 5c60b70c89b4e0a6512d9fd1ab5394dd76feb742
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 21:58:07 2012 -0400

    [OT] More code shuffling around

    Preparing for merging map_glyphs() and normalize().

 src/hb-ot-shape.cc | 167
 +++++++++++++++++++++++++++--------------------------
 1 file changed, 86 insertions(+), 81 deletions(-)

commit cd0c6e148f6d078b364370cb2f808b793b921be2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 21:48:55 2012 -0400

    Shuffle buffer variable allocations around

    To room for more allocations, coming.

 src/hb-ot-layout-private.hh		  | 6 +++---
 src/hb-ot-shape-complex-arabic.cc	  | 2 +-
 src/hb-ot-shape-complex-indic-private.hh | 4 ++--
 src/hb-ot-shape-complex-private.hh	  | 5 ++---
 src/hb-ot-shape-private.hh		  | 4 ++--
 5 files changed, 10 insertions(+), 11 deletions(-)

commit 8d1eef3f32fb539de2a72804fa3834acc18daab5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 21:31:52 2012 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 50
 +++++++++++++++++++++++++++-----------------
 1 file changed, 31 insertions(+), 19 deletions(-)

commit 56c9e7c004e802ddcb8c704346026f1d7a812f9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 21:12:30 2012 -0400

    Fill out combining class resetting for fallback shaping
    Thai/Lao/Tibetan

 src/hb-ot-shape-fallback.cc | 38 +++++++++++++++++++++++++++++++++++++-
 src/hb-unicode-private.hh   |	7 ++++---
 src/hb-unicode.cc	     |	2 +-
 3 files changed, 42 insertions(+), 5 deletions(-)

commit a321e1d51e0e7fa02738410e8d6e77c841bc6b13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 18:30:34 2012 -0400

    Revert "Reject lookups with no subTable"

    This reverts commit 30ec9002d84e8b49290e782e6192069821ffa942.

    See previous commit.

 src/hb-ot-layout-common-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit 2eaf482b371034ce6ebfaedee98049b036fd3493
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 9 18:30:05 2012 -0400

    Revert "[GSUB/GPOS] Reject Context/ChainContext lookups with zero
    input"

    This reverts commit 0981068b75710397f08e0d2d776a0a2ea68d7117.

    I was confused.  Even if we access coverage[0] unconditionally,
    we don't
    need bound checks since the array machinary already handles that.

 src/hb-ot-layout-gsubgpos-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit a02d86484be870615297abfc7be9f94645434762
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 18:04:29 2012 -0400

    Add check-exported-symbols.sh

    And misc linking fixes.

 src/Makefile.am		  |  1 +
 src/check-exported-symbols.sh	  | 40
 ++++++++++++++++++++++++++++++++++++++++
 src/check-internal-symbols.sh	  |  2 +-
 src/hb-ot-shape-complex-indic.cc |  2 +-
 src/hb-ot-shape.cc		  |  6 +++---
 5 files changed, 46 insertions(+), 5 deletions(-)

commit 4c8ac4f47e95d2b266b2f64e75c55af8233b6b91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 17:44:19 2012 -0400

    Misc minor fixes

 src/check-internal-symbols.sh |  10 +--
 src/hb-font-private.hh        |  29 +++++++-
 src/hb-font.cc		       |  63 +++++++---------
 src/hb-font.h		       |   2 +-
 src/hb-graphite2.cc	       |   4 +-
 src/hb-old.cc		       |   2 +-
 src/hb-ot-layout.cc	       |   6 +-
 src/hb-ot-shape-fallback.cc   |  10 +--
 src/hb-ot-shape.cc	       |   2 +-
 src/hb-shape-plan.cc	       |   2 +-
 src/hb-shape-plan.h	       |   2 +-
 src/hb-tt-font.cc	       | 166
 +-----------------------------------------
 12 files changed, 72 insertions(+), 226 deletions(-)

commit 560d68af8168d1baff607b9616a3590af70fe9ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 17:16:01 2012 -0400

    Use a export-file for Windows builds

    Apparently even that doesn't make check-internal-symbols.sh happy with
    mingw32.  Going to disable that for DLLs again, but hopefully the
    export-file is doing *something*.

 configure.ac	 | 14 +++++++++++++-
 src/Makefile.am | 22 +++++++++++++++++++++-
 src/hb-buffer.h |  4 ++--
 3 files changed, 36 insertions(+), 4 deletions(-)

commit f8751cf8e0a16125d63a88da65fdbfa76a19453f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 17:15:44 2012 -0400

    [hb-old] speed-up build

 src/hb-old/harfbuzz-external.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 5f4c52867ce67faa15f5d26b59c18c8d068e9261
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 16:53:37 2012 -0400

    Minor

 src/hb-ot-layout.h | 1 -
 1 file changed, 1 deletion(-)

commit fe2b8a7777ab1c84980424ede713cb0d6701f987
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 15:27:14 2012 -0400

    Minor

 TODO | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7e7d245b332306949a19c628bacd920717434769
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 15:23:48 2012 -0400

    Make default_language threadsafe

 src/hb-common.cc | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

commit 06b192c458010c847362d809673209c87ea29949
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 15:23:45 2012 -0400

    Minor

 src/hb-common.h | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 37191ede7583fdb864db32a8f4d90956657926c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 14:59:09 2012 -0400

    Minor

 src/hb-common.h | 4 ++--
 src/hb-icu.h	 | 1 -
 2 files changed, 2 insertions(+), 3 deletions(-)

commit 6d9a329a8a0f11f4b175e407de59c55924de1ef6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 14:48:41 2012 -0400

    Adjust a couple source checks

 src/check-internal-symbols.sh |  4 ++--
 src/check-static-inits.sh     | 10 ++++++++--
 2 files changed, 10 insertions(+), 4 deletions(-)

commit 9c929abdcfef44c0193a2917b20981df37ade21c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 14:33:37 2012 -0400

    Minor renaming

 src/Makefile.am			      |   4 +-
 src/hb-ot-shape-fallback-private.hh	      |  39 ++++
 src/hb-ot-shape-fallback.cc		      | 276
 +++++++++++++++++++++++++++
 src/hb-ot-shape-position-fallback-private.hh |  39 ----
 src/hb-ot-shape-position-fallback.cc	      | 276
 ---------------------------
 src/hb-ot-shape.cc			      |   4 +-
 6 files changed, 319 insertions(+), 319 deletions(-)

commit 801298b590effd768607bb532dc83c73ba65d16b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 14:26:36 2012 -0400

    Fix cast

    https://bugs.freedesktop.org/show_bug.cgi?id=53233

 src/hb-buffer-private.hh | 10 ++++++----
 src/hb-shape-plan.cc	  |  4 ++--
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 21756934a15e31dc243e2b6d80adec5752477652
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 8 01:20:45 2012 -0400

    [OT] Implement fallback positioning

    Implemented for Arabic, Hebrew, and generic marks.
    Activated if no GPOS table present.

 src/hb-font.h			      |   3 +-
 src/hb-ft.cc			      |   3 +-
 src/hb-old.cc			      |   2 +-
 src/hb-ot-shape-position-fallback.cc | 237
 ++++++++++++++++++++++++++++++++++-
 src/hb-unicode-private.hh	      |  81 ++++++++++++
 src/hb-unicode.cc		      | 107 ++++++----------
 6 files changed, 356 insertions(+), 77 deletions(-)

commit fb56e7628362a73e20f7f0b49fe31e802dc01f4f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 23:44:47 2012 -0400

    [hb-old] Fix warnings

 src/hb-old/harfbuzz-shaper.cpp | 2 ++
 1 file changed, 2 insertions(+)

commit affaf8a0e5aa38e5820455f789eebf916e02eb7b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 22:41:38 2012 -0400

    [OT] Start adding fallback positioning

    Used when there is no GPOS.

 src/Makefile.am			      |  2 ++
 src/hb-ot-shape-position-fallback-private.hh | 39 +++++++++++++++++++++++
 src/hb-ot-shape-position-fallback.cc	      | 47
 ++++++++++++++++++++++++++++
 src/hb-ot-shape.cc			      | 23 +++-----------
 4 files changed, 93 insertions(+), 18 deletions(-)

commit 7e4920fd1577987bf6804f67765e22a84983e057
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 22:32:23 2012 -0400

    Minor

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 472f229a63f0d1bb21b02179ef430b7698df8f12
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 22:25:24 2012 -0400

    [GSUB] Generalize would_apply()

    Fixes logic also, where before we were always matching if
    glyphs_len==1
    and a ligature started with the glyph.

 src/hb-ot-layout-gsub-table.hh       | 26 ++++++++++++++++++++-----
 src/hb-ot-layout-gsubgpos-private.hh | 37
 ++++++++++++++++++------------------
 src/hb-ot-layout.cc		      |  3 +--
 3 files changed, 40 insertions(+), 26 deletions(-)

commit 6f3a300138f659020c21c3e08b7981c78df5f332
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 22:13:25 2012 -0400

    Add hb_font_glyph_from/to_string

 src/hb-font-private.hh       | 43
 +++++++++++++++++++++++++++++++++++++++++++
 src/hb-font.cc		      | 24 ++++++++++++++++++++----
 src/hb-font.h		      | 11 +++++++++++
 src/hb-private.hh	      | 16 ++++++++++++++++
 src/test-would-substitute.cc | 11 ++++++++++-
 util/options.cc	      |  2 +-
 6 files changed, 101 insertions(+), 6 deletions(-)

commit eb56f6ae96260c5b4bcd4e1dfb7ab733a230f3a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 21:44:25 2012 -0400

    Minor

 src/hb-mutex-private.hh | 1 +
 src/hb-uniscribe.cc	 | 1 +
 src/hb-uniscribe.h	 | 2 ++
 3 files changed, 4 insertions(+)

commit f4e48adcdd4315ce09e755f87a0f801d88194f42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 21:12:49 2012 -0400

    [OT] Apply 'rclt' feature in horizontal mode

    'rclt' is "Required Contextual Forms" being proposed by Microsoft.
    It's like 'calt', but supposedly always on.  We apply 'calt' anyway,
    and now apply this too.

 src/hb-ot-shape.cc | 1 +
 1 file changed, 1 insertion(+)

commit b1914b8bd08ecdea79930dda7e3bb2ae9e6134a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 16:57:48 2012 -0400

    Fix warnings

 src/hb-icu.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0f8881d6bbf6cd59938315eeff9b71cfc736aa4e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 16:57:02 2012 -0400

    More refactoring

 src/hb-ot-shape-normalize.cc | 161
 +++++++++++++++++++++++++++++++++++++++++-
 src/hb-unicode-private.hh    | 164
 +------------------------------------------
 2 files changed, 162 insertions(+), 163 deletions(-)

commit 428dfcab6634ff264570a0a5d715efb8048c3db5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 16:51:48 2012 -0400

    Minor refactoring

 src/hb-ot-shape-normalize.cc | 27 +++++++++++++++++++++++----
 1 file changed, 23 insertions(+), 4 deletions(-)

commit 61f41849af6ff9edf8b55cf9610066d1bfb4a8df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 16:45:27 2012 -0400

    Add Hebrew presentation forms shaping

    Lifted from https://bugzilla.mozilla.org/show_bug.cgi?id=728866

 src/hb-unicode-private.hh | 121
 +++++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 120 insertions(+), 1 deletion(-)

commit 32d71dc13317b322e2c5de00d767b2cb15fddd8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 14:11:16 2012 -0400

    [Graphite] Minor

 src/hb-graphite2.cc | 60
 +++++++++++++++++++++++++----------------------------
 1 file changed, 28 insertions(+), 32 deletions(-)

commit 030ac5022e8a43b9329c26e72527bafc582ef44b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 7 13:01:12 2012 -0400

    Remove enum trailing comma

    ...again.

 src/hb-ot-shape-normalize-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 368b4e7649f9bc8c6bebf7c7ff03c9b9ec425a25
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 23:06:04 2012 -0400

    Minor

 src/hb-font.cc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit ade7459ea7c75b4f33f7cfa43dd5bdfa0c18d6d5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 19:42:47 2012 -0700

    [util] Fix leaks

 src/hb-graphite2.cc | 18 ++++++++++++++----
 util/options.cc     |	2 +-
 util/options.hh     |	2 +-
 3 files changed, 16 insertions(+), 6 deletions(-)

commit 2fef993460dcfd94c92ab35413bdde18ad2b0ceb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 19:35:04 2012 -0700

    [Graphite] Fix graphite2 backend with RTL text

    Patch from Martin Hosken.

 src/hb-graphite2.cc | 33 ++++++++++++++++++---------------
 1 file changed, 18 insertions(+), 15 deletions(-)

commit e4992e13e19877a73ea05fc1d31005a262c685ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 19:25:39 2012 -0700

    [Graphite] Port graphite2 backend to new shaper infrastructure

 src/hb-graphite2.cc   | 234
 +++++++++++++++++++++++---------------------------
 src/hb-graphite2.h    |   2 +-
 src/hb-shaper-list.hh |   2 +-
 3 files changed, 109 insertions(+), 129 deletions(-)

commit 66591ececfba9791de06c814f5f30131e95e5fd2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 17:07:19 2012 -0700

    Remove unnecessary lifecycle bits

    We already set recount to INVALID when destroying.
    This block was not necessary.

 src/hb-font.cc | 3 ---
 1 file changed, 3 deletions(-)

commit e3320ecc1b5a7eaccc7c9370b2d1b76850f054be
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 6 11:44:10 2012 -0700

    Fix compiler warnings

 configure.ac | 12 +++++++++---
 1 file changed, 9 insertions(+), 3 deletions(-)

commit 167b625d988b74572d6b2f646c285b666b650d49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 5 21:16:26 2012 -0700

    [Indic] Minor, move 'blwf' after 'half'

    We don't apply them together anyway.  Should not make any difference
    right now.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 048e3b596fb7fccd3fb5f48de98b6b67788f774a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 4 18:04:57 2012 -0700

    Speed up hb_set_digest_lowest_bits_t calcs

 src/hb-set-private.hh | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit 3d1b66a35e1ab3be19335705f310b278d76d66d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 4 17:42:28 2012 -0700

    Speed up hb_set_digest_common_bits_t calcs

 src/hb-set-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit bdc48a879a1900138d8caaa8d90fb9fe1e768d1d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 4 17:08:38 2012 -0700

    Enlarge glyph_name buffer

    Lohit Devanagari has a glyph named:
    u0924_u094D.half_u0930_u094D.blwf.vatu

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 25326c2359b0a3e25222b94acd142bc36eff78a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 4 16:43:18 2012 -0700

    Rewrite ARRAY_LENGTH as a template function

    Such it wouldn't apply to pointers accidentally.

 src/hb-ot-shape-complex-arabic-table.hh | 4 ++--
 src/hb-private.hh			 | 9 ++++++---
 2 files changed, 8 insertions(+), 5 deletions(-)

commit 8ba8042821e4581fe4e87419e58c823520441205
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 3 18:54:54 2012 -0700

    [Indic] Fix consonant position font lookup logic

    Oops.  I broken this badly and the test suite did not notice.  That
    worries me.  Have to investigate.

 src/hb-ot-shape-complex-indic.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit abd0c05f1f7f0546593bb2f1c4d59db12cb32e46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 3 18:45:05 2012 -0700

    Minor

 src/test-would-substitute.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 46ee108ef80f5d4675899862698a8c34d8fcfab5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 3 18:21:13 2012 -0700

    Fix leak

 src/hb-shape-plan.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 71baea0062da4d7f143d62da38492a0813814e49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 3 17:40:07 2012 -0700

    [OT] Use general-category, not GDEF class, to decide to zero mark
    advances

    At this point, the GDEF glyph synthesis looks pointless.  Not that I
    have many fonts without GDEF lying around.

    As for mark advance zeroing when GPOS not available, that also
    is being
    replaced by proper fallback mark positioning soon.

 src/hb-ot-shape.cc | 7 ++-----
 1 file changed, 2 insertions(+), 5 deletions(-)

commit 3a7e137a68ec8f723dc3afa89c918ca2df7ff6bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 3 17:23:40 2012 -0700

    Dn't use gint

 src/hb-glib.cc | 4 ++--
 src/hb-icu.cc	| 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 11b0e20ba42bf0b17133c3e1087732802bb4f230
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 14:21:40 2012 -0400

    [Indic] Add per-script configuration tables

    This concludes the Indic shape_plan work.  May do for Arabic also...

 src/hb-ot-shape-complex-indic-private.hh |  16 +-
 src/hb-ot-shape-complex-indic.cc	  | 309
 +++++++++++++++----------------
 2 files changed, 159 insertions(+), 166 deletions(-)

commit 85fc6c483f6d734febbe39270e84701a651f01f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 12:21:44 2012 -0400

    [Indic] Move more stuff to the shape_plan

    Almost done.  Need to add per-script static tables.

 src/hb-ot-shape-complex-indic-machine.rl |   4 +-
 src/hb-ot-shape-complex-indic.cc	  | 216
 ++++++++++++++++---------------
 2 files changed, 116 insertions(+), 104 deletions(-)

commit 914ffaa40fcca020f65bacdd709421e9047afd83
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 11:03:39 2012 -0400

    [Indic] Move more repeated work into shape_plan

 src/hb-ot-shape-complex-indic.cc | 63
 ++++++++++++++++++++++++++--------------
 1 file changed, 42 insertions(+), 21 deletions(-)

commit a8c6da90f4c6e8d27a3a1b758a55476776d9f750
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 10:46:34 2012 -0400

    [OT] Add per-complex-shaper shape_plan data

    Hookup some Indic data to it.  More to come.

 src/hb-ot-shape-complex-arabic.cc  |	2 +
 src/hb-ot-shape-complex-indic.cc   | 128
 ++++++++++++++++++++++---------------
 src/hb-ot-shape-complex-misc.cc    |	4 ++
 src/hb-ot-shape-complex-private.hh |  16 ++++-
 src/hb-ot-shape-private.hh	    |	1 +
 src/hb-ot-shape.cc		    |  23 +++++--
 6 files changed, 113 insertions(+), 61 deletions(-)

commit 8bb5deba9630d35878eb6edb4643ecfabf99f15f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 10:07:58 2012 -0400

    [OT] Pipe shape_plan down to pause_callbacks

 src/hb-ot-map-private.hh		  |  8 ++---
 src/hb-ot-map.cc			  | 11 ++++---
 src/hb-ot-shape-complex-indic-machine.rl |  4 +--
 src/hb-ot-shape-complex-indic.cc	  | 50
 +++++++++++++++-----------------
 src/hb-ot-shape-private.hh		  |  6 ++++
 src/hb-ot-shape.cc			  | 28 ++++++++++--------
 6 files changed, 57 insertions(+), 50 deletions(-)

commit 3e38c0f2886c38d2f0a9d80a97a36edf2479d2c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 09:44:18 2012 -0400

    More massaging

 src/hb-ot-map-private.hh	   | 20 ++++++++------------
 src/hb-ot-map.cc		   | 17 ++++++++---------
 src/hb-ot-shape-complex-arabic.cc |  8 ++++----
 src/hb-ot-shape-complex-indic.cc  | 18 +++++++-----------
 4 files changed, 27 insertions(+), 36 deletions(-)

commit 16c6a27b4bffc19026944c7bea9cf0a3a8ff1d8f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 09:38:28 2012 -0400

    [OT] Port complex_shaper to planner/plan

 src/hb-ot-shape-complex-arabic.cc  | 17 ++++++++---------
 src/hb-ot-shape-complex-indic.cc   | 19 ++++++++-----------
 src/hb-ot-shape-complex-misc.cc    | 20 ++++++++------------
 src/hb-ot-shape-complex-private.hh | 32 +++++++++++---------------------
 src/hb-ot-shape-private.hh	    | 14 +++++++++++---
 src/hb-ot-shape.cc		    |  9 +++++----
 6 files changed, 51 insertions(+), 60 deletions(-)

commit 5393e3a62ba09fd7bcf3767b36225c8f49badb9d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 09:24:35 2012 -0400

    [OT] Minor refactoring

 src/hb-ot-map.cc	    |  4 ----
 src/hb-ot-shape-private.hh | 26 ++++++++++++++++++++++++++
 src/hb-ot-shape.cc	    | 26 ++------------------------
 src/hb-shape-plan.cc	    |  2 ++
 src/hb-shape.cc	    |  2 --
 5 files changed, 30 insertions(+), 30 deletions(-)

commit 24eacf17c801c66a2d466e8ae02b73f501a26b25
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 08:42:11 2012 -0400

    [Indic] Move consonant-position-setting into initial_reordering()

 src/hb-ot-shape-complex-indic.cc | 65
 +++++++++++++++++++++-------------------
 1 file changed, 35 insertions(+), 30 deletions(-)

commit afbcc24be01a64bdb5c05c63880269145fa1d3c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 08:36:40 2012 -0400

    [GSUB] Wire the font, not just the face, down to substitute()

    We need the font for glyph lookup during GSUB pauses in Indic shaper.
    Could perhaps be avoided, but at this point, we don't mean to support
    separate substitute()/position() entry points (anymore), so there is
    no point in not providing the font to GSUB.

 src/hb-ot-layout-gsub-table.hh       | 13 +++++--------
 src/hb-ot-layout-gsubgpos-private.hh |  7 ++-----
 src/hb-ot-layout-private.hh	      |  6 +++---
 src/hb-ot-layout.cc		      | 18 +++++++++---------
 src/hb-ot-map-private.hh	      | 15 ++++++---------
 src/hb-ot-map.cc		      |  8 ++++----
 src/hb-ot-shape-complex-indic.cc     |  8 ++++----
 src/hb-ot-shape.cc		      |  6 +++---
 8 files changed, 36 insertions(+), 45 deletions(-)

commit b0e6a26a10ccca70ebc88a9e158a89ccfab0add5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 08:11:14 2012 -0400

    [OT] Hide some API

    It was impossible to meaningfully use them from the outside these
    days.

 src/hb-ot-layout-private.hh | 40 ++++++++++++++++++++++++++++++++--------
 src/hb-ot-layout.cc	     | 20 --------------------
 src/hb-ot-layout.h	     | 34 ----------------------------------
 src/hb-ot-map.cc	     |	8 ++++----
 4 files changed, 36 insertions(+), 66 deletions(-)

commit 305246744ed178f116e01498b7f9d1af6950ca30
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 08:08:04 2012 -0400

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8ef3d53255ae9fbb0e46c22909e50009d1e7eeb0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 07:53:18 2012 -0400

    [Indic] More refactoring of consonant position peeking in the font

    To be moved to initial_reordering next...

 src/hb-ot-shape-complex-indic.cc | 59
 ++++++++++++++++++++++++++++------------
 1 file changed, 41 insertions(+), 18 deletions(-)

commit 3eb6f81fd3f1e56679eec10d08f5e2303121753f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 07:37:46 2012 -0400

    [Indic] Refactor

    Move all the logic that needs to eventually move into the indic table
    into hb-ot-shape-complex-indic-private.hh.

 src/hb-ot-shape-complex-indic-private.hh | 210
 ++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-indic.cc	  | 227
 ++-----------------------------
 2 files changed, 218 insertions(+), 219 deletions(-)

commit 3614ba242fc7d338761acdda365a134706035b6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 07:13:55 2012 -0400

    [Indic] Rename

 src/hb-ot-shape-complex-indic.cc | 40
 +++++++++++++++++++++-------------------
 1 file changed, 21 insertions(+), 19 deletions(-)

commit 610e5e8f713bb2a68939b72cb2b801a7aaede4f9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 05:27:46 2012 -0400

    [Indic] Streamline feature would_apply()

    Comes with some 10% speedup for Devanagari even!

 src/hb-ot-map-private.hh	  | 85
 +++++++++++++++++++++++++---------------
 src/hb-ot-map.cc		  | 18 ++++-----
 src/hb-ot-shape-complex-indic.cc | 85
 +++++++++++++++++++++++-----------------
 3 files changed, 110 insertions(+), 78 deletions(-)

commit 1d002048d5afcd45abbb09fdf0419f13b2e2265c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 05:01:11 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic-private.hh | 16 --------
 src/hb-ot-shape-complex-indic.cc	  | 64
 +++++++++++++++++++++-----------
 2 files changed, 43 insertions(+), 37 deletions(-)

commit 6f7611375521c6d285a9aa763f2ea5cb44cd0d39
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 04:00:31 2012 -0400

    [GSUB/GPOS] Check array size before accessing digests

 src/hb-ot-layout-private.hh |	3 +++
 src/hb-ot-layout.cc	     | 32 ++++++++++++++++----------------
 2 files changed, 19 insertions(+), 16 deletions(-)

commit 22148b8c4af3ed296d96e969cdd47bac97b32307
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 03:51:51 2012 -0400

    Use Coverage digests in would_apply

 src/hb-ot-layout-gsub-table.hh       | 1 +
 src/hb-ot-layout-gsubgpos-private.hh | 6 +++++-
 src/hb-ot-layout.cc		      | 4 ++--
 3 files changed, 8 insertions(+), 3 deletions(-)

commit 6c459c8fef85bc44f45d7b58c28a34abfb2c33fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 2 03:45:53 2012 -0400

    Minor

 src/hb-ot-layout-gpos-table.hh       | 2 +-
 src/hb-ot-layout-gsub-table.hh       | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit e2b8d75fa6e847ecf5c040f4e1e16a565c5d8aaf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 22:17:48 2012 -0400

    Use wider set digests on 64-bit archs

 src/hb-set-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0120ce9679aab3ac936aeb18f6709529eef000a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 21:56:35 2012 -0400

    [GSUB/GPOS] Remove unused get_coverage() methods

 src/hb-ot-layout-gpos-table.hh | 11 -----------
 src/hb-ot-layout-gsub-table.hh | 11 -----------
 2 files changed, 22 deletions(-)

commit 1336ecdf8e4e9879b96b26ecfbf5c9ba6c49e2b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 21:46:36 2012 -0400

    [GSUB/GPOS] Use Coverage digests as gatekeeper

    Gives me a good 10% speedup for the Devanagari test case.  Less so
    for less lookup-intensive tests.

    For the Devanagari test case, the false positive rate of the GSUB
    digest
    is 4%.

 src/hb-ot-layout-gpos-table.hh       | 30 +++++++++---------------------
 src/hb-ot-layout-gsub-table.hh       | 35
 ++++++++++++-----------------------
 src/hb-ot-layout-gsubgpos-private.hh |  8 ++++++--
 src/hb-ot-layout-private.hh	      |  4 ++++
 src/hb-ot-layout.cc		      | 29 +++++++++++++++++++++++++----
 5 files changed, 56 insertions(+), 50 deletions(-)

commit a878c58a8fc1500986d713b2bcedfeb90a0087b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 21:18:54 2012 -0400

    [GSUB/GPOS] Add add_coverage()

 src/hb-ot-layout-gpos-table.hh | 18 ++++++++++++++++++
 src/hb-ot-layout-gsub-table.hh | 18 ++++++++++++++++++
 2 files changed, 36 insertions(+)

commit 60a3035ac5ec8227e4cc0e6708732bb139c9e0b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 21:06:27 2012 -0400

    Add hb_set_digest_t

    Implement two set digests, and one that combines the two.

 src/hb-set-private.hh | 95
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 95 insertions(+)

commit c8accf1dd2d92cc4f714393eb0ea46f69bb182a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 21:05:57 2012 -0400

    [OT] Templatize Coverage::add_coverage()

 src/hb-ot-layout-common-private.hh | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 8fbfda920e0b3bb4ab7afb732826026964b79be9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 19:03:46 2012 -0400

    Inline font getters

 src/hb-fallback-shape.cc	   |  21 ++--
 src/hb-font-private.hh		   | 204
 ++++++++++++++++++++++++++++++++++++++
 src/hb-font.cc			   | 129 ++++--------------------
 src/hb-graphite2.cc		   |   6 +-
 src/hb-old.cc			   |  10 +-
 src/hb-ot-layout-gdef-table.hh    |   2 +-
 src/hb-ot-layout-gpos-table.hh    |   2 +-
 src/hb-ot-shape-complex-arabic.cc |   4 +-
 src/hb-ot-shape-complex-indic.cc  |   6 +-
 src/hb-ot-shape-normalize.cc	   |  12 +--
 src/hb-ot-shape.cc		   |  47 +++++----
 11 files changed, 277 insertions(+), 166 deletions(-)

commit 6adf417bc15d4524e280b284e3accd1ae647662e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 18:07:42 2012 -0400

    Use a lookup table for modified_combining_class

 src/hb-unicode-private.hh |  10 ++-
 src/hb-unicode.cc	   | 213
 +++++++++++++++++++++++++++++++---------------
 src/hb-unicode.h	   |   4 +
 3 files changed, 157 insertions(+), 70 deletions(-)

commit 208f70f0553d73d2908b21b9552298029482a8b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 17:13:10 2012 -0400

    Inline Unicode callbacks internally

 src/hb-buffer.cc		 |   2 +-
 src/hb-fallback-shape.cc	 |   2 +-
 src/hb-old.cc			 |   2 +-
 src/hb-ot-shape-complex-misc.cc |   2 +-
 src/hb-ot-shape-normalize.cc	 |  13 +++--
 src/hb-ot-shape-private.hh	 |   6 +--
 src/hb-ot-shape.cc		 |   4 +-
 src/hb-unicode-private.hh	 | 112
 ++++++++++++++++++++--------------------
 src/hb-unicode.cc		 |   5 +-
 9 files changed, 73 insertions(+), 75 deletions(-)

commit 7470315a3e782aa6192bbe64f7a3944266fb1521
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 17:01:59 2012 -0400

    Move unicode accessors around

 src/hb-unicode-private.hh | 73
 ++++++++++++++++++++++++++++++++++++++++++++++-
 src/hb-unicode.cc	   | 65 ++++-------------------------------------
 2 files changed, 78 insertions(+), 60 deletions(-)

commit 21fdcee00125b6e1c09f0bed3064d16ccd3a7a5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 16:23:44 2012 -0400

    Add hb_unicode_combining_class_t

 src/hb-common.h	   |  38 +-------------
 src/hb-glib.cc		   |   4 +-
 src/hb-icu.cc		   |   4 +-
 src/hb-unicode-private.hh |   2 +-
 src/hb-unicode.cc	   |  11 ++--
 src/hb-unicode.h	   | 124
 +++++++++++++++++++++++++++++++++++++++++++++-
 6 files changed, 134 insertions(+), 49 deletions(-)

commit 84186a64004e5dcd2ce98b564d0e0a09aa5d68b2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 13:32:39 2012 -0400

    Add commentary on the compatibility decomposition in the normalizer

 src/hb-ot-shape-normalize.cc | 18 +++++++++++++++---
 1 file changed, 15 insertions(+), 3 deletions(-)

commit 0834d952017a04c6f4599e574cb75ecf3ca27d3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 00:21:09 2012 -0400

    [hb-old] Adjust mark positioning parameters

    Fallback mark positioning works now...  With hb-ft and hb-view /
    hb-shape at least.

 src/hb-old.cc			| 10 +++++-----
 src/hb-old/harfbuzz-shaper.cpp |  1 +
 2 files changed, 6 insertions(+), 5 deletions(-)

commit 4ca743dfb8e09f9fa525061c7f1144d55f72effb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 1 00:03:41 2012 -0400

    [old] Implement fontMetrics

 src/hb-old.cc | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit 1e7d860613032e40a3f90e2caa2ee5ac44ab8c8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 23:41:06 2012 -0400

    [GPOS] Adjust mark advance-width zeroing logic

    If there is no GPOS, zero mark advances.

    If there *is* GPOS and the shaper requests so, zero mark advances for
    attached marks.

    Fixes regression with Tibetan, where the font has GPOS, and marks a
    glyph as mark where it shouldn't get zero advance.

 src/hb-ot-layout-gpos-table.hh     | 14 ++++++++------
 src/hb-ot-layout.cc		    |  4 ++--
 src/hb-ot-layout.h		    |  3 ++-
 src/hb-ot-shape-complex-arabic.cc  |  2 +-
 src/hb-ot-shape-complex-indic.cc   |  2 +-
 src/hb-ot-shape-complex-misc.cc    |  4 ++--
 src/hb-ot-shape-complex-private.hh |  2 +-
 src/hb-ot-shape.cc		    |  6 ++----
 8 files changed, 19 insertions(+), 18 deletions(-)

commit a8842e4a448efb30f3f2f3c628d6dc4824829726
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 23:10:11 2012 -0400

    Remove some TODO items

 TODO		 | 27 ---------------------------
 src/hb-shape.cc |  2 ++
 2 files changed, 2 insertions(+), 27 deletions(-)

commit 2bc3b9a616cedbc56ff4a915f9e3439ff3a6bf13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 23:08:25 2012 -0400

    [OT] Zero mark advances if the shaper desires so

    Enabled for all shapers except for Indic.

 src/hb-ot-shape-complex-arabic.cc  |  1 +
 src/hb-ot-shape-complex-indic.cc   |  1 +
 src/hb-ot-shape-complex-misc.cc    |  2 ++
 src/hb-ot-shape-complex-private.hh |  2 ++
 src/hb-ot-shape.cc		    | 15 +++++++++++++++
 5 files changed, 21 insertions(+)

commit 5fecd8b0355894ceda14b3d3c654f20c3d5e77f4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 22:48:38 2012 -0400

    [OT] Synthesize glyph classes

 TODO		    |  2 --
 src/hb-ot-shape.cc | 20 ++++++++++++++++++--
 2 files changed, 18 insertions(+), 4 deletions(-)

commit 03b09214c073ce37eeb8af5218942c85b2d393df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 22:43:58 2012 -0400

    [GSUB] Minor

 src/hb-ot-layout-gsub-table.hh | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit f0fc1df8fc949739b68d55948741016081b69c3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 22:43:32 2012 -0400

    [hb-old] Implement getGlyphMetrics()

    Still working on it.

 src/hb-old.cc | 13 ++++++++++++-
 1 file changed, 12 insertions(+), 1 deletion(-)

commit 378d279bbf692195c4654e312dae854ab3be04cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 21:36:16 2012 -0400

    Implement Unicode compatibility decompositions

    Based on patch from Philip Withnall.
    https://bugs.freedesktop.org/show_bug.cgi?id=41095

 src/hb-glib.cc		      | 30 +++++++++++++++++++++++++
 src/hb-icu.cc		      | 36 +++++++++++++++++++++++++++++-
 src/hb-ot-shape-normalize.cc | 53
 +++++++++++++++++++++++++++++---------------
 src/hb-unicode-private.hh    |  1 +
 src/hb-unicode.cc	      | 27 +++++++++++++++++++++-
 src/hb-unicode.h	      | 37 ++++++++++++++++++++++++++++++-
 test/api/hb-test.h	      |  1 +
 test/api/test-unicode.c      | 50
 +++++++++++++++++++++++++++++++++++++++++
 8 files changed, 214 insertions(+), 21 deletions(-)

commit 321ec29cc270e7e66a529696b70b2caac553c95f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 21:10:16 2012 -0400

    Remove unused function

 src/hb-ot-shape-complex-indic.cc | 7 -------
 1 file changed, 7 deletions(-)

commit 69cc492dc120847ed00cae65ec958593ebf550c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 31 14:51:36 2012 -0400

    [buffer] Minor

 src/hb-buffer-private.hh |  3 ++-
 src/hb-buffer.cc	  | 24 ++++++++++++------------
 2 files changed, 14 insertions(+), 13 deletions(-)

commit 693918ef8541014a5ef7dfb91c6ea0ae36d9c368
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 21:08:51 2012 -0400

    [OT] Streamline complex shaper enumeration

    Add a shaper class struct.

 src/hb-ot-shape-complex-arabic.cc    |  37 ++++----
 src/hb-ot-shape-complex-indic.cc     |  47 ++++++---
 src/hb-ot-shape-complex-misc.cc      |  67 ++++++-------
 src/hb-ot-shape-complex-private.hh   | 179
 ++++++++++-------------------------
 src/hb-ot-shape-normalize-private.hh |   4 +-
 src/hb-ot-shape-private.hh	      |   2 +-
 src/hb-ot-shape.cc		      |  16 ++--
 7 files changed, 143 insertions(+), 209 deletions(-)

commit c2e42c3db691515f3a458eb4c71fe1e6439d5620
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 19:54:50 2012 -0400

    Minor

 src/hb-ot-layout-gpos-table.hh       | 2 +-
 src/hb-ot-layout-gsub-table.hh       | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 src/hb-ot-layout-private.hh	      | 4 ++--
 4 files changed, 9 insertions(+), 9 deletions(-)

commit 03f67bc012f42131b36083a23efc78e1b04b828c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 19:47:53 2012 -0400

    More refactoring glyph class access

 src/hb-ot-layout-gpos-table.hh       |   2 +-
 src/hb-ot-layout-gsub-table.hh       |   2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 154
 +++++++++++++++++------------------
 3 files changed, 76 insertions(+), 82 deletions(-)

commit 300c7307eb7943ba7416b672345506be1e27c6ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 19:37:44 2012 -0400

    [OT] Don't crash if no GDEF available

 src/hb-ot-layout-gsubgpos-private.hh | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 3dcbdc2125c04c173f29f04922fc031929893f4e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 19:31:17 2012 -0400

    Minor

 src/hb-ot-layout.cc | 15 +++++----------
 1 file changed, 5 insertions(+), 10 deletions(-)

commit 05bd1b63426e07d1df7a1b40bf845dc94ab995a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 19:30:01 2012 -0400

    [GSUB/GPOS] Move glyph props matching around

 src/hb-ot-layout-gpos-table.hh       |  11 ++--
 src/hb-ot-layout-gsub-table.hh       |  18 +++---
 src/hb-ot-layout-gsubgpos-private.hh |  99
 +++++++++++++++++++++++++++++----
 src/hb-ot-layout-private.hh	      |  12 ----
 src/hb-ot-layout.cc		      | 104
 +++--------------------------------
 src/hb-ot-layout.h		      |  12 ++--
 src/hb-ot-shape.cc		      |  10 ++--
 7 files changed, 127 insertions(+), 139 deletions(-)

commit 2fca1426ca06cabbe8f027f2dc9dee9c27560c76
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 18:46:41 2012 -0400

    [GSUB] Don't erase glyph classes if GDEF does not have glyph classes

 src/hb-ot-layout-gsubgpos-private.hh | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit fd42257f8c45ff8e036e1c3eb1a788a101be7ead
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 18:40:27 2012 -0400

    Minor

 src/hb-ot-layout.cc | 29 +++++------------------------
 1 file changed, 5 insertions(+), 24 deletions(-)

commit 7fbbf86efe675e4c038dfc5985c24bbc544620cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 18:36:42 2012 -0400

    [GSUB] Minor

 src/hb-ot-layout-gsub-table.hh       | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 6 ++++++
 2 files changed, 7 insertions(+), 1 deletion(-)

commit 713914d3203109a8e9213f5a1d3b384730703ce9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 17:54:38 2012 -0400

    [Uniscribe] Clean up a bit

 src/hb-uniscribe.cc | 17 +++++------------
 1 file changed, 5 insertions(+), 12 deletions(-)

commit 301168dae77a63ee25adfb26ce2b54a708f83791
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 17:48:04 2012 -0400

    [CoreText] Port to shape_plan infrastructure

 src/hb-coretext.cc | 161
 ++++++++++++++++++++++++++---------------------------
 1 file changed, 80 insertions(+), 81 deletions(-)

commit 6cdfd14bb19d60ac3d6b20ff611408432254f273
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 17:22:17 2012 -0400

    Fix build on Mac

 src/hb-ot-layout-gsub-table.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7e34601dededd521bcef15111e39293df3d0d13d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 14:53:41 2012 -0400

    Unbreak Hangul jamo composition

    When we removed the separate Hangul shaper, the specific normalization
    preference of Hangul was lost.  Fix that.  Also, the Thai shaper was
    copied from Hangul, so had the fully-composed normalization behavior,
    which was unnecessary.  So, fix that too.

 src/hb-ot-shape-complex-arabic.cc  |  2 +-
 src/hb-ot-shape-complex-indic.cc   |  4 +---
 src/hb-ot-shape-complex-misc.cc    | 12 +++++++++---
 src/hb-ot-shape-complex-private.hh |  9 ++++-----
 src/hb-ot-shape.cc		    |  4 +++-
 5 files changed, 18 insertions(+), 13 deletions(-)

commit 7afb14407e59dfeaa79c33aca1ffa60e7982e349
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 13:54:46 2012 -0400

    [Indic] Recategorize Telugu length marks

    Fixes 8 more Telugu tests.	Failures at 15 (0.00154548%).

 src/hb-unicode.cc |  8 ++++++++
 src/indic.cc	   | 11 ++++++++---
 2 files changed, 16 insertions(+), 3 deletions(-)

commit 70b3dc327232b20051b36397aa2b196ab8c62397
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 12:40:18 2012 -0400

    Add Hebrew test

 .../texts/in-tree/shaper-default/script-hebrew/misc/diacritics.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit f2377155e35c15919af4d7db21b6edc6783146b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 10:50:57 2012 -0400

    [hb-old] Fix misc leaks

    Backport (forward-port?!) from upstream:

    commit 3ab7b37bdebf0f8773493a1fee910b151c4de30f
    Author: Behdad Esfahbod <behdad@behdad.org>
    Date:   Mon Jul 30 10:50:22 2012 -0400

	Fix misc leaks

	https://bugs.freedesktop.org/show_bug.cgi?id=31992
	https://bugs.freedesktop.org/show_bug.cgi?id=31993
	https://bugs.freedesktop.org/show_bug.cgi?id=31994
	https://bugs.freedesktop.org/show_bug.cgi?id=31995

 src/hb-old/harfbuzz-arabic.c  | 12 +++++++++---
 src/hb-old/harfbuzz-gpos.c    |  6 +++---
 src/hb-old/harfbuzz-gsub.c    |  6 +++---
 src/hb-old/harfbuzz-tibetan.c |  1 +
 4 files changed, 16 insertions(+), 9 deletions(-)

commit 3f4764bb56bb7e42ba8859f1905810bd2f998838
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 10:06:42 2012 -0400

    Don't lock user_data set during destruction if empty

 src/hb-private.hh | 5 +++++
 1 file changed, 5 insertions(+)

commit 4ba647eecf0f70917ac4229af1f2dd3c62fcb7d5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 09:53:06 2012 -0400

    Fix leak

 src/hb-ot-shape.cc | 2 ++
 1 file changed, 2 insertions(+)

commit f860366456d9e59b139a940da6d89c3c4fb9e96e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 02:38:39 2012 -0400

    [OT] Gain back some lost speed

 src/hb-ot-layout-private.hh	    | 27 +++++++++++++++-
 src/hb-ot-layout.cc		    | 63
 ++++++++++++++++++++++++++++++++++----
 src/hb-ot-map-private.hh	    | 26 +++-------------
 src/hb-ot-map.cc		    | 35 +++++++++++++++------
 src/hb-ot-shape-complex-indic.cc   |  2 +-
 src/hb-ot-shape-complex-private.hh |  5 ---
 6 files changed, 114 insertions(+), 44 deletions(-)

commit 11f4c87d01924cac43bf40044f67838440e19e42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 02:36:46 2012 -0400

    [OT] Remove hb_ot_layout_ensure()

    I didn't like it from the beginning.

 src/hb-ot-layout.cc | 9 +++++----
 src/hb-ot-layout.h  | 5 -----
 2 files changed, 5 insertions(+), 9 deletions(-)

commit 578e42182b9b9cf15b4c5426fae36e224160cbd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 02:35:07 2012 -0400

    Minor

 src/hb-ot-layout-private.hh | 2 --
 src/hb-ot-layout.cc	     | 1 -
 2 files changed, 3 deletions(-)

commit a973b5ce86051e8ef0d20df362db1a50488842ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 01:46:34 2012 -0400

    [GSUB] Further adjustments to mark-attachment vs ligation interaction

    The d1d69ec52e75a78575b620a1c456d528b6078170 change broke Kannada
    badly,
    since it was ligating consonants, pushing matra out, and then ligating
    with the matra.  Adjust for that.  See comments.

 src/hb-ot-layout-gsub-table.hh				       |
 11 ++++++++---
 .../in-tree/shaper-indic/indic/script-kannada/misc/misc.txt   |  1 +
 2 files changed, 9 insertions(+), 3 deletions(-)

commit 0aef425e25e2c58445157057f17ef18f695c5240
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 00:55:15 2012 -0400

    [GSUB] Minor

 src/hb-ot-layout-gpos-table.hh | 15 ++++++---------
 1 file changed, 6 insertions(+), 9 deletions(-)

commit d1d69ec52e75a78575b620a1c456d528b6078170
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 00:51:47 2012 -0400

    [GSUB] Don't ligate glyphs attached to different components of
    ligatures

    This concludes the mark-attachment vs ligating interaction fixes
    (for now).

 src/hb-ot-layout-gsub-table.hh | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit 4751dec8be05883483fd5f6b474ebd22583ae566
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 00:42:07 2012 -0400

    Minor

 src/hb-ot-layout-private.hh | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit f24bcfbed1f3b4f4f6311246bd870f73ad6ba750
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 00:39:00 2012 -0400

    Minor

 src/hb-ot-layout-gsub-table.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fe20c0f84f5ff518dc471bf22ac5a83ef079eb69
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 30 00:00:59 2012 -0400

    [GSUB] Fix mark component stuff when ligatures form ligatures!

    See comments.

    Fixes https://bugzilla.gnome.org/show_bug.cgi?id=437633

 src/hb-ot-layout-gsub-table.hh       | 117
 +++++++++++++++++++++++------------
 src/hb-ot-layout-gsubgpos-private.hh |   8 ---
 src/hb-ot-layout-private.hh	      |   8 +--
 3 files changed, 79 insertions(+), 54 deletions(-)

commit 2ec3ba46a3c24469096e901750e38f6ee555479a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 22:02:24 2012 -0400

    [GSUB/GPOS] Minor

    Start squeezing more out of lig_id/lig_comp.

 src/hb-ot-layout-gsub-table.hh |  6 +++---
 src/hb-ot-layout-private.hh	| 35 +++++++++++++++++++++++++++++++----
 2 files changed, 34 insertions(+), 7 deletions(-)

commit ef6e9cec3399e4f63f4b662abd77cf6d4683e8a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 21:35:22 2012 -0400

    Fixup bb0e4ba3e9c5a407fc5d73c914e429d24d336380

 src/hb-shape-plan.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb3d34063154bf164c61eeba41c6166b0bd304fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 20:37:38 2012 -0400

    [GSUB] Don't set new lig_id on mark ligatures

    If two marks form a ligature, retain their previous lig_id, such that
    the mark ligature can attach to ligature components...

    Fixes https://bugzilla.gnome.org/show_bug.cgi?id=676343

    In fact, I noticed that we should not let ligatures form between
    glyphs
    coming from different components of a previous ligature.  For example,
    if the sequence is: LAM,SHADDA,LAM,FATHA,HEH, the LAM,LAM,HEH form a
    ligature, putting SHADDA and FATHA next to eachother.  However,
    it would
    be wrong to ligate them.  Uniscribe has this bug also.

 src/hb-ot-layout-gsub-table.hh | 18 ++++++++++++++----
 1 file changed, 14 insertions(+), 4 deletions(-)

commit 97a201becf936f62046914b568e5763e27ee936e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 20:31:36 2012 -0400

    Add Arabic tests for mark ligature component attachments

 .../script-arabic/misc/diacritics/MANIFEST		|  1 +
 .../misc/diacritics/ligature-components.txt		| 18
 ++++++++++++++++++
 2 files changed, 19 insertions(+)

commit a15b70a81a609f024083cb04f9819483f4d5cab7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 20:09:22 2012 -0400

    [hb-old] Fix cluster formation in RTL

    Unlike Uniscribe, hb-old returns glyphs in logical order, so the logic
    does not need to duplicated for RTL.

 src/hb-old.cc | 12 +++---------
 1 file changed, 3 insertions(+), 9 deletions(-)

commit 8a7e70ef65952fc16b8c1d5f1126c94d9d81e755
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 19:56:54 2012 -0400

    [Minor]

 src/test.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bb0e4ba3e9c5a407fc5d73c914e429d24d336380
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 29 17:34:14 2012 -0400

    Minor

 src/hb-shape-plan.cc	      | 2 +-
 src/test-would-substitute.cc | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit a00ad60bc0fe74bf0e11d73da563239f3392f351
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 21:16:08 2012 -0400

    [Uniscribe] Remove hb_uniscribe_font_ensure()

    Wasn't a huge fan of putting the burden on the user.  Just remove
    it and
    do what we've got to do transparently.

 src/hb-uniscribe.cc | 6 +++++-
 src/hb-uniscribe.h  | 4 ----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 5d874d566fe5d2cc4cfaf02c79b663d8a626ca1e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 21:05:25 2012 -0400

    [GPOS] Fix mark-to-mark positioning when one of the marks is
    a ligature

    This commit: a3313e54008167e415b72c780ca7b9cda958d07e broke
    MarkMarkPos
    when one of the marks itself is a ligature.  That regressed 26 Tibetan
    tests (up from zero!).  Fix that.  Tibetan back to zero.

 src/hb-ot-layout-gpos-table.hh			    | 27
 ++++++++++++++++------
 src/hb-ot-layout-private.hh			    |  5 ++--
 test/shaping/texts/in-tree/shaper-indic/MANIFEST   |  1 +
 .../indic/script-sinhala/misc/MANIFEST		    |  1 +
 .../in-tree/shaper-indic/south-asian/MANIFEST	    |  1 +
 .../south-asian/script-tibetan/MANIFEST	    |  1 +
 .../south-asian/script-tibetan/misc/MANIFEST	    |  1 +
 .../south-asian/script-tibetan/misc/misc.txt	    |  1 +
 8 files changed, 29 insertions(+), 9 deletions(-)

commit 338fe662b50f9309bf0050dd99becb644874195b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 18:53:01 2012 -0400

    [GSUB] Minor

 src/hb-ot-layout-gsub-table.hh | 33 ++++++++++++++++-----------------
 1 file changed, 16 insertions(+), 17 deletions(-)

commit e6f7479fe34fb4a7cada61d84c2ed70d1fd565c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 18:34:58 2012 -0400

    [GSUB] Simplify would-apply

 src/hb-ot-layout-gsub-table.hh       | 71
 +++---------------------------------
 src/hb-ot-layout-gsubgpos-private.hh | 24 +++---------
 2 files changed, 11 insertions(+), 84 deletions(-)

commit dadede012e4841f9fcb70d514fdc752f3ea4663d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 18:03:20 2012 -0400

    Minor

 src/hb-ot-layout-common-private.hh | 7 +++----
 src/hb-ot-layout-gpos-table.hh     | 2 +-
 src/hb-ot-layout-gsub-table.hh     | 2 +-
 3 files changed, 5 insertions(+), 6 deletions(-)

commit 0b99429ead05ae32b3c210cb499af401b02770a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 17:31:01 2012 -0400

    [GSUB/GPOS] Add get_coverage() and use it to speed up main loop

    And use it to speed up the hotspot by checking coverage directly in
    the main loop, not 10 functions deep in.

    Gives me a solid 20% boost with Indic test suite.  Less so for less
    lookup-intensive scenarios.

    Remove the "fast_path" hack from before.

 src/hb-ot-layout-gpos-table.hh       | 179
 ++++++++++++++++++++++++++++++-----
 src/hb-ot-layout-gsub-table.hh       | 166
 ++++++++++++++++++++++++++------
 src/hb-ot-layout-gsubgpos-private.hh |  26 +++++
 3 files changed, 321 insertions(+), 50 deletions(-)

commit 30ec9002d84e8b49290e782e6192069821ffa942
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 17:25:20 2012 -0400

    Reject lookups with no subTable

 src/hb-ot-layout-common-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 0981068b75710397f08e0d2d776a0a2ea68d7117
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 28 17:01:59 2012 -0400

    [GSUB/GPOS] Reject Context/ChainContext lookups with zero input

 src/hb-ot-layout-gsubgpos-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit 2f87cebe1062c7007021ebd05c1664e60da80825
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 04:02:38 2012 -0400

    Implement shape_plan caching

    Should give us some performance boost.

 TODO			  |   4 ++
 src/hb-buffer-private.hh |  30 ++++++++++++++
 src/hb-font-private.hh   |   6 +++
 src/hb-font.cc		  |  15 ++++++-
 src/hb-shape-plan.cc	  | 100
 +++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-shape-plan.h	  |   7 ++++
 src/hb-shape.cc	  |   2 +-
 7 files changed, 162 insertions(+), 2 deletions(-)

commit e9eb9503e97044222f843daacfa47e26e51312b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 03:16:22 2012 -0400

    Add default_shaper_list to shape_plan

 src/hb-shape-plan-private.hh | 1 +
 src/hb-shape-plan.cc	      | 2 ++
 2 files changed, 3 insertions(+)

commit 3b7c4e270694ed962e2a2839e44f2a59c26b326c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 03:12:23 2012 -0400

    Don't fail choosing shaper on planning failure

    Shapers have a chance to reject a font in face shaper_data creation.
    No need to allow failing during planning.

 src/hb-shape-plan.cc | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

commit cfe9882610489e1b917e09a74dfbf6bbba2e4a57
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 03:06:30 2012 -0400

    Add hb_ot_layout_ensure() and hb_uniscribe_font_ensure()

 src/hb-ot-layout.cc	  |  7 +++++++
 src/hb-ot-layout.h	  |  6 ++++++
 src/hb-shape-plan.cc	  | 22 ++--------------------
 src/hb-shaper-private.hh | 18 ++++++++++++++++++
 src/hb-uniscribe.cc	  | 11 +++++++++++
 src/hb-uniscribe.h	  |  4 ++++
 6 files changed, 48 insertions(+), 20 deletions(-)

commit c5b668fb9239c912d2448280a7176e331ebc9181
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 02:49:39 2012 -0400

    Choose one shaper per plan

 src/hb-shape-plan-private.hh |  2 +-
 src/hb-shape-plan.cc	      | 19 +++++++++----------
 2 files changed, 10 insertions(+), 11 deletions(-)

commit e82061e8db922f0ddbefd5a184ee2f9f967b9a05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 02:29:32 2012 -0400

    Move ot shaper completely to shape_plan

 src/hb-ot-shape-private.hh |	6 --
 src/hb-ot-shape.cc	    | 181
 +++++++++++++++++++++------------------------
 src/hb-uniscribe.cc	    |	2 +-
 3 files changed, 84 insertions(+), 105 deletions(-)

commit ea278d3895fe0c92801d692cd71d8d9f1de7c048
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 02:12:28 2012 -0400

    Partially switch ot shaper to shape_plan

 src/hb-buffer-private.hh	|  1 +
 src/hb-buffer.cc		|  1 -
 src/hb-font-private.hh		|  2 --
 src/hb-font.cc			| 22 ++++++++++++++--------
 src/hb-ot-layout-gpos-table.hh |  2 +-
 src/hb-ot-layout-gsub-table.hh |  4 ++--
 src/hb-ot-layout-private.hh	|  1 +
 src/hb-ot-layout.cc		|  9 ++++++---
 src/hb-ot-shape.cc		|  3 ++-
 src/hb-shape-plan.cc		| 11 +++++++++++
 src/hb-shaper-private.hh	|  3 ++-
 11 files changed, 40 insertions(+), 19 deletions(-)

commit b6b7ba1313bf686e6ed567183466104c90504a67
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 01:26:11 2012 -0400

    Switch old and uniscribe backends to shape_plan

 src/hb-old.cc		       |  80 ++------------------------
 src/hb-shape.cc	       |   5 ++
 src/hb-shaper-impl-private.hh |   3 +-
 src/hb-shaper-private.hh      |   4 --
 src/hb-uniscribe.cc	       | 130
 ++++++++++++------------------------------
 5 files changed, 48 insertions(+), 174 deletions(-)

commit c32c096a429da3e64896cf42ff5ab8c775d3c2ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 27 01:13:53 2012 -0400

    Switch to shape_plan

    Not optimized yet.	Eats babies.  And no shaper uses the shape_plan.

 src/hb-shape-plan.cc | 37 +++++++++++++++++++++++++++++++++++--
 src/hb-shape-plan.h  |  8 ++++++++
 src/hb-shape.cc      | 27 ++++-----------------------
 3 files changed, 47 insertions(+), 25 deletions(-)

commit 5b95c148cc485f79fd7018bc4520b4cb5f728a18
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 26 23:46:53 2012 -0400

    Start implementing shape_plan

 src/hb-fallback-shape.cc     |  4 ++-
 src/hb-font-private.hh       |  4 +++
 src/hb-old.cc		      |  4 ++-
 src/hb-ot-shape.cc	      |  4 ++-
 src/hb-shape-plan-private.hh |  7 ++++
 src/hb-shape-plan.cc	      | 76
 ++++++++++++++++++++++++++++++++++++++++++--
 src/hb-shape.cc	      |  4 +++
 src/hb-shaper-private.hh     |  4 +--
 src/hb-uniscribe.cc	      |  4 ++-
 9 files changed, 103 insertions(+), 8 deletions(-)

commit bd26b4d21f59312805d294f46f15182adbcc47da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 26 22:05:39 2012 -0400

    Minor

 src/Makefile.am	      |   1 +
 src/hb-fallback-shape.cc     |   3 +-
 src/hb-old.cc		      |   3 +-
 src/hb-ot-shape.cc	      |   3 +-
 src/hb-shape-plan-private.hh |   2 +-
 src/hb-shape-plan.cc	      |   2 +
 src/hb-shape.cc	      |  98 ++++----------------------------------
 src/hb-shaper-private.hh     |  16 ++++++-
 src/hb-shaper.cc	      | 109
 +++++++++++++++++++++++++++++++++++++++++++
 src/hb-uniscribe.cc	      |   3 +-
 10 files changed, 145 insertions(+), 95 deletions(-)

commit 027857d0412477fb4427dcb8a8c45287c272e143
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 26 17:34:25 2012 -0400

    Start adding a unified shaper access infrastructure

    Add global shape_plan.  Unused so far.

 src/Makefile.am		  |  15 ++--
 src/hb-coretext-private.hh	  |  42 ---------
 src/hb-coretext.cc		  |   6 +-
 src/hb-fallback-shape-private.hh |  41 ---------
 src/hb-fallback-shape.cc	  |  62 ++++++++++++-
 src/hb-font-private.hh		  |  12 +++
 src/hb-font.cc			  |  15 +++-
 src/hb-graphite2-private.hh	  |  42 ---------
 src/hb-old-private.hh		  |  40 ---------
 src/hb-old.cc			  | 109 ++++++++++++++++++-----
 src/hb-ot-shape-private.hh	  |   8 --
 src/hb-ot-shape.cc		  |  60 ++++++++++++-
 src/hb-shape-plan-private.hh	  |  52 +++++++++++
 src/hb-shape-plan.cc		  |  85 ++++++++++++++++++
 src/hb-shape-plan.h		  |  60 +++++++++++++
 src/hb-shape.cc		  |  48 ++--------
 src/hb-shaper-impl-private.hh	  |  44 +++++++++
 src/hb-shaper-list.hh		  |  50 +++++++++++
 src/hb-shaper-private.hh	  |  81 +++++++++++++++++
 src/hb-uniscribe-private.hh	  |  42 ---------
 src/hb-uniscribe.cc		  | 186
 ++++++++++++++++++++++++---------------
 21 files changed, 735 insertions(+), 365 deletions(-)

commit fa2dfcd560444d8c54b6349ee106134d3536f79b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 26 16:06:16 2012 -0400

    Fix visibility warnings with MinGW32

 src/hb-old/harfbuzz-global.h | 17 +++++++++++------
 src/hb-old/harfbuzz-impl.h   |  6 +++++-
 2 files changed, 16 insertions(+), 7 deletions(-)

commit ac2085d4b391b0a72473ecac3dd6c22efe66833f
Author: Jonathan Kew <jfkthame@gmail.com>
Date:	Thu Jul 26 15:58:45 2012 -0400

    [CoreText] Ensure cluster indices in output buffer are non-decreasing.

    Does not provide Uniscribe-compatible results, but should at least
    avoid
    breaking hb-view due to out-of-order cluster values.

    For RTL runs, ensure cluster values are non-increasing (instead of
    non-decreasing).

 src/hb-coretext.cc | 37 +++++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit 441d3bb7de311d54b9f0a5210344f9a96e97e153
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 26 12:01:12 2012 -0400

    Minor

 src/hb-coretext.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2e7f223054d310695bdb3498b2b2b5d17b6cce78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 25 19:30:15 2012 -0400

    [hb-old] Fix Arabic cursive positioning

    Backporting from upstream:

    commit b847f24ce855d24f6822bcd9c0006905e81b94d8
    Author: Behdad Esfahbod <behdad@behdad.org>
    Date:   Wed Jul 25 19:29:16 2012 -0400

	[arabic] Fix Arabic cursive positioning

	This was clearly broken in testing.  Who knows...  Fixes for me.
	Test with a Nastaleeq font, or with Arabic Typesetting.

	Backporting from Chromium.

 src/hb-old/harfbuzz-shaper.cpp | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9550a8c4e8b4e28be60d38c27d59253846ff9569
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 25 19:22:57 2012 -0400

    [hb-old] Fixup not-enough-space handling

 src/hb-old.cc | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit 91e721ea8693205f4f738bca97a5055ee75cf463
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 25 19:20:34 2012 -0400

    [hb-old] Fix clusters

    Unlike its "documentation", hb-old's log_clusters are, well, indeed
    logical, not visual.  Fixup.  Adapted / copied from hb-uniscribe.

 src/hb-old.cc		      | 51
 ++++++++++++++++++++++++++++++++++----------
 src/hb-old/harfbuzz-shaper.h |  1 +
 src/hb-uniscribe.cc	      |  5 +++--
 3 files changed, 44 insertions(+), 13 deletions(-)

commit a3313e54008167e415b72c780ca7b9cda958d07e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 25 18:37:51 2012 -0400

    [GPOS] Fix MarkMarkPos applied to results of MultipleSubst

    This was broken as a result of
    7b84c536c10ab90ed96a033d88e9ad232d46c5b8.
    As Khaled reported, MarkMark positioning was broken with glyphs
    resulting from a MultipleSubst.  Fixed.  Test with the ALLAH character
    in Amiri.

 src/hb-ot-layout-gpos-table.hh | 10 +++++-----
 src/hb-ot-layout-private.hh	| 23 +++++++++++++++++++++--
 2 files changed, 26 insertions(+), 7 deletions(-)

commit 35bdab3cf1f0836807160e3ce93766c321b32e8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 25 11:59:52 2012 -0400

    Minor

 src/hb-unicode-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8fe4c7405b922cf0f936a46a9baedf4885b05254
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 21:05:12 2012 -0400

    [hb-old] Add HarfBuzz.old shaper

    Choose using shaper name "old".

 configure.ac		|   8 +
 src/Makefile.am	|  14 +-
 src/hb-old-private.hh	|  40 +++
 src/hb-old.cc		| 369 ++++++++++++++++++++++++
 src/hb-old/.gitignore	|   7 -
 src/hb-old/Makefile.am |   2 +
 src/hb-old/Makefile.in | 762
 -------------------------------------------------
 src/hb-shape.cc	|   8 +-
 8 files changed, 436 insertions(+), 774 deletions(-)

commit 5e1987005eb1b9af7a4d3d9f90c5768d8cc80015
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:53:55 2012 -0400

    [hb-old] Define Unicode funcs in terms of new HarfBuzz

 src/hb-old/Makefile.am		|   4 +
 src/hb-old/Makefile.in		| 182
 ++++++++++++++++++++++++++++++++++++-----
 src/hb-old/harfbuzz-external.h | 100 +++++++++++++---------
 3 files changed, 224 insertions(+), 62 deletions(-)

commit 4a31166b2853c1ec052844140e114158f47c2355
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:49:48 2012 -0400

    [hb-old] Shovel out the line-breaking / word-segmentation stuff

 src/hb-old/Makefile.am		      |  10 +-
 src/hb-old/Makefile.in		      |  13 +-
 src/hb-old/harfbuzz-external.h       |  66 ------
 src/hb-old/harfbuzz-indic.cpp	      |  26 ---
 src/hb-old/harfbuzz-khmer.c	      |  25 ---
 src/hb-old/harfbuzz-myanmar.c	      |  28 ---
 src/hb-old/harfbuzz-shaper-private.h |  12 --
 src/hb-old/harfbuzz-shaper.cpp       | 403
 +++--------------------------------
 src/hb-old/harfbuzz-shaper.h	      |  31 ---
 src/hb-old/harfbuzz-thai.c	      | 111 ----------
 src/hb-old/harfbuzz-tibetan.c	      |  26 ---
 src/hb-old/harfbuzz.c		      |  32 ---
 12 files changed, 33 insertions(+), 750 deletions(-)

commit 0bcbe88cf313117f739b98a11dbe698b75784e9d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:38:24 2012 -0400

    [hb-old] Add visibility attributes

 src/hb-old/harfbuzz-global.h | 10 ++++++----
 src/hb-old/harfbuzz-impl.h   |  2 +-
 2 files changed, 7 insertions(+), 5 deletions(-)

commit 6a9d43c3178c920672a84382ca3797e3c478b2b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:21:22 2012 -0400

    [hb-old] Remove unused header file

 src/hb-old/harfbuzz-shape.h | 199
 --------------------------------------------
 1 file changed, 199 deletions(-)

commit fb47209c5b3aa992faf18d1a3f78b9d7682cf62f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:20:19 2012 -0400

    [hb-old] Rename hb_buffer_* to HB_Buffer_*

 src/hb-old/harfbuzz-buffer.c	| 22 +++++++++++-----------
 src/hb-old/harfbuzz-buffer.h	|  8 ++++----
 src/hb-old/harfbuzz-shaper.cpp |  8 ++++----
 3 files changed, 19 insertions(+), 19 deletions(-)

commit 1512a7357513b72e2a07dda706a176bb23d694e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 19:16:56 2012 -0400

    [hb-old] Start adding HarfBuzz-old as a new backend

 configure.ac			      |    1 +
 src/Makefile.am		      |    5 +
 src/hb-old/.gitignore		      |    7 +
 src/hb-old/COPYING		      |   24 +
 src/hb-old/Makefile.am		      |   56 +
 src/hb-old/Makefile.in		      |  631 ++++
 src/hb-old/README		      |    7 +
 src/hb-old/harfbuzz-arabic.c	      | 1144 +++++++
 src/hb-old/harfbuzz-buffer-private.h |  107 +
 src/hb-old/harfbuzz-buffer.c	      |  383 +++
 src/hb-old/harfbuzz-buffer.h	      |  102 +
 src/hb-old/harfbuzz-external.h       |  151 +
 src/hb-old/harfbuzz-gdef-private.h   |  135 +
 src/hb-old/harfbuzz-gdef.c	      | 1163 +++++++
 src/hb-old/harfbuzz-gdef.h	      |  140 +
 src/hb-old/harfbuzz-global.h	      |  118 +
 src/hb-old/harfbuzz-gpos-private.h   |  729 ++++
 src/hb-old/harfbuzz-gpos.c	      | 6094
 ++++++++++++++++++++++++++++++++++
 src/hb-old/harfbuzz-gpos.h	      |  155 +
 src/hb-old/harfbuzz-greek.c	      |  447 +++
 src/hb-old/harfbuzz-gsub-private.h   |  483 +++
 src/hb-old/harfbuzz-gsub.c	      | 4329 ++++++++++++++++++++++++
 src/hb-old/harfbuzz-gsub.h	      |  148 +
 src/hb-old/harfbuzz-hangul.c	      |  268 ++
 src/hb-old/harfbuzz-hebrew.c	      |  187 ++
 src/hb-old/harfbuzz-impl.c	      |   84 +
 src/hb-old/harfbuzz-impl.h	      |  131 +
 src/hb-old/harfbuzz-indic.cpp	      | 1894 +++++++++++
 src/hb-old/harfbuzz-khmer.c	      |  667 ++++
 src/hb-old/harfbuzz-myanmar.c	      |  539 +++
 src/hb-old/harfbuzz-open-private.h   |  102 +
 src/hb-old/harfbuzz-open.c	      | 1433 ++++++++
 src/hb-old/harfbuzz-open.h	      |  288 ++
 src/hb-old/harfbuzz-shape.h	      |  199 ++
 src/hb-old/harfbuzz-shaper-all.cpp   |   37 +
 src/hb-old/harfbuzz-shaper-private.h |  171 +
 src/hb-old/harfbuzz-shaper.cpp       | 1338 ++++++++
 src/hb-old/harfbuzz-shaper.h	      |  294 ++
 src/hb-old/harfbuzz-stream-private.h |   81 +
 src/hb-old/harfbuzz-stream.c	      |  114 +
 src/hb-old/harfbuzz-stream.h	      |   51 +
 src/hb-old/harfbuzz-thai.c	      |  111 +
 src/hb-old/harfbuzz-tibetan.c	      |  274 ++
 src/hb-old/harfbuzz.c		      |   32 +
 src/hb-old/harfbuzz.h		      |   38 +
 45 files changed, 24892 insertions(+)

commit 478fd0529b868b22905a9dedf331ac7cc9721723
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 17:09:01 2012 -0400

    Minor

 src/hb-unicode-private.hh | 27 ++++++++++++++-------------
 1 file changed, 14 insertions(+), 13 deletions(-)

commit 8979a7f6f2b44ade4c0198a31ae08561b35ce009
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 17:03:55 2012 -0400

    [Mongolian] Remove Mongolian Vowel Separator at the end of shaping

    Results match Uniscribe now.

 src/hb-unicode-private.hh | 3 +++
 1 file changed, 3 insertions(+)

commit aa6d849838d5231465ae1a25a4dd5ea1e9380ff9
Author: Jonathan Kew <jfkthame@gmail.com>
Date:	Tue Jul 24 15:52:32 2012 -0400

    [CoreText] Add basic Core Text backend for comparison with our
    native shaping

    Does not attempt to handle clusters in a Uniscribe- or
    HarfBuzz-compatible way;
    just returns the original string indexes that CT maintains. These
    may even be
    out-of-order in the case of reordrant glyphs.

 configure.ac		    |  12 ++
 src/Makefile.am	    |	7 +
 src/hb-coretext-private.hh |  42 ++++++
 src/hb-coretext.cc	    | 323
 +++++++++++++++++++++++++++++++++++++++++++++
 src/hb-coretext.h	    |  43 ++++++
 src/hb-shape.cc	    |	6 +
 6 files changed, 433 insertions(+)

commit ec8d2494694275dfbbac2dd0d33ca2894b0463d6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 15:40:37 2012 -0400

    Make data members of various OpenType structs protected instead
    of private

    Should fix warnings generated when building with
    -Wunused-private-field.
    Based on patch from Jonathan Kew.

 src/hb-open-file-private.hh	      |  8 +++---
 src/hb-ot-head-table.hh	      |  2 +-
 src/hb-ot-hhea-table.hh	      |  2 +-
 src/hb-ot-hmtx-table.hh	      |  2 +-
 src/hb-ot-layout-common-private.hh   | 14 ++++++-----
 src/hb-ot-layout-gdef-table.hh       | 20 +++++++--------
 src/hb-ot-layout-gpos-table.hh       | 48
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-table.hh       | 30 +++++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh | 32 ++++++++++++------------
 src/hb-ot-maxp-table.hh	      |  2 +-
 src/hb-ot-name-table.hh	      |  2 +-
 11 files changed, 82 insertions(+), 80 deletions(-)

commit 97aa0b738a33b73a3f9763dd2950f2dd39f596ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 15:02:34 2012 -0400

    Minor const correctness shuffling

 src/hb-shape.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 6411e74caf23af7b0545f1fe54d19a1c8da895e8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 13:48:49 2012 -0400

    [Indic] Reposition Gurmukhi top matras to after post

    The font is forming a post-base consonant in some samples, and
    Uniscribe
    positions top matra on the post-base.  Do the same.

    Gurmukhi failures down from 59 to 41 (0.0674242%).

 src/hb-ot-shape-complex-indic.cc					 |
 2 +-
 .../texts/in-tree/shaper-indic/indic/script-gurmukhi/misc/misc.txt	 |
 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit c3f769ba09df319fa69d04f68c57444f95eceee6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 13:26:32 2012 -0400

    [Indic] Ignore Uniscribe output containing two zero-width space glyphs

    Uniscribe is buggy and sometimes /eats/ a mark next to a non-joiner.
    Most of Malayalam failures where actually hitting this bug.

    Ignore test output with two zero-width space glyphs.  This is a hack
    until we build up the test suite infrastructure better.

    Bengali went down by 9, Devanagari by 2, Kannada by 130, Malayalm down
    from 1197 to 307, Sinhala down by 16, Telugu down by 26.  New stats:

    BENGALI: 353996 out of 354285 tests passed. 289 failed (0.0815727%)
    DEVANAGARI: 693573 out of 693628 tests passed. 55 failed (0.00792932%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60750 out of 60809 tests passed. 59 failed (0.0970251%)
    KANNADA: 951086 out of 951913 tests passed. 827 failed (0.0868777%)
    KHMER: 299094 out of 299124 tests passed. 30 failed (0.0100293%)
    MALAYALAM: 1048109 out of 1048416 tests passed. 307 failed
    (0.0292823%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271715 out of 271847 tests passed. 132 failed (0.0485567%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970550 out of 970573 tests passed. 23 failed (0.00236973%)

 test/shaping/hb_test_tools.py						 |
 1 +
 .../texts/in-tree/shaper-indic/indic/script-malayalam/misc/misc.txt	 |
 2 ++
 2 files changed, 3 insertions(+)

commit 65c43accdc4d2082282d5cedba8514b8df0c18a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 03:36:47 2012 -0400

    [Indic] Better position left-matra in Malayalam

    Just put it before base, which is what's expected.

    Malayalam failures down from 1559 to 1197 (0.114172%).

    BENGALI: 353988 out of 354285 tests passed. 297 failed (0.0838308%)
    DEVANAGARI: 693571 out of 693628 tests passed. 57 failed (0.00821766%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60750 out of 60809 tests passed. 59 failed (0.0970251%)
    KANNADA: 950956 out of 951913 tests passed. 957 failed (0.100534%)
    KHMER: 299094 out of 299124 tests passed. 30 failed (0.0100293%)
    MALAYALAM: 1047219 out of 1048416 tests passed. 1197 failed
    (0.114172%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271699 out of 271847 tests passed. 148 failed (0.0544424%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970524 out of 970573 tests passed. 49 failed (0.00504856%)

 src/hb-ot-shape-complex-indic.cc		    | 41
 +++++++++++++++-------
 .../indic/script-malayalam/misc/misc.txt	    |  1 +
 2 files changed, 29 insertions(+), 13 deletions(-)

commit 88f413b56f2858d149e2fc067685aeecaea779ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 03:04:36 2012 -0400

    [Indic] Implement Reph+Ya-Phalaa interaction

    The sequence Ra,H,Ya in Bengali is ambigious and Unicode encoded
    that to
    get Ya-Phalaa, one would place ZWJ before Halant.  Ie. a ZWJ,H
    sequence
    requests subjoining, while a H,ZWJ requests Half form.  Implement
    that.

    Bengali failures go down from 377 to 297 (0.0838308%).
    Gujarati is down by 4 to 17 (0.0046384%).
    Kannada is down by 226 to 957 (0.100534%).

    Current status:

    BENGALI: 353988 out of 354285 tests passed. 297 failed (0.0838308%)
    DEVANAGARI: 693571 out of 693628 tests passed. 57 failed (0.00821766%)
    GUJARATI: 366489 out of 366506 tests passed. 17 failed (0.0046384%)
    GURMUKHI: 60750 out of 60809 tests passed. 59 failed (0.0970251%)
    KANNADA: 950956 out of 951913 tests passed. 957 failed (0.100534%)
    KHMER: 299094 out of 299124 tests passed. 30 failed (0.0100293%)
    MALAYALAM: 1046857 out of 1048416 tests passed. 1559 failed
    (0.148701%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271699 out of 271847 tests passed. 148 failed (0.0544424%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970524 out of 970573 tests passed. 49 failed (0.00504856%)

 src/hb-ot-shape-complex-indic.cc				|
 10 ++++++++--
 .../in-tree/shaper-indic/indic/script-bengali/misc/reph.txt	|  4 ++++
 2 files changed, 12 insertions(+), 2 deletions(-)

commit dff0ece11d61978c04e839501f179a5c3077f340
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 02:30:38 2012 -0400

    [Indic] Limit matras to 4 per syllable

    Also limit joiners.

    This limits our syllable length to a constant, and is
    closer to what Uniscribe does anyway.

    Two Devanagari tests regressed, but who cares about tests with 20
    joiners in a row?!	Devanagari at 57 (0.00821766%) now.

 src/hb-ot-shape-complex-indic-machine.rl | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 330b329c8905a37ca88c556dea82c70d74c77458
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 02:25:26 2012 -0400

    [Indic] Unmark U+17D1 KHMER SIGN VIRIAM to NOT be a Virama

    Fixes another 1 Khmer failure.  Down to 30 (0.0100293%) now.

 src/hb-ot-shape-complex-indic.cc					 |
 2 ++
 .../in-tree/shaper-indic/south-east-asian/script-khmer/misc/misc.txt	 |
 1 +
 2 files changed, 3 insertions(+)

commit 6824a7194e01b77eddb95bd95a9b32e219140912
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 02:22:18 2012 -0400

    [Indic] Recategorize Khmer various signs as top matras

    Khmer failures down from 39 to 31 (0.0103636%).

 src/hb-ot-shape-complex-indic.cc | 23 ++++++++++-------------
 1 file changed, 10 insertions(+), 13 deletions(-)

commit d90b8e841e0068a601c96ab184d18b0f48eec9d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 02:10:20 2012 -0400

    [Indic] Reposition Khmer prebase-reordering Ra around split matras

    In Khmer coeng model, a V,Ra can go *after* matras.  If it goes
    after a
    split matra, it should be reordered to *before* the left part of
    such matra.

    Khmer failures down from 136 to 39 (0.0130381%).

 src/hb-ot-shape-complex-indic.cc			     | 13
 +++++++++++++
 .../south-east-asian/script-khmer/misc/misc.txt	     |	4 ++++
 2 files changed, 17 insertions(+)

commit 0afb84c12567ac35adac657bf8be29999b8c5a50
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 01:44:47 2012 -0400

    [Indic] Fix minor bug in pre-base Ra positioning

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7573799126e812a047daa5f64121ec959866b3c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 01:32:07 2012 -0400

    [Indic] Position Khmer U+17CE

    Fixes another 6 Khmer failures.  Now at 136 (0.0454661%).

 src/hb-ot-shape-complex-indic.cc				     |
 6 ++++++
 .../shaper-indic/south-east-asian/script-khmer/misc/misc.txt	     | 1 +
 2 files changed, 7 insertions(+)

commit 8d00e8d0e7d10f823e6975fecaffb9d557b1a99a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 01:04:18 2012 -0400

    [Indic] Don't reposition Khmer Bindu

    Khmer Bindu doesn't like to move to syllable end.  Leave it where it
    was.

    Brings down Khmer failures from 510 to 142 (0.047572%).

 src/hb-ot-shape-complex-indic.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 2278eefcdb3dd0d492b9d07176fbecc1f0516bb7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 00:26:43 2012 -0400

    [Indic] In Sinhala, form forced Reph even if no other consonant found

    Fixes another 10 Sinhala failures.	Down to 148 (0.0544424%).

 src/hb-ot-shape-complex-indic.cc				|
 10 +++++-----
 .../in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt	|  1 +
 2 files changed, 6 insertions(+), 5 deletions(-)

commit 71fd5e80ad06c8e85a1112cc89e129d6cd03f82c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 00:21:16 2012 -0400

    [Indic] Further adjust base algorithm for Sinhala

    Apparently if there is C,V,ZWJ,C, the first C will be base, but if
    it's C,ZWJ,V,C, the second one will be.

    Note that Uniscribe implements this differently, by breaking
    syllable in
    the case of C,ZWJ,V,C and putting the first consonant in one syllable
    and the rest in the next syllable.

    Sinhala failures down from 208 to 158 (0.0581209%).  No changes to
    Khmer.

 src/hb-ot-shape-complex-indic.cc			       |
 11 +++++++----
 .../in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt   |  3 +++
 2 files changed, 10 insertions(+), 4 deletions(-)

commit 73d71cc527d28fd5519c5d965c272ea1fb149a0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 24 00:09:12 2012 -0400

    [Indic] End Vowel-based syllable at ZWJ

    One Devanagari test regressed, plus 10 Malayalam (at 1545 now).

    Fixed 120 Sinhala failures.  Now at 208 (0.0765136%).

 src/hb-ot-shape-complex-indic-machine.rl				 |
 2 +-
 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt	 |
 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 34c215036f5fcdc7599b1ab0591b56dbb3811902
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 23:51:29 2012 -0400

    [Indic] Improve Sinhala base algorithm and reph positioning

    Sinhala does not have half forms.  And most (all?) consonants can be
    base, except when preceded by ZWJ, which would request a subjoined
    form.
    Hence switch the base algorithm to categorize with Khmer, start search
    at start, and stop at a ZWJ.

    Also, mark all pos=base consonants after base to be subjoined.  Mark
    base itself to have pos=base.

    Finally, adjust Sinhala's reph position to after-main.

    Brings down Sinhala failures from 455 to 328 (0.120656%).

 src/hb-ot-shape-complex-indic.cc			| 18
 +++++++++++++++++-
 .../shaper-indic/indic/script-sinhala/misc/misc.txt	|  1 +
 2 files changed, 18 insertions(+), 1 deletion(-)

commit 2ec934c6c25423e7af20d909a9c698a149808ea9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 23:49:04 2012 -0400

    [Indic] Change "unknown" position to end of syllable

 src/hb-ot-shape-complex-indic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b70021f7c81a0ed08475b14b07291f662cd9f905
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 20:18:17 2012 -0400

    When removing zero-width marks, don't remove ligatures

    If a mark ligated, it probably should NOT be removed.

 src/hb-ot-shape.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 49c5ec51444f27f33e1eb6aa1959c61b08fa89c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 20:14:13 2012 -0400

    Minor refactoring

 src/hb-ot-layout-gsubgpos-private.hh | 32
 --------------------------------
 src/hb-ot-layout-private.hh	      | 35
 +++++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-indic.cc     |  2 +-
 3 files changed, 36 insertions(+), 33 deletions(-)

commit c3e6fdc3791168cf2b4c9412e751f187d58faa42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 20:11:42 2012 -0400

    [Indic] Improve check on ligatures

    Only skip actual ligatures, not marks in-between ligature components.

 src/hb-ot-layout-gsubgpos-private.hh | 5 +++++
 src/hb-ot-shape-complex-indic.cc     | 2 +-
 2 files changed, 6 insertions(+), 1 deletion(-)

commit 771a8f50289e8fa458cfc3cd84f73a380ce98077
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 20:07:50 2012 -0400

    [Indic] exclude ligatures when matching on Indic category

    If, say, a H,ZWJ,C ligature was formed, we don't want the code
    to detec
    that as a Halant.  So, ignore ligatures when matching category in
    final_reordering.

    Sinhala failures down from 514 to 455 (0.167374%).

 src/hb-ot-shape-complex-indic.cc		    | 41
 ++++++++++++----------
 .../indic/script-sinhala/misc/misc.txt		    |  1 +
 2 files changed, 23 insertions(+), 19 deletions(-)

commit d1af9e82e5309158ed334ab8e21f3a3b64b9540f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 19:55:35 2012 -0400

    [GSUB/GPOS] Const correctness

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit baacd090df97610e3f6d1b2a110dc67b6c6f9f5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 19:51:48 2012 -0400

    [Indic] Minor refactoring

 src/hb-ot-shape-complex-indic.cc | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit c7c4de2fb9bba216e37875d79815eef55c0acc01
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 18:25:02 2012 -0400

    [Indic] Remove syllable length check before sorting

    We now limit syllable lengths in the machine.  No need to match here.

 src/hb-ot-shape-complex-indic.cc | 2 --
 1 file changed, 2 deletions(-)

commit 9fa052733eb93a3ce1205f63ff8f74cb295cbe99
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 18:19:17 2012 -0400

    [Indic] Limit syllables to at most five consonants

    Seems to be about what Uniscribe does.  Not exactly.  But close
    enough.
    More consonants will start a new cluster.

    A few scripts went way down in failures.  In particular:

      - Devanagari failures went down from 490 to 56.
      - Telugu went down from 113 to 49.

    Other scripts went down slightly or didn't change.	New numbers:

    BENGALI: 353908 out of 354285 tests passed. 377 failed (0.106412%)
    DEVANAGARI: 693572 out of 693628 tests passed. 56 failed (0.00807349%)
    GUJARATI: 366485 out of 366506 tests passed. 21 failed (0.00572978%)
    GURMUKHI: 60750 out of 60809 tests passed. 59 failed (0.0970251%)
    KANNADA: 950730 out of 951913 tests passed. 1183 failed (0.124276%)
    KHMER: 298613 out of 299124 tests passed. 511 failed (0.170832%)
    MALAYALAM: 1046881 out of 1048416 tests passed. 1535 failed
    (0.146411%)
    ORIYA: 42320 out of 42329 tests passed. 9 failed (0.021262%)
    SINHALA: 271333 out of 271847 tests passed. 514 failed (0.189077%)
    TAMIL: 1091837 out of 1091837 tests passed. 0 failed (0%)
    TELUGU: 970524 out of 970573 tests passed. 49 failed (0.00504856%)

    Some of the remaining Telugu and Devanagari issues seem to be
    Uniscribe
    eating Anusvara when placed before a non-joiner.  Ouch!

 src/hb-ot-shape-complex-indic-machine.rl | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 093cd583263a5d427e3377b31585043fb55d2557
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 14:04:42 2012 -0400

    [Thai] Fix SARA AM handling

    Oops, thinko.

 src/hb-ot-shape-complex-misc.cc | 6 +++---
 src/hb-private.hh		 | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 42848453bf260b456b46a07f066e31b8c3aac2f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 13:52:07 2012 -0400

    [Thai] Reorder U+0E3A THAI VOWEL SIGN PHINTHU

    Uniscribe reorders U+0E3A to be after U+0E38 and U+0E39.  We do
    that by
    modifying the ccc for U+0E3A.

    Fixes the two remaining Thai failures (see previous commit).

 src/hb-ot-shape-complex-misc.cc			  |  7 +++++++
 src/hb-unicode.cc					  |  6 ++++++
 .../texts/in-tree/shaper-thai/script-thai/misc/MANIFEST  |  1 +
 .../in-tree/shaper-thai/script-thai/misc/phinthu.txt	  | 16
 ++++++++++++++++
 4 files changed, 30 insertions(+)

commit 4a7f4f3e56f8f7640ae7337aa1b3324f31e0d4ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 13:15:33 2012 -0400

    [Thai] Adjust SARA AM reordering to match Uniscribe

    Adjust the list of marks before SARA AM that get the reordering
    treatment.	Also adjust cluster formation to match Uniscribe.

    With Wikipedia test data, now I see:

      - For Thai, with the Angsana New font from Win7, I see 54
      failures out
	of over 4M tests  (0.00129107%).  Of the 54, two are legitimate
	reordering issues (fix coming soon), and the other 52 are simply
	Uniscribe using a zero-width space char instead of an unknown
	character for missing glyphs.  No idea why.  The missing-glyph
	sequences include one that is a Thai character followed by
	an Arabic
	Sokun.	Someone confused it with Nikhahit I assume!

      - For Lao, with the Dokchampa font from Win7, 33 tests fail out of
	54k (0.0615167%).  All seem to be insignificant mark positioning
	with two marks on a base.  Have to investigate.

 src/hb-ot-shape-complex-misc.cc		    | 42
 +++++++++++++---------
 src/hb-private.hh				    |  6 ++++
 test/shaping/texts/in-tree/shaper-thai/MANIFEST    |  1 +
 .../texts/in-tree/shaper-thai/script-lao/MANIFEST  |  1 +
 .../in-tree/shaper-thai/script-lao/misc/MANIFEST   |  1 +
 .../shaper-thai/script-lao/misc/sara-am.txt	    | 20 +++++++++++
 .../shaper-thai/script-thai/misc/sara-am.txt	    | 18 +++++++++-
 7 files changed, 72 insertions(+), 17 deletions(-)

commit 2cc933aff97916e5d0fe42883f40f0879f848e25
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 08:22:55 2012 -0400

    [Indic] Fix cluster formation with left-matras and conjunct forms

    Test case was: <U+0D15,U+0D4D,U+0D15,U+0D4A>.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e6b01a878cd2e63cb675e7e0c6ac4d83a8c10f37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 23 00:11:26 2012 -0400

    [Indic] Further streamline cluster formation

    This should address all possible cluster misformations that I had in
    mind.

 src/hb-ot-shape-complex-indic.cc | 21 ++++++++++-----------
 1 file changed, 10 insertions(+), 11 deletions(-)

commit 7b2a7dadd6c616bbfe1d8358700cab9cee88e584
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 22 23:58:55 2012 -0400

    [Indic] Merge clusters before sorting

    This should fix any instabilities in cluster formation that we were
    speculating may happen with surrounding syllables.	Or most of it
    perhaps.

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit abb3239ef92cc5dccb4638806d7ae9868b9ac9b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 22 23:55:19 2012 -0400

    [Indic] Update clusters for left-matra even if matra didn't move

    Fixes crashes reported with left matra under
    non-uniscribe-bug-compatibilty mode.

 src/hb-ot-shape-complex-indic.cc | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit 60554f14d8dca208721f0da8b69d84b92819c54f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 22 23:23:56 2012 -0400

    [Indic] Merge in Malayalam tests

    From:
    http://silpa.org.in/pub/tests/hb/ml/ml-harfbuzz-testdata.txt

 .../indic/script-malayalam/misc/misc.txt	    | 94
 +++++++++++-----------
 1 file changed, 46 insertions(+), 48 deletions(-)

commit 5c7081770c7a611bbe79b451b7b86dec4fa6395d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 22 23:20:27 2012 -0400

    [Indic] Add extensive Sinhala tests

    Generated by:
    http://git.savannah.gnu.org/cgit/sinhala.git/plain/utils/gen-unicode-sinhala.py

 .../indic/script-sinhala/misc/extensive.txt	    | 4390
 ++++++++++++++++++++
 1 file changed, 4390 insertions(+)

commit 2efe4707b1b449962f6e161716477d9775456c46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 22 23:17:59 2012 -0400

    [Indic] Add Sinhala tests

    Merge tests from:
    http://git.savannah.gnu.org/cgit/sinhala.git/plain/patches/icu-sinhala-rendering.txt

 .../indic/script-sinhala/misc/misc.txt		    | 26
 ++++++++++++++++++++--
 1 file changed, 24 insertions(+), 2 deletions(-)

commit 3d4c111b7a13700b2f7a0b087eb3992283295f21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 19:34:39 2012 -0400

    Add a test case

 .../texts/in-tree/shaper-indic/indic/script-bengali/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit 92a1ad7bef9efb456ab87bd63818cfbed7da3f6f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 18:38:27 2012 -0400

    [Indic] Stop searching for base if a post form is found before
    below form

    Improves Bengali and Gurmukhi.  Malayalam regressed a bit.	We will
    deal
    with that later.

 src/hb-ot-shape-complex-indic.cc | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 4c450c703f8e4618c587bcd7ef46dcc1f2c7947b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 18:13:04 2012 -0400

    [Indic] Recompose Bengali Ya,Nukta

    This is a bunch of hacks for now.

    Improves Bengali a bit.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 src/hb-unicode.cc		  | 8 ++++++++
 2 files changed, 10 insertions(+), 2 deletions(-)

commit e9c0f152a38cb2e76650a3e43f7fdcda266af696
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 17:05:46 2012 -0400

    [Uniscribe] Fix script fallback

    Gurmukhi failures half now.  Others changed slightly.

 src/hb-uniscribe.cc | 34 ++++++++++++++--------------------
 1 file changed, 14 insertions(+), 20 deletions(-)

commit 5791f329159c9863317e2b507514c29321be31a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 16:26:55 2012 -0400

    [Indic] Allow a ZWNJ after SM's

    Malayalam failures go way down.  Other scripts benefitted slightly
    too.
    Sinhala had one or two test regressions, but...

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 34ae336f3fae93ef9372881d545c817bce383041
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 16:17:28 2012 -0400

    [Indic] Improve Reph AfterMain positioning

    Fixes 20 out of 48 failing Oriya tests.  Failure rate down to
    0.066% now.

 src/hb-ot-shape-complex-indic.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit bdd080431a40bc941ece3230f338b94a46bd12a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 16:03:09 2012 -0400

    [Indic] Reposition Oriya Candrabindu

    Oriya failures down from 0.65% to 0.20%.

 src/hb-ot-shape-complex-indic.cc					 |
 1 +
 .../shaping/texts/in-tree/shaper-indic/indic/script-oriya/misc/MANIFEST |
 1 +
 .../texts/in-tree/shaper-indic/indic/script-oriya/misc/bindu.txt	 |
 2 ++
 3 files changed, 4 insertions(+)

commit 5f0eaaad129ff04d56b8756bebf19fbc242718c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 15:47:24 2012 -0400

    [Indic] Fix base search in final_reordering

    Fixes most Malayalam failures.  Down from 1.6% to 0.38% now.  Fixes a
    few more in other scripts too.

 src/hb-ot-shape-complex-indic.cc | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 81202bd860e4034c18d9f80c5a4f33d9f48463a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 15:10:02 2012 -0400

    [Indic] Don't attach SM/VD to other characters

 src/hb-ot-shape-complex-indic-private.hh |  3 +++
 src/hb-ot-shape-complex-indic.cc	  | 38
 ++++++++++++++++++--------------
 2 files changed, 24 insertions(+), 17 deletions(-)

commit efb4ad735691837a52447bedc1a66a87d0d9af51
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 14:27:38 2012 -0400

    Fix compiler warnings

    If x is not constant, we cannot ASSERT_STATIC on it.

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f31d97e44eeb6fb141f3de928e27e033fc7b1f47
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 14:13:35 2012 -0400

    [Indic] Form Telugu Reph out of Ra,Virama,ZWJ

    Apparently this was approved in Feb 2012.  No font yet.

 src/hb-ot-shape-complex-indic-private.hh | 2 +-
 src/hb-ot-shape-complex-indic.cc	  | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 2e193b240ec85cab0d4e2f8a375c5a7f0ef99985
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 14:02:35 2012 -0400

    [Indic] Don't split U+0AC9

    Althought IndicMatraCategory.txt classifies it as Top_And_Right matra,
    it does not have Unicode decomposition, and Uniscribe does not do
    anything special about it either.

    Gujarati failures down from 0.672% to 0.0130966%.

 src/hb-unicode.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 30c3d5e9fc61b49c2c6ad4e744300edd6f3e0261
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 13:56:32 2012 -0400

    [Indic] Simplify Uniscribe cluster emulation

    Now that we break syllables on Halant,ZWNJ, this code can be
    simplified.

 src/hb-ot-shape-complex-indic.cc | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

commit decf6ffca475fe01ff3151b7641f629f031137d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 13:51:31 2012 -0400

    [Indic] Minor!

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9e4f94a72cea6d65a6a7ba5a47db92e00dbfbb91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 13:48:03 2012 -0400

    [Indic] Break syllables at Halant,ZWNJ

    That's really what Uniscribe does, and explains a lot of pecularities
    of
    Halant,ZWNJ before the base.

    Sent Telugu from 1% failures to 0.03%.  Improved Kannada and Malayalam
    slightly.  Fixed half of Bengali, and did NOT break anything!

 src/hb-ot-shape-complex-indic-machine.rl | 5 +++--
 src/hb-ot-shape-complex-indic.cc	  | 5 ++---
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 2c372b80f6befad69e216e3f218b38640b8cc044
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 13:37:48 2012 -0400

    [Indic] Better check for applying 'init'

    Specifically, don't apply 'init' if previous char is a joiner.

    Fixes some more of Bengali.

 src/hb-ot-shape-complex-indic.cc | 9 +--------
 src/hb-private.hh		  | 3 ++-
 2 files changed, 3 insertions(+), 9 deletions(-)

commit 34a7440b7c6c6e53394ddbdbedaad57b23f85105
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 12:32:59 2012 -0400

    [GPOS] Don't zero mark advances

    Fixes more of Telugu, Kannada, and Oriya.

    May break things (outside Indic...), but we cannot think of any
    font relying
    on this immediately.

 src/hb-ot-layout-gpos-table.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8ed248de77e5d2ed978e55c0ce1a11727bc9e34c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 11:42:24 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit d0e68dbd0b9fc9a42c4280d01c8ffd9c5015d550
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 11:25:41 2012 -0400

    [Indic] Implement reph positioning step 5

    Not tuned, just copied from step 2.  Fixes another 0.5% of Kannada
    failures.  1% to go.

 src/hb-ot-shape-complex-indic.cc | 12 +++++++++++-
 1 file changed, 11 insertions(+), 1 deletion(-)

commit a9e45c32e4a0d6da33c52f8427aa694e57f52eb9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 11:04:15 2012 -0400

    [Indic] Don't let ZWNJ at the end of syllable affect base search

    Fixes a few Devanagari, half of remaining Kannada failures,
    quarter for
    Telugu, and others slightly improved or unchanged.

 src/hb-ot-shape-complex-indic.cc | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 20b68e699f73e6ce046c0ec143d40b3d6d48e06b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 10:47:46 2012 -0400

    [Indic] Apply 'cjct' globally

    Fixes 5 Devanagari failures, and no regressions.

 src/hb-ot-shape-complex-indic.cc | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit 51e764de441072e7c9f67de23e8ed717b9b8957d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 10:30:24 2012 -0400

    [Indic] Unbreak old scriptures

    Brings down failures with Lohit-Telugu from 57% to 1.40%.

 src/hb-ot-shape-complex-indic.cc | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 900cf3d449bf36d4f8b1474590cae925fef48fc8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 20 10:18:23 2012 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 87cd63266e73af316b250573ef57388a0bcc9133
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 21:17:48 2012 -0400

    [Indic] Recategorize some Kannada right matras

    Kannada failures down from 3.5% to 2.93%.

 src/hb-ot-shape-complex-indic.cc				    | 2 +-
 .../texts/in-tree/shaper-indic/indic/script-kannada/misc/MANIFEST  | 1 +
 .../shaper-indic/indic/script-kannada/misc/right-matras.txt	    |
 7 +++++++
 3 files changed, 9 insertions(+), 1 deletion(-)

commit 3604d64ced909ade91998d294a7b4b2ee14d47aa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 21:13:04 2012 -0400

    [Indic] Recategorize GURMUKHI ADDAK

    It's not in IndicSyllabicCategory.txt.  Fixes most of Gurmukhi
    failures.
    Failures down from 7.7% to 0.222%!

 src/hb-ot-shape-complex-indic.cc | 1 +
 1 file changed, 1 insertion(+)

commit 89328581236a53ec16508b95db54c7e5315b178f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 21:02:38 2012 -0400

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 47ef931f13778b894090139a64238a5ab9ac1154
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 20:52:44 2012 -0400

    [buffer] Make sure out_info = info during GPOS

 src/hb-buffer.cc | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit ae63cf206291befe3920adfe015e6cd0961580e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 20:45:41 2012 -0400

    Print line number during return when tracing

 src/hb-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 5249f3aee108b0f41770d137e63a625f594418e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 20:30:22 2012 -0400

    [Indic] Unbreak Khmer

    For Khmer, all consonants are subjoining.  No need to look in
    the font.
    We were looking in the wrong order anyway.

 src/hb-ot-shape-complex-indic.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e0475345d5d7db8dbc8b554beedfa2435c5d7fd1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 20:24:14 2012 -0400

    [Indic] Apply 'akhn' globally

    Fixes 1.5% more failures for Telugu, 2% for Kannada.
    Breaks one test in Devanagari.

 src/hb-ot-shape-complex-indic.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit c87bcddb10752b407c0471ee5ac4de6f1b00b711
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 20:03:25 2012 -0400

    [Indic] Add failing test for Kannada

 .../texts/in-tree/shaper-indic/indic/script-kannada/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit fa247ebe524f92fa95d344ba912f704262879c13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 19:52:19 2012 -0400

    [Indic] Better position U+0CD5

    Fixes another 5% of Kannada failures.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f055442716ec7543ed156d4789955b19c11a5255
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 16:20:21 2012 -0400

    [Indic] Lookup consonant position in the font

    Fixes most failures of Oriya, and improves others a bit.

 src/hb-ot-map-private.hh		  |  13 ++--
 src/hb-ot-shape-complex-indic-private.hh | 105
 -------------------------------
 src/hb-ot-shape-complex-indic.cc	  |  63 +++++++++++++------
 3 files changed, 54 insertions(+), 127 deletions(-)

commit 74d1d88781e91866a52e27f391e34df03b313442
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 16:14:23 2012 -0400

    [GSUB] Fix would_apply() for LigatureSubst

 src/hb-ot-layout-gsub-table.hh | 1 +
 1 file changed, 1 insertion(+)

commit 787f7d1e9ba9ad038f24e5a1063d12c7d169ad37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 15:29:13 2012 -0400

    [TODO] Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit be73a5f9368136ecbdb211b96516ad0c554c8201
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 14:59:15 2012 -0400

    Add src/test-would-substitute tool

 src/Makefile.am	      |   6 +-
 src/test-would-substitute.cc |  94 ++++++++++++++++++++++++++++++
 src/test.cc		      | 132
 +++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 231 insertions(+), 1 deletion(-)

commit e72b360ac6381b549249b8836fa3e70b909d3437
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 14:35:23 2012 -0400

    Refactor / finish would_apply() operation

    Untested.

 src/hb-ot-layout-gpos-table.hh       |   6 +-
 src/hb-ot-layout-gsub-table.hh       | 126 +++++++++----------
 src/hb-ot-layout-gsubgpos-private.hh | 233
 ++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout.cc		      |  11 ++
 src/hb-ot-layout.h		      |   7 ++
 5 files changed, 308 insertions(+), 75 deletions(-)

commit 8c973ebf0f59abb5ee920edd5d64e23d8e47ad75
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 13:25:08 2012 -0400

    [Indic] Implement per-script matra positioning

    Following what the spec says.

    Brings down Telugu failures from 40% to 3.75%, and Kannada failures
    from
    44% to 10%.  Does NOT affect other scripts' test results.

 src/hb-ot-shape-complex-indic-private.hh |  2 +-
 src/hb-ot-shape-complex-indic.cc	  | 40
 +++++++++++++++++++++++++++++---
 src/hb-unicode.cc			  |  2 +-
 3 files changed, 39 insertions(+), 5 deletions(-)

commit 8bb32458f95f13f66688e0811cc91f1bfffb867d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 12:59:06 2012 -0400

    [Indic] More refactoring

 src/hb-ot-shape-complex-indic-private.hh |  9 ++---
 src/hb-ot-shape-complex-indic.cc	  | 65
 ++++++++++++++++++++++++--------
 2 files changed, 54 insertions(+), 20 deletions(-)

commit 9ccc6382ba43760167c134c18c1c4ada4b8c3f22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 12:32:16 2012 -0400

    [Indic] Minor refactoring

 src/hb-ot-shape-complex-indic.cc | 127
 ++++++++++++++++++++++-----------------
 1 file changed, 71 insertions(+), 56 deletions(-)

commit f83aaa3133de5d807be267a100d6a200e8db9017
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 12:23:23 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic-private.hh | 42
 ++++++++++++++++++++------------
 1 file changed, 26 insertions(+), 16 deletions(-)

commit be8b9f5f715f6fb36b98bd33c3303f79cc068f8a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 12:11:12 2012 -0400

    [Indic] Start refactoring different matra positions per script

 src/hb-ot-shape-complex-indic-private.hh | 36
 +++++++++++++++++++-------------
 src/hb-ot-shape-complex-indic.cc	  |  4 ++--
 2 files changed, 24 insertions(+), 16 deletions(-)

commit deeb540a74f8d394db273145b17bf385d14d01bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 11:30:48 2012 -0400

    [test] Ignore tests with DOTTED CIRCLE in the output

 test/shaping/hb_test_tools.py | 4 ++++
 1 file changed, 4 insertions(+)

commit b01d9b3d90e892341ee4463f2eda4600850b97d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 19 11:25:49 2012 -0400

    [Indic] Disallow decomposition of a couple characters

    This is a hack for now.  Will be fixed when we do
    complex-shaper-driven
    normalization properly.

    The results with or without decomposition are the same, but Uniscribe
    does not normalize, so this matches better.

 src/hb-unicode.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 422ecd2d3c198a36d07d409341cb82ea57c7ad6b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 23:25:58 2012 -0400

    [Indic] Accept a forced Rakar sequence at the end of syllable

    In Sinhala, Rakar is formed by Al-Lakuna,ZWJ,Ra.  If you put that
    at the
    end of a Consonant,Matra syllable, you get a dotted-circle from
    Uniscribe.	Apparently adding a ZWJ before the Al-Lakuna "fixes" that.
    And people have been encoding that sequence...  So, allow a forced
    "ZWJ,Virama,ZWJ,Ra" sequence at the of syllables.

    Fixes some 100 or more of Sinhala failures.  Now at 622 only (0.23%).

 src/hb-ot-shape-complex-indic-machine.rl				|
 3 ++-
 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt	|
 2 ++
 2 files changed, 4 insertions(+), 1 deletion(-)

commit 6fc1732003d71cf90d37247482772c3da884687f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 17:49:19 2012 -0400

    [Indic] Allow joiners on both sides of Halant at the same time

    The sequence <ZWJ,Al-Lakuna,ZWJ> is used in Sinhala to explicitly ask
    for Rakar.	Fixes two-thousand Sinhala tests.  Not many left.

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 10cdc94eee2225f14c198c015256a5a0063eecad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 17:42:34 2012 -0400

    [Indic] In final reordering, find base, even if it disappeared

    POS_BASE can disappear if base ligated backward.  Define base as last
    with position not after base.

    Fixes a few hundred of Sinhala failures with Iskoola Pota.

 src/hb-ot-shape-complex-indic.cc				    |
 7 ++-----
 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/misc.txt  | 1 +
 2 files changed, 3 insertions(+), 5 deletions(-)

commit 9c4d24a3a677a58ec59c7fb0f8b70b8aad30a032
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 17:29:10 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 1 +
 1 file changed, 1 insertion(+)

commit 3285e107c9a83aeb552e67f9460680ff6d167d88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 17:22:14 2012 -0400

    [Indic] Implement Sinhala "Al Lakuna" Reph behavior

    In Sinhala, Reph is formed only explicitly, by the presence of a ZWJ.

 src/hb-ot-shape-complex-indic-private.hh			    | 2 ++
 src/hb-ot-shape-complex-indic.cc				    |
 7 ++++++-
 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/MANIFEST  | 1 +
 .../texts/in-tree/shaper-indic/indic/script-sinhala/misc/reph.txt  |
 3 +++
 4 files changed, 12 insertions(+), 1 deletion(-)

commit 91cade755534c42bb826a6aefcbca8a543d94387
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 16:50:41 2012 -0400

    [Indic/Unicode] Decompose Sinhala split matras the way Uniscribe likes

    Makes no visual difference.

    Fixes most of the failures.  Down from 15% to 1.3%!

 src/hb-unicode.cc | 8 ++++++++
 1 file changed, 8 insertions(+)

commit d8942dcbb4e3249a2d78a6455c119294ed4390bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 16:34:10 2012 -0400

    Apply Tibetan (global) features.

    Fixes all Tibetan failures.  All 180k of them!

    Merges back Hangul into the default shaper.

 src/hb-ot-shape-complex-misc.cc    | 82
 +++++++++++++++++---------------------
 src/hb-ot-shape-complex-private.hh |  7 ----
 2 files changed, 37 insertions(+), 52 deletions(-)

commit 552d19b7a11f7dff888587fce4d56d9f8e47e819
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 16:00:49 2012 -0400

    [Indic] Treat Register Shifters like Nukta

    Really this time.

    Fixes another 18 Khmer tests.

 src/hb-ot-shape-complex-indic-machine.rl				 |
 2 +-
 src/hb-ot-shape-complex-indic.cc					 |
 2 --
 .../in-tree/shaper-indic/south-east-asian/script-khmer/misc/misc.txt	 |
 1 +
 3 files changed, 2 insertions(+), 3 deletions(-)

commit e8cd81f76d159f3ecf808952dab24bc07782497a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 16:00:20 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 69f26bf39c824d6bf5b1c0d410380cc5462ad5ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:45:43 2012 -0400

    [Indic] Fix Matra reordering when base is at end of syllable

    For example: U+915,U+200c,U+93f

    Fixes last Tamil failure!

 src/hb-ot-shape-complex-indic.cc					 |
 2 +-
 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/misc.txt	 |
 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit d16ccc4ae7aa8be460881042413fa2637929fede
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:43:55 2012 -0400

    Leave one extra item at the end of buffer allocation

    Just in case, for the times we do out-of-bounds access.

    jk

 src/hb-buffer-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 075d671f1093d2e3c58f7f45568696030f1b3efd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:41:53 2012 -0400

    [Indic] Fix out-of-bounds array access

 src/hb-ot-shape-complex-indic.cc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit dcb527242b1eca4db1e190a7802f9cd132aaf46e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:28:25 2012 -0400

    [Indic] Allow joiners before matras

    Fixes 1 more Devanagari test!

 src/hb-ot-shape-complex-indic-machine.rl | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 391cc0331749e263bdfe83a8f5f6d76f2360ee7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:10:05 2012 -0400

    [Indic] Allow halant group in Vowel and placeholder syllables

    Fixes 2 out of 560 Devanagari failures.  AND:
    Fixes 1 out of 2 Tamil failures.

 src/hb-ot-shape-complex-indic-machine.rl			    |
 7 ++++---
 .../in-tree/shaper-indic/indic/script-devanagari/misc/misc.txt     | 1 +
 2 files changed, 5 insertions(+), 3 deletions(-)

commit ca4e3d3eab7b738c2b8e2a81696a28bca1b81495
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 15:05:40 2012 -0400

    [Indic] Streamline halant/joiner in grammar

 src/hb-ot-shape-complex-indic-machine.rl | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 418d00dffddd95a1f27e9be15752d494c627d45e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 14:57:28 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic-machine.rl				|
 3 ++-
 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/misc.txt	|
 3 +++
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 4c3691d2a32ca7e54a54f7c08098fd96fa7af39e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 14:23:55 2012 -0400

    [Indic] Hopefully minor!

    Refactoring Indic machin.  No semantic change.

 src/hb-ot-shape-complex-indic-machine.rl | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit e092c556fb1cf38be3cea1f4b75a0d879372dfa2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 14:09:25 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 14dbdd9e39d3a869fd1521000c889c347433d22b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 18 13:13:03 2012 -0400

    [Indic] Unbreak Tamil

    Tamil has only about 150 failures now!

 src/hb-ot-shape-complex-indic.cc | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit db8981f1e0e8625714568c6d0f11f0b317b11d0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 18:17:30 2012 -0400

    [Indic] Position Khmer Robat

    It's a visual Repha.

    Still not positioning logical Repha as occurs in Malayalam.

    Another 200 Khmer failures fixed.  547 to go.  That's better than
    Devanagari!

 src/hb-ot-shape-complex-indic-machine.rl | 36
 +++++++++++++++++---------------
 src/hb-ot-shape-complex-indic-private.hh |  7 ++++---
 src/hb-ot-shape-complex-indic.cc	  | 13 ++++++++++++
 3 files changed, 36 insertions(+), 20 deletions(-)

commit 25bc489498ef7d0beb8fe9ab663e3f0b2f52c9c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 17:53:03 2012 -0400

    [Indic] Better categorize Register Shifters and Khmer Various signs

    Down another 500 or so Khmer failures!

 src/hb-ot-shape-complex-indic-machine.rl		    | 14
 +++++++-------
 src/hb-ot-shape-complex-indic-private.hh		    |  2 +-
 src/hb-ot-shape-complex-indic.cc			    |  8 ++++----
 .../south-east-asian/script-khmer/misc/MANIFEST	    |  2 ++
 .../script-khmer/misc/other-marks-invalid.txt		    |  4 ++++
 .../south-east-asian/script-khmer/misc/other-marks.txt     |  6 ++++++
 6 files changed, 24 insertions(+), 12 deletions(-)

commit 39b17837b4064d59c18cebb49c1c0b5b8cc0c117
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 17:09:29 2012 -0400

    Add hb_buffer_normalize_glyphs() and hb-shape --normalize-glyphs

    This reorders glyphs within the cluster to a nominal order.
    This should
    have no visible effect on the output, but helps with testing, for
    getting the same hb-shape output for visually-equal glyphs for each
    cluster.

 src/hb-buffer.cc  | 76
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-buffer.h   | 13 ++++++++++
 src/hb-private.hh | 29 ++++++++++++++++-----
 util/options.cc   |  1 +
 util/options.hh   |  7 ++++-
 5 files changed, 118 insertions(+), 8 deletions(-)

commit 25e302da9a712e6f1d63b0d243a8df0d326ddba3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 14:25:14 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 5d32690a3428fa86eb26fe5fcec943a10aa95881
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 14:23:28 2012 -0400

    [Indic] For scripts without Half forms, always choose first consonant
    as base

    In such scripts (ie. Khmer), a ZWJ/ZWNJ shouldn't stop the search for
    base.  So, instead just choose the first consonant as base directly.

    Test sequence:
    U+1798,200c,U+17C9,U+17D2,U+179B,U+17C1,U+17C7

 src/hb-ot-shape-complex-indic.cc | 59
 ++++++++++++++++++++++++----------------
 1 file changed, 35 insertions(+), 24 deletions(-)

commit 34b57149065d96f7528aaccaa7654e956ce27e93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 14:09:32 2012 -0400

    [Indic] Treat Khmer Register Shifters more like Nuktas

    Except that there may be a ZWNJ before a Register Shifter.

 src/hb-ot-shape-complex-indic-machine.rl				 |
 2 +-
 .../in-tree/shaper-indic/south-east-asian/script-khmer/misc/misc.txt	 |
 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 11e2a601b19861b05dbb2051d2d078c3cfd75b29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 14:02:28 2012 -0400

    [Indic] Minor

 src/hb-ot-shape-complex-indic-machine.rl | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0201e0a4649ad5b607e50bcb9605e7a5b7143812
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 13:55:10 2012 -0400

    [Indic] Apply 'cfar' for Khmer

    Mark stuff after a pre-base reordering Ro 'cfar'.  Used in Khmer.
    This allows distinguishing the following cases with MS Khmer fonts:

      U+1784,U+17D2,U+179A,U+17D2,U+1782
      U+1784,U+17D2,U+1782,U+17D2,U+179A

 src/hb-ot-shape-complex-indic.cc			  | 16
 ++++++++++++++--
 .../south-east-asian/script-khmer/misc/misc.txt	  |  2 ++
 2 files changed, 16 insertions(+), 2 deletions(-)

commit 55f70ebfb95083f515d9b0044a2a65ab11484bb5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 12:50:13 2012 -0400

    [Indic] Position final subjoined consonants (and vowels) after matras

    In Khmer, a final subjoined consonant or independent vowel can occur
    after matras.  This final subjoined thing should NOT be reordered to
    before the matra even though it's subjoined.

    Fixes another 1k of the Khmer failures.  Not much left really.

 src/hb-ot-shape-complex-indic-private.hh		     |	1 +
 src/hb-ot-shape-complex-indic.cc			     | 13
 +++++++++++++
 .../south-east-asian/script-khmer/misc/misc.txt	     |	2 ++
 3 files changed, 16 insertions(+)

commit c50ed71e9a3df1844f564de66d54b46a696c1356
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 11:54:28 2012 -0400

    [Indic] Recategorize Khmer coeng sign as a separate category OT_Coeng

    Amend the syllable structure to allow a final subscripted consonant
    (Coeng+C) and a final subscripted independent vowel (Coeng+V).
    Fixes another 2k of Khmer failures.

 src/hb-ot-shape-complex-indic-machine.rl			    |
 7 ++++---
 src/hb-ot-shape-complex-indic.cc				    |
 6 +++++-
 .../shaper-indic/south-east-asian/script-khmer/misc/misc.txt	    | 1 +
 3 files changed, 10 insertions(+), 4 deletions(-)

commit deb521dee4fdca8c2124cfb39a205e6269d4a70d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 11:37:32 2012 -0400

    [Indic] Add a separate Coeng class

    No characters recategorized yet.  No semantic change.

 src/hb-ot-shape-complex-indic-machine.rl |  1 +
 src/hb-ot-shape-complex-indic-private.hh |  3 ++-
 src/hb-ot-shape-complex-indic.cc	  | 26 ++++++++++++++++----------
 3 files changed, 19 insertions(+), 11 deletions(-)

commit 74ccc6a1322f8c48c5f2a05f04821783c4b87a14
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 11:16:19 2012 -0400

    [Indic] Move Halant with after-base consonants

    Normally, we attach the Halant to the previous character and move it
    with it.  For after-base consonants however, the Halant "belongs"
    to the
    consonant after, so attach it so.

    This fixes Bengali sequences involving post-base consonant Ya, which
    should ligate with the Halant to form Ya Phala, but previously a
    reordered matras was blocking the ligation.

 src/hb-ot-shape-complex-indic.cc			       |
 11 +++++++++++
 .../in-tree/shaper-indic/indic/script-bengali/misc/misc.txt   |  1 +
 2 files changed, 12 insertions(+)

commit d5c4edcdd6df32f2f23aca44f14838b4baab4d7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 17 10:40:59 2012 -0400

    [Indic] Apply presentation-forms features all at once

    Seems like this is what Uniscribe is doing, and does not break
    any fonts
    we tested (with Devanagari, Malayalam, Khmer, and Bengali), while
    fixing
    some Ra Phala sequences for Bengali with Vrinda.  Fixes another 2% of
    Bengali failures (a couple more to go).

 src/hb-ot-shape-complex-indic.cc				     |
 6 +++---
 .../texts/in-tree/shaper-indic/indic/script-bengali/misc/misc.txt   | 1 +
 2 files changed, 4 insertions(+), 3 deletions(-)

commit 559f70667891a3ceeffb36f40de38a4f85868945
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 22:43:17 2012 -0400

    Fix MarkAttachmentType matching

    Fixes issue reported by Khaled Hosny with his Hussaini Nastaleeq font
    and sequences like those added in the previous commit.

 src/hb-ot-layout.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6de103547e4a7fb34c833861713ea373cd912261
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 22:46:06 2012 -0400

    [test/arabic] Add Arabic tests for mark skipping

    Expose a bug with Khaled's Hussaini Nastaleeq font.

 .../shaper-arabic/script-arabic/misc/diacritics/MANIFEST	|  1 +
 .../script-arabic/misc/diacritics/mark-skipping.txt		|
 10 ++++++++++
 2 files changed, 11 insertions(+)

commit ad4494759fa8bfd2497800c24fa414075ed1aa61
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 22:40:21 2012 -0400

    Minor

 src/hb-ot-layout.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit af92b4cc90e4184d5bdd8037c551ed482700114f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 20:31:24 2012 -0400

    [Indic] Disable 'kern' in Uniscribe bug compatibility mode

    Uniscribe does not apply 'kern' in the Indic module.  Some of
    the Khmer
    fonts they ship have small adjustments in the 'kern' table.  Disable
    'kern' in the Indic module under Uniscribe bug compatibility mode.

    Fixes some 10% of the Khmer failures.  Remains under 3% (excluding
    dotted-circle ones).

 src/hb-ot-shape-complex-indic.cc | 3 +++
 1 file changed, 3 insertions(+)

commit d96838ef951ce6170eb2dc576ebcba2262cf7008
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 20:26:57 2012 -0400

    Allow complex shapers overriding common features

    In a new callback...  Currently unused by all complex shapers.

 src/hb-ot-shape-complex-arabic.cc  |  6 ++++++
 src/hb-ot-shape-complex-indic.cc   |  6 ++++++
 src/hb-ot-shape-complex-misc.cc    | 18 ++++++++++++++++++
 src/hb-ot-shape-complex-private.hh | 30 ++++++++++++++++++++++++++++++
 src/hb-ot-shape.cc		    |  2 ++
 5 files changed, 62 insertions(+)

commit df50b8474094f0563ccfdae12c4425a51b72add6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 19:56:29 2012 -0400

    [Indic] Categorize other Khmer marks

    Mark them the same as the Register Shifters for now.  Need to rename
    that category to something more sensible after all is settled.

    Fixes another percent of Khmer failures.  Down to under 3%!

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit 8e7b5882fb4c1921c9d030d354a9b998115cdb8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 17:04:46 2012 -0400

    [Indic] Recognize pre-base reordering Ra anywhere in the syllable

    We were doing that only immediately after base.

    Fixes another percent in the Khmer failures.  About three more
    to go...

 src/hb-ot-shape-complex-indic.cc | 84
 ++++++++++++++++++++++------------------
 1 file changed, 46 insertions(+), 38 deletions(-)

commit 7d09c98a1fff97127e48eae48d380dc9fcff288e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 16:45:22 2012 -0400

    [Indic] Recognizer Register Shifter marks

    Fixes another 6% of the Khmer failures.

 src/hb-ot-shape-complex-indic-machine.rl | 3 ++-
 src/hb-ot-shape-complex-indic-private.hh | 5 +++--
 src/hb-ot-shape-complex-indic.cc	  | 2 ++
 3 files changed, 7 insertions(+), 3 deletions(-)

commit 60da763dfac96a7931d6e6bdef8b9973bd5209ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 16:13:32 2012 -0400

    [GSUB/GDEF] Guess glyph classes after substitution only if no GDEF

    Brings down Khmer failures with Daun Penh font from 36% to 20%.

 src/hb-ot-layout-gsubgpos-private.hh | 20 +++++++++++++-------
 1 file changed, 13 insertions(+), 7 deletions(-)

commit fcdc5f1c8849a7f38d9f34f64d60c6d95d7501f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:52:54 2012 -0400

    [Indic] Categorize Khmer Ro

    Khmer failures down from 58% to 36%.

 src/hb-ot-shape-complex-indic-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit 78818124b17691ec2c647142fdb9ae743aa03dee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:49:08 2012 -0400

    [Indic] Reoder pre-base reordering Ra

    Brings down Malayalam failures from 14% down to 3%.

 src/hb-ot-shape-complex-indic.cc | 42
 +++++++++++++++++++++++++++-------------
 1 file changed, 29 insertions(+), 13 deletions(-)

commit 1a1dbe9a2787f226f3e43063da8eb6633438b0a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:40:33 2012 -0400

    [Indic] Rename

 src/hb-ot-shape-complex-indic.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 46e645ec4b59f0a278347be11f40c7df700d5bb6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:30:05 2012 -0400

    [Indic] Start implementing pre-base reordering

 src/hb-ot-shape-complex-indic.cc | 33 ++++++++++++++++++---------------
 1 file changed, 18 insertions(+), 15 deletions(-)

commit 921ce5b17daf06af8e17989a3e335b9f5df20483
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:26:56 2012 -0400

    [Indic] Rename

    No semantic change.

 src/hb-ot-shape-complex-indic.cc | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit b504e060f008e95b1ba36c06600c9fea4f5d4808
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:21:12 2012 -0400

    [Indic] Implement After-Main Reph positioning

    Almost...

 src/hb-ot-shape-complex-indic.cc | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 17d7de91d76406d3e92db37d9eef2fc615f06e68
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:20:15 2012 -0400

    [Indic] Apply 'pref' to pre-base reodering Ra

    No reordering yet.

 src/hb-ot-shape-complex-indic.cc | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 362d3db8d3527d0fef260a17d2466e92a4a25425
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 15:15:28 2012 -0400

    [Indic] Minor

    Should not be any semantic change.	In preparation for implementing
    pre-base reordering Ra.

 src/hb-ot-shape-complex-indic.cc | 8 +-------
 1 file changed, 1 insertion(+), 7 deletions(-)

commit 70fe77bb9a25922bd34f206826d8731d901fb451
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 14:52:18 2012 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 44
 ++++++++++++++++++++--------------------
 1 file changed, 22 insertions(+), 22 deletions(-)

commit 2f903215c5da2330a37abe489a3f45f7c3fd5a09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:54:43 2012 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a3e04bee2c2fa648759a87e460db6b4f1b685586
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:47:19 2012 -0400

    [Indic] Reorder virama only for old Indic spec

 src/hb-ot-shape-complex-indic.cc | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 0de771b72da6b342b015e3556190821547a4011d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:39:36 2012 -0400

    [Indic] Categorize Khmer consonants

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit d487fff266258eb1af056e9704cfb09d04251ddc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:25:17 2012 -0400

    Split matras without a Unicode decomposition

    This is a hack for now, to get us going with Khmer.  This will be
    refactored properly later to move the complex logic into complex
    shapers.

 src/hb-unicode.cc | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit 8aa801a6fd1a737fa20b851edf7528bdd6635b8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:24:26 2012 -0400

    [Indic] Adjust position for split matras

    We are going to split matras without a Unicode decompositions in a way
    that the second half takes the codepoint of the whole matra.  So,
    position them where the second half is supposed to end up.

 src/hb-ot-shape-complex-indic-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 1feb8345a5fd92297eb6796e6dce633bafa0c76e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 13:23:40 2012 -0400

    [GSUB] Allow 1-to-1 ligature substitutions!

    Apparently Uniscribe allows these, and they are used in some Khmer
    fonts
    shipped with Windows, namely, Daun Penh.

 src/hb-ot-layout-gsub-table.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 29f106d7fba25e1464debd3a4831a7380d75c4c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 16 12:05:35 2012 -0400

    [Indic] Apply Above Forms

 src/hb-ot-shape-complex-indic.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit fa2bd9fb63d83b657373764d4b657084d8327fc9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 14 12:15:54 2012 -0400

    Further simplify atomic ops on Visual Studio

 src/hb-atomic-private.hh | 5 -----
 1 file changed, 5 deletions(-)

commit 0a492357016bc9a614d2a726f2006c10af68ca58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 13:20:49 2012 -0400

    Minor

 src/hb-warning.cc | 29 +++++------------------------
 1 file changed, 5 insertions(+), 24 deletions(-)

commit 11c4ad439ef2b39a840f397a693b1ba643f52c21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 11:29:31 2012 -0400

    Add -Wcast-align

 configure.ac	 | 3 +++
 src/Makefile.am | 2 +-
 2 files changed, 4 insertions(+), 1 deletion(-)

commit a98d0ab18624501ee60551304f2715361ac643da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 10:19:10 2012 -0400

    Make sure HB_BEGIN_DECLS / HB_END_DECLS is only used in public headers

    So we can use them to switch default visibility to internal if
    desired,
    and use these to make only declared symbols public.

 src/check-c-linkage-decls.sh		  | 10 +++++++++-
 src/hb-fallback-shape-private.hh	  |  6 ------
 src/hb-ot-shape-complex-indic-machine.rl |  4 ----
 3 files changed, 9 insertions(+), 11 deletions(-)

commit 5c5bc96216c9ad58243eb3ed27b253e237f08ebe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 10:15:37 2012 -0400

    Allow overriding HB_BEGIN_DECLS / HB_END_DECLS

 src/hb-common.h | 2 ++
 1 file changed, 2 insertions(+)

commit ec5f5f0f8a1d5b3ff98452175bb4450a59897620
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 10:00:42 2012 -0400

    Don't export inline methods

 configure.ac | 3 +++
 1 file changed, 3 insertions(+)

commit 50a4e78b530563917eb606ff3b96dcc9eed5b3ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 09:48:39 2012 -0400

    Check for exported weak symbols

    Ouch, all our C++ inline functions are being exported (weakly)
    already.
    Fix coming.

 src/check-internal-symbols.sh | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit b5aeb95afeb13a66177caada9f5d5ad4cddbd35f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 09:45:54 2012 -0400

    Make hb_in_range() static

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 271c8f89075607c689938b4f5e60323d9a1acd70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 09:32:30 2012 -0400

    Minor

 src/hb-ft.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 391f1ff5d894b60bfe0f606be436ffe7e43f7455
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 13 09:04:07 2012 -0400

    Fix _InterlockedCompareExchangePointer on x86

 src/hb-atomic-private.hh | 6 ++++++
 1 file changed, 6 insertions(+)

commit 2023e2b54d91924dddfd228ffdbb46021135b068
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 19:00:30 2012 -0400

    [ft] Disable ppem setting

    The calculations were wrong.

    FreeType makes it really hard to set size and ppem independently.
    For now, disable it.  Need to come up with a fix later.

 src/hb-ft.cc | 3 +++
 1 file changed, 3 insertions(+)

commit cdf7444505a7ae49d20f9ba6776dea92c1fde2a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 18:52:39 2012 -0400

    [ft] Use unfitted kerning if x_ppem is zero

 src/hb-ft.cc | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 6d08c7f1b3601095f9a12630045331dd0fe75380
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 18:01:27 2012 -0400

    Revert "Towards templatizing common Lookup types"

    This reverts commit 727135f3a9938c1ebd5b9f5015a46c7ccc8573c5.

    This is work-in-progress.  Didn't mean to push it out just yet.

 src/hb-ot-layout-gpos-table.hh       | 16 ++++++----------
 src/hb-ot-layout-gsub-table.hh       | 24 ++++++++++--------------
 src/hb-ot-layout-gsubgpos-private.hh | 33
 ++-------------------------------
 3 files changed, 18 insertions(+), 55 deletions(-)

commit 552bf3a9f9651311084b7979805dbdc18c0335ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 16:44:51 2012 -0400

    Bump WINNT version requested from 500 to 600

    Since we use the OpenType versions of Uniscribe functions, we are
    relying on that version of the WINNT API.  Otherwise, usp10.h
    will hide
    those symbols.

 src/hb-uniscribe.cc | 2 +-
 src/hb-uniscribe.h  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 9a5b421a64db1bb23d5c6ebbc3bf3f3a5513dc36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 16:35:04 2012 -0400

    Fix build with no Unicode funcs implementations provided

 src/hb-unicode-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 6efe1eca660135096f05987ac0ef9b635de6cdfd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 11 15:30:08 2012 -0400

    Update git.mk to upstream

 git.mk | 58 ++++++++++++++++++++++++++++++++++++++--------------------
 1 file changed, 38 insertions(+), 20 deletions(-)

commit 727135f3a9938c1ebd5b9f5015a46c7ccc8573c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 3 22:15:35 2012 -0400

    Towards templatizing common Lookup types

 src/hb-ot-layout-gpos-table.hh       | 16 ++++++++++------
 src/hb-ot-layout-gsub-table.hh       | 24 ++++++++++++++----------
 src/hb-ot-layout-gsubgpos-private.hh | 33
 +++++++++++++++++++++++++++++++--
 3 files changed, 55 insertions(+), 18 deletions(-)

commit 1167c7bfc9e61f145e11da4881968293a4d3c0a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 3 11:38:46 2012 -0400

    Minor

 test/shaping/texts/in-tree/shaper-thai/MANIFEST		     |
 2 +-
 test/shaping/texts/in-tree/shaper-thai/misc/MANIFEST		     | 1 -
 test/shaping/texts/in-tree/shaper-thai/misc/misc.txt		     |
 6 ------
 test/shaping/texts/in-tree/shaper-thai/script-thai/MANIFEST	     | 1 +
 test/shaping/texts/in-tree/shaper-thai/script-thai/misc/MANIFEST    | 1 +
 test/shaping/texts/in-tree/shaper-thai/script-thai/misc/sara-am.txt |
 4 ++++
 6 files changed, 7 insertions(+), 8 deletions(-)

commit aa116582e69d18777448e7993078e5d6335ddfed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 29 10:50:12 2012 -0400

    Minor

 .../texts/in-tree/shaper-indic/indic/script-malayalam/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit 1f13c7185f02ea18d4fadd2ea8ad444bea863c39
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 27 10:07:27 2012 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 12f5c0a222a2f0aebe63c0d367937a0ff985474a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 26 11:16:13 2012 -0400

    Fix check for Intel atomic ops

 configure.ac		  | 9 +++++----
 src/hb-atomic-private.hh | 2 +-
 2 files changed, 6 insertions(+), 5 deletions(-)

commit 6932a41fb61ffc2901c260587b1e98ed9c2a7ea1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 26 10:46:31 2012 -0400

    Use octal-escaped UTF-8 characters instead of plain text

    https://bugs.freedesktop.org/show_bug.cgi?id=50970

 src/hb-private.hh | 17 ++++++++++++-----
 1 file changed, 12 insertions(+), 5 deletions(-)

commit 8c0ea7bcb4409aaf8c96ad641f2db30003228ad0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jun 24 13:20:56 2012 -0400

    Disable introspection again

    Until I figure out the build issues.  Sigh...

 configure.ac	 |  2 +-
 src/Makefile.am | 42 +++++++++++++++++++++---------------------
 2 files changed, 22 insertions(+), 22 deletions(-)

commit 8c5f5e6f5ec2b6a219fbdfc955f6299325a0adde
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jun 17 14:58:59 2012 -0400

    Minor

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 49f8e0cd9a5493ae26857c43bac0711cdf47c80d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 16 15:40:03 2012 -0400

    GStaticMutex is deprecated

 src/hb-mutex-private.hh | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 5e113a4b7921ced6af2d53460a7a2f1d0185c02a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 16 15:26:13 2012 -0400

    g_thread_init() is deprecated

 test/api/hb-test.h | 2 ++
 1 file changed, 2 insertions(+)

commit 1bc1cb3603167f5da309336f7018c8b0608ac104
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 16 15:21:55 2012 -0400

    Make source more digestable for gobject-introspection

 src/hb-blob.cc		   | 2 +-
 src/hb-blob.h		   | 2 +-
 src/hb-buffer-private.hh  | 4 ++--
 src/hb-buffer.h	   | 6 +++---
 src/hb-common.cc	   | 2 +-
 src/hb-common.h	   | 4 ++--
 src/hb-font-private.hh    | 6 +++---
 src/hb-font.cc		   | 2 +-
 src/hb-font.h		   | 8 ++++----
 src/hb-set-private.hh	   | 2 +-
 src/hb-set.h		   | 2 +-
 src/hb-shape.h		   | 2 +-
 src/hb-unicode-private.hh | 2 +-
 src/hb-unicode.h	   | 2 +-
 14 files changed, 23 insertions(+), 23 deletions(-)

commit 84d781e54cc75c81a06ba43fd7b1a74b8c7d9591
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 16 15:21:41 2012 -0400

    Flesh out gobject-introspection stuff a bit

 configure.ac	 |  1 +
 src/Makefile.am | 23 +++++++++++++++++++++--
 2 files changed, 22 insertions(+), 2 deletions(-)

commit 49ee12ccd00870d4976339dc546c74eaf08a8fc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 16 14:53:51 2012 -0400

    Add TODO item

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit d3c8115d1ad09404b8970b98e6b5ab74510a35f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 12 09:52:57 2012 -0400

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 2cf301968cb8c1150cead0ab909457cdd3ee2d01
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 14:58:01 2012 -0400

    Add hb_object_lock/unlock()

 src/hb-object-private.hh | 32 ++++++++++++++++++++++++++------
 1 file changed, 26 insertions(+), 6 deletions(-)

commit 6a5661f1e69c937083e8d976cb12429b99180d54
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 03:26:16 2012 -0400

    Ugh

 util/shape-consumer.hh | 2 --
 1 file changed, 2 deletions(-)

commit f211d5c291b4c947cfd732e873627567173057e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 03:11:22 2012 -0400

    More Oops!	Fix fast-path with sub-type==0

 src/hb-ot-layout-gpos-table.hh | 2 +-
 src/hb-ot-layout-gsub-table.hh | 2 +-
 util/shape-consumer.hh		| 2 ++
 3 files changed, 4 insertions(+), 2 deletions(-)

commit b1de6aa1f33b228afe231c8209aef90a5fa1ee5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 03:07:59 2012 -0400

    Oops!

 src/hb-ot-layout-gpos-table.hh | 2 +-
 src/hb-ot-layout-gsub-table.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit b12e2549cbcd4f1ef46e66c75533686ee560f59b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 03:05:20 2012 -0400

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit faf0f20253d954cc4cfa4c967ece7573a5ddae3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 03:02:36 2012 -0400

    Add sanitize() logic for fast-paths

 src/hb-ot-layout-gpos-table.hh | 15 ++++++++++++---
 src/hb-ot-layout-gsub-table.hh | 20 ++++++++++++++------
 2 files changed, 26 insertions(+), 9 deletions(-)

commit 4e766ff28d1fb831ded20666799787478129c07c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 02:53:57 2012 -0400

    Add fast-path for GPOS too

    Shaves another 3% for DejaVu Sans long Latin strings.

 src/hb-ot-layout-gpos-table.hh | 16 ++++++++++++++--
 1 file changed, 14 insertions(+), 2 deletions(-)

commit 993c51915f503f74ee00eee646b67bf2e3f73596
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 02:48:16 2012 -0400

    Add fast-path to GSUB to check coverage

    Shaves a good 10% off DejaVu Sans with simple Latin text for me.
    Now, DejaVu is very ChainContext-intensive, but it's also a very
    popular font!

 src/hb-ot-layout-gsub-table.hh | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit f19e0b0099ec73b8fedccacff4902403f5eabc42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 02:26:57 2012 -0400

    Match input before backtrack

    Makes more sense, optimization-wise.

 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 67bb9e8cea49a44be6996515e1c7d8cdc95a77e6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 02:02:46 2012 -0400

    Add set add_coverage() to Coverage()

 src/hb-ot-layout-common-private.hh | 24 ++++++++++++++++++++++++
 src/hb-set-private.hh		    |  5 +++++
 2 files changed, 29 insertions(+)

commit 4952f0aa5b2f4368d9e3418252e0a1b9294cd5ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 01:39:11 2012 -0400

    Minor

 src/hb-ot-layout-gsub-table.hh | 2 ++
 1 file changed, 2 insertions(+)

commit ad6a6f22401d6256e34521d0f52e91348c5ed4c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 01:21:02 2012 -0400

    Minor

 src/hb-ot-layout.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 46617a42133fbab151de4111a74dcbdc4e769c74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 01:18:58 2012 -0400

    Fix cache implementation

 src/hb-cache-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit ce47613889aa3ff9b0067d3e51ba63cfdb139adb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 01:10:26 2012 -0400

    Micro-optimize

    I know...

 src/hb-ot-layout-gsubgpos-private.hh |  3 ++-
 src/hb-ot-layout.cc		      | 46
 ++++++++++++++++++++++--------------
 2 files changed, 30 insertions(+), 19 deletions(-)

commit 70416de298b811ab6be53a1c67f0d2531d99cd46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 00:56:41 2012 -0400

    Minor

 src/hb-open-type-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit 99159e52a3c9d5ae6c0fbdec64e7ed684fa70b61
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 00:50:40 2012 -0400

    Use linear search for small counts

    I see about 8% speedup with long strings with DejaVu Sans.

 src/hb-open-type-private.hh | 19 ++++++++++++++-----
 1 file changed, 14 insertions(+), 5 deletions(-)

commit caf0412690542e58e23246dccc4b2fb83bd652ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 00:26:32 2012 -0400

    Minor

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0f8fea71a66b1e01ee4398967db464393f478d42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 00:24:38 2012 -0400

    Minor.  Hide _hb_ot_layout_get_glyph_property()

 src/hb-ot-layout-private.hh | 4 ----
 src/hb-ot-layout.cc	     | 2 +-
 2 files changed, 1 insertion(+), 5 deletions(-)

commit 44b8ee0c90d7b1dd91e5848114141e3186534a0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 9 00:23:24 2012 -0400

    Minor

 src/hb-ot-layout-gpos-table.hh | 3 ++-
 src/hb-ot-layout.cc		| 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 7b84c536c10ab90ed96a033d88e9ad232d46c5b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 22:04:23 2012 -0400

    In MarkBase attachment, only attach to first of a MultipleSubst
    sequence

    This is apparently what Uniscribe does.  Test case is:

      SEEN FATHA TEH ALEF

    with Arabic Typesetting.  Originally reported by Khaled Hosny.

 src/hb-ot-layout-gpos-table.hh       | 7 ++++++-
 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++++++
 2 files changed, 14 insertions(+), 1 deletion(-)

commit ec57e0c5655ced5109c4638bf802772d336448fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:47:23 2012 -0400

    Set lig_comp for MultipleSubst components

    To be used for correct mark attachment to first component of a
    MultipleSubst output.  That's what Uniscribe does.

 src/hb-ot-layout-gsub-table.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit e085fcf7ca302eb7802a032197c022819e7e7074
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:45:00 2012 -0400

    Remove unused buffer->replace_glyphs_be16

 src/hb-buffer-private.hh	      |  3 ---
 src/hb-buffer.cc		      | 23 -----------------------
 src/hb-ot-layout-gsubgpos-private.hh |  8 --------
 3 files changed, 34 deletions(-)

commit 3ec77d6ae0510dc2c0ec64382c4948bc6e109844
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:44:06 2012 -0400

    Don't use replace_glyphs_be for MultipleSubst

 src/hb-ot-layout-gsub-table.hh       | 5 ++++-
 src/hb-ot-layout-gsubgpos-private.hh | 7 ++++++-
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 4b7192125ffd295091d6b3a0bdfca7011947c2ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:41:46 2012 -0400

    Minor

 src/hb-ot-layout-gsub-table.hh       | 3 ++-
 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++++++
 2 files changed, 10 insertions(+), 1 deletion(-)

commit 4508789f4b5e0ece5620d35598aeeb7ecbe3e3aa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:32:43 2012 -0400

    Add test for static initializers and other C++ stuff

 src/Makefile.am	   |  3 ++-
 src/check-static-inits.sh | 33 +++++++++++++++++++++++++++++++++
 2 files changed, 35 insertions(+), 1 deletion(-)

commit 56bd259b9ac22dd98913c8ca2e2cf7b30b632373
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:29:18 2012 -0400

    Minor

 src/check-internal-symbols.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4538b47bf08e73e7f5cce6337df5fe154233c168
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:01:45 2012 -0400

    Remove done TODO items

 TODO | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

commit bc8357ea7b4c0d7c715aae353176434fb9460205
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 21:01:20 2012 -0400

    Merge clusters during normalization

 src/hb-ot-shape-normalize.cc | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit fe3dabc08df7501010564f8844bd4d11771cc6a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:56:05 2012 -0400

    Minor

 src/hb-buffer.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e88e14421a33ca5bdfd76bc0b2f801fcb6e78911
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:55:21 2012 -0400

    Use merge_clusters instead of open-coding

 src/hb-buffer.cc | 16 ++++------------
 1 file changed, 4 insertions(+), 12 deletions(-)

commit 330a2af3ff0e12c01b3b451357b8bdc83b2e9b47
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:40:02 2012 -0400

    Use merge_clusters when forming Unicode clusters

 src/hb-ot-shape.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit bd300df9adf955c1e69b3783c1c061876940fb8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:35:18 2012 -0400

    Minor

 src/hb-object-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e51d2b6ed1c794ac28c5610bfd01dbc9fb383633
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:33:27 2012 -0400

    Extend into main buffer if extension hit end of out-buffer merging
    clusters

 src/hb-buffer.cc		 | 5 +++++
 src/hb-ot-shape-complex-misc.cc | 9 ---------
 2 files changed, 5 insertions(+), 9 deletions(-)

commit 5ced012d9f58c51d557a835593c3277e35fe3b35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:31:32 2012 -0400

    Extend end when merging clusters in out-buffer

 src/hb-buffer.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit 72c0a1878313e7232d554bc226f4c6dc01418a95
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:30:03 2012 -0400

    Extend clusters backward in out-buffer

 src/hb-buffer.cc		 | 8 ++++++++
 src/hb-ot-shape-complex-misc.cc | 2 --
 2 files changed, 8 insertions(+), 2 deletions(-)

commit cd5891493df06fdb92e1ae526d29dee8df250235
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:27:53 2012 -0400

    Extend clusters backwards, into the out-buffer too

 src/hb-buffer.cc | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 77471e037122548bfc08cacea6fbb472831c34f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:21:02 2012 -0400

    Clear output buffer before calling GSUB pause functions

 src/hb-ot-map.cc | 3 +++
 1 file changed, 3 insertions(+)

commit cafa6f372721fd6b0a7c0da68b9421d3e94931bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:17:10 2012 -0400

    When merging clusters, extend the end

 src/hb-buffer.cc | 20 ++++++++++++++------
 1 file changed, 14 insertions(+), 6 deletions(-)

commit 28ce5fa454b54f728044ee12a9dbe7d016783d4a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 20:13:56 2012 -0400

    Merge clusters when ligating

 src/hb-ot-layout-gsub-table.hh | 1 +
 1 file changed, 1 insertion(+)

commit 2bb1761ccb7d300744ced6427165f4ea75ddf96c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 19:29:44 2012 -0400

    Minor, use next_glyph()

 src/hb-ot-layout-gsub-table.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5f68f8675e5ccaee91f5a90d86bc3b022b9a54e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 19:23:43 2012 -0400

    Minor

 src/hb-ot-shape.cc | 1 +
 1 file changed, 1 insertion(+)

commit 872969126756456a69bf958f3df6e56a26e57b0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 14:18:30 2012 -0400

    Increase Uniscribe MAX_ITEMS

 src/hb-uniscribe.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dbffa4c83d29c689ee4cd8a1c53e84521028c711
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 14:08:32 2012 -0400

    Fix Uniscribe charset matching

    Previously was failing to match fonts that didn't support
    CHARSET_ANSI.

    There still remains a problem with the Uniscribe backend, in that if a
    font with the same family name is installed, and is newer, the native
    one is preferred over the font we provide.	Fixing it requires
    rewriting
    the name table with a unique family name...

 src/hb-uniscribe.cc | 1 +
 1 file changed, 1 insertion(+)

commit 82e8bd8628aeb37835fb019a71b6bdac87824b97
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 11:48:29 2012 -0400

    Remove unused code

 src/hb-uniscribe.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 6da9dbff21b47fb10794b8d6cb747393c9eab7dd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 10:53:35 2012 -0400

    Remove zero-width chars in the fallback shaper too

 src/hb-fallback-shape.cc | 16 ++++++++++++----
 1 file changed, 12 insertions(+), 4 deletions(-)

commit 68b76121f83fc9b87dc84f03e8bef38d4332734d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 10:43:49 2012 -0400

    Fix regressions introduced by sed.	Ouch!

    Introduced in 99c2695759a6af855d565f4994bbdf220570bb48.
    Broken mark-mark and mark-ligature stuff.

 src/hb-ot-layout-gpos-table.hh       | 6 +++---
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 0dd86f9f6849d82d60a99e66b6928795cfb2a3c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 10:23:03 2012 -0400

    Whitespace

 src/hb-uniscribe.cc | 144
 ++++++++++++++++++++++++++--------------------------
 1 file changed, 72 insertions(+), 72 deletions(-)

commit 8e7beba7c3b3dea3cb3b7e280c5aab4f13b92d31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 10:22:06 2012 -0400

    Fix Uniscribe clusters with direction-overriden Arabic

 src/hb-uniscribe.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b069c3c31bfbbf160eb897c7474be9ea90ed4fc1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 10:10:29 2012 -0400

    Really fix override-direction in Uniscribe

 src/hb-uniscribe.cc | 10 +++++++---
 1 file changed, 7 insertions(+), 3 deletions(-)

commit fcd6f5326166e993b8f5222efbaffe916da98f0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 09:59:43 2012 -0400

    Unbreak Uniscribe

    Oops.  hb_tag_t and OPENTYPE_TAG have different endianness.  Perhaps
    something to add API for in hb-uniscribe.h

 src/hb-private.hh   | 12 +++++++++++-
 src/hb-uniscribe.cc |	8 ++++----
 2 files changed, 15 insertions(+), 5 deletions(-)

commit 29eac8f591fdb86f1c4fdc0a6ab63910ff286b84
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 09:26:17 2012 -0400

    Override direction in Uniscribe backend

    Matches OT backend now.

 src/hb-uniscribe.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1c1233e57686d77d89fe3ac1dc53de9ee60798c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 8 09:20:53 2012 -0400

    Make Uniscribe backend respect selected script

 src/hb-uniscribe.cc | 15 +++++++++++++--
 1 file changed, 13 insertions(+), 2 deletions(-)

commit 0bb0f5d41976ae27c5c7a51cbb82144b48315a4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 7 17:42:48 2012 -0400

    Add note re _NullPool

 src/hb-open-type-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 2a3d911fe0ff5d6442659d3381d5b08c30ee2896
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 7 17:31:46 2012 -0400

    Fix alignment-requirement missmatch

    Detected by clang and lots of cmdline options.

 src/hb-buffer-private.hh	      | 2 +-
 src/hb-buffer.cc		      | 5 +++--
 src/hb-ot-layout-gsub-table.hh       | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 4 files changed, 7 insertions(+), 6 deletions(-)

commit 6095de1635441af16340c7b2c5a6b4c531ec242f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 7 15:48:18 2012 -0400

    Fix clang warning with NO_MT path

 src/hb-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a18280a8ce9128fc9d75f8a367ae8ce0886a9599
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 7 15:44:12 2012 -0400

    Fix warnings produced by clang analyzer

 src/hb-icu.cc		| 6 ++++--
 test/api/test-blob.c	| 2 +-
 test/api/test-buffer.c | 4 ++--
 util/helper-cairo.cc	| 2 +-
 4 files changed, 8 insertions(+), 6 deletions(-)

commit 7ec83051c05777c0e6e2eea6ef6c71effede9527
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 7 13:32:57 2012 -0400

    Fix warnings

 util/ansi-print.cc | 30 +++++++++++++-----------------
 1 file changed, 13 insertions(+), 17 deletions(-)

commit 73cb02de2dd28b09d4aa76230132248215cfe83d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 6 11:29:25 2012 -0400

    Minor

 src/hb-private.hh | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit 79e2b4791fe95ede9a1e6b1c71ccc6e36c4fc0e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 6 11:27:17 2012 -0400

    Fix ASSERT_POD on clang

    As reported by bashi.  Not tested.

 src/hb-private.hh | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 4282d2f3771d6510c27b62e54cc1254d6f2389b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 6 03:42:36 2012 -0400

    Enabled ICU again

 configure.ac | 1 -
 1 file changed, 1 deletion(-)

commit 6220e5fc0dad728e67a92e838d3ac275d032f2c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 6 03:30:09 2012 -0400

    Add ASSERT_POD for most objects

 src/hb-blob.cc		   | 1 +
 src/hb-buffer-private.hh  | 2 ++
 src/hb-font-private.hh    | 3 +++
 src/hb-object-private.hh  | 2 ++
 src/hb-private.hh	   | 2 +-
 src/hb-set-private.hh	   | 4 +++-
 src/hb-unicode-private.hh | 1 +
 7 files changed, 13 insertions(+), 2 deletions(-)

commit a00a63b5ef503fafa87e26b517732b2214e01719
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 6 03:07:01 2012 -0400

    Add macros to check that types are POD

 configure.ac		     |	1 +
 src/hb-open-type-private.hh | 32 ++++++++++++++++++++------------
 src/hb-private.hh	     | 24 ++++++++++++++++++++++++
 3 files changed, 45 insertions(+), 12 deletions(-)

commit 61eb60c129e865e92f6a5767a88c44a391f4d413
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 21:14:04 2012 -0400

    Don't link to libstdc++

    New try.

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 81a4b9fd4eb8995c5930db1df3669db93661eb52
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 20:49:51 2012 -0400

    Remove unused hb_static_mutex_t

 src/hb-mutex-private.hh | 11 -----------
 1 file changed, 11 deletions(-)

commit 4a3a9897b3698dd09c3e880b3ddd4db24c6fb460
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 20:39:07 2012 -0400

    Disable Intel atomic ops on mingw32

    Apparently the configure test is not enough...

 src/hb-atomic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0594a2448440208efa0acac9a5d8d52d43108289
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 20:35:40 2012 -0400

    Cleanup TRUE/FALSE vs true/false

 src/hb-atomic-private.hh	    |  4 +--
 src/hb-blob.cc			    | 28 +++++++++---------
 src/hb-buffer-private.hh	    |  2 +-
 src/hb-buffer.cc		    | 38 ++++++++++++-------------
 src/hb-buffer.h		    |  4 +--
 src/hb-fallback-shape.cc	    |  2 +-
 src/hb-font.cc			    | 22 +++++++--------
 src/hb-ft.cc			    | 22 +++++++--------
 src/hb-glib.cc			    | 16 +++++------
 src/hb-graphite2.cc		    |  8 +++---
 src/hb-icu.cc			    | 30 ++++++++++----------
 src/hb-ot-layout.cc		    | 28 +++++++++---------
 src/hb-ot-shape-complex-private.hh |  2 +-
 src/hb-ot-shape-normalize.cc	    | 16 +++++------
 src/hb-ot-shape.cc		    |  4 +--
 src/hb-private.hh		    | 18 ++++--------
 src/hb-set.cc			    |  2 +-
 src/hb-set.h			    |  2 +-
 src/hb-shape.cc		    |  6 ++--
 src/hb-tt-font.cc		    | 12 ++++----
 src/hb-unicode.cc		    |  8 +++---
 src/hb-uniscribe.cc		    | 18 ++++++------
 src/main.cc			    |  2 +-
 util/hb-shape.cc		    |  2 +-
 util/helper-cairo.cc		    | 16 +++++------
 util/main-font-text.hh		    |  2 +-
 util/options.cc		    | 58
 +++++++++++++++++++-------------------
 util/options.hh		    |  2 +-
 util/view-cairo.hh		    |  2 +-
 29 files changed, 185 insertions(+), 191 deletions(-)

commit e1ac38f8dd04c29d2d4140f5a492cdaf25d72901
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 20:31:49 2012 -0400

    Fix inert buffer set_length() with zero

    Oops!

 src/hb-buffer.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 04bc1eebe7a304c0e6f86ab6814c65889f152602
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 20:16:56 2012 -0400

    Add configure tests for Intel atomic intrinsics

 configure.ac		  | 17 +++++++++++++++++
 src/hb-atomic-private.hh | 12 ++++++------
 src/hb-mutex-private.hh  |  2 +-
 3 files changed, 24 insertions(+), 7 deletions(-)

commit 68c75b46977beb57e35082db26be712b3cd65678
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 19:55:46 2012 -0400

    Shuffle

 configure.ac | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit f64b2ebf82c5f355cd95806478cd30c00b1a2731
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 19:23:29 2012 -0400

    Remove last static initializer

    We're free!  Lazy or immediate...

 src/hb-ft.cc	 |   2 +
 src/hb-shape.cc | 150
 ++++++++++++++++++++++++++++++++++++++++----------------
 2 files changed, 110 insertions(+), 42 deletions(-)

commit 4a8a529068fc380298bb05b9d878bede3e9f4da1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 19:17:02 2012 -0400

    Make hb-view err if all shapers failed

 util/view-cairo.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 04aed572f112b96a6033cd6c3df7bdba5e29e93c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 18:30:19 2012 -0400

    Make hb-ft static-initializer free

 src/hb-common.cc |  5 ++---
 src/hb-ft.cc	  | 38 +++++++++++++++++++++++++++-----------
 2 files changed, 29 insertions(+), 14 deletions(-)

commit be4560a3b5e8599cbe2b29a01a60c21c9e2b194f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 18:14:03 2012 -0400

    Undo default unicode-funcs to avoid static initializer again

 src/hb-buffer.cc	   |  2 +-
 src/hb-glib.cc		   | 23 ++++++++++++-----------
 src/hb-icu.cc		   | 24 +++++++++++++-----------
 src/hb-unicode-private.hh | 10 +++++-----
 src/hb-unicode.cc	   | 26 ++++++++++++++------------
 5 files changed, 45 insertions(+), 40 deletions(-)

commit 093171cceca63e48e735bbf05a2c11b1b7e95ef1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 18:00:45 2012 -0400

    Implement lock-free hb_language_t

    Another static-initialization down.  One more to go.

 src/hb-common.cc | 66
 +++++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 54 insertions(+), 12 deletions(-)

commit 6843ce01be0df501ef3149a2c1c54cdfb693195d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 17:27:20 2012 -0400

    Add atomic-pointer functions

    Gonig to use these for lock-free linked-lists, to be used for
    hb_language_t among other things.

 src/hb-atomic-private.hh | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit cdafe3a7d8483ac586e2c16487e2a09164e0f65c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 16:34:49 2012 -0400

    Add gcc intrinsics implementations for atomic and mutex

 configure.ac		  |  4 ++--
 src/hb-atomic-private.hh | 11 +++++++++--
 src/hb-mutex-private.hh  | 51
 +++++++++++++++++++++++++++++++++++++++++-------
 src/hb-object-private.hh |  4 +++-
 src/hb-warning.cc	  | 14 ++++++-------
 5 files changed, 65 insertions(+), 19 deletions(-)

commit d970d2899b36a2fbd002b224b8bd37b0906fdd5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 16:06:28 2012 -0400

    Add gcc implementation for atomic ops

 src/hb-atomic-private.hh | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 0e253e97af71e2a7ead153589f61fd579a247502
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 15:37:19 2012 -0400

    Add a mutex to object header

    Removes one more static-initialization.  A few more to go.

 src/hb-common.cc	  | 24 +++++++++---------------
 src/hb-mutex-private.hh  | 19 +++++++------------
 src/hb-object-private.hh | 36 ++++++++++++++++++++++--------------
 src/hb-private.hh	  | 11 +++++------
 4 files changed, 43 insertions(+), 47 deletions(-)

commit a2b471df821b32625d127f83b2f90e6d6a967e7e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 15:17:44 2012 -0400

    Remove static initializers from indic

 src/hb-ot-shape-complex-indic.cc | 50
 +++++++++++++++++++++++++++++++---------
 1 file changed, 39 insertions(+), 11 deletions(-)

commit f06ab8a4262c759b4723614fd28f55ee77aa8466
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 12:31:51 2012 -0400

    Better hide nil objects and make them const

 src/hb-blob.cc		   | 34 +++++++++++------------
 src/hb-buffer.cc	   | 39 +++++++++++++-------------
 src/hb-font.cc		   | 70
 +++++++++++++++++++++++------------------------
 src/hb-ft.cc		   | 49 +++++++++++++++------------------
 src/hb-glib.cc		   | 25 ++++++++---------
 src/hb-icu.cc		   | 25 ++++++++---------
 src/hb-set.cc		   | 16 +++++------
 src/hb-unicode-private.hh | 11 ++++----
 src/hb-unicode.cc	   | 34 +++++++++++------------
 9 files changed, 146 insertions(+), 157 deletions(-)

commit bf93b636c4963cbc32d5fba7ace1053db6719192
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 14:17:32 2012 -0400

    Remove constructor from hb_prealloced_array_t

    This was causing all object types to be non-POD and have static
    initializers.  We don't need that!

    Now, most nil objects just moved from .bss to .data.  Fixing for that
    coming soon.

 src/hb-object-private.hh | 3 +++
 src/hb-private.hh	  | 4 +++-
 src/hb-set-private.hh	  | 1 +
 3 files changed, 7 insertions(+), 1 deletion(-)

commit 7037291aacb858f8090fd7d9028c196cc1a21703
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 13:30:11 2012 -0400

    Check for atexit()

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f1971a217424bd6db5c7072ba5cf197f318d4e47
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 5 13:04:20 2012 -0400

    Fix warnings

 src/indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b0a6e58bb3dda72dcce37d54d987591630a3db6c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jun 4 10:21:22 2012 -0400

    s/script-punjabi/script-gurmukhi/

 .../texts/in-tree/shaper-indic/indic/MANIFEST	    |	2 +-
 .../shaper-indic/indic/script-gurmukhi/MANIFEST    |	2 +
 .../indic/script-gurmukhi/misc/MANIFEST	    |	1 +
 .../indic/script-gurmukhi/misc/misc.txt	    |	1 +
 .../indic/script-gurmukhi/utrrs/LICENSE	    |  19 +++
 .../indic/script-gurmukhi/utrrs/MANIFEST	    |	3 +
 .../indic/script-gurmukhi/utrrs/README		    |  13 ++
 .../indic/script-gurmukhi/utrrs/SOURCES	    |	2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |  38 ++++++
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	9 ++
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |  10 ++
 .../IndicFontFeatureCodepoint-GurmukhiSpecific.txt |	6 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |  10 ++
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	6 +
 .../indic/script-gurmukhi/utrrs/codepoint/MANIFEST |	7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  22 +++
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	2 +
 .../indic/script-gurmukhi/utrrs/gpos/MANIFEST	    |	2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 152
 +++++++++++++++++++++
 .../indic/script-gurmukhi/utrrs/gsub/MANIFEST	    |	1 +
 .../shaper-indic/indic/script-punjabi/MANIFEST     |	2 -
 .../indic/script-punjabi/misc/MANIFEST		    |	1 -
 .../indic/script-punjabi/misc/misc.txt		    |	1 -
 .../indic/script-punjabi/utrrs/LICENSE		    |  19 ---
 .../indic/script-punjabi/utrrs/MANIFEST	    |	3 -
 .../shaper-indic/indic/script-punjabi/utrrs/README |  13 --
 .../indic/script-punjabi/utrrs/SOURCES		    |	2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |  38 ------
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	9 --
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |  10 --
 .../IndicFontFeatureCodepoint-GurmukhiSpecific.txt |	6 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |  10 --
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	6 -
 .../indic/script-punjabi/utrrs/codepoint/MANIFEST  |	7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  22 ---
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	2 -
 .../indic/script-punjabi/utrrs/gpos/MANIFEST	    |	2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 152
 ---------------------
 .../indic/script-punjabi/utrrs/gsub/MANIFEST	    |	1 -
 41 files changed, 309 insertions(+), 309 deletions(-)

commit c1885483120d4b686b2fe95b217dce7248e040b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jun 4 08:56:00 2012 -0400

    Add --verbose to hb-shape

    Just turns all --show-* options on.

 util/options.cc | 11 +++++++++++
 util/options.hh |  1 -
 2 files changed, 11 insertions(+), 1 deletion(-)

commit 9fc7a11469113d31d8095757c4fc038c3427d44a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jun 4 08:28:19 2012 -0400

    Remove comma at the end of enum

    As reported by Jonathan Kew on the list.

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b8fd9c48f4bde368bf2d465c148b9743a9216ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jun 3 15:54:19 2012 -0400

    Remove const from ref_count.ref_count

    According to Tom Hacohen this was breaking build with some compilers.

    In file included from hb-buffer-private.hh:35:0,
		     from hb-ot-map-private.hh:32,
		     from hb-ot-shape-private.hh:32,
		     from hb-ot-shape.cc:29:
    hb-object-private.hh: In constructor
    '_hb_object_header_t::_hb_object_header_t()':
    hb-object-private.hh:97:8: error: uninitialized const member in
    'struct hb_reference_count_t'
    hb-object-private.hh:51:25: note: 'hb_reference_count_t::ref_count'
    should be initialized
    In file included from hb-ot-shape.cc:33:0:
    hb-set-private.hh: In constructor '_hb_set_t::_hb_set_t()':
    hb-set-private.hh:37:8: note: synthesized method
    '_hb_object_header_t::_hb_object_header_t()' first required here
    hb-ot-shape.cc: In function 'void
    hb_ot_shape_glyphs_closure(hb_font_t*, hb_buffer_t*, const
    hb_feature_t*, unsigned int, hb_set_t*)':
    hb-ot-shape.cc:521:12: note: synthesized method
    '_hb_set_t::_hb_set_t()' first required here

 src/hb-object-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 70600dbf626808a30fb0fd8b7ae860e64d9ffe87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jun 3 15:52:51 2012 -0400

    Minor

 src/hb-object-private.hh | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit ae62166519291057316a9d15cea3f1570fcb5eaf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 2 12:21:19 2012 -0400

    [util] Minor

 util/options.cc	|  4 +---
 util/options.hh	| 26 ++++++++++++++------------
 util/shape-consumer.hh |  4 +++-
 3 files changed, 18 insertions(+), 16 deletions(-)

commit 5db0683a822f70c914468430cda6487cee740ae3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jun 2 12:13:08 2012 -0400

    [util] Make hb-shape continue shaping other lines if shapers failed

 util/hb-ot-shape-closure.cc |	3 +++
 util/hb-shape.cc	     | 36 +++++++++++++++++++++++++------
 util/main-font-text.hh      |	2 +-
 util/options.cc	     | 34 ++++++++++++++++++++++-------
 util/options.hh	     | 33 ++++++++++++++--------------
 util/shape-consumer.hh      | 17 ++++++++++++---
 util/view-cairo.cc	     | 47 +++++++---------------------------------
 util/view-cairo.hh	     | 52
 +++++++++++++++++++++++++++++++++++++++------
 8 files changed, 143 insertions(+), 81 deletions(-)

commit 96a9ef0c9fca8d58d8dc6baf6b262d96587abee0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 1 13:46:26 2012 -0400

    Remove tab character like other "zero-width" characters

    Uniscribe does that, this make comparing results to Uniscribe
    easier.

 src/hb-unicode-private.hh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit cd6a5493411fea30a04466128e1a37b4d89c6a72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 1 13:45:25 2012 -0400

    Remove unused variable

 util/hb-ot-shape-closure.cc | 2 --
 1 file changed, 2 deletions(-)

commit 0558d55bac7fb9279aac859b465e7c0e3ad97492
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 28 10:46:47 2012 -0400

    Remove hb_atomic_int_set/get()

    We never use them in fact...

    I'm just adjusting these as I better understand the requirements of
    the code and the guarantees of each operation.

 src/hb-atomic-private.hh |  8 --------
 src/hb-object-private.hh | 12 +++++-------
 2 files changed, 5 insertions(+), 15 deletions(-)

commit 4efdffec095e19ceeb4b319d60201e84ece30fd9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 22:39:48 2012 -0400

    Minor Malayalam test case

    From https://bugs.freedesktop.org/show_bug.cgi?id=45166

 .../texts/in-tree/shaper-indic/indic/script-malayalam/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit dfff5b3021016d3a472c100272fd8e2f52307860
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 22:07:04 2012 -0400

    Add Myanmar test case

 test/shaping/texts/in-tree/shaper-indic/south-east-asian/MANIFEST
 | 1 +
 .../texts/in-tree/shaper-indic/south-east-asian/script-myanmar/MANIFEST
 | 1 +
 .../in-tree/shaper-indic/south-east-asian/script-myanmar/misc/MANIFEST
 | 1 +
 .../in-tree/shaper-indic/south-east-asian/script-myanmar/misc/misc.txt
 | 1 +
 4 files changed, 4 insertions(+)

commit bce095524b3e69a47f8e88a2fb02d6ab537f9b0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 11:29:21 2012 -0400

    Add hb_font_get_glyph_name() and hb_font_get_glyph_from_name()

 TODO			     |	1 +
 src/hb-font-private.hh      |	2 ++
 src/hb-font.cc		     | 80
 +++++++++++++++++++++++++++++++++++----------
 src/hb-font.h		     | 28 ++++++++++++++++
 src/hb-ft.cc		     | 52 ++++++++++++++++++++++++-----
 util/hb-ot-shape-closure.cc |	9 ++---
 util/options.cc	     | 10 ++----
 7 files changed, 142 insertions(+), 40 deletions(-)

commit bc145658bdaeaeea0cdbd719e2756f09a2dbfb48
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 10:45:57 2012 -0400

    Warn if no Unicode functions implementation is found

 src/hb-unicode-private.hh |  1 +
 src/hb-warning.cc	   | 13 +++++++++++++
 2 files changed, 14 insertions(+)

commit a3547330fa88e30a138f6f17e60d9c7d1e316622
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 10:20:47 2012 -0400

    Cleanup atomic ops on OS X

 src/hb-atomic-private.hh | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit e4b6d503c5575ddbf49249e3fef693d75ae75170
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 10:11:13 2012 -0400

    Don't use atomic ops in hb_cache_t

    We don't care about linearizability, so unprotected int read/write
    are enough, no need for expensive memory barriers.	It's a cache,
    that's all.

 src/hb-cache-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 819faa05307aa192015f4b43d8103a35e87d6cc7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 10:09:18 2012 -0400

    Minor

 src/hb-atomic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 303d5850ec0516e198db241456b0cfc4899ef9c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 27 10:01:13 2012 -0400

    Fix Windows atomic get/set

    According to:
    http://msdn.microsoft.com/en-us/library/65tt87y8.aspx

    MemoryBarrier() is the right macro to protect these, not
    _ReadBarrier()
    and/or _WriteBarrier().

 src/hb-atomic-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8f8956a55fff95e5ad529d2f124c9528d1f4f81d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 25 14:30:24 2012 -0400

    [util] Add hidden --shaper that is equivalent of --shapers

 util/helper-cairo.cc | 2 +-
 util/options.cc      | 6 +++++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit 29ce446d3161b7ea5874352e5f8eb33cd59338c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 25 14:17:54 2012 -0400

    Add set iterator

 src/hb-set-private.hh	     | 26 +++++++++++++++++++++++---
 src/hb-set.cc		     |	7 +++++++
 src/hb-set.h		     | 11 +++++++++--
 util/hb-ot-shape-closure.cc |	8 +++++---
 4 files changed, 44 insertions(+), 8 deletions(-)

commit 62c3e111fce0ad34960871134c2eb6da572df303
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 25 13:48:00 2012 -0400

    Add set symmetric difference

 src/hb-set-private.hh | 5 +++++
 src/hb-set.cc	       | 7 +++++++
 src/hb-set.h	       | 6 ++++++
 3 files changed, 18 insertions(+)

commit 27aba594c90b4444c35273a38f5fedc8e09d9a88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 24 15:00:01 2012 -0400

    Minor

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 src/hb-ot-shape-complex-indic.cc	  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit cde1c0114ba66a45d907e81a49bf625e0dc946b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 24 10:46:39 2012 -0400

    Fix hb_atomic_int_set() implementation for HB_NO_MT

    As pointed out by Jonathan Kew.

 src/hb-atomic-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3b9b7133bea787f787170beea073f185e36d2327
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 23 22:00:25 2012 -0400

    Update TODO

 TODO | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit ff3524c21aabf5d0d6014d1ce1b3e12ca5f0990f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 23 21:50:43 2012 -0400

    Add Arabic diacritics tests

 .../shaper-arabic/script-arabic/misc/MANIFEST	    |	2 +-
 .../script-arabic/misc/diacritics/MANIFEST	    |	5 +
 .../script-arabic/misc/diacritics/lam-alef.txt     |  28 +
 .../misc/diacritics/language-arabic.txt	    | 695
 +++++++++++++++++++++
 .../misc/diacritics/language-persian.txt	    |  48 ++
 .../misc/diacritics/language-urdu.txt		    | 188 ++++++
 .../misc/diacritics/ligature-diacritics.txt	    |	1 +
 .../script-arabic/misc/ligature-diacritics.txt     |	1 -
 8 files changed, 966 insertions(+), 2 deletions(-)

commit ed2f1363a391add41f10cff18792003583a10257
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 22 22:12:22 2012 -0400

    Fix substitution glyph class propagation

    The old code was doing nothing.

    Still got to find an example font+string that makes this matter, but
    need this for fixing synthetic GDEF anyway.

 src/hb-ot-layout-gsub-table.hh       | 10 ++++------
 src/hb-ot-layout-gsubgpos-private.hh | 23 ++++++-----------------
 2 files changed, 10 insertions(+), 23 deletions(-)

commit a6de53664df9549a5dc93752647ea1d3bb336f7b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 18 15:04:35 2012 -0400

    Add CJK Compatibility Ideographs tests

    From:
    http://people.mozilla.org/~jdaggett/tests/cjkcompat.html

 test/shaping/texts/in-tree/shaper-default/MANIFEST |  3 +-
 .../in-tree/shaper-default/script-han/MANIFEST     |  1 +
 .../shaper-default/script-han/misc/MANIFEST	    |  1 +
 .../shaper-default/script-han/misc/cjk-compat.txt  |  3 ++
 .../shaper-default/script-hiragana/MANIFEST	    |  1 +
 .../shaper-default/script-hiragana/misc/MANIFEST   |  2 +
 .../script-hiragana/misc/kazuraki-liga-lines.txt   |  8 ++++
 .../script-hiragana/misc/kazuraki-liga.txt	    | 53
 ++++++++++++++++++++++
 .../shaper-default/script-japanese/MANIFEST	    |  1 -
 .../shaper-default/script-japanese/misc/MANIFEST   |  2 -
 .../script-japanese/misc/kazuraki-liga-lines.txt   |  8 ----
 .../script-japanese/misc/kazuraki-liga.txt	    | 53
 ----------------------
 12 files changed, 71 insertions(+), 65 deletions(-)

commit 20fdb0f41d81b226e076a4830d4b0d03da31fc19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 22:04:45 2012 -0400

    Add a lock-free cache type for int->int functions

    To be used for cmap and advance caching if desired.

 TODO			 |  2 ++
 src/Makefile.am	 |  1 +
 src/hb-cache-private.hh | 72
 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-font.cc		 |  2 ++
 4 files changed, 77 insertions(+)

commit bd908b4f102b5ae18a3ad4a8b137994cf74b86ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 22:02:08 2012 -0400

    Implement hb_atomic_int_set() for OS X

 src/hb-atomic-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit 022a05ae90f30bcddff413022e0cd801809b5390
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 21:53:24 2012 -0400

    Minor

 src/hb-atomic-private.hh | 4 +++-
 src/hb-mutex-private.hh  | 4 +++-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit 22afd66a30d01b6771405e76777306f600807bea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 21:23:49 2012 -0400

    Add hb_atomic_int_set() again

 src/hb-atomic-private.hh | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 4aa7258cb16176a89e1547fee8f86571fdd98307
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 21:01:04 2012 -0400

    Fix type conflicts on Windows without glib

 src/hb-tt-font.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit f039e79d5438a8fc4a3ec11a387bbfc0f6b83024
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 20:55:12 2012 -0400

    Don't use min/max as function names

    They can be macros on some systems.  Eg. mingw32.

 src/hb-set-private.hh | 4 ++--
 src/hb-set.cc	       | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 34961e3198e27fa37fd4cfdad12ef86a2e9e51c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 20:50:38 2012 -0400

    Prefer native atomic/mutex ops to glib's

 src/hb-atomic-private.hh | 29 ++++++++++++++++-------------
 src/hb-mutex-private.hh  | 24 ++++++++++++++----------
 2 files changed, 30 insertions(+), 23 deletions(-)

commit ec3ba4b96fc4f262db1ff9f906628c32f26c9b7d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 20:30:46 2012 -0400

    Move atomic ops into their own header

 src/Makefile.am	  |  1 +
 src/hb-atomic-private.hh | 78
 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-mutex-private.hh  |  1 -
 src/hb-object-private.hh | 52 ++------------------------------
 src/hb-warning.cc	  |  2 +-
 5 files changed, 82 insertions(+), 52 deletions(-)

commit de0878395be5c72d7058faac8f64715bdd42eb3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 17 20:15:49 2012 -0400

    Update TODO

 TODO | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit c87b317f0eb118e67134e8e419a6d65e0fa40d30
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 15 23:53:18 2012 -0400

    [util] Add hb-ot-shape-closure tool

    Computes all the glyphs that may be generated given a font and
    set of Unicode characters.

    The order of the Unicode characters is irrelevant.

    Sample output:

    behdad:util 0$ ./hb-ot-shape-closure Doulos\ SIL\ Regular.ttf f
    f f_f

    behdad:util 0$ ./hb-ot-shape-closure Doulos\ SIL\ Regular.ttf i
    i

    behdad:util 0$ ./hb-ot-shape-closure Doulos\ SIL\ Regular.ttf fi
    f f_i f_f_i f_f i

    behdad:util 0$ ./hb-ot-shape-closure DroidNaskh-Regular.ttf ب
    uni0628 uni0628.init uni0628.medi uni0628.fina

    behdad:util 0$ ./hb-ot-shape-closure DroidNaskh-Regular.ttf ا
    uni0627 uni0627.fina

    behdad:util 0$ ./hb-ot-shape-closure DroidNaskh-Regular.ttf با
    uni0627 uni0627.fina uni0628 uni0628.init uni0628.medi uni0628.fina

    behdad:util 0$ ./hb-ot-shape-closure DroidNaskh-Regular.ttf با
    --no-glyph-names
    5 6 133 134 135 136

 configure.ac		     |	 2 +-
 util/Makefile.am	     |	22 ++++++---
 util/hb-ot-shape-closure.cc | 112
 ++++++++++++++++++++++++++++++++++++++++++++
 util/options.hh	     |	12 +++++
 4 files changed, 140 insertions(+), 8 deletions(-)

commit 45675e589e6ef9f81b2a4199cf33e3e7778433a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 15 23:10:39 2012 -0400

    [util] Refactor to accommodate for upcoming new tool

 util/Makefile.am	| 10 ++++---
 util/hb-shape.cc	| 70 +++++++++++++++++++------------------------
 util/hb-view.cc	|  8 +++--
 util/hb-view.hh	| 80
 --------------------------------------------------
 util/main-font-text.hh | 80
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 util/shape-consumer.hh | 69 +++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 191 insertions(+), 126 deletions(-)

commit 1d6846db9ebf84561bb30a4e48c6c43184914099
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 18:09:29 2012 +0200

    [Indic] Apply vatu feature after cjct

    Testing with old Deva spec this reduces failures.
    Test sequence: U+0915,U+094D,U+0930.

 src/hb-ot-shape-complex-indic.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8caf5dcd66550351c6038b9ae7ecc5254eed64ff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 17:10:18 2012 +0200

    Minor

 util/ansi-print.cc | 67
 +++++++++++++++++++++++++++---------------------------
 1 file changed, 33 insertions(+), 34 deletions(-)

commit 617f4ac46f1084859d2034c08760e31e52d3bec3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:48:03 2012 +0200

    Refactor

 src/hb-ot-shape-complex-indic.cc | 44
 +++++++++++++++++++++-------------------
 1 file changed, 23 insertions(+), 21 deletions(-)

commit 5e4e21fce4b548b0b8a5951bc8f35a9f27428192
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:46:08 2012 +0200

    Revert "[Indic] Refactoring"

    This reverts commit 0831061efb78983b9c6e1e72574c977e56383c08.

 src/hb-ot-shape-complex-indic.cc | 28 ++++++++--------------------
 1 file changed, 8 insertions(+), 20 deletions(-)

commit 3f18236a03880c0960f5990dc90685f6146951a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:20:10 2012 +0200

    Fix more warnings

 src/hb-ot-layout-common-private.hh | 2 +-
 src/hb-ot-layout-gsub-table.hh     | 2 +-
 src/hb-ot-shape-complex-indic.cc   | 8 ++++----
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 9f377ed3210fe7d9f15e0c4f82020556f9a8f6f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:13:44 2012 +0200

    Fix more unused-var warnings

 src/hb-ot-shape-complex-arabic.cc |  7 +++++--
 src/hb-ot-shape-complex-indic.cc  | 25 ++++++++++++++++++-------
 src/hb-ot-shape-complex-misc.cc   | 21 +++++++++++++++------
 src/hb-ot-shape-normalize.cc	   | 13 ++++++-------
 src/hb-set.cc			   |  2 +-
 5 files changed, 45 insertions(+), 23 deletions(-)

commit d993e72331c6c4c783b803e01e4d4a02c8e3eb77
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:04:36 2012 +0200

    Fix hb_face_set_index()

 src/hb-font.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 93345edcbea49bdf0e22f26b5b74a23e601dfab4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 16:01:08 2012 +0200

    Fix warnings

 src/hb-fallback-shape.cc |  4 ++--
 src/hb-private.hh	  | 54
 ++++++++++++++++++++++++------------------------
 2 files changed, 29 insertions(+), 29 deletions(-)

commit eace47b173807d94b29a6490d0bc3c9f8f6168d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 15:54:43 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 99c2695759a6af855d565f4994bbdf220570bb48
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 15:45:18 2012 +0200

    Add accessort to buffer for current info, current pos, and prev info

 src/hb-buffer-private.hh	      |  9 ++++++++
 src/hb-ot-layout-gpos-table.hh       | 44
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-table.hh       | 28 +++++++++++------------
 src/hb-ot-layout-gsubgpos-private.hh | 28 +++++++++++------------
 src/hb-ot-shape-complex-arabic.cc    |  4 ++--
 src/hb-ot-shape-complex-misc.cc      |  5 ++--
 src/hb-ot-shape-normalize.cc	      | 16 ++++++-------
 src/hb-ot-shape.cc		      |  8 +++----
 8 files changed, 76 insertions(+), 66 deletions(-)

commit 6736f3c5b09af6a71935afc04248b033e171a9b2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 15:21:06 2012 +0200

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit 5df809b655bb1318115651fd87d4555cdd9b41cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 15:17:51 2012 +0200

    [GSUB/GPOS] Remove context_length

    The spec doesn't say contextual matching should be done this way,
    and AOTS doesn't do it either.  It was inherited from old HarfBuzz.
    Remove it.

 src/hb-ot-layout-common-private.hh   |  1 -
 src/hb-ot-layout-gpos-table.hh       |  3 ---
 src/hb-ot-layout-gsub-table.hh       |  6 ++----
 src/hb-ot-layout-gsubgpos-private.hh | 32
 +++++++++++---------------------
 4 files changed, 13 insertions(+), 29 deletions(-)

commit 28b9d502bb69a8045818d5f6113ded9c59a56bd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 15:04:00 2012 +0200

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

commit 50f630c17ced1bd59b4da4f27728dcfbb876400a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 13:03:44 2012 +0200

    Remove ioctl checks

    Ended up not using terminal size after all.

 configure.ac	    |  2 +-
 util/ansi-print.cc | 11 -----------
 2 files changed, 1 insertion(+), 12 deletions(-)

commit db0de7cd616e1e9d6fde6659e52a541477fb0148
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 13:02:38 2012 +0200

    [util] Set ansi color only on color change

 util/ansi-print.cc | 28 +++++++++++++++++++++++-----
 1 file changed, 23 insertions(+), 5 deletions(-)

commit 912c5ff80a255edb8145b9db69e2ed828f8eab5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 12:51:02 2012 +0200

    Reduce default margin

 util/options.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52e7b1424a3613122e9ca30879298df42733acda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 02:02:58 2012 +0200

    [util] Make hb-view print out Unicode art if stdout is a terminal

 configure.ac		   |   4 +-
 util/Makefile.am	   |   4 +
 util/ansi-print.cc	   | 411
 ++++++++++++++++++++++++++++++++++++++++++++++
 util/ansi-print.hh	   |  39 +++++
 util/helper-cairo-ansi.cc | 102 ++++++++++++
 util/helper-cairo-ansi.hh |  39 +++++
 util/helper-cairo.cc	   |  70 +++++++-
 util/options.hh	   |   3 +
 8 files changed, 668 insertions(+), 4 deletions(-)

commit 8b2753ce2bea8a21ea757186d86dc4a55d8c8b0c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 13 00:54:07 2012 +0200

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 30874b4819a99cc84fa39e794266685e1b8735d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 12 15:54:27 2012 +0200

    [util] Make tools default to stdin if no text is provided

    One less argument to type in typical testing workflow!

 util/hb-view.hh |  4 +++-
 util/options.cc | 12 +++++-------
 util/options.hh |  2 +-
 3 files changed, 9 insertions(+), 9 deletions(-)

commit 2097951110e33fe091ed9515ae77e2683c46c889
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 12 15:41:48 2012 +0200

    [util] Change default font size of hb-view to 256

    Most common usecase of hb-view is to test rendering of short words for
    testing / inspection.  Not having to type "--font-size 150" each time
    isn't such a bad idea...

 util/options.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 737dded2e08fcc19935db51c05201a987184d337
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 12 15:40:11 2012 +0200

    Fix compiler warnings

 src/hb-ot-shape-complex-indic.cc | 5 -----
 1 file changed, 5 deletions(-)

commit f538fcb538f1decb4100ba89457eb83f2350d64b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 12 15:34:40 2012 +0200

    [test] Make tool usage easier by not requiring "--stdin"

    Just default to it.  Added "--help" instead to get usage.

 test/shaping/hb_test_tools.py | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit a3273e30bb7ffd727ffc18af5716dfef705d3d94
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 12 13:34:18 2012 +0200

    [Indic] Add more Malayalam tests

 .../indic/script-malayalam/misc/misc.txt	    | 38
 ++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit 7f852b644b8143492a02edfc853114aaa23446bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 23:10:31 2012 +0200

    Fix compiler warnings

 src/hb-ot-shape-complex-indic.cc   | 2 +-
 src/hb-ot-shape-complex-private.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit f7e8dcfd4fc377e3d786b097beb656284240456d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 22:00:06 2012 +0200

    [Indic] Unbreak Devanagari

    And this, concludes the HarfBuzz Massala Hackfest.

    I like to specially thank Jonathan Kew for doing all the decription
    and
    letting me get commit points.

 configure.ac				  | 2 +-
 src/hb-ot-shape-complex-indic-private.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 6a091df9b403b147ef78f3974610dedf4ce1e08a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 21:42:27 2012 +0200

    [Indic] Disambiguate sub vs post vs above matras

    Bengali is at *just* above 5% now.

 src/hb-ot-shape-complex-indic-private.hh | 31
 +++++++++++++++----------------
 src/hb-ot-shape-complex-indic.cc	  | 12 ++++++------
 2 files changed, 21 insertions(+), 22 deletions(-)

commit 9d0d319a4a7e85d922e58fade0f40caae1c9f109
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 21:36:32 2012 +0200

    [Indic] Position Bengali Reph before matras

 src/hb-ot-shape-complex-indic.cc | 62
 +++++++++++++++++++++++-----------------
 1 file changed, 36 insertions(+), 26 deletions(-)

commit f89367251109af235f4f0446c13c261a5a4a6f72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 21:10:03 2012 +0200

    [Indic] Start categorizing Reph per script

 src/hb-ot-shape-complex-indic.cc | 41
 ++++++++++++++++++++++++++++++++++------
 1 file changed, 35 insertions(+), 6 deletions(-)

commit a913b024d84973556094fd64ce5f0b7106fcc3b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 20:59:26 2012 +0200

    [Indic] Apply 'init' feature for Bengali

    Error down from 20% to 7%.

 src/hb-ot-shape-complex-indic.cc | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit eed903b1644e087178438959664a6a57bebc398b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 20:50:53 2012 +0200

    [Indic] Refactor for the arrival of 'init' feature

    Yep, on Bengali now!

 src/hb-ot-shape-complex-indic.cc | 52
 +++++++++++++++++++++++++++-------------
 1 file changed, 36 insertions(+), 16 deletions(-)

commit 18c06e189bd078affbb84c3bb5bb80687a227c5e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 20:02:14 2012 +0200

    [Indic] Add Uniscribe bug feature for dotted circle

    For dotted-circle independent clusters, Uniscribe does no Reph shaping
    for the exact sequence Ra+Halant+25CC.  Which also is the only
    possible
    sequence with 25CC at the end.

 src/hb-ot-shape-complex-indic-machine.rl |  4 +++-
 src/hb-ot-shape-complex-indic-private.hh |  3 ++-
 src/hb-ot-shape-complex-indic.cc	  | 20 ++++++++++++++++----
 3 files changed, 21 insertions(+), 6 deletions(-)

commit 5b16de97bcc4b24da4c77ca6c1a42e814d8cdbd1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 19:55:42 2012 +0200

    [Indic] Add tests for dottedcircle

 .../in-tree/shaper-indic/indic/script-devanagari/misc/MANIFEST     | 1 +
 .../shaper-indic/indic/script-devanagari/misc/dottedcircle.txt     |
 7 +++++++
 2 files changed, 8 insertions(+)

commit 0831061efb78983b9c6e1e72574c977e56383c08
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 19:07:58 2012 +0200

    [Indic] Refactoring

 src/hb-ot-shape-complex-indic.cc | 26 ++++++++++++++++++--------
 1 file changed, 18 insertions(+), 8 deletions(-)

commit 7ea58db311bfb0d8f804d1e9f4a1f004bd45075a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 18:58:57 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 9c09928989316e2befe00d52ed66e055637ccd36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 18:46:35 2012 +0200

    [Indic] Allow multiple Consonants in Vowel/NBSP syllables

    Uniscribe allows multiple Halant+Consonant after a Vowel.
    Tests:
    ↦       * U+0905,U+094D,U+092B,U+094D,930,94d,930

 src/hb-ot-shape-complex-indic-machine.rl | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 8c0aa486f31e9b6cbb31ce295573b53b0a214124
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 18:13:42 2012 +0200

    [Indic] Allow two Nuktas per consonant

    Uniscribe allows up to two nuktas per consonant and one per matra. It
    does so
    indepent of whether the consonant already has a nukta in it.  Tests:

	    * U+0916,U+093C,U+0941
	    * U+0959,U+093C,U+0941
	    * U+0916,U+093C,U+093C,U+0941
	    * U+0959,U+093C,U+093C,U+0941
	    * U+0916,U+093C,U+093C,U+093C,U+0941
	    * U+0959,U+093C,U+093C,U+093C,U+0941
	    * 915,93c,93c,,94d,U+0916,U+093C,U+093C,U+093e,93c,93c

 src/hb-ot-shape-complex-indic-machine.rl | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 3399a06e7033651ee926448737bdb18e553c1796
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 17:54:26 2012 +0200

    [Indic] Fix U+0952 and similar classification to match Uniscribe

    See comments.

 src/hb-ot-shape-complex-indic-machine.rl |  1 +
 src/hb-ot-shape-complex-indic.cc	  | 16 +++++++++++-----
 2 files changed, 12 insertions(+), 5 deletions(-)

commit 11aa3ef18dbc6ac9561bd119f5ca2c1aa1209c3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 17:30:48 2012 +0200

    [Indic] Treat U+0951..U+0954 all similar to U+0952

 src/hb-ot-shape-complex-indic.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 5f131d3226131df440d7f36655e57f6effcae204
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 17:29:40 2012 +0200

    [GSUB/GPOS/Indic] Apply GSUB/GPOS within syllables only

    This does not apply to the context matchings.

    This regresses tests right now.  And we are not sure whether this is
    the right thing to do for GPOS.  But we'll figure out.

 src/hb-ot-layout-gsubgpos-private.hh | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 8fd83aaf6e50c2c25002c51fee26d82847a61769
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 17:18:37 2012 +0200

    [GSUB/GPOS] Fix wrong buffer access in backward skippy mask matching

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ff24d1081af08a887895975285d7e38f5d07bc37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 17:07:08 2012 +0200

    [Indic] Don't use syllable serial value 0

 src/hb-ot-shape-complex-indic-machine.rl | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 892eb7878238d810a2a70f9dadbf958207bfeaa1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:54:40 2012 +0200

    [Indic] Implement Uniscribe Reph+Matra+Halant bug feature

 src/hb-ot-shape-complex-indic.cc | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit 67ea29af49bb08ee679914076808327992cf6676
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:51:23 2012 +0200

    [Indic] Add example of different Uniscribe behavior

 src/hb-ot-shape-complex-indic.cc | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit ebe29733d44fe0fa9fb30f946ab0dd7a40336a24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:43:12 2012 +0200

    [Indic] Add runtime Uniscribe bug compatibility mode!

    Enable by setting envvar:

      HB_OT_INDIC_OPTIONS=uniscribe-bug-compatible

    Plus, LeftMatra+Halant "feature".

 src/hb-ot-shape-complex-indic.cc | 44
 ++++++++++++++++++++++++++++++----------
 1 file changed, 33 insertions(+), 11 deletions(-)

commit 616e692e2950d326b6c46aba5b5bead3cc29d315
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:25:02 2012 +0200

    [Indic] Add #define UNISCRIBE_BUG_COMPATIBLE 1

 src/hb-ot-shape-complex-indic.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6782bdae3be0357da1dadc7b806a43ceefa67a90
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:23:43 2012 +0200

    [Indic] Fix Left Matra + Halant reordering

    As can be seen in: U+092B,U+093F,U+094D

 src/hb-ot-shape-complex-indic.cc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 3c2ea9481b1028e927e615a5434ebf8edcb5f891
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:23:38 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 73
 ++++++++++++++++++++--------------------
 1 file changed, 37 insertions(+), 36 deletions(-)

commit c071b99f150a9344a2056dfeba8c613f8a5602db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:22:46 2012 +0200

    [Indic] Add test for Left Matra with Halant

    Uniscribe doesn't move the Halant, we do.  And do a broken job of
    it now.

 .../shaper-indic/indic/script-devanagari/misc/tricky-reordering.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit 203d71069c45048b6dd8fa22b61fd8f2c844b4f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 16:01:44 2012 +0200

    [GSUB/GPOS] Check all glyph masks when matching input

 src/hb-ot-layout-gsubgpos-private.hh | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 668c6046c1b3af3bd316bda0cc8636f2a5e8df42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 15:34:13 2012 +0200

    [Indic] Apply Reph mask to all POS_REPH glyphs

    Needed for upcoming changes to GSUB/GPOS mask matching.

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4be46bade26faf13f7b4d447e9cc608e183955dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 14:39:01 2012 +0200

    [Indic] Fix state machine to backtrack

 src/hb-ot-shape-complex-indic-machine.rl | 42
 +++++++++++++++-----------------
 src/hb-private.hh			  |  2 ++
 2 files changed, 21 insertions(+), 23 deletions(-)

commit cee7187447b76b22e1bb6136d137b35ac49c3a5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 11:41:39 2012 +0200

    [Indic] Move syllable tracking from Indic to generic layer

    This is to incorporate it into GSUB/GPOS processing.

 src/hb-ot-layout-gpos-table.hh		  |  1 +
 src/hb-ot-layout-gsub-table.hh		  |  3 ++-
 src/hb-ot-layout-gsubgpos-private.hh	  |  3 ---
 src/hb-ot-layout-private.hh		  |  4 +---
 src/hb-ot-shape-complex-indic-machine.rl |  2 +-
 src/hb-ot-shape-complex-indic-private.hh |  1 -
 src/hb-ot-shape-complex-indic.cc	  |  8 +++-----
 src/hb-ot-shape-complex-private.hh	  | 13 ++++++++-----
 8 files changed, 16 insertions(+), 19 deletions(-)

commit 3bf27a9f0e92aa31b464bd3b9fdea5933c9ae8b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 11:17:23 2012 +0200

    [Indic] Disable conjuncts when a ZWJ happens

    Not that the code makes any difference since the presence of ZWJ
    itself
    causes the ligature to fail to match anyway.

 src/hb-ot-shape-complex-indic.cc | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

commit c6d904d67db589dd6209928e56504f04f6a07756
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 11:07:40 2012 +0200

    [Indic] Fix bitops typo!

    Another 1000 down!

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 55fe2cf79b11d9a63ea33b3ee76bd0ebca345157
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 03:45:28 2012 +0200

    Make APPLY debug output print current index and codepoint

    Yay!

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7bd2b04fea5649d77d796d58b7f4918fe0378ee5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 03:40:58 2012 +0200

    Minor

 src/hb-object-private.hh | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit cf26510dbbd8d38486e6ba423800db6427ade332
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 03:35:08 2012 +0200

    Some more...

    Done.  I promise.

 src/hb-object-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 9659523ca32b0e254d0e5fe387d817208d9cb6bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 03:33:36 2012 +0200

    More beauty in debug output!

 src/hb-private.hh | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit cf26e88a5ab477295479f5b9450c2019b6430eaa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 03:16:57 2012 +0200

    Finish off debug output beautification

 src/hb-open-type-private.hh | 58
 ++++++++++++++++++++-------------------------
 1 file changed, 26 insertions(+), 32 deletions(-)

commit d7bba01a353efc7432c474dd8755a02db4abd2ae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 02:46:26 2012 +0200

    Only print class name in debug output if there's one available

 src/hb-private.hh | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 85f73fa8da1fbb864aef0f3a592b1d65e24d593d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 02:40:42 2012 +0200

    Only printout class name in tracing, if one is available

    Makes debug output much more pleasant.

 src/hb-private.hh | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 98619ce4fa650c593b030d06d2f89fec83a10015
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 02:34:06 2012 +0200

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit acea183e986dd378c6f95120fe0feb0586a8ef36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 02:33:11 2012 +0200

    Add return annotation for APPLY

 src/hb-ot-layout-gpos-table.hh       | 163
 +++++++++++++++--------------------
 src/hb-ot-layout-gsub-table.hh       | 114 +++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh |  83 ++++++++----------
 3 files changed, 151 insertions(+), 209 deletions(-)

commit 5ccfe8e2154ad0b58dabcc236bbe9478c17b02ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 02:19:41 2012 +0200

    /Minor/

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0ab8c8621712d33e1e91dfdb4ad0b335e3d2a3fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 01:25:34 2012 +0200

    Annotate SANITIZE return values

    More to come, for APPLY, CLOSURE, etc.

 src/hb-open-file-private.hh	      |  23 ++---
 src/hb-open-type-private.hh	      |  49 +++++-----
 src/hb-ot-head-table.hh	      |   4 +-
 src/hb-ot-hhea-table.hh	      |   4 +-
 src/hb-ot-hmtx-table.hh	      |   4 +-
 src/hb-ot-layout-common-private.hh   |  51 +++++-----
 src/hb-ot-layout-gdef-table.hh       |  48 +++++-----
 src/hb-ot-layout-gpos-table.hh       | 180
 ++++++++++++++++-------------------
 src/hb-ot-layout-gsub-table.hh       | 101 +++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh |  88 ++++++++---------
 src/hb-ot-maxp-table.hh	      |   7 +-
 src/hb-ot-name-table.hh	      |  17 ++--
 src/hb-private.hh		      |  39 ++++++--
 13 files changed, 299 insertions(+), 316 deletions(-)

commit 829e814ff358c5e700ba4df54932696801aa9f65
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 00:52:16 2012 +0200

    Minor

 src/hb-private.hh | 32 ++++++++++----------------------
 1 file changed, 10 insertions(+), 22 deletions(-)

commit 6eec6f406d2cc13dbca422e88492d3d498af02bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 00:50:38 2012 +0200

    Code reshuffling

 src/hb-private.hh | 36 +++++++++++++++++++++++++-----------
 1 file changed, 25 insertions(+), 11 deletions(-)

commit 1e08830b4fac3a60ae52349cab6e101d389d30cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 11 00:16:40 2012 +0200

    Beautify debug output

 src/hb-open-type-private.hh | 20 ++++++------
 src/hb-private.hh	     | 74
 +++++++++++++++++++++++++++------------------
 2 files changed, 55 insertions(+), 39 deletions(-)

commit 6f4553801729a06e506ffdde7b27c72780d4bb80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 23:24:43 2012 +0200

    More massaging trace messaging

 src/hb-open-type-private.hh	      | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 src/hb-private.hh		      | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit b5fa37cb694b01a7df3a656710391c40dd3fcc04
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 23:09:48 2012 +0200

    Minor

 src/hb-set-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 208109703c929428c684ddcf9310b8ba780c4c31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 23:06:58 2012 +0200

    Better trace message support infrastructure

    We have varargs in the trace interface now.  To be used soon...

 src/hb-open-type-private.hh	      | 17 ++++------
 src/hb-ot-layout-gsubgpos-private.hh |  4 +--
 src/hb-private.hh		      | 64
 ++++++++++++++++++++++++++----------
 3 files changed, 56 insertions(+), 29 deletions(-)

commit 02b2922fbf098c8282eb23dc2c54d5829cf67024
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 21:44:50 2012 +0200

    [Indic] Towards better Reph positioning

    Fixed for Deva cases with two full-form consonants.  Failures **way**
    down.
    Not much left to go :-).

 src/hb-ot-shape-complex-indic.cc | 111
 ++++++++++++++++++++++++++++-----------
 1 file changed, 80 insertions(+), 31 deletions(-)

commit 74e54cf446bb979e488685e8c09eeed6b9d03c24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 21:20:37 2012 +0200

    [Indic] Add Ra back for scripts without Reph

    We now check that the 'rphp' table exists before forming Reph, so
    we don't need to comment out Ra for those scripts.

 src/hb-ot-shape-complex-indic-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 2b70df5cc008617453b12bafeaac50e6d61b3224
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 18:38:22 2012 +0200

    [Indic] Add note re Uniscribe clusters

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit 21d2803133c2c424ed37a9f3d17c7fc4963e5a60
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 18:34:34 2012 +0200

    [Indic] Do clustering like Uniscribe does

    Hindi Wikipedia failures down to 6639 (0.938381%)!

 src/hb-ot-shape-complex-indic.cc | 24 ++++++++++++++++++++----
 1 file changed, 20 insertions(+), 4 deletions(-)

commit b20c9ebaf5176101fdfcffbe4714a2e619dd94b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 18:31:17 2012 +0200

    [Indic] Add test for matra group

    The spec says: "[{M}+[N]+[H]]", and that's what Uniscribe implements.
    We instead do: "{M+[N]+[H]}", which means we allow Nukta and Halant
    after all Matras, not just the last one.  It makes more sense.

 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/MANIFEST
 | 1 +
 .../shaper-indic/indic/script-devanagari/misc/spec-deviations.txt
 | 1 +
 2 files changed, 2 insertions(+)

commit 8df5636968389ac7bf8620ccd091fd4872b0bbee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 15:41:04 2012 +0200

    [Indic] Reorder Reph to before the Halant after Matras

    Uniscribe doesn't do it, but we want to do as it gives the Reph the
    opportunity to interact with the Matras.  Test with mangal for
    example.
    Sequence: <0930,094d,0915,094b,094d>
    In test suite already.

 src/hb-ot-shape-complex-indic.cc | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit daf3234bdc82c669302599a76d2b14f5e69989db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 15:28:27 2012 +0200

    [Indic] Don't clear the mask for Reph

    This was removing the mandatory global 1 bit in the mask and hence
    disabling GPOS for Reph!

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7708ee23cbcc8c8edce13e73b6e549b77bd8c2d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 14:48:25 2012 +0200

    [Indic] Improve Left Matra repositioning

    Move its dependents too.

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 61a58e26a5bda16851669404fc8206896e124740
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 14:43:53 2012 +0200

    [Indic] Add tricky reordering test cases

    In the case of Consonant,LeftMatra,Halant, Uniscribe leaves the Halant
    where it is, but we want to move it with the Matra as that makes more
    logical sense.

 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/MANIFEST  |
 1 +
 .../shaper-indic/indic/script-devanagari/misc/tricky-reordering.txt   |
 4 ++++
 2 files changed, 5 insertions(+)

commit dbb105883c6e9b83e78dc8b10766cd56b98cd7e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 13:45:52 2012 +0200

    [Indic] Do Reph repositioning in final reordering like the spec says

    This introduced a failure, which we tracked down to a test case
    like this:

      U+092E,U+094B,U+094D,U+0930

    The final character is a Ra that should be put in a syllable of it's
    own.  And we do.  But it will interact with the Halant before it.  So
    now we finally are convinced that we have to limit features to
    syllable
    boundaries.  That's coming after lunch!

 src/hb-ot-shape-complex-indic-private.hh |   2 -
 src/hb-ot-shape-complex-indic.cc	  | 103
 +++++++++++++++++++------------
 2 files changed, 64 insertions(+), 41 deletions(-)

commit 4705a7026900e51f6430f03a73c87f2df035df92
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 13:09:08 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 4ac9e98d9d2ea973dd612dc4063cf78496c643a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 12:53:53 2012 +0200

    [Indic] Reorder left matras to be closer to base

 src/hb-ot-shape-complex-indic-private.hh |  4 ---
 src/hb-ot-shape-complex-indic.cc	  | 50
 +++++++++++++++++++++++++++++---
 2 files changed, 46 insertions(+), 8 deletions(-)

commit 1a1fa8c655a082fc1439608457ba717306cc83ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 12:20:21 2012 +0200

    [Indic] Treat the standalone cluster case reusing the consonant logic

 src/hb-ot-shape-complex-indic.cc | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 190eb31a16178269aecaf5d2ecc9012f956749f4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 12:17:16 2012 +0200

    [Indic] Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c5306b6861cfaa50af40e8ceb058791fa06d7981
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 12:07:33 2012 +0200

    [Indic] Handle Vowel syllables

    Reusing the consonant logic!

 src/hb-ot-shape-complex-indic-private.hh |  3 +--
 src/hb-ot-shape-complex-indic.cc	  | 11 ++++++-----
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 6d8e0cb74c02f6bc09cd4abe9e4bc82062e1b517
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 11:41:51 2012 +0200

    [Indic] Simplify Reph logic

 src/hb-ot-shape-complex-indic.cc | 24 +++++-------------------
 1 file changed, 5 insertions(+), 19 deletions(-)

commit 3d25079f8d6be81b9b4b91d3a97016b8a572f571
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 11:37:42 2012 +0200

    [Indic] Don't form Reph is Ra is the only consonant in the syllable

 src/hb-ot-shape-complex-indic-private.hh |  2 +-
 src/hb-ot-shape-complex-indic.cc	  | 10 ++++++++++
 2 files changed, 11 insertions(+), 1 deletion(-)

commit b99d63ae114fb58f129562b293a8a66543d499ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 11:32:52 2012 +0200

    [Indic] Increase max syllable length

    20 was way too low, one could hit a syllable with 7ish consonants
    with it.

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a391ff50b9a7b6ac3e58d199ea726b20ee6839bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 11:31:20 2012 +0200

    [Indic] Adjust base after sorting

 src/hb-ot-shape-complex-indic.cc | 11 ++++++++++-
 1 file changed, 10 insertions(+), 1 deletion(-)

commit d3637edb248162970e202e9d0671540274192844
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 10 10:51:38 2012 +0200

    [Indic] Don't return for long syllables.  Just not sort.

 src/hb-ot-shape-complex-indic.cc | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit dfa0cade7fce3791e47eaa7edcd23da76c7a0ed0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 19:10:07 2012 +0200

    Fix Uniscribe clusters with multiple items

 src/hb-uniscribe.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 86e5dd386a7989701da476db89be268e4ac1e219
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 18:57:37 2012 +0200

    [Indic] Don't give up syllable parsing upon junk

 src/hb-ot-shape-complex-indic-machine.rl | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ef24cc8c8e2478a6352c340f4611a617646de4cc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 17:56:03 2012 +0200

    [Indic] Towards multi-cluster syllables and final reordering

 src/hb-ot-shape-complex-arabic.cc	  |  2 +-
 src/hb-ot-shape-complex-indic-machine.rl | 21 ++++++++++-----
 src/hb-ot-shape-complex-indic-private.hh |  1 +
 src/hb-ot-shape-complex-indic.cc	  | 45
 +++++++++++++++++++++++---------
 src/hb-ot-shape-complex-private.hh	  |  5 ++--
 5 files changed, 51 insertions(+), 23 deletions(-)

commit a9844d41c6cb30d8a2d733130a0e72f51b6c81c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 17:53:13 2012 +0200

    Combine lig_id and lig_comp into one byte, to free up one for Indic

 src/hb-ot-layout-gpos-table.hh       | 14 ++++++++------
 src/hb-ot-layout-gsub-table.hh       | 11 ++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 26 ++++++++++++++++++++++----
 3 files changed, 34 insertions(+), 17 deletions(-)

commit 92332e5116271a5d96e532005fe750e7552a6cbb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 17:40:00 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 41
 ++++++++++++++++++++--------------------
 1 file changed, 21 insertions(+), 20 deletions(-)

commit dbccf87eef0d26838fa4bb3ae26410f6c4818836
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 17:24:39 2012 +0200

    [Indic] Make room for more reordering positions

 src/hb-ot-shape-complex-indic-private.hh | 213
 ++++++++++++++++---------------
 src/hb-ot-shape-complex-indic.cc	  |  12 +-
 2 files changed, 115 insertions(+), 110 deletions(-)

commit d4480ace7fdbe48aeaf77278c032b8b2ef2ebe8e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:56:35 2012 +0200

    [Indic] Improve matra vs consonant ordering

    Another 1.5% down.

 src/hb-ot-shape-complex-indic-private.hh | 32
 ++++++++++++++++++++------------
 src/hb-ot-shape-complex-indic.cc	  |  6 +++---
 src/indic.cc				  |  2 +-
 3 files changed, 24 insertions(+), 16 deletions(-)

commit 33c92e769563ec2a6c1249b57d8cac742eea6f88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:41:51 2012 +0200

    [Indic] Categorize Anudatta

 src/hb-ot-shape-complex-indic.cc | 9 +++++++--
 1 file changed, 7 insertions(+), 2 deletions(-)

commit 3943293a9942201d8fc8d59212fcc8cca5132e3d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:27:56 2012 +0200

    [Indic] Add joiner test cases for Devanagari

 .../indic/script-devanagari/misc/MANIFEST	       |  1 +
 .../indic/script-devanagari/misc/joiners.txt	       | 19
 +++++++++++++++++++
 2 files changed, 20 insertions(+)

commit 19d984edaa4f86c842345a9d4150597e045e1887
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:21:13 2012 +0200

    [Indic] Make sure Reph jumps over all matras to the right

    Another 12 thousand failures gone! (78 to go)

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9034641333d7bfb41a0784cce72e43591faea083
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:04:58 2012 +0200

    [Indic] Keep Vedic signs at the right too

 src/hb-ot-shape-complex-indic.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit d1deaa2f5bd028e8076265cba92cffa4fa2834ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 15:04:13 2012 +0200

    Replace zerowidth invisible chars with a zero-advance space glyph

    Like Uniscribe does.

 src/hb-ot-shape-complex-arabic.cc  |  3 ++-
 src/hb-ot-shape-complex-indic.cc   | 20 -------------------
 src/hb-ot-shape-complex-private.hh |  4 ++--
 src/hb-ot-shape-normalize.cc	    | 25 +++++++++--------------
 src/hb-ot-shape-private.hh	    | 27 +++++++++++++++++++++++++
 src/hb-ot-shape.cc		    | 41
 +++++++++++++++++++++++++-------------
 src/hb-unicode-private.hh	    | 38
 +++++++++++++++++++++++++++++++++++
 7 files changed, 105 insertions(+), 53 deletions(-)

commit 49e5da1591b8d28f01e7ff9caac9d9ac53668bba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 13:23:27 2012 +0200

    [indic] Keep the syllable modifier marks to the right

    Shaping failures on Hindi Wikipedia go down from 25% to 14%!

 src/hb-ot-shape-complex-indic.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 5b1260909350bffa3e3d06da346f9f86ce651dbb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 12:37:27 2012 +0200

    Minor

 src/hb-ot-shape-complex-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9ce939232bbce8f51e235195e3854d1e8bb961f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 12:03:09 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic-private.hh | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 76b3409de6887c1cdd5c679939497b1b56f4554b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 11:43:43 2012 +0200

    [indic] Better Reph matching

 src/hb-ot-shape-complex-indic.cc | 21 +++++++++++++++------
 1 file changed, 15 insertions(+), 6 deletions(-)

commit df6d45c693c417bf311e6fa49f18a8558542e525
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 11:38:31 2012 +0200

    Minor

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 412b91889d9a1ae477e8b6907d0b9a76e78a6c91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 11:07:18 2012 +0200

    [indic] Apply Indic features in order

 src/hb-ot-shape-complex-indic.cc | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 1ac075b227090a9ad930dcc1670236c176b27067
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 11:06:47 2012 +0200

    [indic] Apply rakaar forms

    Fixes 10% of the failures against all of Hindi Wikipedia!

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2214a03900d32710573a1b05c7665195b3129761
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 09:54:54 2012 +0200

    Add hb-diff-ngrams

 test/shaping/Makefile.am      |  1 +
 test/shaping/hb-diff-ngrams   |  5 +++
 test/shaping/hb_test_tools.py | 71
 ++++++++++++++++++++++++++++++++++++++++---
 3 files changed, 72 insertions(+), 5 deletions(-)

commit 178e6dce01ad28c8708bad62ce0fb79c46e836dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 08:57:29 2012 +0200

    Add N-gram generator

 test/shaping/hb_test_tools.py | 72
 +++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 70 insertions(+), 2 deletions(-)

commit 98669ceb77657d60435f2cb2e3fc18272c0a2c6a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 08:16:15 2012 +0200

    Use groupby()

 test/shaping/hb_test_tools.py | 26 ++++++++------------------
 1 file changed, 8 insertions(+), 18 deletions(-)

commit c438a14b62433db488b5c90854a4a3934adf3305
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 07:45:17 2012 +0200

    Add hb-diff-stat

 test/shaping/Makefile.am      |  1 +
 test/shaping/hb-diff-stat     |  5 +++++
 test/shaping/hb_test_tools.py | 22 ++++++++++++++++++++--
 3 files changed, 26 insertions(+), 2 deletions(-)

commit 1058d031e2046eb80331b0950eaff75c2bf608dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 9 07:30:07 2012 +0200

    Make hb-diff-filter-failtures retain all test info for failed tests

 test/shaping/hb_test_tools.py | 33 ++++++++++++++++++++++++++-------
 1 file changed, 26 insertions(+), 7 deletions(-)

commit f1eb008cc727370e1bd0dc32fdf301f62d9ff981
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 8 23:41:41 2012 +0200

    Add hb-diff-colorize

    Accepts --format=html now.

 test/shaping/Makefile.am      |   1 +
 test/shaping/hb-diff	       |   4 +-
 test/shaping/hb-diff-colorize |   7 ++
 test/shaping/hb_test_tools.py | 158
 +++++++++++++++++++++++++-----------------
 4 files changed, 106 insertions(+), 64 deletions(-)

commit 9155e4ffe00c96a2c14e14a300004b1038ca3a9c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 8 22:44:21 2012 +0200

    Cleanup diff

    Doesn't do --color anymore.  That will go into a new hb-diff-colorize
    tool.

 test/shaping/hb-diff	       | 10 +++-------
 test/shaping/hb_test_tools.py | 32 ++++++++++++++++++--------------
 2 files changed, 21 insertions(+), 21 deletions(-)

commit 7d22135b4c3f8fb70552302bf8239df9976dddda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 8 19:38:49 2012 +0200

    Make hb-diff faster

 test/shaping/hb_test_tools.py | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit a93e238e05a2f70a6e664e5d04ba25bbd54493dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 8 18:55:29 2012 +0200

    More tests

 .../texts/in-tree/shaper-arabic/script-mongolian/misc/MANIFEST |  1 +
 .../texts/in-tree/shaper-arabic/script-mongolian/misc/poem.txt |  4 ++++
 .../in-tree/shaper-indic/indic/script-bengali/misc/MANIFEST	|  1 +
 .../in-tree/shaper-indic/indic/script-bengali/misc/reph.txt	|
 10 ++++++++++
 4 files changed, 16 insertions(+)

commit 1a2a4a0078dda834443edd421037a4bcbad18c5e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 5 22:38:20 2012 +0200

    Fix warning and build issues

    As reported by Jonathan Kew on the list.

 src/hb-set-private.hh | 2 +-
 src/main.cc	       | 9 +++++----
 2 files changed, 6 insertions(+), 5 deletions(-)

commit a5e39fed85e069ba1afbf90408349ad99ceb0e1d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 25 00:14:46 2012 -0400

    Minor

 src/hb-set-private.hh | 2 ++
 src/hb-set.cc	       | 2 ++
 2 files changed, 4 insertions(+)

commit 1827dc208c867e433a95237d1ed3fc7a73d1d9a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 24 16:56:37 2012 -0400

    Add hb_ot_shape_glyphs_closure()

    Experimental API for now.

 src/hb-ot-map-private.hh |  7 ++++---
 src/hb-ot-shape.cc	  | 35 +++++++++++++++++++++++++++++++++++
 src/hb-ot.h		  |  8 ++++++++
 src/hb-set-private.hh	  |  3 +++
 4 files changed, 50 insertions(+), 3 deletions(-)

commit bb09f0ec10216b11189b5e8584856adf0f14d1fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 24 16:02:12 2012 -0400

    Minor

 src/hb-unicode.cc | 2 --
 1 file changed, 2 deletions(-)

commit 29a7e306e30e894f7a38daf73eca9fc772c58158
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 24 16:01:30 2012 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 1 +
 1 file changed, 1 insertion(+)

commit 585b107cdee7305920dacc83c9ee1f8eeff7afd1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 24 16:00:50 2012 -0400

    Add test caes for a minority language using Bengali

    U+0985 BENGALI LETTER A followed by U+09D7 BENGALI AU LENGTH MARK.
    According to Bobby de Vos on the mailing list, this results in
    a dotted
    circle with most shaping engines, but is a legitimate sequence in this
    minority language.

    We reached the consensus on the list to NOT implement dotted-circle
    in HarfBuzz.

 .../texts/in-tree/shaper-indic/indic/script-bengali/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit 6c6ccaf575392f6e6bb9a15534026e4ea462705b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 24 14:21:15 2012 -0400

    Add a few more set operations

    TODO: Tests for hb_set_t.

 src/hb-set-private.hh | 54
 +++++++++++++++++++++++++++++++++++++++++++++++++-
 src/hb-set.cc	       | 55
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-set.h	       | 34 ++++++++++++++++++++++++++++---
 3 files changed, 139 insertions(+), 4 deletions(-)

commit 5caece67ab9eee322bdcdf6f4b607eadde297e56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 23:03:12 2012 -0400

    Make closure() return void

 src/hb-ot-layout-gsub-table.hh       | 142 +++++++++++++-----------------
 src/hb-ot-layout-gsubgpos-private.hh | 165
 ++++++++++++++++++-----------------
 src/hb-ot-layout.cc		      |  10 +--
 src/hb-ot-layout.h		      |   8 +-
 src/hb-set-private.hh		      |  20 ++---
 5 files changed, 157 insertions(+), 188 deletions(-)

commit 0b08adb3539f2ec29682456b89c69e89ff5e9c03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 22:41:09 2012 -0400

    Add hb_set_t

 TODO				    |	2 +
 src/Makefile.am		    |	3 +
 src/hb-ot-layout-common-private.hh |	1 +
 src/hb-ot-layout-private.hh	    |  47 ---------------
 src/hb-ot-layout.h		    |	2 -
 src/hb-set-private.hh		    |  95 +++++++++++++++++++++++++++++
 src/hb-set.cc			    | 120
 +++++++++++++++++++++++++++++++++++++
 src/hb-set.h			    |  91 ++++++++++++++++++++++++++++
 src/hb.h			    |	1 +
 9 files changed, 313 insertions(+), 49 deletions(-)

commit 5b93e8d94fb4c2474816304ae3f52e1c704882de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 22:26:13 2012 -0400

    Update copyright headers

 src/hb-ot-layout-common-private.hh   | 2 +-
 src/hb-ot-layout-gpos-table.hh       | 2 +-
 src/hb-ot-layout-gsub-table.hh       | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 6a9be5bd3524dc3eb1e88d1063bde2e4d8b57011
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 22:23:17 2012 -0400

    Rename hb_glyph_map_t to hb_set_t

 src/hb-ot-layout-common-private.hh   | 16 ++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++------
 src/hb-ot-layout-private.hh	      |  2 +-
 src/hb-ot-layout.cc		      |  2 +-
 src/hb-ot-layout.h		      |  4 ++--
 src/hb-ot-map-private.hh	      |  2 +-
 src/hb-ot-map.cc		      |  2 +-
 7 files changed, 20 insertions(+), 20 deletions(-)

commit a4385f0b0a6949e2ce49e6a147ad4beaa724f6c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 22:20:14 2012 -0400

    Improve clustering

 src/hb-ot-shape.cc | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 8e3715f8a16b315c1c7dd4b256e7f68a36c53e7c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 22:18:54 2012 -0400

    Minor

 src/hb-buffer-private.hh	   | 2 +-
 src/hb-buffer.cc		   | 2 +-
 src/hb-graphite2.cc		   | 5 ++---
 src/hb-ot-shape-complex-arabic.cc | 4 ++--
 src/hb-ot-shape-complex-misc.cc   | 4 ++--
 5 files changed, 8 insertions(+), 9 deletions(-)

commit d2984a241e4819474d827b1dd5d4b6d76596b3a5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 17:21:14 2012 -0400

    Add map->substitute_closure()

 src/hb-ot-map-private.hh |  3 +++
 src/hb-ot-map.cc	  | 15 +++++++++++++++
 2 files changed, 18 insertions(+)

commit 31081f7390e5130df72f89acc609ccab5dc77a48
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 16:54:58 2012 -0400

    Implement closure() for Context and ChainContext lookups

 src/hb-ot-layout-common-private.hh   |  54 ++++++
 src/hb-ot-layout-gsubgpos-private.hh | 347
 ++++++++++++++++++++++++++++-------
 src/hb-ot-layout-private.hh	      |  23 ++-
 3 files changed, 351 insertions(+), 73 deletions(-)

commit c64ddab3c34897cd520d4d73a054866e649e8793
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 15:28:35 2012 -0400

    Flesh out closure() for GSUB

    The GSUBGPOS part still missing.

 src/hb-ot-layout-common-private.hh |  61 ++++++++++++++------
 src/hb-ot-layout-gsub-table.hh     | 112
 ++++++++++++++++++++++++++++---------
 src/hb-ot-layout-private.hh	    |  34 +++++++++++
 src/hb-ot-layout.h		    |	2 +-
 4 files changed, 165 insertions(+), 44 deletions(-)

commit 0da132bde4d576a03095d6738507954f7f85103d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 14:21:33 2012 -0400

    Fix Coverage iters

 src/hb-ot-layout-common-private.hh | 30 +++++++++++++++++++++---------
 1 file changed, 21 insertions(+), 9 deletions(-)

commit 3e32cd9570fd8b09901fb790b80365ae425f681a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 13:20:52 2012 -0400

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 1 -
 src/hb-ot-layout.cc		      | 6 +++---
 src/hb-ot-layout.h		      | 8 ++++++++
 src/hb-private.hh		      | 4 +++-
 4 files changed, 14 insertions(+), 5 deletions(-)

commit 650ac00da3d2f988197393f34d40f0ba1a0fa093
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 13:17:09 2012 -0400

    Minor refactoring

 src/hb-ot-layout-gpos-table.hh       | 27 +++++++++++--------------
 src/hb-ot-layout-gsub-table.hh       | 39
 +++++++++++++++++-------------------
 src/hb-ot-layout-gsubgpos-private.hh |  8 ++------
 src/hb-ot-layout.cc		      |  6 ++++--
 4 files changed, 36 insertions(+), 44 deletions(-)

commit f94b0aa64609654497ced9c00312c9643eb69053
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 13:04:38 2012 -0400

    Add "closure" operation stubs to GSUB

    Filling in.

 src/hb-ot-layout-gsub-table.hh       | 179
 +++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gsubgpos-private.hh | 110 ++++++++++++++++++++-
 src/hb-ot-layout.cc		      |   8 ++
 3 files changed, 293 insertions(+), 4 deletions(-)

commit 7d50d502635d7c95e6bd091e7d4cc993f0853f76
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 23 13:02:14 2012 -0400

    Add Coverage iterators

 src/hb-ot-layout-common-private.hh | 59
 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 59 insertions(+)

commit 3ed4634ec349fa9e943ad23718c04be4dd4bba62
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 19 22:34:06 2012 -0400

    Add Indic inspection tool

 src/Makefile.am			  |   7 +-
 src/hb-ot-shape-complex-indic-private.hh | 264
 +++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-indic.cc	  | 229
 +--------------------------
 src/indic.cc				  |  46 ++++++
 4 files changed, 317 insertions(+), 229 deletions(-)

commit a06411ecf93c7e5256e363eef3ef69554896dd55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 19 22:28:25 2012 -0400

    Minor matra renumbering

    Should have no visible effect.

 src/hb-ot-shape-complex-indic.cc | 30 +++++++++++++++++-------------
 1 file changed, 17 insertions(+), 13 deletions(-)

commit 36608941f3cc530fea57282fa175e4cc3b4c66c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 19 22:21:38 2012 -0400

    Add GSUB "would_apply" API

    To be used in the Indic shaper later.  Unused for now.

 src/hb-ot-layout-gsub-table.hh | 140
 ++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 138 insertions(+), 2 deletions(-)

commit a0d4caeb91fa5e5f2090db4efc35c64ff9a64789
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 17 13:42:30 2012 -0400

    Minor

 TODO | 3 +++
 1 file changed, 3 insertions(+)

commit a5e40542ab9508f0ba6f822f1262d93fccb71f45
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 17 12:37:19 2012 -0400

    Make font immutable in hb_shape()

 src/hb-shape.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 3cde23664fbbe9cd2ac1b8fd5eb2ea288309cc9c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 17 11:44:49 2012 -0400

    Minor note re Graphite

 src/hb-graphite2.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 4dc2449d92308f8dd366142831c0b85bd30ea5a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 17 11:39:48 2012 -0400

    Fix leak in graphite

 src/hb-graphite2.cc | 1 +
 1 file changed, 1 insertion(+)

commit 0290bbf8611aa881daed907f22256a431250c90a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 17 10:28:21 2012 -0400

    Add another Thai test

 test/shaping/texts/in-tree/shaper-thai/misc/misc.txt | 1 +
 1 file changed, 1 insertion(+)

commit 9ceca3aeb14cc096f5f87660cf7351bc35073084
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 21:05:51 2012 -0400

    Fix ragel regexp in vowel-based syllable

    As reported by datao zhang on the mailing list.

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b870afcd1b436614af95db6dc297e54c8f03f0cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 21:05:11 2012 -0400

    Rewrite ragel expression to better match the one on MS spec

    https://www.microsoft.com/typography/otfntdev/devanot/shaping.aspx

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 95cefdf96efe43a44133aa8a186155cf4e63e2b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 18:08:20 2012 -0400

    Add --utf8-clusters

    Also fix cairo cluster generation.

 util/hb-shape.cc     |  8 +++++---
 util/hb-view.hh      |  2 +-
 util/helper-cairo.cc | 22 +++++++++++++++++-----
 util/helper-cairo.hh |  3 ++-
 util/options.cc      | 19 ++++++++++++++-----
 util/options.hh      | 26 ++++++++++++++++----------
 util/view-cairo.cc   |  5 +++--
 util/view-cairo.hh   |  3 ++-
 8 files changed, 60 insertions(+), 28 deletions(-)

commit effb42e5c520128bdc2e29398ed801730c5c0f52
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 16:04:07 2012 -0400

    Always use cairo_show_text_glyphs()

    Better catches cluster errors.

 util/view-cairo.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 799cfdd15ab369580b2283200c3aca6866214b59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 16:00:36 2012 -0400

    Make page progression be right to left for vertical text

 util/view-cairo.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit a5f1834f57ea3fb254f5c7d372747de316fcc8f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 15:55:13 2012 -0400

    Apply 'liga' for vertical writing mode too

    Apparently that's what Kazuraki uses to form vertical ligatures,
    which suggests that it's what Adobe does.

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4d85252bda25cddd1fbdd744687e449888f0b5fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 16 15:54:26 2012 -0400

    Add Japanese test data from Adobe's Kazuraki font ligatures

 test/shaping/texts/in-tree/shaper-default/MANIFEST |  1 +
 .../shaper-default/script-japanese/MANIFEST	    |  1 +
 .../shaper-default/script-japanese/misc/MANIFEST   |  2 +
 .../script-japanese/misc/kazuraki-liga-lines.txt   |  8 ++++
 .../script-japanese/misc/kazuraki-liga.txt	    | 53
 ++++++++++++++++++++++
 5 files changed, 65 insertions(+)

commit e74616b8898b5f18d9bf82b9e81aefad056c1e36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Apr 15 14:12:13 2012 -0400

    Add comment

 src/hb-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 683b503f30bba29d57a93d7e8ac7138c2e7f49f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 20:47:14 2012 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 11 +++++++++--
 src/hb-ot-shape-private.hh   |  9 ---------
 src/hb-ot-shape.cc	      |  9 ++++++++-
 3 files changed, 17 insertions(+), 12 deletions(-)

commit b9f199c8e38cc5ed0d73845568630f3bcbdd4374
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 20:23:58 2012 -0400

    Move code around

 src/hb-ot-shape-private.hh | 40 ----------------------------------------
 src/hb-ot-shape.cc	    | 45
 +++++++++++++++++++++++++++++++++++++++++----
 2 files changed, 41 insertions(+), 44 deletions(-)

commit 38a83019e6a7f4aa47662fd557344f62ae001abe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 19:40:18 2012 -0400

    Minor

 src/hb-common.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4adade217a61007dd2da5cd9eccf889f79a019a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 19:23:17 2012 -0400

    Add assert

 src/hb-ot-shape.cc | 2 ++
 1 file changed, 2 insertions(+)

commit fe28b997fbbeb2cfeab62ac453993ccffe3e6719
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 19:19:26 2012 -0400

    Add HB_DIRECTION_IS_VALID

 src/hb-common.h	| 1 +
 test/api/test-common.c | 7 +++++++
 2 files changed, 8 insertions(+)

commit 5e88aa66822ba64324b4428c9ffbe06a43b4f310
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 18:51:50 2012 -0400

    Remove public enum names again

    As was reported to me, glib-mkenum does not understand named enums,
    so remove for now.

 src/hb-blob.h		     | 2 +-
 src/hb-common.h	     | 6 +++---
 src/hb-ot-layout-private.hh | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 08569c0eaab026c7122c0dc29922cf44011c4d10
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 14 18:47:07 2012 -0400

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 4bf90f648313e35d21b427a956aa1fe762bae757
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 17:38:23 2012 -0400

    Make HB_DIRECTION_INVALID be zero

    This changes all the HB_DIRECTION_* enum member values, but is
    nicer, in preparation for making hb_segment_properties_t public.

 src/hb-common.cc	|  7 ++++---
 src/hb-common.h	| 20 ++++++++++----------
 test/api/test-common.c |  9 +++++++--
 3 files changed, 21 insertions(+), 15 deletions(-)

commit d01402da9c756f90a84bfb1f964fd56caf2b35c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 17:38:02 2012 -0400

    Minor

 TODO | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 69b84a8f6c789726815261c2e86692de7a65d6e8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 15:50:40 2012 -0400

    Fix hb-view surface size calc for vertical text

    For some reason it doesn't quite work with IranianNastaliq, but
    that looks like a font issue.

 util/helper-cairo.hh |  5 +++--
 util/options.hh      |  7 +++++++
 util/view-cairo.cc   | 31 +++++++++++++++++++++----------
 util/view-cairo.hh   |  1 +
 4 files changed, 32 insertions(+), 12 deletions(-)

commit 6bd9b479b8b2befbb0847282e93beade197c8038
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 14:53:53 2012 -0400

    Hide backend-specific shape functions

    Also remove shaper_options argument to hb_shape_full().  That was
    unused and for "future".  Let it go.

    More shaper API coming in preparation for plan/planned API.

 configure.ac			  |  6 ++---
 src/Makefile.am		  | 11 +++++----
 src/hb-fallback-shape-private.hh |  9 ++++----
 src/hb-fallback-shape.cc	  |  9 ++++----
 src/hb-graphite2-private.hh	  | 42 +++++++++++++++++++++++++++++++++++
 src/hb-graphite2.cc		  |  5 ++---
 src/hb-graphite2.h		  |  7 ------
 src/hb-ot-shape-private.hh	  |  8 +++++--
 src/hb-ot-shape.cc		  | 11 ++++-----
 src/hb-ot-shape.h		  | 48
 ----------------------------------------
 src/hb-ot.h			  |  1 -
 src/hb-shape.cc		  | 24 ++++++++------------
 src/hb-shape.h			  |  1 -
 src/hb-uniscribe-private.hh	  | 42 +++++++++++++++++++++++++++++++++++
 src/hb-uniscribe.cc		  |  9 ++++----
 src/hb-uniscribe.h		  |  7 ------
 util/options.hh		  |  2 +-
 17 files changed, 126 insertions(+), 116 deletions(-)

commit c6035cf802c60f0526f421f39a55886061df94ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 13:23:59 2012 -0400

    Add names to enums

    gdb was showing <anonymous enum> instead of useful stuff, so name
    all our enums.

 src/hb-blob.h			    | 2 +-
 src/hb-common.h		    | 6 +++---
 src/hb-ot-layout-common-private.hh | 2 +-
 src/hb-ot-layout-gdef-table.hh     | 2 +-
 src/hb-ot-layout-gpos-table.hh     | 5 ++---
 src/hb-ot-layout-gsub-table.hh     | 2 +-
 src/hb-ot-layout-private.hh	    | 2 +-
 7 files changed, 10 insertions(+), 11 deletions(-)

commit d1c9eb458c843215da8df84b596bfae51fee135b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 13:17:44 2012 -0400

    Make it an error to include non-top-level headers

    Users should #include <hb.h> (or hb-ft.h, hb-glib.h, etc), but
    never things like hb-shape.h directly.  This makes it easier to
    refactor headers later on without breaking compatibility.

 src/hb-blob.h	     | 4 ++++
 src/hb-buffer.h     | 4 ++++
 src/hb-common.h     | 4 ++++
 src/hb-font.h	     | 4 ++++
 src/hb-ft.h	     | 2 --
 src/hb-glib.h	     | 1 +
 src/hb-gobject.h    | 1 +
 src/hb-graphite2.h  | 5 +++--
 src/hb-icu.h	     | 1 +
 src/hb-ot-layout.h  | 8 +++++---
 src/hb-ot-shape.h   | 9 +++++----
 src/hb-ot-tag.h     | 6 +++++-
 src/hb-ot.h	     | 2 ++
 src/hb-private.hh   | 5 ++++-
 src/hb-shape.h      | 4 ++++
 src/hb-unicode.h    | 4 ++++
 src/hb-uniscribe.h  | 3 +--
 src/hb-version.h.in | 4 ++++
 src/hb.h	     | 2 ++
 19 files changed, 58 insertions(+), 15 deletions(-)

commit 323190c27b80cddc9b3c42d19f1f243e2acb2411
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 12:29:10 2012 -0400

    Minor

 src/hb-ft.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 0e3361464b00b76aa7375515163e0710a691db0c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 10:06:52 2012 -0400

    Fix bug with not setting Unicode props of the first character

    Fixes Mongolian shaping issue:
    https://bugs.freedesktop.org/show_bug.cgi?id=45695

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f9746b600a6e14dbe48aabfc17df8f12a5b46b11
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 09:59:26 2012 -0400

    Minor

 test/shaping/texts/in-tree/shaper-arabic/script-mongolian/misc/misc.txt |
 1 -
 1 file changed, 1 deletion(-)

commit 7470b0ff805e4ff59d23d7a1808888fafdf550eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 09:44:27 2012 -0400

    Add Mongolian test case

 test/shaping/texts/in-tree/MANIFEST				       |
 1 +
 .../texts/in-tree/shaper-arabic/script-mongolian/misc/MANIFEST        |
 1 +
 .../texts/in-tree/shaper-arabic/script-mongolian/misc/misc.txt        |
 4 ++++
 test/shaping/texts/in-tree/shaper-thai/MANIFEST		       |
 1 +
 test/shaping/texts/in-tree/shaper-thai/misc/MANIFEST		       |
 1 +
 5 files changed, 8 insertions(+)

commit c65662b71e6160f5adfb6226d97589ca457d98b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 12 09:31:55 2012 -0400

    Fix left-matra positioning in Indic

    Fixes 200 failures out of previous 4290 cases in the OO.o Indic
    dictionary (of ~16000 entries).

 src/hb-ot-shape-complex-indic.cc | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 6d16403bfaa4d710d80c93298eca7211ecaa419f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 22:04:42 2012 -0400

    Adjust TODO

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 029a82d81d8ffa1b6771d19018d592fec1dbc934
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 22:00:46 2012 -0400

    [hangul] Apply *jmo features to all Hangul chars

    This is what old HB does.  Morever, fixes rendering with Win8 malgun
    font.  The Win7 version doesn't compose with either Uniscribe nor HB,
    but Win8 version works as expected, like Uniscribe, with this change.

    Lets call Hangul done for now.

 src/hb-ot-shape-complex-misc.cc | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 3baae2440de69577d330209edb708e7d2bb2231d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 21:54:37 2012 -0400

    Update TODO

 TODO | 28 +++++++++++++++-------------
 1 file changed, 15 insertions(+), 13 deletions(-)

commit a4976447cd1a1feffdecd0d501a2690716b1cf4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 17:48:40 2012 -0400

    Add Hangul test

 test/shaping/texts/in-tree/shaper-hangul/script-hangul/misc/misc.txt |
 1 +
 1 file changed, 1 insertion(+)

commit e95d912b3b0af027c4384553f95236db822e5acc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 17:33:02 2012 -0400

    Fix diff tool

 test/shaping/hb_test_tools.py | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 41ae674f6871f43d0a6e4ca67a747074d63ae576
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 17:11:05 2012 -0400

    Don't create hb_apply_context_t per glyph!

    I couldn't measure significant performance gains out of this; maybe
    about 5% (with one million Malayalam strings).  Still, not bad.
    But reminds me that optimizing this codebase without profiling first
    is simply not going to work.  Oh well...

 src/hb-ot-layout-gpos-table.hh       | 24 ++++++------------------
 src/hb-ot-layout-gsub-table.hh       | 26 +++++++-------------------
 src/hb-ot-layout-gsubgpos-private.hh | 22 ++++++++++++++++++++++
 3 files changed, 35 insertions(+), 37 deletions(-)

commit 4a1e02ef7979d58fe0c726ee7c665b2420c42ddd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 14:37:53 2012 -0400

    Fix shape to presentation forms font check

    As reported by Jonathan Kew on the list.

 src/hb-ot-shape-complex-arabic.cc | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 6062f5f01436b4044be729890ed00b9b62737824
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 11 14:19:55 2012 -0400

    Fix build with some compilers

    As reported by Jonathan Kew on the list.

 src/hb-ot-shape-complex-misc.cc | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit acd88e659fdb2fa1cbf7171f0a1c7fbc81b9f298
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 18:02:20 2012 -0400

    In Arabic fallback shaping, check that the font has glyph for new char

 src/hb-ot-shape-complex-arabic.cc  | 12 +++++++-----
 src/hb-ot-shape-complex-indic.cc   |  2 +-
 src/hb-ot-shape-complex-misc.cc    |  6 +++---
 src/hb-ot-shape-complex-private.hh |  7 ++++---
 src/hb-ot-shape.cc		    |  2 +-
 5 files changed, 16 insertions(+), 13 deletions(-)

commit 7752aa73e72301a46c64c533c1e423ff5987cc05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 17:22:14 2012 -0400

    Minor

 src/hb-ot-shape-private.hh |  1 -
 src/hb-ot-shape.cc	    | 10 ----------
 2 files changed, 11 deletions(-)

commit 939c010211b063f78874a3b72b032c1ed9a13b87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 17:20:05 2012 -0400

    Implement Arabic fallback shaping mandatory ligatures

 src/gen-arabic-table.py		 | 32
 ++++++++++++++++++++++----------
 src/hb-ot-shape-complex-arabic-table.hh | 28 +++++++++++++++++++---------
 src/hb-ot-shape-complex-arabic.cc	 | 31
 +++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-misc.cc	 |  4 ++--
 4 files changed, 74 insertions(+), 21 deletions(-)

commit b7d04eb606800100faa11100d2adf559e297a4ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 16:44:38 2012 -0400

    Do Arabic fallback shaping

 src/hb-ot-shape-complex-arabic.cc | 38
 +++++++++++++++++++++++++++++++++-----
 1 file changed, 33 insertions(+), 5 deletions(-)

commit ae4a2b9365051c23c9a299cf76f3ab7e661999b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 16:25:08 2012 -0400

    Generate fallback Arabic shaping table

    Not hooked up yet.

 src/Makefile.am			 |   6 +-
 src/gen-arabic-table.py		 | 220
 +++++++++++++++++++++++---------
 src/gen-indic-table.py			 |   4 +-
 src/hb-ot-shape-complex-arabic-table.hh | 205
 ++++++++++++++++++++++++++++-
 4 files changed, 367 insertions(+), 68 deletions(-)

commit 3b26f96ebe859570d14c6902afc23462bca40712
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 10:52:07 2012 -0400

    Add Thai shaper that does SARA AM decomposition / reordering

    That's not in the OpenType spec, but it's what MS and Adobe do.

 src/hb-buffer.cc		    |	1 +
 src/hb-ot-shape-complex-misc.cc    | 104
 ++++++++++++++++++++++++++++++++++++-
 src/hb-ot-shape-complex-private.hh |	8 +++
 3 files changed, 112 insertions(+), 1 deletion(-)

commit 0b6d2ac6a1d04877ae4542fc2a3b920185547053
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 10:52:03 2012 -0400

    Minor

 TODO | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit e099dd6592b4ea887696330f4718efb572494d93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 10 10:47:33 2012 -0400

    Add Thai test case for SARA AM decomposition

 test/shaping/texts/in-tree/shaper-hangul/MANIFEST    | 1 +
 test/shaping/texts/in-tree/shaper-thai/misc/misc.txt | 5 +++++
 2 files changed, 6 insertions(+)

commit 4450dc9354b18cd68980b0891b24ea8efa4f38b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 22:07:23 2012 -0400

    Move around

 test/shaping/texts/in-tree/MANIFEST				       |
 1 +
 test/shaping/texts/in-tree/shaper-default/MANIFEST		       |
 1 -
 test/shaping/texts/in-tree/shaper-default/script-hangul/MANIFEST      |
 1 -
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/MANIFEST |
 1 -
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/misc.txt |
 2 --
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/MANIFEST       |
 1 +
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/misc/MANIFEST  |
 1 +
 test/shaping/texts/in-tree/shaper-hangul/script-hangul/misc/misc.txt  |
 2 ++
 8 files changed, 5 insertions(+), 5 deletions(-)

commit d4cc44716c1e098f8abbc0e495404598026ef242
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 21:52:28 2012 -0400

    Move code around, in prep for Thai/Lao shaper

 src/hb-buffer-private.hh		  |  5 +++++
 src/hb-buffer.cc			  | 23 +++++++++++++++++++++++
 src/hb-ot-shape-complex-indic-machine.rl | 14 +-------------
 3 files changed, 29 insertions(+), 13 deletions(-)

commit c9a841f4452921c5361b8f5697bbff7736ce60cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 15:06:55 2012 -0400

    Add simple Hangul shaper that recomposes Jamo when feasible

    Previously, we were NOT actually recomposing Hangul Jamo.  We do now.
    The two lines in:

    test/shaping/texts/in-tree/shaper-default/script-hangul/misc/misc.txt

    Now render the same with the UnDotum.ttf font.  Previously the second
    linle was rendering boxes.

    We can also start applying OpenType Jamo features later.  At this
    time,
    I have no idea how the 'ljmo', 'vjmo', 'tjmo' features are supposed to
    work.  Maybe someone can explain them to me?

 src/hb-ot-shape-complex-misc.cc    | 16 ++++++++++++++++
 src/hb-ot-shape-complex-private.hh | 15 +++++++++++++--
 2 files changed, 29 insertions(+), 2 deletions(-)

commit 968318455304804dc53045e8ba0cd4d76800c02d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 14:57:21 2012 -0400

    Implement normalization mode
    HB_OT_SHAPE_NORMALIZATION_MODE_COMPOSED_FULL

    In this mode we try composing CCC=0 with CCC=0 characters.	Useful for
    Hangul.

 src/hb-ot-shape-normalize.cc | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit bec2ac4fde1ba0dd6dba02adbb836ce569a5cf6f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 14:51:17 2012 -0400

    Bring normalization algorithm closer to the spec

    No logical difference so far.

 src/hb-ot-shape-normalize.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit e02d9257863b49e33ab5942971266349d3c548f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Apr 7 14:49:13 2012 -0400

    Flip logic around

 src/hb-ot-shape-normalize.cc | 38 +++++++++++++-------------------------
 1 file changed, 13 insertions(+), 25 deletions(-)

commit aaa25d5f458127f53f4b5ecdeb986ae91fabbad3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 5 17:27:23 2012 -0400

    Add Hangul test case

    Composed, and decomposed, of the same text.

 test/shaping/texts/in-tree/shaper-default/MANIFEST		       |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-hangul/MANIFEST      |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/MANIFEST |
 1 +
 test/shaping/texts/in-tree/shaper-default/script-hangul/misc/misc.txt |
 2 ++
 4 files changed, 5 insertions(+)

commit 11138ccff71f442da1fcf64faa0e1d22e083e775
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 5 17:25:19 2012 -0400

    Add normalize mode

    In preparation for Hangul shaper.

 src/Makefile.am		      |  1 +
 src/hb-ot-layout-common-private.hh   |  1 -
 src/hb-ot-shape-complex-arabic.cc    |  6 +--
 src/hb-ot-shape-complex-indic.cc     |  6 +--
 src/hb-ot-shape-complex-misc.cc      |  8 ++--
 src/hb-ot-shape-complex-private.hh   | 13 ++++---
 src/hb-ot-shape-normalize-private.hh | 46 +++++++++++++++++++++++
 src/hb-ot-shape-normalize.cc	      | 73
 +++++++++++++++++-------------------
 src/hb-ot-shape-private.hh	      |  7 +---
 src/hb-ot-shape.cc		      |  2 +-
 10 files changed, 102 insertions(+), 61 deletions(-)

commit 6769f21d579a354e32577ec57348e97d2cb1b438
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 5 16:46:46 2012 -0400

    More moving code around

 src/hb-ot-shape-normalize.cc | 2 +-
 src/hb-ot-shape-private.hh   | 8 --------
 src/hb-ot-shape.cc	      | 2 +-
 src/hb-unicode-private.hh    | 8 ++++++++
 4 files changed, 10 insertions(+), 10 deletions(-)

commit 2db2a566826ed4763ce69629194ec656bd48b0bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 5 16:40:37 2012 -0400

    Move code around

 src/hb-ot-shape-private.hh | 53
 --------------------------------------------
 src/hb-unicode-private.hh  |  3 +++
 src/hb-unicode.cc	    | 55
 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 58 insertions(+), 53 deletions(-)

commit cad3821f3d5b68d490b0728bd37bd57428ec809c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 17:13:25 2012 -0500

    More sorting by Unicode version

    This is the most convenient way to browse scripts.

 src/hb-common.cc		    |  2 +-
 src/hb-common.h		    |  2 +-
 src/hb-ot-shape-complex-private.hh | 94
 ++++++++++++++++++++++++++++----------
 3 files changed, 72 insertions(+), 26 deletions(-)

commit 317b9504d7a4faa70dcf21e5c2aff4792dbd201a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 16:51:29 2012 -0500

    Minor

 src/hb-ot-shape-complex-private.hh | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit fa2673c1ee954ddbbfbfca7cced7b839d7776fc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 15:52:02 2012 -0500

    More Unicode script age annotation, and a couple more RTL scripts

    Cross-checked with Mark Davis's spreadsheet at http://goo.gl/x9ilM

 src/hb-common.cc |  8 ++++++++
 src/hb-common.h  | 52
 +++++++++++++++++++++++++++++-----------------------
 2 files changed, 37 insertions(+), 23 deletions(-)

commit 6d4016f1ba48d409800dc3281b93e5cd58c99d9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 15:33:14 2012 -0500

    Make src tests pass again

 src/gen-arabic-table.py		 | 11 ++++++-----
 src/gen-indic-table.py			 |  9 +++++----
 src/hb-ot-shape-complex-arabic-table.hh |  6 ++++++
 src/hb-ot-shape-complex-indic-table.hh  |  4 ++++
 4 files changed, 21 insertions(+), 9 deletions(-)

commit 7da435f08cc406080a5ee9b1ab5351db6a93acae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 15:20:20 2012 -0500

    Separate Unicode 3.1 and Unicode 3.2 additions

 src/hb-common.h | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit f91136cb528e298651c4a8a8a1d6dc54136e09ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:56:22 2012 -0500

    Route three Unicode 6.1 scripts through Indic shaper

 src/hb-ot-shape-complex-private.hh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit f32c0012ad794cd2df669dfc7b0438fafbe38b2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:53:34 2012 -0500

    Add Unicode 6.1.0 scripts

 src/hb-common.h |  9 +++++++++
 src/hb-glib.cc  | 11 ++++++++++-
 2 files changed, 19 insertions(+), 1 deletion(-)

commit 50e810cd0e55c25fddb0a2fd0861c51fbf65700e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:49:08 2012 -0500

    Lydian and Kharoshthi are right-to-left

 src/hb-common.cc | 6 ++++++
 1 file changed, 6 insertions(+)

commit a52835635e4a2a12715aff2febb561515a10cd5a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:38:39 2012 -0500

    Whitespace

 src/hb-common.h | 194
 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 97 insertions(+), 97 deletions(-)

commit 183224684a45d7dcd7d28510d4383a7a7cb3dff3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:21:28 2012 -0500

    Use generic shaper for Buhid

    As requested by Jonathan Kew.

    We need to devise a better mechanism to choose which scripts to
    pass through the Indic shaper.  Moreover, currently we are storing
    data for some scripts in the Indic shaper that are not even going
    through that shaper.  Need to find a better way...

 src/hb-ot-shape-complex-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cdc8b491a8e7cec5082ca2ad0346c1f41fdd5c92
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 12:08:33 2012 -0500

    Update Indic table to Unicode 6.1 data

 src/Makefile.am			 |  15 +++
 src/gen-indic-table.py			 |  20 ++--
 src/hb-ot-shape-complex-arabic-table.hh |  35 -------
 src/hb-ot-shape-complex-indic-table.hh  | 178
 +++++++++++++++++++-------------
 4 files changed, 134 insertions(+), 114 deletions(-)

commit e3b2e077f549b04779c08a9fedb1f35b9f11075c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 7 10:21:24 2012 -0500

    Typo

 src/hb-ot-shape-normalize.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c346671b6b9b05fa51b95c16212eb29ac69510fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 6 20:47:50 2012 -0500

    Minor doc fixes

 src/hb-ot-shape-normalize.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 406044986a68676f3050f9350ccc448c615fc685
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 6 20:24:31 2012 -0500

    Add Hebrew diacritics test cases

    From:
    https://bugzilla.mozilla.org/show_bug.cgi?id=662055

 test/shaping/texts/in-tree/shaper-default/MANIFEST	   |  1 +
 .../texts/in-tree/shaper-default/script-hebrew/MANIFEST   |  1 +
 .../in-tree/shaper-default/script-hebrew/misc/MANIFEST    |  1 +
 .../shaper-default/script-hebrew/misc/diacritics.txt	   | 15
 +++++++++++++++
 4 files changed, 18 insertions(+)

commit 461b9b6347e4f58589f5be82c40a2df61da2c715
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 1 18:11:19 2012 -0800

    Fix cluster formation in Indic

    Makes number of failures against Uniscribe with hi_IN dictionary from
    OO.o to go down from 6334 to 4290.	Not bad for a one-line change!

    Mozilla Bug 729626 - ASAN: heap-buffer-overflow HTML

 src/hb-ot-shape-complex-indic-machine.rl | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc71ad4973842f25216b48842a46d6c9cbce6aa3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Mar 1 17:30:29 2012 -0800

    Fix atomic-int op on Apple

    The OSAtomicAdd32Barrier operator returns the new value, we want the
    old value.

 src/hb-blob.cc		  | 2 +-
 src/hb-object-private.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit a1970d9afc15b2c6b7513b923019bb223bd95154
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Feb 24 13:51:09 2012 -0500

    Add support for atomic int and mutex on Apple systems

    So, apparently there's no atomic int 'get' method on Apple.
    You have to
    add(0) to get.  And that's not const-friendly.  So switch inert-object
    checking to a non-atomic get.  This, however, is safe, and a
    negligible
    performance boost too.

 src/hb-mutex-private.hh  | 14 +++++++++-----
 src/hb-object-private.hh | 15 ++++++++++-----
 2 files changed, 19 insertions(+), 10 deletions(-)

commit 8004429102d7d3a8c42e1cbfe231835de4d3d782
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 23 18:47:17 2012 -0500

    Remove unused hb_atomic_int_set()

    Apparently it can't be implemented on OS X.  We weren't using
    it anyway.

 src/hb-object-private.hh | 4 ----
 1 file changed, 4 deletions(-)

commit 45227c10e416894ba7f84fdf72d849cecdb9b898
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 23 19:47:43 2012 -0500

    Add hb-warning.cc.	Oops!

 src/hb-warning.cc | 53
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 53 insertions(+)

commit bd7ff1dec5b92ee59fa060e793f88499adcd8c11
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Feb 23 15:06:16 2012 -0500

    Allow disabling multi-threaded support

    By defining HB_NO_MT.

    Also, only warn once per missing MT feature support.

    Mozilla Bug 666661 - gfx/harfbuzz/src/hb-prive.h - compiler warnings
    on mac

 src/Makefile.am	  |  1 +
 src/hb-mutex-private.hh  |  6 +++---
 src/hb-object-private.hh | 11 +++--------
 3 files changed, 7 insertions(+), 11 deletions(-)

commit 634c9e3423a9c23793400d1f56e98070e00b6056
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 22 16:43:21 2012 -0500

    Minor

 src/hb-ot-shape-private.hh | 69
 ++++++++++++++++++++++++++--------------------
 1 file changed, 39 insertions(+), 30 deletions(-)

commit 514b6f88668da4eab85103c536dabe24b7bc457b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 22 16:34:37 2012 -0500

    Followup: Reorder Hebrew combining classes for better rendering

    Patch from Jonathan Kew.

    Bug 662055 - advanced Hebrew diacritics are shown correctly only in
    particular order.

 src/hb-ot-shape-private.hh | 20 ++++++++++----------
 1 file changed, 10 insertions(+), 10 deletions(-)

commit 6e78607ea71e3e5306f88f227ddba76133d16ed0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 22 16:31:15 2012 -0500

    Reorder Hebrew combining classes for better rendering

    Patch from Jonathan Kew.

    Bug 662055 - advanced Hebrew diacritics are shown correctly only in
    particular order

 src/hb-ot-shape-private.hh | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit 7a70ca78e06c676befe1ae17199fff1f000f8188
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 21 11:31:47 2012 -0500

    Add test case from https://bugzilla.mozilla.org/show_bug.cgi?id=714067

 test/shaping/texts/in-tree/shaper-arabic/script-arabic/misc/MANIFEST
 | 1 +
 .../in-tree/shaper-arabic/script-arabic/misc/ligature-diacritics.txt
 | 1 +
 2 files changed, 2 insertions(+)

commit f51e167436a51b890ffe3f7f7920498fa287acd9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 30 09:48:33 2012 -0500

    Minor error handling

 util/options.cc | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit bee74efbdebc4e46ce57daa8a88bcf06b13411fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 27 02:14:08 2012 -0500

    Update git.mk to new upstream

 git.mk | 44 +++++++++++++++++++++++++++++++++-----------
 1 file changed, 33 insertions(+), 11 deletions(-)

commit 134aa7bc7e3f9b9de76c9de2ed4b7344a7b323f9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 27 02:09:40 2012 -0500

    Make checks more OS X friendly

 src/check-internal-symbols.sh | 21 +++++++++++++--------
 src/check-libstdc++.sh        | 21 +++++++++++++--------
 2 files changed, 26 insertions(+), 16 deletions(-)

commit 6152199368399bf98368ea3c794fa760b49756ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 27 01:57:59 2012 -0500

    Fix check-header-guards on OS X

 src/check-header-guards.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c62e41b6aad1fc56225d0e53d6d4abd0f005fe3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 27 02:20:58 2012 -0500

    Minor

 configure.ac | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 1a5a91dc0d8bf4b72a2f22dc6300b06ad7000b79
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 19:57:00 2012 -0500

    Add a few more tests

 .../in-tree/shaper-indic/indic/script-devanagari/misc/misc.txt   | 3 +++
 .../shaper-indic/south-east-asian/script-thai/misc/misc.txt	  |
 9 +++++++++
 2 files changed, 12 insertions(+)

commit 1795f3a222a85cdf80c78a0e9181d23dd1673876
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 19:29:45 2012 -0500

    Add a couple Thai test cases from Thep

 test/shaping/texts/in-tree/shaper-indic/south-east-asian/MANIFEST	 |
 1 +
 .../texts/in-tree/shaper-indic/south-east-asian/script-thai/MANIFEST	 |
 1 +
 .../in-tree/shaper-indic/south-east-asian/script-thai/misc/MANIFEST	 |
 1 +
 .../in-tree/shaper-indic/south-east-asian/script-thai/misc/misc.txt	 |
 2 ++
 4 files changed, 5 insertions(+)

commit ec3f506682fc6e2d7d7455e49d6c82ac9dd0c660
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 19:10:55 2012 -0500

    Add Devanagari test from Tom Hacohen

 .../texts/in-tree/shaper-indic/indic/script-devanagari/misc/misc.txt
 | 1 +
 1 file changed, 1 insertion(+)

commit 71be4ca3dd5eaaca31957e34fef11f6aeb4aebdf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 16:26:49 2012 -0500

    Also ignore "ChangeLog" in manifests

 test/shaping/hb_test_tools.py | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3c9a39ecd65990f2c7b29bb741c6a538fa425531
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 16:21:19 2012 -0500

    Remove newline

 test/shaping/hb_test_tools.py | 2 ++
 1 file changed, 2 insertions(+)

commit e4ccbfe276db5ed098ddcf78a7bb8f2da4263128
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 16:07:32 2012 -0500

    Allow --color=html in hb-diff

    Not that useful right now as we don't escape < and >.  Perhaps
    another tool can be added to convert the ANSI output to HTML.

 test/shaping/hb-diff	       |  2 +-
 test/shaping/hb_test_tools.py | 22 +++++++++++++++++-----
 2 files changed, 18 insertions(+), 6 deletions(-)

commit 71632c96daa4ba15e13f4d9e7f2c121d0162614e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 22 15:31:44 2012 -0500

    Fallback to Latin script if the font has no other usable scripts

    Patch and description from Jonathan Kew:

    It turns out that some legacy Thai fonts provide OpenType substitution
    features to implement mark positioning, but (incorrectly) put those
    features/lookups under the 'latn' script tag instead of using 'thai'
    (or
    possibly 'DFLT'). See
    https://bugzilla.mozilla.org/show_bug.cgi?id=719366 for an example and
    more detailed description.

    Although this is really a font bug, I suggest that we could improve
    the
    rendering of such fonts by looking for the 'latn' as a fallback if
    neither the requested script nor "default" is found in
    hb_ot_layout_table_choose_script. Suggested patch against harfbuzz
    master is attached.

    This does _not_ affect the other kind of legacy Thai font, where
    custom
    code to support vendor-specific PUA codepoints would be needed. I'm
    not
    keen to go down that path; IMO, such fonts should be ruthlessly
    stamped
    out in favour of standards-based solutions. :)

    JK

 src/hb-ot-layout.cc | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 8f80f93491be73f05eba908591c856339acda51e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 20:03:25 2012 -0500

    More shoveling around

 test/shaping/hb-diff-filter-failures |  2 +-
 test/shaping/hb-manifest-read	      |  2 +-
 test/shaping/hb_test_tools.py	      | 27 ++++++++++++++++-----------
 3 files changed, 18 insertions(+), 13 deletions(-)

commit c78c6e9844a23144ce7fa29afbf57b74587bfcd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:55:16 2012 -0500

    Cleanup

 test/shaping/hb-manifest-read |  2 +-
 test/shaping/hb_test_tools.py | 13 ++++++++-----
 2 files changed, 9 insertions(+), 6 deletions(-)

commit ab94a9c542f7ec9143335b73493ccb75d4586a3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:43:58 2012 -0500

    Distribute testing tools

 test/shaping/Makefile.am | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

commit 3e86feb54c94e46b60168fd2a4773183eb1354b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:40:30 2012 -0500

    Speed up colorless diff

 test/shaping/hb_test_tools.py | 6 ++++++
 1 file changed, 6 insertions(+)

commit 1e58df603457cb4b57da78b5d4a8df66aa7d7be4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:37:31 2012 -0500

    Cleanup manifest code

 test/shaping/hb_test_tools.py | 18 ++++++++++++------
 1 file changed, 12 insertions(+), 6 deletions(-)

commit 956d552e108eeb50bb3ad21588830af7a2f3862a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:31:51 2012 -0500

    Port hb-manifest-update to Python

 test/shaping/hb-manifest-update | 23 +++--------------------
 test/shaping/hb_test_tools.py	 | 38
 ++++++++++++++++++++++++++++++--------
 2 files changed, 33 insertions(+), 28 deletions(-)

commit 3a34e9e351ed0ee3eb27f9c0f154bc227f1226bf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:15:41 2012 -0500

    Ignore Broken Pipe errors

 test/shaping/hb_test_tools.py | 76
 +++++++++++++++++++++++++++----------------
 1 file changed, 48 insertions(+), 28 deletions(-)

commit d5300241680844f5625f32792f7dd7181ed05f9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 19:07:22 2012 -0500

    [util] Make clusters work with char offset instead of UTF-8 offset

    This means the --features indices also refer to char position
    instead of byte position now.  Same for cluster values reported
    by hb-shape.

    Will add an option for byte indices later.

 util/options.cc |  7 +++++--
 util/options.hh | 12 ++++++++++++
 2 files changed, 17 insertions(+), 2 deletions(-)

commit 0f68f4a0b5ee78cbdb2a89a9a1a9125afe72ed2f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 21 18:59:48 2012 -0500

    Correctly print out Unicode strings

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f22089ac24f43ff048c2a0f1c1f604ae3a96be8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 21:21:47 2012 -0500

    Misc fixes

 test/shaping/hb-diff	       | 8 ++++----
 test/shaping/hb_test_tools.py | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 96968bfae5ce61a0a098bf0e6acd2210a309a499
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 21:16:34 2012 -0500

    Port hb-manifest-read to Python

 test/shaping/hb-diff-filter-failures |  2 +-
 test/shaping/hb-manifest-read	      | 37 +++------------------------
 test/shaping/hb_test_tools.py	      | 49
 ++++++++++++++++++++++++++++++++----
 3 files changed, 48 insertions(+), 40 deletions(-)

commit a59ed46fa4f7b76605f8ce6e75783ead406468f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 20:56:32 2012 -0500

    Add final residues from test-shape-complex

 .../shaping/texts/in-tree/shaper-arabic/script-nko/misc/MANIFEST | 1 +
 .../shaping/texts/in-tree/shaper-arabic/script-nko/misc/misc.txt |
 5 +++++
 test/shaping/texts/in-tree/shaper-default/MANIFEST		  | 1 +
 .../texts/in-tree/shaper-default/script-linear-b/MANIFEST	  | 1 +
 .../texts/in-tree/shaper-default/script-linear-b/misc/MANIFEST   | 1 +
 .../texts/in-tree/shaper-default/script-linear-b/misc/misc.txt   | 1 +
 test/shaping/texts/in-tree/shaper-indic/MANIFEST		  | 1 +
 .../shaping/texts/in-tree/shaper-indic/south-east-asian/MANIFEST | 1 +
 .../in-tree/shaper-indic/south-east-asian/script-khmer/MANIFEST  | 1 +
 .../shaper-indic/south-east-asian/script-khmer/misc/MANIFEST	  | 1 +
 .../shaper-indic/south-east-asian/script-khmer/misc/misc.txt	  |
 9 +++++++++
 11 files changed, 23 insertions(+)

commit 820e0ed318d9b187a131baa9491d5d390ec33ef4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 20:51:52 2012 -0500

    Add Punjabi tests from test-shape-complex also

 .../texts/in-tree/shaper-indic/indic/script-punjabi/misc/MANIFEST
 | 1 +
 .../texts/in-tree/shaper-indic/indic/script-punjabi/misc/misc.txt
 | 1 +
 2 files changed, 2 insertions(+)

commit a7d71c105772fb612871b4cae59bdae47bbc8751
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 20:50:09 2012 -0500

    Add Tamil test data from Muguntharaj Subramanian

 .../shaper-indic/indic/script-tamil/misc/MANIFEST  |  1 +
 .../shaper-indic/indic/script-tamil/misc/misc.txt  | 43
 ++++++++++++++++++++++
 2 files changed, 44 insertions(+)

commit 5992a9941e7f19181df1e34e79e514ccedc3d284
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 20:48:14 2012 -0500

    Import test data from late test-shape-complex

 .../in-tree/shaper-arabic/script-arabic/MANIFEST   |  1 +
 .../shaper-arabic/script-arabic/misc/MANIFEST	    |  0
 .../in-tree/shaper-arabic/script-mandaic/MANIFEST  |  1 +
 .../shaper-arabic/script-mandaic/misc/MANIFEST     |  0
 .../shaper-arabic/script-mongolian/MANIFEST	    |  1 +
 .../shaper-arabic/script-mongolian/misc/MANIFEST   |  0
 .../in-tree/shaper-arabic/script-nko/MANIFEST	    |  1 +
 .../in-tree/shaper-arabic/script-nko/misc/MANIFEST |  0
 .../in-tree/shaper-arabic/script-syriac/MANIFEST   |  1 +
 .../shaper-arabic/script-syriac/misc/MANIFEST	    |  0
 .../shaper-indic/indic/script-assamese/MANIFEST    |  1 +
 .../indic/script-assamese/misc/MANIFEST	    |  0
 .../shaper-indic/indic/script-bengali/MANIFEST     |  1 +
 .../indic/script-bengali/misc/MANIFEST		    |  1 +
 .../indic/script-bengali/misc/misc.txt		    | 48
 ++++++++++++++++++++++
 .../shaper-indic/indic/script-devanagari/MANIFEST  |  1 +
 .../indic/script-devanagari/misc/MANIFEST	    |  1 +
 .../indic/script-devanagari/misc/misc.txt	    | 23 +++++++++++
 .../shaper-indic/indic/script-gujarati/MANIFEST    |  1 +
 .../indic/script-gujarati/misc/MANIFEST	    |  0
 .../shaper-indic/indic/script-kannada/MANIFEST     |  1 +
 .../indic/script-kannada/misc/MANIFEST		    |  1 +
 .../indic/script-kannada/misc/misc.txt		    | 17 ++++++++
 .../shaper-indic/indic/script-malayalam/MANIFEST   |  1 +
 .../indic/script-malayalam/misc/MANIFEST	    |  1 +
 .../indic/script-malayalam/misc/misc.txt	    | 22 ++++++++++
 .../shaper-indic/indic/script-oriya/MANIFEST	    |  1 +
 .../shaper-indic/indic/script-oriya/misc/MANIFEST  |  1 +
 .../shaper-indic/indic/script-oriya/misc/misc.txt  | 28 +++++++++++++
 .../shaper-indic/indic/script-punjabi/MANIFEST     |  1 +
 .../indic/script-punjabi/misc/MANIFEST		    |  0
 .../shaper-indic/indic/script-sinhala/MANIFEST     |  1 +
 .../indic/script-sinhala/misc/MANIFEST		    |  1 +
 .../indic/script-sinhala/misc/misc.txt		    |  6 +++
 .../shaper-indic/indic/script-tamil/MANIFEST	    |  1 +
 .../shaper-indic/indic/script-tamil/misc/MANIFEST  |  0
 .../shaper-indic/indic/script-telugu/MANIFEST	    |  1 +
 .../shaper-indic/indic/script-telugu/misc/MANIFEST |  1 +
 .../shaper-indic/indic/script-telugu/misc/misc.txt | 11 +++++
 39 files changed, 178 insertions(+)

commit 46ac45647760984c6220f04ba4521038e628b169
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 19:32:17 2012 -0500

    Fix Unicode encoding issue

 test/shaping/hb_test_tools.py | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit ad34e39a4a320310b1edd9fc4d7e740373510c69
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 18:39:27 2012 -0500

    Make test tools interactive

    By bypassing readlines() buffering.

 test/shaping/hb_test_tools.py | 33 +++++++++++++++++++++++++++------
 1 file changed, 27 insertions(+), 6 deletions(-)

commit 91540a7d97051a3d6e97fdcd1e98af23e0780cdd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 18:27:52 2012 -0500

    Move most testing logic into hb_test_tools.py

    The actual utils are one-liners now.

 test/shaping/hb-diff		      |  77 ++-------------
 test/shaping/hb-diff-filter-failures |  27 +-----
 test/shaping/hb-unicode-decode       |  18 +---
 test/shaping/hb-unicode-encode       |  21 +---
 test/shaping/hb-unicode-prettyname   |  53 +----------
 test/shaping/hb_test_tools.py	      | 180
 +++++++++++++++++++++++++++++++++++
 6 files changed, 197 insertions(+), 179 deletions(-)

commit 66aa080033dcff07b8bb5e7b1f0e3511f067d6c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 17:36:10 2012 -0500

    Remove test-shape-complex

    New shaping testsuite and framework coming.

 test/api/Makefile.am		    |	 6 -
 test/api/test-shape-complex.c	    | 1237
 ------------------------------------
 test/shaping/hb-unicode-prettyname |	 1 +
 3 files changed, 1 insertion(+), 1243 deletions(-)

commit ed459bfb63c58b59fc0dbe25021c396e8ef8683c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 17:24:05 2012 -0500

    Add hb-unicode-encode

 test/shaping/hb-unicode-encode | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit d8134bc017ca3383e0978ddee57070eb3aab8964
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 17:18:59 2012 -0500

    [hb-shape] Add parantheses around --show-text output

 util/options.cc | 2 ++
 1 file changed, 2 insertions(+)

commit b12c4d43614199f8910a06507603f6c431d9df67
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 17:17:44 2012 -0500

    Add hb-diff-filter-failures

 test/shaping/hb-diff-filter-failures | 28 ++++++++++++++++++++++++++++
 1 file changed, 28 insertions(+)

commit d4bffbc55bf4c23ab5c7f46af613aeecc79ac515
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 17:16:35 2012 -0500

    Move

 test/shaping/texts/MANIFEST			    |	 4 +-
 test/shaping/texts/in-tree/MANIFEST		    |	 3 +
 test/shaping/texts/in-tree/shaper-arabic/MANIFEST  |	 5 +
 .../in-tree/shaper-arabic/script-arabic/MANIFEST   |	 0
 .../in-tree/shaper-arabic/script-mandaic/MANIFEST  |	 0
 .../shaper-arabic/script-mongolian/MANIFEST	    |	 0
 .../in-tree/shaper-arabic/script-nko/MANIFEST	    |	 0
 .../in-tree/shaper-arabic/script-syriac/MANIFEST   |	 0
 test/shaping/texts/in-tree/shaper-default/MANIFEST |	 0
 test/shaping/texts/in-tree/shaper-indic/MANIFEST   |	 1 +
 .../texts/in-tree/shaper-indic/indic/MANIFEST	    |	11 +
 .../shaper-indic/indic/script-assamese/MANIFEST    |	 1 +
 .../indic/script-assamese/utrrs/LICENSE	    |	19 +
 .../indic/script-assamese/utrrs/MANIFEST	    |	 3 +
 .../indic/script-assamese/utrrs/README		    |	13 +
 .../indic/script-assamese/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	11 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-assamese/utrrs/codepoint/MANIFEST |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	59 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  131 ++
 .../indic/script-assamese/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  139 ++
 .../indic/script-assamese/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-bengali/MANIFEST     |	 1 +
 .../indic/script-bengali/utrrs/LICENSE		    |	19 +
 .../indic/script-bengali/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-bengali/utrrs/README |	13 +
 .../indic/script-bengali/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-bengali/utrrs/codepoint/MANIFEST  |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	58 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  119 ++
 .../indic/script-bengali/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  215 +++
 .../indic/script-bengali/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-devanagari/MANIFEST  |	 1 +
 .../indic/script-devanagari/utrrs/LICENSE	    |	19 +
 .../indic/script-devanagari/utrrs/MANIFEST	    |	 3 +
 .../indic/script-devanagari/utrrs/README	    |	13 +
 .../indic/script-devanagari/utrrs/SOURCES	    |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 8 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	45 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	14 +
 ...tFeatureCodepoint-DevnagariSpecificAddition.txt |	 1 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...ndicFontFeatureCodepoint-GenericPunctuation.txt |	 2 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	16 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	10 +
 .../script-devanagari/utrrs/codepoint/MANIFEST     |	 9 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  185 +++
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  185 +++
 .../indic/script-devanagari/utrrs/gpos/MANIFEST    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1367
 ++++++++++++++++++++
 .../indic/script-devanagari/utrrs/gsub/MANIFEST    |	 1 +
 .../shaper-indic/indic/script-gujarati/MANIFEST    |	 1 +
 .../indic/script-gujarati/utrrs/LICENSE	    |	19 +
 .../indic/script-gujarati/utrrs/MANIFEST	    |	 3 +
 .../indic/script-gujarati/utrrs/README		    |	13 +
 .../indic/script-gujarati/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	13 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 7 +
 .../indic/script-gujarati/utrrs/codepoint/MANIFEST |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  170 +++
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  170 +++
 .../indic/script-gujarati/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1156
 +++++++++++++++++
 .../indic/script-gujarati/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-kannada/MANIFEST     |	 1 +
 .../indic/script-kannada/utrrs/LICENSE		    |	19 +
 .../indic/script-kannada/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-kannada/utrrs/README |	13 +
 .../indic/script-kannada/utrrs/SOURCES		    |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 1 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 9 +
 .../indic/script-kannada/utrrs/codepoint/MANIFEST  |	 8 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  188 +++
 .../indic/script-kannada/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  306 +++++
 .../indic/script-kannada/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-malayalam/MANIFEST   |	 1 +
 .../indic/script-malayalam/utrrs/LICENSE	    |	19 +
 .../indic/script-malayalam/utrrs/MANIFEST	    |	 2 +
 .../indic/script-malayalam/utrrs/README	    |	13 +
 .../indic/script-malayalam/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 +
 .../script-malayalam/utrrs/codepoint/MANIFEST	    |	 7 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  254 ++++
 .../indic/script-malayalam/utrrs/gsub/MANIFEST     |	 1 +
 .../shaper-indic/indic/script-oriya/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-oriya/utrrs/LICENSE  |	19 +
 .../shaper-indic/indic/script-oriya/utrrs/MANIFEST |	 2 +
 .../shaper-indic/indic/script-oriya/utrrs/README   |	13 +
 .../shaper-indic/indic/script-oriya/utrrs/SOURCES  |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 3 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-OriyaSpecific.txt    |	 2 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 8 +
 .../indic/script-oriya/utrrs/codepoint/MANIFEST    |	 9 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  170 +++
 .../indic/script-oriya/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-punjabi/MANIFEST     |	 1 +
 .../indic/script-punjabi/utrrs/LICENSE		    |	19 +
 .../indic/script-punjabi/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-punjabi/utrrs/README |	13 +
 .../indic/script-punjabi/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	 9 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 .../IndicFontFeatureCodepoint-GurmukhiSpecific.txt |	 6 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	10 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-punjabi/utrrs/codepoint/MANIFEST  |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	22 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	 2 +
 .../indic/script-punjabi/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  152 +++
 .../indic/script-punjabi/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-sinhala/MANIFEST     |	 1 +
 .../indic/script-sinhala/utrrs/LICENSE		    |	19 +
 .../indic/script-sinhala/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-sinhala/utrrs/README |	13 +
 .../indic/script-sinhala/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	41 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	17 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	18 +
 .../IndicFontFeatureCodepoint-Punctuation.txt	    |	 1 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 3 +
 .../indic/script-sinhala/utrrs/codepoint/MANIFEST  |	 5 +
 .../utrrs/gpos/IndicFontFeatureGPOS.txt	    |  162 +++
 .../indic/script-sinhala/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Conjunct.txt   |	 1 +
 .../gsub/IndicFontFeatureGSUB-Rakaaraansaya.txt    |	41 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Repaya.txt     |	42 +
 .../gsub/IndicFontFeatureGSUB-Special-Cases.txt    |	 2 +
 .../gsub/IndicFontFeatureGSUB-TouchingLetters.txt  |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Yansaya.txt    |	41 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 1 +
 .../indic/script-sinhala/utrrs/gsub/MANIFEST	    |	 7 +
 .../shaper-indic/indic/script-tamil/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-tamil/utrrs/LICENSE  |	19 +
 .../shaper-indic/indic/script-tamil/utrrs/MANIFEST |	 3 +
 .../shaper-indic/indic/script-tamil/utrrs/README   |	13 +
 .../shaper-indic/indic/script-tamil/utrrs/SOURCES  |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	23 +
 .../IndicFontFeatureCodepoint-CurrencySymbols.txt  |	 1 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	11 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-Numerics.txt	    |	 3 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-Symbols.txt	    |	 6 +
 .../IndicFontFeatureCodepoint-TamilSymbol.txt	    |	 1 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 +
 .../indic/script-tamil/utrrs/codepoint/MANIFEST    |	10 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	64 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	44 +
 .../indic/script-tamil/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 4 +
 .../indic/script-tamil/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-telugu/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-telugu/utrrs/LICENSE |	19 +
 .../indic/script-telugu/utrrs/MANIFEST		    |	 3 +
 .../shaper-indic/indic/script-telugu/utrrs/README  |	13 +
 .../shaper-indic/indic/script-telugu/utrrs/SOURCES |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-telugu/utrrs/codepoint/MANIFEST   |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  385 ++++++
 .../indic/script-telugu/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  287 ++++
 .../indic/script-telugu/utrrs/gsub/MANIFEST	    |	 1 +
 test/shaping/texts/shaper-arabic/MANIFEST	    |	 5 -
 .../texts/shaper-arabic/script-arabic/MANIFEST     |	 0
 .../texts/shaper-arabic/script-mandaic/MANIFEST    |	 0
 .../texts/shaper-arabic/script-mongolian/MANIFEST  |	 0
 .../texts/shaper-arabic/script-nko/MANIFEST	    |	 0
 .../texts/shaper-arabic/script-syriac/MANIFEST     |	 0
 test/shaping/texts/shaper-default/MANIFEST	    |	 0
 test/shaping/texts/shaper-indic/MANIFEST	    |	 1 -
 test/shaping/texts/shaper-indic/indic/MANIFEST     |	11 -
 .../shaper-indic/indic/script-assamese/MANIFEST    |	 1 -
 .../indic/script-assamese/utrrs/LICENSE	    |	19 -
 .../indic/script-assamese/utrrs/MANIFEST	    |	 3 -
 .../indic/script-assamese/utrrs/README		    |	13 -
 .../indic/script-assamese/utrrs/SOURCES	    |	 2 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	11 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 -
 .../indic/script-assamese/utrrs/codepoint/MANIFEST |	 7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	59 -
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  131 --
 .../indic/script-assamese/utrrs/gpos/MANIFEST	    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  139 --
 .../indic/script-assamese/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-bengali/MANIFEST     |	 1 -
 .../indic/script-bengali/utrrs/LICENSE		    |	19 -
 .../indic/script-bengali/utrrs/MANIFEST	    |	 3 -
 .../shaper-indic/indic/script-bengali/utrrs/README |	13 -
 .../indic/script-bengali/utrrs/SOURCES		    |	 2 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 -
 .../indic/script-bengali/utrrs/codepoint/MANIFEST  |	 7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	58 -
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  119 --
 .../indic/script-bengali/utrrs/gpos/MANIFEST	    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  215 ---
 .../indic/script-bengali/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-devanagari/MANIFEST  |	 1 -
 .../indic/script-devanagari/utrrs/LICENSE	    |	19 -
 .../indic/script-devanagari/utrrs/MANIFEST	    |	 3 -
 .../indic/script-devanagari/utrrs/README	    |	13 -
 .../indic/script-devanagari/utrrs/SOURCES	    |	 2 -
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 8 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	45 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	14 -
 ...tFeatureCodepoint-DevnagariSpecificAddition.txt |	 1 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...ndicFontFeatureCodepoint-GenericPunctuation.txt |	 2 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	16 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	10 -
 .../script-devanagari/utrrs/codepoint/MANIFEST     |	 9 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  185 ---
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  185 ---
 .../indic/script-devanagari/utrrs/gpos/MANIFEST    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1367
 --------------------
 .../indic/script-devanagari/utrrs/gsub/MANIFEST    |	 1 -
 .../shaper-indic/indic/script-gujarati/MANIFEST    |	 1 -
 .../indic/script-gujarati/utrrs/LICENSE	    |	19 -
 .../indic/script-gujarati/utrrs/MANIFEST	    |	 3 -
 .../indic/script-gujarati/utrrs/README		    |	13 -
 .../indic/script-gujarati/utrrs/SOURCES	    |	 2 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	13 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 7 -
 .../indic/script-gujarati/utrrs/codepoint/MANIFEST |	 7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  170 ---
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  170 ---
 .../indic/script-gujarati/utrrs/gpos/MANIFEST	    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1156
 -----------------
 .../indic/script-gujarati/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-kannada/MANIFEST     |	 1 -
 .../indic/script-kannada/utrrs/LICENSE		    |	19 -
 .../indic/script-kannada/utrrs/MANIFEST	    |	 3 -
 .../shaper-indic/indic/script-kannada/utrrs/README |	13 -
 .../indic/script-kannada/utrrs/SOURCES		    |	 2 -
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 1 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 9 -
 .../indic/script-kannada/utrrs/codepoint/MANIFEST  |	 8 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  188 ---
 .../indic/script-kannada/utrrs/gpos/MANIFEST	    |	 1 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  306 -----
 .../indic/script-kannada/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-malayalam/MANIFEST   |	 1 -
 .../indic/script-malayalam/utrrs/LICENSE	    |	19 -
 .../indic/script-malayalam/utrrs/MANIFEST	    |	 2 -
 .../indic/script-malayalam/utrrs/README	    |	13 -
 .../indic/script-malayalam/utrrs/SOURCES	    |	 2 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 -
 .../script-malayalam/utrrs/codepoint/MANIFEST	    |	 7 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  254 ----
 .../indic/script-malayalam/utrrs/gsub/MANIFEST     |	 1 -
 .../texts/shaper-indic/indic/script-oriya/MANIFEST |	 1 -
 .../shaper-indic/indic/script-oriya/utrrs/LICENSE  |	19 -
 .../shaper-indic/indic/script-oriya/utrrs/MANIFEST |	 2 -
 .../shaper-indic/indic/script-oriya/utrrs/README   |	13 -
 .../shaper-indic/indic/script-oriya/utrrs/SOURCES  |	 2 -
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 3 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 -
 .../IndicFontFeatureCodepoint-OriyaSpecific.txt    |	 2 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 8 -
 .../indic/script-oriya/utrrs/codepoint/MANIFEST    |	 9 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  170 ---
 .../indic/script-oriya/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-punjabi/MANIFEST     |	 1 -
 .../indic/script-punjabi/utrrs/LICENSE		    |	19 -
 .../indic/script-punjabi/utrrs/MANIFEST	    |	 3 -
 .../shaper-indic/indic/script-punjabi/utrrs/README |	13 -
 .../indic/script-punjabi/utrrs/SOURCES		    |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	 9 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 .../IndicFontFeatureCodepoint-GurmukhiSpecific.txt |	 6 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	10 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 -
 .../indic/script-punjabi/utrrs/codepoint/MANIFEST  |	 7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	22 -
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	 2 -
 .../indic/script-punjabi/utrrs/gpos/MANIFEST	    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  152 ---
 .../indic/script-punjabi/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-sinhala/MANIFEST     |	 1 -
 .../indic/script-sinhala/utrrs/LICENSE		    |	19 -
 .../indic/script-sinhala/utrrs/MANIFEST	    |	 3 -
 .../shaper-indic/indic/script-sinhala/utrrs/README |	13 -
 .../indic/script-sinhala/utrrs/SOURCES		    |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	41 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	17 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	18 -
 .../IndicFontFeatureCodepoint-Punctuation.txt	    |	 1 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 3 -
 .../indic/script-sinhala/utrrs/codepoint/MANIFEST  |	 5 -
 .../utrrs/gpos/IndicFontFeatureGPOS.txt	    |  162 ---
 .../indic/script-sinhala/utrrs/gpos/MANIFEST	    |	 1 -
 .../utrrs/gsub/IndicFontFeatureGSUB-Conjunct.txt   |	 1 -
 .../gsub/IndicFontFeatureGSUB-Rakaaraansaya.txt    |	41 -
 .../utrrs/gsub/IndicFontFeatureGSUB-Repaya.txt     |	42 -
 .../gsub/IndicFontFeatureGSUB-Special-Cases.txt    |	 2 -
 .../gsub/IndicFontFeatureGSUB-TouchingLetters.txt  |	 1 -
 .../utrrs/gsub/IndicFontFeatureGSUB-Yansaya.txt    |	41 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 1 -
 .../indic/script-sinhala/utrrs/gsub/MANIFEST	    |	 7 -
 .../texts/shaper-indic/indic/script-tamil/MANIFEST |	 1 -
 .../shaper-indic/indic/script-tamil/utrrs/LICENSE  |	19 -
 .../shaper-indic/indic/script-tamil/utrrs/MANIFEST |	 3 -
 .../shaper-indic/indic/script-tamil/utrrs/README   |	13 -
 .../shaper-indic/indic/script-tamil/utrrs/SOURCES  |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	23 -
 .../IndicFontFeatureCodepoint-CurrencySymbols.txt  |	 1 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	11 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 -
 .../IndicFontFeatureCodepoint-Numerics.txt	    |	 3 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-Symbols.txt	    |	 6 -
 .../IndicFontFeatureCodepoint-TamilSymbol.txt	    |	 1 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 -
 .../indic/script-tamil/utrrs/codepoint/MANIFEST    |	10 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	64 -
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	44 -
 .../indic/script-tamil/utrrs/gpos/MANIFEST	    |	 2 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 4 -
 .../indic/script-tamil/utrrs/gsub/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-telugu/MANIFEST	    |	 1 -
 .../shaper-indic/indic/script-telugu/utrrs/LICENSE |	19 -
 .../indic/script-telugu/utrrs/MANIFEST		    |	 3 -
 .../shaper-indic/indic/script-telugu/utrrs/README  |	13 -
 .../shaper-indic/indic/script-telugu/utrrs/SOURCES |	 2 -
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 -
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 -
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 -
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 -
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 -
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 -
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 -
 .../indic/script-telugu/utrrs/codepoint/MANIFEST   |	 7 -
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  385 ------
 .../indic/script-telugu/utrrs/gpos/MANIFEST	    |	 1 -
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  287 ----
 .../indic/script-telugu/utrrs/gsub/MANIFEST	    |	 1 -
 422 files changed, 7601 insertions(+), 7600 deletions(-)

commit 45f640c98d752161e51eda63061d70fad9ab9f68
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 14:24:21 2012 -0500

    Minor

 test/shaping/hb-diff | 35 ++++++++++++++++++++---------------
 1 file changed, 20 insertions(+), 15 deletions(-)

commit 47ca766a9cbdfb304f60e23a4dee0a155075a277
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 14:21:53 2012 -0500

    Minor

 test/shaping/hb-unicode-decode     | 2 +-
 test/shaping/hb-unicode-prettyname | 5 ++---
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 8f1db07894674b02c36ca9352e666b4618ee8832
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:57:57 2012 -0500

    [test/shaping] Add some Indic test data for the new test suite

    Imported from UTRRS.

 test/shaping/texts/shaper-indic/indic/MANIFEST     |	 2 +-
 .../shaper-indic/indic/script-assamese/MANIFEST    |	 1 +
 .../indic/script-assamese/utrrs/LICENSE	    |	19 +
 .../indic/script-assamese/utrrs/MANIFEST	    |	 3 +
 .../indic/script-assamese/utrrs/README		    |	13 +
 .../indic/script-assamese/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	11 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-assamese/utrrs/codepoint/MANIFEST |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	59 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  131 ++
 .../indic/script-assamese/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  139 ++
 .../indic/script-assamese/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-bengali/MANIFEST     |	 1 +
 .../indic/script-bengali/utrrs/LICENSE		    |	19 +
 .../indic/script-bengali/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-bengali/utrrs/README |	13 +
 .../indic/script-bengali/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	10 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-bengali/utrrs/codepoint/MANIFEST  |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	58 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  119 ++
 .../indic/script-bengali/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  215 +++
 .../indic/script-bengali/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-devanagari/MANIFEST  |	 1 +
 .../indic/script-devanagari/utrrs/LICENSE	    |	19 +
 .../indic/script-devanagari/utrrs/MANIFEST	    |	 3 +
 .../indic/script-devanagari/utrrs/README	    |	13 +
 .../indic/script-devanagari/utrrs/SOURCES	    |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 8 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	45 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	14 +
 ...tFeatureCodepoint-DevnagariSpecificAddition.txt |	 1 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...ndicFontFeatureCodepoint-GenericPunctuation.txt |	 2 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	16 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	10 +
 .../script-devanagari/utrrs/codepoint/MANIFEST     |	 9 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  185 +++
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  185 +++
 .../indic/script-devanagari/utrrs/gpos/MANIFEST    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1367
 ++++++++++++++++++++
 .../indic/script-devanagari/utrrs/gsub/MANIFEST    |	 1 +
 .../shaper-indic/indic/script-gujarati/MANIFEST    |	 1 +
 .../indic/script-gujarati/utrrs/LICENSE	    |	19 +
 .../indic/script-gujarati/utrrs/MANIFEST	    |	 3 +
 .../indic/script-gujarati/utrrs/README		    |	13 +
 .../indic/script-gujarati/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 1 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	13 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 7 +
 .../indic/script-gujarati/utrrs/codepoint/MANIFEST |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  170 +++
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |  170 +++
 .../indic/script-gujarati/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    | 1156
 +++++++++++++++++
 .../indic/script-gujarati/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-kannada/MANIFEST     |	 1 +
 .../indic/script-kannada/utrrs/LICENSE		    |	19 +
 .../indic/script-kannada/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-kannada/utrrs/README |	13 +
 .../indic/script-kannada/utrrs/SOURCES		    |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 1 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 4 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	40 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 9 +
 .../indic/script-kannada/utrrs/codepoint/MANIFEST  |	 8 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  188 +++
 .../indic/script-kannada/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  306 +++++
 .../indic/script-kannada/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-malayalam/MANIFEST   |	 1 +
 .../indic/script-malayalam/utrrs/LICENSE	    |	19 +
 .../indic/script-malayalam/utrrs/MANIFEST	    |	 2 +
 .../indic/script-malayalam/utrrs/README	    |	13 +
 .../indic/script-malayalam/utrrs/SOURCES	    |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	36 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 +
 .../script-malayalam/utrrs/codepoint/MANIFEST	    |	 7 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  254 ++++
 .../indic/script-malayalam/utrrs/gsub/MANIFEST     |	 1 +
 .../texts/shaper-indic/indic/script-oriya/MANIFEST |	 1 +
 .../shaper-indic/indic/script-oriya/utrrs/LICENSE  |	19 +
 .../shaper-indic/indic/script-oriya/utrrs/MANIFEST |	 2 +
 .../shaper-indic/indic/script-oriya/utrrs/README   |	13 +
 .../shaper-indic/indic/script-oriya/utrrs/SOURCES  |	 2 +
 ...icFontFeatureCodepoint-AdditionalConsonants.txt |	 3 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	34 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	12 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-OriyaSpecific.txt    |	 2 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 8 +
 .../indic/script-oriya/utrrs/codepoint/MANIFEST    |	 9 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  170 +++
 .../indic/script-oriya/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-punjabi/MANIFEST     |	 1 +
 .../indic/script-punjabi/utrrs/LICENSE		    |	19 +
 .../indic/script-punjabi/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-punjabi/utrrs/README |	13 +
 .../indic/script-punjabi/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	 9 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 .../IndicFontFeatureCodepoint-GurmukhiSpecific.txt |	 6 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	10 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-punjabi/utrrs/codepoint/MANIFEST  |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	22 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	 2 +
 .../indic/script-punjabi/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  152 +++
 .../indic/script-punjabi/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-sinhala/MANIFEST     |	 1 +
 .../indic/script-sinhala/utrrs/LICENSE		    |	19 +
 .../indic/script-sinhala/utrrs/MANIFEST	    |	 3 +
 .../shaper-indic/indic/script-sinhala/utrrs/README |	13 +
 .../indic/script-sinhala/utrrs/SOURCES		    |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	41 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	17 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	18 +
 .../IndicFontFeatureCodepoint-Punctuation.txt	    |	 1 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 3 +
 .../indic/script-sinhala/utrrs/codepoint/MANIFEST  |	 5 +
 .../utrrs/gpos/IndicFontFeatureGPOS.txt	    |  162 +++
 .../indic/script-sinhala/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Conjunct.txt   |	 1 +
 .../gsub/IndicFontFeatureGSUB-Rakaaraansaya.txt    |	41 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Repaya.txt     |	42 +
 .../gsub/IndicFontFeatureGSUB-Special-Cases.txt    |	 2 +
 .../gsub/IndicFontFeatureGSUB-TouchingLetters.txt  |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB-Yansaya.txt    |	41 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 1 +
 .../indic/script-sinhala/utrrs/gsub/MANIFEST	    |	 7 +
 .../texts/shaper-indic/indic/script-tamil/MANIFEST |	 1 +
 .../shaper-indic/indic/script-tamil/utrrs/LICENSE  |	19 +
 .../shaper-indic/indic/script-tamil/utrrs/MANIFEST |	 3 +
 .../shaper-indic/indic/script-tamil/utrrs/README   |	13 +
 .../shaper-indic/indic/script-tamil/utrrs/SOURCES  |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	23 +
 .../IndicFontFeatureCodepoint-CurrencySymbols.txt  |	 1 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	11 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	12 +
 .../IndicFontFeatureCodepoint-Numerics.txt	    |	 3 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-Symbols.txt	    |	 6 +
 .../IndicFontFeatureCodepoint-TamilSymbol.txt	    |	 1 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 4 +
 .../indic/script-tamil/utrrs/codepoint/MANIFEST    |	10 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |	64 +
 .../utrrs/gpos/IndicFontFeatureGPOS-BelowBase.txt  |	44 +
 .../indic/script-tamil/utrrs/gpos/MANIFEST	    |	 2 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |	 4 +
 .../indic/script-tamil/utrrs/gsub/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-telugu/MANIFEST	    |	 1 +
 .../shaper-indic/indic/script-telugu/utrrs/LICENSE |	19 +
 .../indic/script-telugu/utrrs/MANIFEST		    |	 3 +
 .../shaper-indic/indic/script-telugu/utrrs/README  |	13 +
 .../shaper-indic/indic/script-telugu/utrrs/SOURCES |	 2 +
 .../IndicFontFeatureCodepoint-AdditionalVowels.txt |	 2 +
 .../IndicFontFeatureCodepoint-Consonants.txt	    |	38 +
 .../IndicFontFeatureCodepoint-DependentVowels.txt  |	13 +
 .../codepoint/IndicFontFeatureCodepoint-Digits.txt |	10 +
 ...IndicFontFeatureCodepoint-IndependentVowels.txt |	14 +
 .../IndicFontFeatureCodepoint-Reserved.txt	    |	 2 +
 .../IndicFontFeatureCodepoint-VariousSigns.txt     |	 6 +
 .../indic/script-telugu/utrrs/codepoint/MANIFEST   |	 7 +
 .../utrrs/gpos/IndicFontFeatureGPOS-AboveBase.txt  |  385 ++++++
 .../indic/script-telugu/utrrs/gpos/MANIFEST	    |	 1 +
 .../utrrs/gsub/IndicFontFeatureGSUB.txt	    |  287 ++++
 .../indic/script-telugu/utrrs/gsub/MANIFEST	    |	 1 +
 202 files changed, 7581 insertions(+), 1 deletion(-)

commit 11267aef364b1cc5683ce65aaf544b7f2a127fb3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:57:14 2012 -0500

    Fix

 test/shaping/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4e84ce48d5d41cf1bad2fb8774e5c66745b0e75e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:50:55 2012 -0500

    Move hb-diff to test/shaping/

 test/shaping/hb-diff | 70
 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 util/Makefile.am     |  2 --
 util/hb-diff	      | 70
 ----------------------------------------------------
 3 files changed, 70 insertions(+), 72 deletions(-)

commit f868e1b84d2f73688d4d6558d44610b1ac75ec13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:50:05 2012 -0500

    Add hb-unicode-decode

 test/shaping/hb-manifest-read	  | 36
 ++++++++++++++++++++++++++++++++++++
 test/shaping/hb-manifest-update  | 22 ++++++++++++++++++++++
 test/shaping/hb-read-manifest	  | 36
 ------------------------------------
 test/shaping/hb-unicode-decode   | 19 +++++++++++++++++++
 test/shaping/hb-update-manifests | 22 ----------------------
 5 files changed, 77 insertions(+), 58 deletions(-)

commit 9ab23ef4749b51e60464b9ef2a92739cdc2b36ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:49:56 2012 -0500

    Minor

 test/shaping/hb-unicode-prettyname | 5 +++++
 1 file changed, 5 insertions(+)

commit c8d81db03335192f20f08ab8fabe9869fd7350a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:39:27 2012 -0500

    Recognize more characters

 test/shaping/hb-unicode-prettyname | 7 +++++++
 1 file changed, 7 insertions(+)

commit 0016d4662d486fa32c2191df801a2792f44b273c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jan 20 13:31:59 2012 -0500

    [test] Make hb-unicode-prettyname take a --stdin option

 test/shaping/hb-unicode-prettyname | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit ad8c6446f2e0d21d065203924467f6a2c418401e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 20:28:31 2012 -0500

    [test/shaping] Add hb-unicode-prettyname

 test/shaping/hb-unicode-prettyname | 38
 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit e900869b0f373d25b72d966338beb6cbc53e6446
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 20:28:15 2012 -0500

    [test/shaping] Add hb-read-manifest

 test/shaping/hb-read-manifest | 36 ++++++++++++++++++++++++++++++++++++
 1 file changed, 36 insertions(+)

commit a211cd3ffce3aa100e92d837384bbaa9decf6b09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 20:27:53 2012 -0500

    Ignore AUTHORS also

 test/shaping/hb-update-manifests | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c91c4fa47140c0d6191241a832fc534b1c1514ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 17:51:57 2012 -0500

    [hb-shape] Change glyphstring brackets from </> to [/]

    Sorry for the disruption but I need this to differentiate from the
    Unicode string.

 util/options.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 36fe87d1b4bf8317074a597501d1ee52c0bec38d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 16:55:26 2012 -0500

    More Indic tests from Pravin

 test/api/test-shape-complex.c | 48
 +++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 48 insertions(+)

commit a33e46cf7d9862856fd7ecb04e047cc58a9785c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 15:43:48 2012 -0500

    [test/shaping] Add hb-update-manifests

 test/shaping/Makefile.am			|  6 ++----
 test/shaping/hb-update-manifests		| 22
 ++++++++++++++++++++++
 test/shaping/texts/shaper-indic/indic/MANIFEST |  1 +
 3 files changed, 25 insertions(+), 4 deletions(-)

commit d4de562adf691425b15e3e9c0eec035feaa60413
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 15:21:04 2012 -0500

    Start adding new shaping test suite together

 configure.ac							|  1 +
 test/Makefile.am						|  2 +-
 test/shaping/Makefile.am					|
 10 ++++++++++
 test/shaping/texts/MANIFEST					|  3 +++
 test/shaping/texts/shaper-arabic/MANIFEST			|  5 +++++
 test/shaping/texts/shaper-arabic/script-arabic/MANIFEST	|  0
 test/shaping/texts/shaper-arabic/script-mandaic/MANIFEST	|  0
 test/shaping/texts/shaper-arabic/script-mongolian/MANIFEST	|  0
 test/shaping/texts/shaper-arabic/script-nko/MANIFEST		|  0
 test/shaping/texts/shaper-arabic/script-syriac/MANIFEST	|  0
 test/shaping/texts/shaper-default/MANIFEST			|  0
 test/shaping/texts/shaper-indic/MANIFEST			|  1 +
 test/shaping/texts/shaper-indic/indic/MANIFEST			|
 10 ++++++++++
 test/shaping/texts/shaper-indic/indic/script-assamese/MANIFEST |  0
 test/shaping/texts/shaper-indic/indic/script-bengali/MANIFEST	|  0
 .../texts/shaper-indic/indic/script-devanagari/MANIFEST	|  0
 test/shaping/texts/shaper-indic/indic/script-gujarati/MANIFEST |  0
 test/shaping/texts/shaper-indic/indic/script-kannada/MANIFEST	|  0
 .../shaping/texts/shaper-indic/indic/script-malayalam/MANIFEST |  0
 test/shaping/texts/shaper-indic/indic/script-oriya/MANIFEST	|  0
 test/shaping/texts/shaper-indic/indic/script-punjabi/MANIFEST	|  0
 test/shaping/texts/shaper-indic/indic/script-tamil/MANIFEST	|  0
 test/shaping/texts/shaper-indic/indic/script-telugu/MANIFEST	|  0
 23 files changed, 31 insertions(+), 1 deletion(-)

commit 7a4a848db27d1605195f677c9c8632cde558aa05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 15:15:21 2012 -0500

    Minor

 src/hb-ot-shape-complex-private.hh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 4d6dafd47f4271549e528d2e8047d50562aef399
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 14:52:02 2012 -0500

    Rename test/ to test/api/

 configure.ac		       |    1 +
 test/Makefile.am	       |  128 +----
 test/api/Makefile.am	       |  131 +++++
 test/api/hb-test.h	       |  265 +++++++++
 test/api/test-blob.c	       |  301 +++++++++++
 test/api/test-buffer.c        |  783 +++++++++++++++++++++++++++
 test/api/test-c.c	       |   58 ++
 test/api/test-common.c        |  213 ++++++++
 test/api/test-cplusplus.cc    |   30 ++
 test/api/test-font.c	       |  502 +++++++++++++++++
 test/api/test-object.c        |  367 +++++++++++++
 test/api/test-ot-tag.c        |  241 +++++++++
 test/api/test-shape-complex.c | 1189
 +++++++++++++++++++++++++++++++++++++++++
 test/api/test-shape.c	       |  165 ++++++
 test/api/test-unicode.c       |  887 ++++++++++++++++++++++++++++++
 test/api/test-version.c       |   80 +++
 test/hb-test.h		       |  265 ---------
 test/test-blob.c	       |  301 -----------
 test/test-buffer.c	       |  783 ---------------------------
 test/test-c.c		       |   58 --
 test/test-common.c	       |  213 --------
 test/test-cplusplus.cc        |   30 --
 test/test-font.c	       |  502 -----------------
 test/test-object.c	       |  367 -------------
 test/test-ot-tag.c	       |  241 ---------
 test/test-shape-complex.c     | 1189
 -----------------------------------------
 test/test-shape.c	       |  165 ------
 test/test-unicode.c	       |  887 ------------------------------
 test/test-version.c	       |   80 ---
 29 files changed, 5214 insertions(+), 5208 deletions(-)

commit 3b5c22c39b87155f315853fb0c40edcf14e99b54
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 14:28:11 2012 -0500

    Remove src/test.cc

    Not really useful.

 src/Makefile.am |   6 +--
 src/test.cc	 | 132
 --------------------------------------------------------
 2 files changed, 1 insertion(+), 137 deletions(-)

commit 4983feebbbb25e79201bf34035e4d58e61218758
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 13:54:52 2012 -0500

    [hb-diff] Clean up

 util/hb-diff | 41 ++++++++++++++++++++++++++---------------
 1 file changed, 26 insertions(+), 15 deletions(-)

commit cdc673d97c5ffedb386865a81f54a5cedcbad27c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 12:46:18 2012 -0500

    [hb-shape] Add --show-line-num

    Ok, much more useful as a test suite driver now.

 util/hb-shape.cc | 24 +++++-------------------
 util/options.cc  | 34 ++++++++++++++++++++++++++++++++++
 util/options.hh  | 25 ++++++++++++++++++++-----
 3 files changed, 59 insertions(+), 24 deletions(-)

commit cc4d9810d6318ca2e4de3b8d62f03b51cc21ee05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 12:32:20 2012 -0500

    [hb-shape] Add --show-text and --show-unicode options

 util/hb-shape.cc | 19 ++++++++++++++++++-
 util/options.cc  | 26 +++++++++++++++++++++++---
 util/options.hh  | 12 +++++++++---
 3 files changed, 50 insertions(+), 7 deletions(-)

commit 27c36af411c7c4d75dd25d79fc76dd92c6bb9643
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 12:30:43 2012 -0500

    Fix OOB in hb-shape

 util/options.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8d2781d69274672303e30522e222bd01c6b5e781
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 19 11:36:39 2012 -0500

    [test] Add two Indic test cases from Bernard Massot

 test/test-shape-complex.c | 16 ++++++++++++++++
 1 file changed, 16 insertions(+)

commit 8750abaf8410005facbea8c886c592bead7f959b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 22:47:44 2012 -0500

    [util] Add --help-features

    Patch from Khaled Hosny.

 util/options.cc | 42 +++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 41 insertions(+), 1 deletion(-)

commit 889caa52fa1bef61013ec1d127f84d7d5907ef1e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 22:32:52 2012 -0500

    [icu] Use U_FAILURE

 src/hb-icu.cc | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 36a4f4a482456ee816dcb59befa0b0538ba487df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 22:16:49 2012 -0500

    Replace u_strlen() with u_countChar32()

    The latter is what I meant.

 src/hb-icu.cc | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 055fb24d03ae518fa0aa6c2860a03f3cb6a5ef0d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 21:58:34 2012 -0500

    Add test for bug in ICU decompose

    As reported by Kenichi Ishibashi on 2011-10-28.

 test/test-unicode.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c521e793bd6c1dafacb94253a45b9c70ab38525e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 21:51:05 2012 -0500

    Fix OOB in replace_glyph()

    Patch from Kenichi Ishibashi.

 src/hb-buffer.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 03408ce73d003ed4e58e3f8472f9445e72b86bee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 21:28:34 2012 -0500

    Fix more possible buffer overruns

    I have this function, but can't clean up it to my satisfaction.

 src/hb-ot-layout-gsubgpos-private.hh | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 7d479900cd11bc88148cd601ee43bc5492ce5843
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 21:19:32 2012 -0500

    Refactor the two remaining uses of _hb_ot_layout_skip_mark()

 src/hb-ot-layout-gsub-table.hh       | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 7 +++++--
 2 files changed, 6 insertions(+), 3 deletions(-)

commit 506ffeb8e77a668fa305139582d215c32e46bb03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 18 16:07:53 2012 -0500

    Further mark skippy fixes from Jonathan Kew

    We should be in good shape now.

 src/hb-ot-layout-gsubgpos-private.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit a4a48fe6d4f884a37e720430347d10dbe3562a79
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 17 18:08:41 2012 -0500

    Fix mark skipping regression

    Ouch!

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ab97311541225906f6b737a2b47de252224cc09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 16 22:05:08 2012 -0500

    Refactor mark skipping

 src/hb-ot-layout-gpos-table.hh       |  95 ++++++++++----------------
 src/hb-ot-layout-gsub-table.hh       |  21 +++---
 src/hb-ot-layout-gsubgpos-private.hh | 125
 +++++++++++++++++++++++++++--------
 3 files changed, 143 insertions(+), 98 deletions(-)

commit 370f03e9c69d98d735eafb7e72b13b17f42cbaa9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 16 17:03:55 2012 -0500

    Minor

 src/hb-ot-layout-gsub-table.hh       | 5 ++---
 src/hb-ot-layout-gsubgpos-private.hh | 6 ++----
 2 files changed, 4 insertions(+), 7 deletions(-)

commit 4d3aeb8cb2bc1ca7cdd03ba28ba8c334f12d4c03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 16 16:43:26 2012 -0500

    [GSUB/GPOS] Fix mark skip indexing issues

    Mozilla bug 701637 and 714067 combined.

    Patch from Jonathan Kew.

 src/hb-ot-layout-gpos-table.hh       | 42
 ++++++++++++++++-----------------
 src/hb-ot-layout-gsub-table.hh       | 21 +++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh | 45
 ++++++++++++++++++------------------
 3 files changed, 54 insertions(+), 54 deletions(-)

commit e8eedf2687f05372bf5476e84139d01ba67c9f73
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 16 16:39:40 2012 -0500

    Avoid enum trailing commas

    Based on patch from Jonathan Kew.

 src/hb-ot-shape-complex-indic.cc   | 4 ++--
 src/hb-ot-shape-complex-private.hh | 2 ++
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 3d0ddd12801689b4093ffca97da4dd9ca669b64a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 15 15:55:52 2012 -0500

    Require glib >= 2.16 for the gobject option

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 95ab82a992ab916046c2e6205db7cadeec88d206
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 15 14:56:56 2012 -0500

    Disable gtk-doc macro

    We don't have any docs yet.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 299ae0c3a367c84a835eadbd1276ca284d2720c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 14 21:29:45 2012 -0500

    [icu] Remove glib-ism

 src/hb-icu.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a097043f9a81e6c20caf69a5dabdf9e00438d79b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jan 14 17:55:51 2012 -0500

    Allow space in one more place when parsing features

 util/options.cc | 2 ++
 1 file changed, 2 insertions(+)

commit af92135424b994062648f4fb7e26af0bd970a4b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 21 09:18:43 2011 -0700

    Minor

 src/hb-object-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 89d89646e8163b6c0874b9a3c14d4da974ea8219
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 17 11:50:54 2011 -0700

    Fix intrin.h b0rkage with older MSVC

    Reported by Jonathan Kew.

 src/hb-object-private.hh | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit af913c5788e600e36d29f44fe4e77db84cf8c442
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 17 11:39:28 2011 -0700

    Fix infinite loop in normalization code with variation selectors

    Reported by Jonathan Kew.

 src/hb-ot-shape-normalize.cc | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit fd528c17b7b5ac912f1ac980e1d9981f561c3b46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 12 15:03:58 2011 -0400

    [util] Add --list-shapers to hb-view and hb-shape

 util/options.cc | 17 ++++++++++++++++-
 1 file changed, 16 insertions(+), 1 deletion(-)

commit a17554bfd51dc8a37b1674d1ede63e616618e0a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 28 16:57:34 2011 -0400

    Make test-c.c actually use hb

    This will make sure we test that C code can actually link to the
    library.

 test/test-c.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 55deff7595ef357d000fef83559c74c9f8acad00
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 28 16:20:09 2011 -0400

    Add comments

 src/hb-ot-shape-normalize.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit a240d5a0a3ccc71902e7a341b6d531995319999d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 27 13:50:45 2011 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 52ebdff49d13f239efc886de935d47be9860f6e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 27 12:38:16 2011 -0400

    Fix GSUB lookuptype 1 subtype 1 delta wrapping

 src/hb-ot-layout-gsub-table.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 5857720cd35078d1c3906c8b2db3190b5166b66f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 27 12:36:26 2011 -0400

    [util] s/%d/%u/ when printing glyph ids and clusters

 util/options.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit b95324cdd217f44c40c5fd44898e659500f19511
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 21 16:50:39 2011 -0400

    Minor

 src/hb-blob.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0cd33592ab4bb486ffc438ba0efdac2fa7a1bb7f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 21 16:49:33 2011 -0400

    Fix possible leaks

 src/hb-font.cc | 16 +++++++++++++---
 1 file changed, 13 insertions(+), 3 deletions(-)

commit d3f3690b485e1d240fec4f204aef54e07853a244
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 21 16:41:43 2011 -0400

    hb-shape: In --no-glyph-names, output glyph number directly

    Ie. write "86" instead of "gid86".

 util/options.cc | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 088c1e27c0fc0cdef999cf1f567e4d5eb2cfb2e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 20 14:43:55 2011 -0400

    [util] Fix option parsing

    Wow, who knew bool is one byte and I was using it as a 4byte int?!

    C++ auto casts fails you in mysterious ways...

 util/helper-cairo.cc |  2 +-
 util/options.cc      |  3 ++-
 util/options.hh      | 14 +++++++-------
 3 files changed, 10 insertions(+), 9 deletions(-)

commit d606daa4cca323c8977b2e52e6863dc0f1b72fa9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 20 14:34:06 2011 -0400

    Whitespace

 src/gen-arabic-table.py | 2 +-
 src/gen-indic-table.py  | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit e700bce1189465a159a7c3c179f231be224f31cc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 20 11:20:53 2011 -0400

    [util] Add hb-diff

    A diff program written in Python that is more suitable for comparing
    hb-shape output from different backends.  Main differences with stock
    diff:

    1. It outputs one line's comparison at a time, as opposed to batching
    '+' lines and '-' lines.

    2. It colors the part of the line that changed, taking word boundaries
    into consideration.

    You can pipe the colored output to 'less -r'.

 util/Makefile.am |  2 ++
 util/hb-diff	  | 59
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 61 insertions(+)

commit 880c1f0e4ede65890592d28dfb38bb06f5b57500
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 23:10:22 2011 -0400

    Rewrite ICU detection code with in-house macros

    At least works for cross-compiling now...

 configure.ac | 26 +++++++++++++++-----------
 1 file changed, 15 insertions(+), 11 deletions(-)

commit f83f0f4836691b04306c2ef80979f2e1d76a2f28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 18:51:48 2011 -0400

    [graphite] Add note about graphite shaker brokenness

 src/hb-graphite2.cc | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 422558142aabb996d8ad1848df7ea4d5a8ade98a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 17:57:02 2011 -0400

    [util] Account for line-space in surface size

 util/options.cc    | 2 +-
 util/options.hh    | 1 -
 util/view-cairo.cc | 2 +-
 3 files changed, 2 insertions(+), 3 deletions(-)

commit b5afd8f78e6b372f1bbed469329c1554adb20eea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:56:21 2011 -0400

    [util] Rename --output to --output_file, and --format to
    --output-format

 util/options.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0a965eee880428a43ad7f9d1317c344666247dd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:53:47 2011 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 4 ++++
 1 file changed, 4 insertions(+)

commit 466393c2f04fb5b3dcb3e81ea9609905fa8c9648
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:50:18 2011 -0400

    Really fix build this time

 util/hb-view.hh | 1 -
 1 file changed, 1 deletion(-)

commit fe1605db4f28ed75d5debe0db45a19aa77f0585f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:49:03 2011 -0400

    Fix dist

 util/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 8b8b19056decaf09e4e0ccd9412ee1aeb30f4de7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:41:17 2011 -0400

    [util] Add hb-shape utility

    Like hb-view, but prints out buffer contents.

    The output format is kinda cryptic.  Suggestions welcome.

 configure.ac	      |   6 -
 util/Makefile.am     |  44 +++---
 util/common.cc       |  43 ------
 util/common.hh       |  57 --------
 util/hb-shape.cc     |  78 +++++++++++
 util/hb-view.cc      |  44 +-----
 util/hb-view.hh      |  79 +++++++++++
 util/helper-cairo.cc | 375
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 util/helper-cairo.hh |  79 +++++++++++
 util/options.cc      |  79 +++++++++++
 util/options.hh      |  53 ++++++-
 util/view-cairo.cc   | 381
 ++-------------------------------------------------
 util/view-cairo.hh   |   8 +-
 13 files changed, 785 insertions(+), 541 deletions(-)

commit eb2d8be7a8ede0c0f5e346cf06516792f83f36f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 16:15:22 2011 -0400

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit f6496663c2f6849a944e41afcf9511f378477532
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 15:45:52 2011 -0400

    [util] If no text is provided, simply call cairo_show_glyphs()

 util/view-cairo.cc | 92
 ++++++++++++++++++++++++++++++------------------------
 1 file changed, 51 insertions(+), 41 deletions(-)

commit 5c299343118d1eaff32ffb2a5dac077cfff67dee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 14:53:26 2011 -0400

    [uniscribe] Various improvements

 src/hb-uniscribe.cc | 30 +++++++++++++++++++-----------
 1 file changed, 19 insertions(+), 11 deletions(-)

commit 11e51993ab562d4c7460eb7c43d0e97404e628e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 19 09:58:55 2011 -0400

    [util] Move font-size into view-options

 util/options.cc    | 2 +-
 util/options.hh    | 7 +++----
 util/view-cairo.cc | 4 ++--
 3 files changed, 6 insertions(+), 7 deletions(-)

commit 0fe296019746689551d224a5f6fb7e0ebe1b91dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Sep 17 09:59:58 2011 -0400

    Fix Linux build when io.h is available

    Bug 40953 - fail compile git: make[2]: *** [hb_view-options.o] Error 1

 configure.ac	 | 2 +-
 util/options.cc | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit d2b3ab9ecebbf46cb9dac1f09c17379c50ea4575
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:59:17 2011 -0400

    Fix "[util] Fix hb-view crash with bogus font."

 util/view-cairo.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit da4a2a1426ee3aa9d9678ec12c9ba4dfcba0bcf8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:56:34 2011 -0400

    Cosmetic

 util/view-cairo.cc | 31 +++++++++++++++++++++++--------
 1 file changed, 23 insertions(+), 8 deletions(-)

commit 4274ed7ab6fb03fbf8eaaa43ab06647dc0beed79
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:52:26 2011 -0400

    [util] Fix hb-view crash with bogus font

 util/view-cairo.cc | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 5ddd9cc499f2470eca239ae357a5c8a3626c0809
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:40:44 2011 -0400

    Minor

 src/hb-private.hh	   | 2 +-
 src/hb-unicode-private.hh | 4 ++--
 src/test.cc		   | 4 ++--
 util/common.hh		   | 2 +-
 util/options.cc	   | 8 ++++----
 5 files changed, 10 insertions(+), 10 deletions(-)

commit 652d64aa8d32d914bf3ee2f2c451de103fea8fa9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:34:39 2011 -0400

    TODO items

 TODO | 6 ++++++
 1 file changed, 6 insertions(+)

commit 947c9a778c0d4b428b58806f98c34ede59b7439c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 16:33:18 2011 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d5476a30a10da5e54783c8dbf04340225a9a00d7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 12:30:50 2011 -0400

    Minor

 src/hb-object-private.hh | 26 +++++++++++++++-----------
 1 file changed, 15 insertions(+), 11 deletions(-)

commit 55aeb0490454cc1ba93a42f307ed1230f59dee4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 02:08:36 2011 -0400

    Fix reading text from stdin

 util/options.cc    | 76
 +++++++++++++++++++++++++++++++++++-------------------
 util/options.hh    | 16 +++++++-----
 util/view-cairo.cc |  6 +++--
 3 files changed, 64 insertions(+), 34 deletions(-)

commit a75c1b125159f6cfb6b652a9ec40803f7c7e3f71
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 01:16:41 2011 -0400

    Move code around

 util/options.cc | 27 +++++++++++++++++++++++++--
 util/options.hh | 20 +-------------------
 2 files changed, 26 insertions(+), 21 deletions(-)

commit 7bf6ecd3bfb1ccf5d9ac6fe274efa74b46885fea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 01:11:30 2011 -0400

    Always shape at size=upem

    Fixes bug with uniscribe not handling GIGANTIC sizes.

 util/options.cc    | 2 +-
 util/view-cairo.cc | 8 ++++----
 util/view-cairo.hh | 2 +-
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 674ee58d9bc9f825d769220d77f58513edae4558
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 00:54:05 2011 -0400

    Minor

 util/options.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 4451168e5d1ea26560899e9a9733b3a3f1853050
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 16 00:38:19 2011 -0400

    Fix binary stdin/stdout io in Windows

    Make --font-file accept "-" to mean stdin, and have it work
    in Windows too!

 configure.ac	 |  2 +-
 util/common.hh  |  5 +++++
 util/options.cc | 64
 +++++++++++++++++++++++++++++++++++++++++++++++----------
 util/options.hh | 10 +++++++--
 4 files changed, 67 insertions(+), 14 deletions(-)

commit 639b5957d9c7b6d8bef6784e3467ccc055ddeea4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 15 18:09:49 2011 -0400

    Minor

 util/options.cc | 5 +++--
 util/options.hh | 4 ++--
 2 files changed, 5 insertions(+), 4 deletions(-)

commit f7e2ef74f856ee13d6fd6cf3f1e04bc162203bc2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 15 17:52:00 2011 -0400

    [hb-view] Make print to stdout work in Windows

    Apparently there's no equivalent to "/dev/stdout", so write using
    stdio to be able to output to stdout.

 util/common.hh     |  1 +
 util/options.hh    | 31 ++++++++++++++++-----
 util/view-cairo.cc | 79
 ++++++++++++++++++++++++++++++++++++------------------
 3 files changed, 78 insertions(+), 33 deletions(-)

commit 36b10f58cc70ce9570d17b30616f9cb27423e03b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 15 16:29:51 2011 -0400

    Minor

 src/hb-ot-shape-normalize.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit c4611cb66f8e3a133ec00e3ace62ef19d9b95b28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 13 13:33:11 2011 -0400

    Fix test

 src/hb-graphite2.h | 1 +
 src/hb-ot-shape.h  | 1 +
 src/hb-uniscribe.h | 1 +
 3 files changed, 3 insertions(+)

commit b9b10ad78b1f977494a3a42b58f8040fe16505a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 13 13:30:39 2011 -0400

    [util] Refactor hb-view completely

    Now we can use the same code to do other utils...

 configure.ac	    |	2 +
 util/Makefile.am   |	2 +
 util/common.cc     |	7 +-
 util/common.hh     |	2 +-
 util/hb-view.cc    | 244 ++++-------------------------
 util/options.cc    | 321 ++++++++++++++++++++++++++------------
 util/options.hh    | 179 +++++++++++++++++++---
 util/view-cairo.cc | 440
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 util/view-cairo.hh |  63 ++++++++
 9 files changed, 927 insertions(+), 333 deletions(-)

commit bc4b07b05ea9e39eb9f966eb2c3e1c737efa77ff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 17:08:32 2011 -0400

    More reshuffling

 util/hb-view.cc |  4 ++--
 util/options.cc | 64
 ++++++++++++++++++++++++++++++---------------------------
 util/options.hh | 13 ++++++------
 3 files changed, 43 insertions(+), 38 deletions(-)

commit 516857eb51bbb79ff4adf44e3fefbf460f9ee8f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 16:50:24 2011 -0400

    [util] Simplify more

 util/options.hh | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 4f4b114a5592c2f5d128ee795f159b438ad97829
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 16:49:02 2011 -0400

    [util] Move code around

 util/hb-view.cc |  8 +-------
 util/options.hh | 14 ++++++++++++++
 2 files changed, 15 insertions(+), 7 deletions(-)

commit 46d86a73a103b061144018c3fe947b57548fc58f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 16:43:15 2011 -0400

    Minor

    We now support using -1 for NUL-terminated strings.

 util/hb-view.cc | 2 --
 1 file changed, 2 deletions(-)

commit 90e312cb85df7a6dc350cb62138ab950790e3d15
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 16:42:37 2011 -0400

    [util] Move code around

 util/hb-view.cc | 5 -----
 util/options.hh | 4 ++++
 2 files changed, 4 insertions(+), 5 deletions(-)

commit 109cb382898f491eed733dba4ef5ba12de94aaf6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 16:00:04 2011 -0400

    [util] Further refactor option parsing

 util/options.cc | 80
 +++++++++++++++++++++++++++++++++++++++++++++++----------
 util/options.hh | 20 ++++++++++++---
 2 files changed, 83 insertions(+), 17 deletions(-)

commit bc187e5ac7433f5561b0e97e8c62172c73883f3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 8 13:35:17 2011 -0400

    Refine Indic scripts, following Martin Hosken's recommendation

 src/hb-ot-shape-complex-private.hh | 56
 +++++++++++++++++++++++---------------
 1 file changed, 34 insertions(+), 22 deletions(-)

commit 738d096a06822e63b3894bd817ecb90e5fb94f73
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 2 13:31:19 2011 -0400

    Pass through unknown ISO 639-3 language tags to OpenType engine

    In hb_ot_tag_from_language(), if first component of an unknown
    language is three letters long, use it directly as OpenType language
    tag (after case conversion and padding).

 src/hb-ot-tag.cc   | 8 ++++++++
 test/test-ot-tag.c | 5 +++++
 2 files changed, 13 insertions(+)

commit ea02cbf03c084b3ead6e9e4c9af07b3b47608d5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Sep 2 12:39:20 2011 -0400

    [graphite] Don't preload glyphs

    Doesn't seem to be slower.

 src/hb-graphite2.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 210a06f3d7bd2df55ebd1743da74f327c5a7a967
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 13:39:49 2011 +0200

    Minor

 src/hb-graphite2.h | 12 ++++++------
 src/hb-ot-shape.h  |  1 -
 src/hb-uniscribe.h |  1 -
 3 files changed, 6 insertions(+), 8 deletions(-)

commit 4a8d2e379a34b19bccc72bc3e2d9ace3fdd27733
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:40:54 2011 +0200

    [graphite2] Chop a few more lines

 src/hb-graphite2.cc | 13 ++++---------
 1 file changed, 4 insertions(+), 9 deletions(-)

commit 81ec289da799bd2f50da9382507c606d2c779ab9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:33:06 2011 +0200

    Minor

 src/hb-graphite2.cc | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit 3380de5abbaff535e1cf57ea7e5c2a7c4fdcfe66
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:30:49 2011 +0200

    [graphite] Use buffer->replace_glyphs()

 src/hb-graphite2.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 9ebe8c0286856d46430ae184ba7303bd34485883
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:29:42 2011 +0200

    Add buffer->replace_glyphs()

 src/hb-buffer-private.hh |  3 +++
 src/hb-buffer.cc	  | 26 ++++++++++++++++++++++++++
 2 files changed, 29 insertions(+)

commit a5edb1031c204464da4f852ba3d90e8cc20cd20e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:27:13 2011 +0200

    Minor

 src/hb-graphite2.cc | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 290e3ee51727df75d136ccfff79831b94d1583b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:25:04 2011 +0200

    [graphite] Only pass the first part language tag to graphite

    Still not sure about:

    1) Case.  We pass lowercase for now.  Would be nice if graphite was
    uppercase 3letter like OpenType,

    2) Padding.  IMO, tag padding is always with spaces, but Martin was
    talking about NUL bytes.

 src/hb-graphite2.cc | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 4c9fe88d30036340fe592bcbc375049b84602b8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 26 09:18:53 2011 +0200

    [API] Make all _from_string() functions take a len parameter

    Can be -1 for NUL-terminated string.  This is useful for passing parts
    of a larger string to a function without having to copy or modify the
    string first.

    Affected functions:

	hb_tag_t hb_tag_from_string()
	hb_direction_from_string()
	hb_language_from_string()
	hb_script_from_string()

 src/hb-common.cc    | 29 +++++++++++++-------
 src/hb-common.h     | 12 +++++---
 src/hb-graphite2.cc |	2 +-
 src/hb-icu.cc	     |	2 +-
 src/hb-ot-tag.cc    |	8 +++---
 test/test-buffer.c  |	4 +--
 test/test-common.c  | 79
 +++++++++++++++++++++++++++++++----------------------
 test/test-ot-tag.c  | 22 +++++++--------
 util/hb-view.cc     |	6 ++--
 util/options.cc     |	5 +---
 10 files changed, 96 insertions(+), 73 deletions(-)

commit a499bdea5cc5097dec62eeafdef58d08ba534be0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 25 22:46:21 2011 +0200

    [graphite2] Bail if grface is NULL

 src/hb-graphite2.cc | 1 +
 1 file changed, 1 insertion(+)

commit 3007ffa9e53e6100a761c2363f50a2b19a0764fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 25 09:08:53 2011 +0200

    Reorder combining-class to better suit Arabic shadda mark-mark
    positioning

    As reported by Khaled on the list:

    "After the introduction of canonical reordering of combining marks
    (commit 34c22f8), I'm no longer able to do mark/mark substitution or
    positioning for mark sequences that involve shadda as a first mark (or
    most interesting sequences at least).

    "After some digging, it turned out that shadda have a ccc=33
    while most
    Arabic marks that combine with it have a lower ccc value, which
    results
    in the shadda being reordered after the other mark which,
    unsurprisingly, breaks my contextual substitution and mkmk anchors."

    See:

    http://unicode.org/faq/normalization.html#8
    http://unicode.org/faq/normalization.html#9

 src/hb-ot-shape-private.hh | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit 74ef81a0b0f9adddfb42c3cb87f08f8156054519
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 19:16:13 2011 +0200

    Fix make distcheck

 src/Makefile.am	      | 15 ++++++++-------
 src/hb-gobject-enums.cc.tmpl |  2 +-
 2 files changed, 9 insertions(+), 8 deletions(-)

commit 24bcdbcc0639ca9e9c0fde1a71cbbf1c3d2ef98d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 19:13:15 2011 +0200

    Add hb-ot-hmtx-table.hh

    Oops!

 src/hb-ot-hmtx-table.hh | 86
 +++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 86 insertions(+)

commit a3bd8a0e1862212a2d4141b973039bd000a3054f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 03:22:49 2011 +0200

    [graphite] Rewrite properly

 src/hb-graphite2.cc | 633
 ++++++++++++++++++++++------------------------------
 src/hb-uniscribe.cc |	 2 +
 2 files changed, 273 insertions(+), 362 deletions(-)

commit 5072934c35bddc23d6bcb07a41010da51eb1b090
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 02:24:27 2011 +0200

    Minor

 src/hb-uniscribe.cc | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 46377396accf6b43792ffba553dcd9847608aa86
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 02:12:05 2011 +0200

    [configure] Fix graphite bits

 configure.ac | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 71388b3ee71c7d3b79f842db7588bd683691797c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 02:09:04 2011 +0200

    [uniscribe] Minor

 src/hb-uniscribe.cc | 19 +++++++++----------
 1 file changed, 9 insertions(+), 10 deletions(-)

commit cd2b901027bd154e31aa509c0cb2d86633e36398
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 01:47:25 2011 +0200

    [graphite] Minor

 src/hb-graphite2.cc | 10 ++++------
 src/hb-shape.cc     |	1 -
 2 files changed, 4 insertions(+), 7 deletions(-)

commit 834af3b48a1aca3e53811d1eb4ca09b582b8e598
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 01:45:47 2011 +0200

    [graphite] Remove hb_graphite2_feature_check()

    I don't see how this function can be useful.

 src/hb-graphite2.cc | 10 ----------
 src/hb-graphite2.h  |	2 --
 2 files changed, 12 deletions(-)

commit 1f49cf32c96cb45a4d8ba2c210aeb7a8076b4762
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 01:29:25 2011 +0200

    Add graphite2 integration from Martin Hosken

    To be modified, a lot.

 configure.ac			   |   9 +-
 contrib/python/lib/harfbuzz.pyx   |  20 +-
 contrib/python/runpy		   |   2 -
 contrib/python/scripts/hbtestfont |   4 +-
 contrib/python/setup.py	   |  18 +-
 src/Makefile.am		   |   7 +
 src/hb-graphite2.cc		   | 446
 ++++++++++++++++++++++++++++++++++++++
 src/hb-graphite2.h		   |  47 ++++
 src/hb-shape.cc		   |   7 +
 9 files changed, 542 insertions(+), 18 deletions(-)

commit 0e6d36d8a3f9f533cb6eb04408af62bfd1ad83da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 24 01:31:29 2011 +0200

    Minor

 src/Makefile.am	   |   2 +-
 src/hb-uniscribe-shape.cc | 454
 ----------------------------------------------
 src/hb-uniscribe.cc	   | 454
 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 455 insertions(+), 455 deletions(-)

commit efde8113258b117ec0a7fbffe6d681442d045c41
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 23 00:04:57 2011 +0200

    Add a constructor for hb_prealloced_array_t

    Fixes build with MSVC.

 src/hb-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit d75333f166d21e9b9f2341c3bc8a9ef8a886f4b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 19 19:59:24 2011 +0200

    Add gobject enum support, but disabled for now

    need to figure out the naming.  The generated code doesn't have the
    right name.

 configure.ac		      |  2 ++
 src/Makefile.am	      | 13 ++++++--
 src/hb-gobject-enums.cc.tmpl | 74
 ++++++++++++++++++++++++++++++++++++++++++++
 src/hb-gobject-structs.cc    | 63 +++++++++++++++++++++++++++++++++++++
 src/hb-gobject.cc	      | 63 -------------------------------------
 5 files changed, 149 insertions(+), 66 deletions(-)

commit 7d235d272f4c9213f54c9c807fb8fba5068c45b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 23:55:29 2011 +0200

    Flesh out tt funcs a bit

 src/hb-tt-font.cc | 36 +++++++++++++++++++++++++++++++++++-
 1 file changed, 35 insertions(+), 1 deletion(-)

commit b9415e76d7b41da203b9ae85e38b6dc777481184
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 19:21:44 2011 +0200

    [API] Add hb_font_set_funcs_data()

 src/hb-font.cc | 15 +++++++++++++++
 src/hb-font.h	|  6 ++++++
 2 files changed, 21 insertions(+)

commit e6c09cdf43201ff1b7f38e411ae1f9977e4f9271
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 19:07:59 2011 +0200

    Remove the pre_allocate argument from hb_buffer_create()

    For two reasons:

    1. User can always call hb_buffer_pre_allocate() themselves, and

    2. Now we do a pre_alloc in add_utfX anyway, so the total number of
    reallocs is limited to a small number (~3) anyway.	This just
    makes the
    API cleaner.

 src/hb-buffer.cc	   | 7 +------
 src/hb-buffer.h	   | 2 +-
 src/test.cc		   | 2 +-
 test/test-buffer.c	   | 9 ++++-----
 test/test-object.c	   | 4 ++--
 test/test-shape-complex.c | 2 +-
 test/test-shape.c	   | 2 +-
 util/hb-view.cc	   | 2 +-
 8 files changed, 12 insertions(+), 18 deletions(-)

commit 187bdeaa6c82fcb95fdd546da9c78b843e1dea0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 19:03:06 2011 +0200

    Do (nothing for) hmtx sanitize

 src/hb-ot-hhea-table.hh | 1 -
 src/hb-tt-font.cc	 | 1 +
 2 files changed, 1 insertion(+), 1 deletion(-)

commit d6016e49108be183ab2dc9c226447d1db3a09b90
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 14:47:41 2011 +0200

    Fix name-table sanitize

 src/hb-ot-name-table.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ae9877dea6a1aed3566d9b87a75ede84259deaca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 14:43:45 2011 +0200

    Add hhea-table support

 src/Makefile.am		|   1 +
 src/hb-open-type-private.hh	|   6 ++
 src/hb-ot-head-table.hh	|   2 +-
 src/hb-ot-hhea-table.hh	|  93 ++++++++++++++++++
 src/hb-ot-layout-gdef-table.hh |   2 +-
 src/hb-ot-layout-gpos-table.hh |   2 +-
 src/hb-ot-layout-gsub-table.hh |   2 +-
 src/hb-ot-maxp-table.hh	|   2 +-
 src/hb-ot-name-table.hh	|   3 +-
 src/hb-tt-font.cc		| 207
 +++++++++++++++++++++++++++++++++++++++++
 10 files changed, 314 insertions(+), 6 deletions(-)

commit 7a750ac33ec482e2c4856c19ea607f3563741c24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 17 14:19:59 2011 +0200

    Rename table files from eg maxp-private.hh to maxp-table.hh

 src/Makefile.am		      |   12 +-
 src/hb-font.cc			      |    2 +-
 src/hb-ot-head-private.hh	      |  143 ---
 src/hb-ot-head-table.hh	      |  143 +++
 src/hb-ot-layout-gdef-private.hh     |  427 ---------
 src/hb-ot-layout-gdef-table.hh       |  427 +++++++++
 src/hb-ot-layout-gpos-private.hh     | 1633
 ----------------------------------
 src/hb-ot-layout-gpos-table.hh       | 1633
 ++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gsub-private.hh     |  943 --------------------
 src/hb-ot-layout-gsub-table.hh       |  943 ++++++++++++++++++++
 src/hb-ot-layout-gsubgpos-private.hh |    2 +-
 src/hb-ot-layout.cc		      |    8 +-
 src/hb-ot-maxp-private.hh	      |   66 --
 src/hb-ot-maxp-table.hh	      |   66 ++
 src/hb-ot-name-private.hh	      |  128 ---
 src/hb-ot-name-table.hh	      |  128 +++
 src/hb-uniscribe-shape.cc	      |    2 +-
 src/main.cc			      |    2 +-
 18 files changed, 3354 insertions(+), 3354 deletions(-)

commit 0b7e4d9f20b3ed947d0c441ca59b43c4097cdb0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 20:41:59 2011 +0200

    [ft] FT_Get_Advance() for advance-width callbacks

    Using graphite2's comparerenderer suggests that this makes hb-ft 15
    times faster.  No caching layer needed anymore.

 configure.ac	|  2 +-
 src/hb-ft.cc	| 19 +++++++++++++------
 util/common.hh |  4 +++-
 3 files changed, 17 insertions(+), 8 deletions(-)

commit 97796453aab56873809a15b5e316cba8acea7449
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 19:03:43 2011 +0200

    Fix falloffs of the GOption conversion

 util/options.cc | 8 ++++----
 util/options.hh | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 4e9ff1dd6ee3ea63fd91a76a91d9725a10a294a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 16:21:22 2011 +0200

    Pre-allocate buffers when adding string

    We do a conservative estimate of the number of characters, but still,
    this limits the number of buffer reallocs to a small constant.

 src/hb-buffer.cc | 1 +
 1 file changed, 1 insertion(+)

commit 553bc3de82cfda8d83db26a93205e0d39440cbd1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 16:21:06 2011 +0200

    Minor

 src/hb-ft.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 254142bb67a5c520a304142301479eb5292592d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 16:15:44 2011 +0200

    [ft] FT_Select_Charmap() when we create face

 src/hb-ft.cc | 2 ++
 1 file changed, 2 insertions(+)

commit a4cbd03dd17990783d8fd4c6be0c9c0d3d9cae5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 15 09:52:05 2011 +0200

    Apply 'locl' with 'ccmp' in Arabic shaper

    According to Peter Constable this is indeed what Uniscribe has been
    doing for years.

    Mozilla Bug 667166 - wrong shape of letter when it comes at the end of
    word in the arabic version of Firefox 5.0

 src/hb-ot-shape-complex-arabic.cc | 1 +
 1 file changed, 1 insertion(+)

commit c214cff55ce539d004d069a484dac3988953cb11
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 14 15:17:16 2011 +0200

    Start adding gobject-introspection support

 configure.ac	   | 13 ++++++++++-
 src/Makefile.am   | 43 ++++++++++++++++-------------------
 src/hb-common.h   |  1 +
 src/hb-glib.cc    |  3 ---
 src/hb-gobject.cc | 63
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-gobject.h  | 68
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 163 insertions(+), 28 deletions(-)

commit 9527fb200ffbbd839334e99b51d9671752d393db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 13 19:03:48 2011 +0200

    Fix missing return

 src/hb-ft.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 77a328769545f6b2970d8491fe77fe98781961cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 13 17:16:45 2011 +0200

    Minor

 src/hb-common.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3bb300ee78a40f9ded21ab19283863b733aeb677
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 11 11:54:31 2011 +0200

    Refactor hb-view code

 util/Makefile.am |  26 +++-
 util/common.cc   |  40 ++++++
 util/common.hh   |  49 +++++++
 util/hb-view.cc  | 387
 ++++---------------------------------------------------
 util/options.cc  | 318 +++++++++++++++++++++++++++++++++++++++++++++
 util/options.hh  |  86 +++++++++++++
 6 files changed, 541 insertions(+), 365 deletions(-)

commit d6660356dd81358033743f72d8a5fbf2fc70eaf7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 22:08:36 2011 +0200

    Add uniscribe font getters

 src/hb-uniscribe-shape.cc | 24 +++++++++++++++++++++---
 src/hb-uniscribe.h	   |  8 ++++++++
 2 files changed, 29 insertions(+), 3 deletions(-)

commit 01ec13a1d9ae380305b593e1c52cebb0e8327cb6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 22:00:35 2011 +0200

    Implement hb_ft_font_get_face

 src/hb-ft.cc | 15 ++++++++++++++-
 src/hb-ft.h  |  2 ++
 2 files changed, 16 insertions(+), 1 deletion(-)

commit 36a4fe037df201f85b7a544eb30d75dc3585a1b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 21:54:22 2011 +0200

    Fix charset conversion

 util/hb-view.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 25c4830593064f023e296aa795b72ddcaa1c9322
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 16:28:38 2011 +0200

    [util] Add hb-shape --shapers

    If the specified shapers fail, hb-shape will fail immediately

 util/hb-view.cc | 57
 +++++++++++++++++++++++++++++++++------------------------
 1 file changed, 33 insertions(+), 24 deletions(-)

commit 0501573deda3a8dcdfcea491392f554f21ed0154
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 16:25:56 2011 +0200

    Fix const correctness in the API

 src/hb-fallback-shape-private.hh |  2 +-
 src/hb-fallback-shape.cc	  |  2 +-
 src/hb-ot-shape.cc		  |  2 +-
 src/hb-ot-shape.h		  |  2 +-
 src/hb-shape.cc		  | 14 +++++++-------
 src/hb-shape.h			  | 12 ++++++------
 src/hb-uniscribe-shape.cc	  |  2 +-
 src/hb-uniscribe.h		  |  2 +-
 8 files changed, 19 insertions(+), 19 deletions(-)

commit a21add6c0da067173d51792d716d6e38379f138f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 16:07:49 2011 +0200

    Reformat

 util/hb-view.cc | 49 ++++++++++++++++++-------------------------------
 1 file changed, 18 insertions(+), 31 deletions(-)

commit 8df90c81187db58eee6b90426cd16c32feef6be3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 10 15:26:41 2011 +0200

    [util] Port hb-view to GOption

 util/hb-view.cc | 267
 +++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 156 insertions(+), 111 deletions(-)

commit 511a136f0c092880b19250a5df53bcf9f4b043ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 15:03:00 2011 +0200

    Move hb-view into util/

 Makefile.am	  |   3 +-
 configure.ac	  |   1 +
 src/Makefile.am  |  13 --
 src/hb-view.cc   | 568
 -------------------------------------------------------
 util/Makefile.am |  24 +++
 util/hb-view.cc  | 568
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 6 files changed, 594 insertions(+), 583 deletions(-)

commit d753ac78da5619a0a545cdaf7a8e65787e996570
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 14:03:12 2011 +0200

    [uniscribe] Remove zerowidth glyphs from output

 src/hb-uniscribe-shape.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 217cc81cd9c3de30b2ef226983ec43c0f78b5c7d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 14:00:44 2011 +0200

    [test/shape-complex] Print cluster and position info in --verbose

 test/test-shape-complex.c | 20 +++++++++++++++++---
 1 file changed, 17 insertions(+), 3 deletions(-)

commit 708403e7f3e4a5cf9b0d2bd764fb74b148af7adb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 13:52:36 2011 +0200

    Fix warnings with old glib

 test/hb-test.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit ddd247b0c528cdb8bdf5f8063180abe884afa305
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 11:44:42 2011 +0200

    Minor

 src/test.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 1b8196c98638ba05ae0ebcb8ba7aa99ed9c08e0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 11:37:46 2011 +0200

    Add fallback shaper

 src/hb-fallback-shape.cc | 23 +++++++++++++++++++++--
 1 file changed, 21 insertions(+), 2 deletions(-)

commit 13a601fe99f237b08b7166448e386eaea0b77294
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 11:36:54 2011 +0200

    [FT] Don't make font immutable

 src/hb-ft.cc | 2 --
 1 file changed, 2 deletions(-)

commit 38b2118724600521c6ad1e49df0667dcdf863634
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 10:51:24 2011 +0200

    [API] Add hb_ft_font_set_funcs(), remove hb_ft_get_font_funcs()

    Remove hb_ft_get_font_funcs() as it cannot be used by the user anyway.

    Add hb_ft_font_set_funcs().  Which will make the font internally use
    FreeType.  That is, no need for the font to have created using the
    hb-ft API.	Just create using hb_face_create()/hb_font_create() and
    then call this on the font (after having set font scale).  This
    internally creates an FT_Face and attached to the font.

 src/Makefile.am    |  4 +--
 src/hb-ft.cc	    | 76
 +++++++++++++++++++++++++++++++++++++++++++++++++++---
 src/hb-ft.h	    | 10 ++++---
 src/test.cc	    |  7 +++++
 test/Makefile.am   |  8 ------
 test/test-object.c |  9 -------
 6 files changed, 89 insertions(+), 25 deletions(-)

commit 255f176fdcd42ab94f9c3c54e2bffb55d0b1a8f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 08:35:07 2011 +0200

    Minor

 src/hb-uniscribe-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a9057eb3f38018faa1ece53c4aaeeba798b41fd1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:47:55 2011 +0200

    [uniscribe] Unbreak

 src/hb-uniscribe-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c0975e12315b7167b92411584d2f00a751bbc204
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:46:18 2011 +0200

    Fix build again

 test/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 33ccc77902660ed4b49184e5ec99f4fd0ef63175
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:43:24 2011 +0200

    [API] Make set_user_data() functions take a replace parameter

    We need this to set data on objects safely without worrying that some
    other thread unsets it by setting it at the same time.

 src/hb-blob.cc		   |  5 +++--
 src/hb-blob.h		   |  3 ++-
 src/hb-buffer.cc	   |  5 +++--
 src/hb-buffer.h	   |  3 ++-
 src/hb-common.cc	   | 13 ++++++++-----
 src/hb-font.cc		   | 15 +++++++++------
 src/hb-font.h		   |  9 ++++++---
 src/hb-object-private.hh  | 13 ++++++++-----
 src/hb-private.hh	   | 16 +++++++++++-----
 src/hb-shape.cc	   |  2 +-
 src/hb-unicode.cc	   |  5 +++--
 src/hb-unicode.h	   |  3 ++-
 src/hb-uniscribe-shape.cc | 18 ++++++++++++++----
 test/test-object.c	   | 33 +++++++++++++++++----------------
 14 files changed, 89 insertions(+), 54 deletions(-)

commit 944b2ba1ce076385f985212bbdf2df96a8a995f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:23:58 2011 +0200

    [buffer] Make API take signed int length

    Since we already switched to accepting -1 as 'zero-terminated'.

 src/hb-buffer.cc    | 12 ++++++------
 src/hb-buffer.h     | 12 ++++++------
 src/hb-ot-layout.cc |	2 --
 src/main.cc	     |	1 -
 4 files changed, 12 insertions(+), 15 deletions(-)

commit de1e1cf9bccfd116d495804e230dc2e12b733a2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:19:38 2011 +0200

    [FT] Adapt to new face API

 src/hb-ft.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 458c89a85695220d43b69dbae36fc93e3fe78d89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:19:19 2011 +0200

    Minor

 test/test-c.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit bf3eef540f81fdeba1c36263d7d5b2ec4c5f07b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 9 00:13:24 2011 +0200

    [uniscribe] Cleanup backend

 TODO			   |   2 +
 src/hb-uniscribe-shape.cc | 161
 ++++++++++++++++++++++++++++++++++------------
 2 files changed, 123 insertions(+), 40 deletions(-)

commit f1f848e2e46ac54ff08aca7cd83390af31c7c9ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 8 23:41:06 2011 +0200

    Fix build

 test/Makefile.am | 5 +++++
 1 file changed, 5 insertions(+)

commit 3897335c7620c37e9a0224b0c42ade0dfdce4053
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 8 23:37:41 2011 +0200

    [API] Sort out get_blob API

    hb_face_get_blob() renamed to hb_face_reference_blob(), returns a
    reference now.

    hb_face_[sg]et_index() added.

    hb_face_set_upem() added.

 src/hb-font-private.hh      |	3 +-
 src/hb-font.cc		     | 67
 +++++++++++++++++++++++++++++++++++----------
 src/hb-font.h		     | 17 ++++++++++--
 src/hb-ft.cc		     |	3 +-
 src/hb-ot-layout-private.hh |	9 ------
 src/hb-ot-layout.cc	     | 21 --------------
 src/hb-uniscribe-shape.cc   |	3 +-
 7 files changed, 72 insertions(+), 51 deletions(-)

commit e715784be35f0846c0e084b7c53c7556ce933a45
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 8 21:42:02 2011 +0200

    Rename get_table to reference_table in all API

 src/hb-font-private.hh |  6 +++---
 src/hb-font.cc		| 20 ++++++++++----------
 src/hb-font.h		|  8 ++++----
 src/hb-ft.cc		|  4 ++--
 4 files changed, 19 insertions(+), 19 deletions(-)

commit 670c873499f7f03fdfc07b8a0567b041628c6ab0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 8 21:36:24 2011 +0200

    Fix shaper ordering logic

 src/hb-shape.cc | 80
 ++++++++++++++++++++++++---------------------------------
 1 file changed, 34 insertions(+), 46 deletions(-)

commit cc797e0d5368b2f5732d77eb3e3882283bd87cf7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 8 03:49:30 2011 +0200

    Minor

 TODO		 | 2 --
 src/hb-shape.cc | 2 ++
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 826e22732dd8697600a1392f48af21b7b3ce6271
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 03:53:42 2011 -0400

    [uniscribe] Fix blob lifecycles

 src/hb-uniscribe-shape.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit ff199ba356f0eb5bc6252203eea18a1d1fd28934
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 03:43:46 2011 -0400

    Fix shaper_list manipulation, aaaaaaaaaaaaargh

 src/hb-shape.cc | 16 +++++++++-------
 1 file changed, 9 insertions(+), 7 deletions(-)

commit 206e32934592b915b1f3052aecf014c6ced729e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 01:10:55 2011 -0400

    [test] test-object is not FreeType-specific, move it to the right
    place

 test/Makefile.am | 8 +++-----
 1 file changed, 3 insertions(+), 5 deletions(-)

commit 577326b86af80cc137eea81f4cc1e30adf9232b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 01:04:40 2011 -0400

    [uniscribe] Fix cluster calculation

 src/hb-uniscribe-shape.cc | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit f6d83b2dcf120f9d6f0a28c6f5de2da7addf9089
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 00:59:58 2011 -0400

    Minor

 src/test.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2eb474afb4a09f4da8f14b444bd6066769010224
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 00:59:38 2011 -0400

    [uniscribe] Fix shaper

    It's kinda working finally!

 src/hb-uniscribe-shape.cc | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit f22e661147691ebc9d531aa28a850988e6503f9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 00:59:12 2011 -0400

    [glib] Protect against invalid characters

 src/hb-glib.cc | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 144cd49a0eb3ccc749325d0ee14b3ebf4367c971
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 00:51:50 2011 -0400

    [buffer] Accept -1 for text_length and item_length

    A -1 text_length means: zero-terminated string.
    A -1 item_length means: to the end of string.

 src/hb-buffer.cc | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit e9c71fab30fd1d5b163c8a072f9e2d3eb8ba3a92
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 7 00:00:27 2011 -0400

    Fix name-table lookup

    Oops!

 src/hb-ot-name-private.hh | 2 +-
 src/hb-uniscribe-shape.cc | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

commit 3fd2b5bece28c81e3e379352f09eee39d19ac372
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 6 22:59:54 2011 -0400

    [uniscribe] Use font size directly

 src/hb-uniscribe-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 892eb2e462b40451b8f73879eab66310d884386a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 6 22:06:52 2011 -0400

    [uniscribe] Make font selection work

    Not tested yet.

 src/hb-ot-name-private.hh | 37 +++++++++++++++++++++++++++++++++++++
 src/hb-uniscribe-shape.cc | 30 +++++++++++++++++++++++-------
 src/test.cc		   |  1 -
 3 files changed, 60 insertions(+), 8 deletions(-)

commit b492299eb3c398701557e452f6c2c9bd370fbbf3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 20:34:50 2011 -0400

    Start implementing the 'name' table

 src/Makefile.am	   |  3 +-
 src/hb-ot-name-private.hh | 91
 +++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-uniscribe-shape.cc | 12 ++++---
 3 files changed, 100 insertions(+), 6 deletions(-)

commit 4538efacca84329a60ff69851de70027d9b4f567
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 20:11:06 2011 -0400

    Skip tests by returning 77

    automake test runner understands this.

 src/check-internal-symbols.sh | 3 ++-
 src/check-libstdc++.sh        | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 54eb65538da0a6ab0389d09944c90e12a913157d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 20:09:25 2011 -0400

    Fix check on OS X sh

 src/check-header-guards.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9da554504e30a326fc57b28cdb0e57108bfa9555
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 19:48:49 2011 -0400

    Add hb_shape_list_shapers()

 src/hb-shape.cc   | 22 ++++++++++++++++++----
 src/hb-shape.h    |  3 +++
 test/Makefile.am  |  2 ++
 test/test-c.c	   |  8 ++++++++
 test/test-shape.c | 15 +++++++++++++++
 5 files changed, 46 insertions(+), 4 deletions(-)

commit d7bf473ef222ab420456ff155ffaa09bacb3a394
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 18:18:21 2011 -0400

    Minor

 src/check-header-guards.sh  |	1 -
 src/hb-open-type-private.hh | 10 +++++-----
 2 files changed, 5 insertions(+), 6 deletions(-)

commit c62a8f10f3b9a4ac3ac6b686464ac734ebfa2f7f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 18:02:30 2011 -0400

    Free all static memory upon exit

 src/hb-common.cc | 8 +++++---
 src/hb-shape.cc  | 4 ++--
 2 files changed, 7 insertions(+), 5 deletions(-)

commit c4d63ef744f79701458ab7af2055afb87ffe8de3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 17:54:25 2011 -0400

    Fix env parsing code

    Also changed the separator to comma instead of colon.

 src/hb-shape.cc | 34 +++++++++++++++++++++++++---------
 1 file changed, 25 insertions(+), 9 deletions(-)

commit 3931837bebd79c5eb1bd5b24ff12e2c8e7d3f24c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 17:22:19 2011 -0400

    Change hb_shape() API back to what it was, add hb_shape_full()

    I disliked changing hb_shape() API, and disliked the fact that it was
    returning a bool now.  So, reverted.  Added new API for the extra
    functionality.

 src/hb-view.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3ca6c4ecc299295b6682fa2b6b9f83b213223bad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 5 17:22:19 2011 -0400

    Change hb_shape() API back to what it was, add hb_shape_full()

    I disliked changing hb_shape() API, and disliked the fact that it was
    returning a bool now.  So, reverted.  Added new API for the extra
    functionality.

 src/hb-shape.cc   | 21 +++++++++++++++------
 src/hb-shape.h    | 14 ++++++++++----
 src/test.cc	   |  2 +-
 test/test-shape.c |  2 +-
 4 files changed, 27 insertions(+), 12 deletions(-)

commit 02aeca985b570763342c35e99af90025bfa088d5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 22:31:05 2011 -0400

    [API] Changes to main shape API

    hb_shape() now accepts a shaper_options and a shaper_list argument.
    Both can be set to NULL to emulate previous API.  And in most
    situations
    they are expected to be set to NULL.

    hb_shape() also returns a boolean for now.	If shaper_list is
    NULL, the
    return value can be ignored.

    shaper_options is ignored for now, but otherwise it should be a
    NULL-terminated list of strings.

    shaper_list is a NULL-terminated list of strings.  Currently
    recognized
    strings are "ot" for native OpenType Layout implementation,
    "uniscribe"
    for the Uniscribe backend, and "fallback" for the non-complex backend
    (that will be implemented shortly).  The fallback backend never fails.

    The env var HB_SHAPER_LIST is also parsed and honored.  It's a
    colon-separated list of shaper names.  The fallback shaper is
    invoked if
    none of the env-listed shapers succeed.

    New API hb_buffer_guess_properties() added.

 TODO				  |   2 -
 configure.ac			  |   9 +++
 src/Makefile.am		  |  14 ++--
 src/hb-buffer-private.hh	  |   1 +
 src/hb-buffer.cc		  |  35 ++++++++++
 src/hb-buffer.h		  |   3 +
 src/hb-fallback-shape-private.hh |  48 ++++++++++++++
 src/hb-fallback-shape.cc	  |  43 +++++++++++++
 src/hb-ot-shape.cc		  |   9 ++-
 src/hb-ot-shape.h		  |   5 +-
 src/hb-shape.cc		  | 135
 +++++++++++++++++++++++----------------
 src/hb-shape.h			  |  13 ++--
 src/hb-uniscribe-shape.cc	  |  52 ++++++---------
 src/hb-uniscribe.h		  |   5 +-
 src/hb-view.cc			  |   2 +-
 src/test.cc			  |   3 +-
 test/test-shape.c		  |   2 +-
 17 files changed, 274 insertions(+), 107 deletions(-)

commit 57692adf1294a6db4627d0de7c671e4aa01d2a8f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 20:49:16 2011 -0400

    Make test.cc do something more useful

    Hardcoded to the uniscribe backend for now.  Will fix soon.

 src/test.cc | 38 ++++++++++++++++++++++++++++++++++----
 1 file changed, 34 insertions(+), 4 deletions(-)

commit c605bbbb6d4b2a98b1f40ca818760088d991f7d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 20:00:53 2011 -0400

    Remove C++ guards from source files

    Where causing issues for people with MSVC.

 src/check-c-linkage-decls.sh		 | 3 +--
 src/hb-blob.cc				 | 2 --
 src/hb-buffer-private.hh		 | 2 --
 src/hb-buffer.cc			 | 2 --
 src/hb-common.cc			 | 2 --
 src/hb-font-private.hh			 | 2 --
 src/hb-font.cc				 | 2 --
 src/hb-ft.cc				 | 2 --
 src/hb-glib.cc				 | 2 --
 src/hb-icu.cc				 | 2 --
 src/hb-mutex-private.hh		 | 2 --
 src/hb-object-private.hh		 | 4 ----
 src/hb-open-file-private.hh		 | 2 --
 src/hb-open-type-private.hh		 | 4 ----
 src/hb-ot-head-private.hh		 | 2 --
 src/hb-ot-layout-common-private.hh	 | 4 ----
 src/hb-ot-layout-gdef-private.hh	 | 2 --
 src/hb-ot-layout-gpos-private.hh	 | 4 ----
 src/hb-ot-layout-gsub-private.hh	 | 4 ----
 src/hb-ot-layout-gsubgpos-private.hh	 | 6 ------
 src/hb-ot-layout-private.hh		 | 2 --
 src/hb-ot-layout.cc			 | 2 --
 src/hb-ot-map-private.hh		 | 2 --
 src/hb-ot-map.cc			 | 2 --
 src/hb-ot-maxp-private.hh		 | 2 --
 src/hb-ot-shape-complex-arabic-table.hh | 2 --
 src/hb-ot-shape-complex-arabic.cc	 | 2 --
 src/hb-ot-shape-complex-indic-table.hh  | 2 --
 src/hb-ot-shape-complex-indic.cc	 | 2 --
 src/hb-ot-shape-complex-misc.cc	 | 2 --
 src/hb-ot-shape-complex-private.hh	 | 2 --
 src/hb-ot-shape-normalize.cc		 | 2 --
 src/hb-ot-shape-private.hh		 | 2 --
 src/hb-ot-shape.cc			 | 2 --
 src/hb-ot-tag.cc			 | 2 --
 src/hb-private.hh			 | 8 --------
 src/hb-shape.cc			 | 2 --
 src/hb-unicode-private.hh		 | 2 --
 src/hb-unicode.cc			 | 2 --
 src/hb-uniscribe-shape.cc		 | 2 --
 src/hb-view.cc				 | 2 --
 src/main.cc				 | 2 --
 src/test.cc				 | 2 --
 43 files changed, 1 insertion(+), 106 deletions(-)

commit 8336186a52813b53e90b4399dc462d55750e2d37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 19:49:05 2011 -0400

    Zero map objects

 src/hb-ot-map-private.hh | 4 ++++
 1 file changed, 4 insertions(+)

commit ecd3b6e4ad253cf9d0dae1ed2da8ba6caed16b85
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 01:57:40 2011 -0400

    More build fixes

 configure.ac | 2 ++
 1 file changed, 2 insertions(+)

commit c747f509bcc4e6a34ced04e9e79ed414a44437b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 01:51:30 2011 -0400

    More out-of-tree build fixes

 src/check-c-linkage-decls.sh | 3 +--
 src/check-header-guards.sh   | 8 ++++----
 2 files changed, 5 insertions(+), 6 deletions(-)

commit 0530ca9a180edc330ab801c535907cefa4a0c298
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 01:42:59 2011 -0400

    Fix out-of-tree build

 test/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ddbf4edc5d09a645351b1bd1722b068aba6a6dec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 01:38:37 2011 -0400

    Minor

 configure.ac | 1 -
 1 file changed, 1 deletion(-)

commit 20dde6101662fd9ebe5f613631ea468f4c0a995f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 01:07:33 2011 -0400

    Minor

 src/hb-uniscribe.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 44b4f50d05fd51d8056a78e359fbb00fbcac43a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 4 00:52:20 2011 -0400

    Fix typo

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0fbb2dc83132a89201ad8b56c6909610437d2da0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 3 19:55:04 2011 -0400

    Add draft experimental Uniscribe backend

    Not complete yet, font selection doesn't work.  But hey it shapes!

    This is not supposed to be a production backend, more like a testing
    backend.

 configure.ac		   |   9 ++
 src/Makefile.am	   |  11 ++
 src/hb-private.hh	   |   4 +-
 src/hb-uniscribe-shape.cc | 325
 ++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-uniscribe.h	   |  46 +++++++
 5 files changed, 394 insertions(+), 1 deletion(-)

commit 0d7d4824b2edc7aeeb995077655a9a89b5c360a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 3 17:39:24 2011 -0400

    Minor

 configure.ac | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit e62df43649e31b7815c272f01808b3f726c7d07d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 3 17:38:54 2011 -0400

    Add internal hb_buffer_t::get_scratch_buffer()

 src/hb-buffer-private.hh |  2 ++
 src/hb-buffer.cc	  | 10 ++++++++++
 2 files changed, 12 insertions(+)

commit 71e7936fcadfd375a8bdc47987ef8b1b2b542df5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 3 17:38:34 2011 -0400

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit bf8c57ba745c02370c38198adfdcd8075ba38b13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 3 17:38:04 2011 -0400

    [API] Add hb_face_get_blob()

    Need to think more about it.

 src/hb-font.cc | 10 ++++++++++
 src/hb-font.h	|  3 +++
 2 files changed, 13 insertions(+)

commit 2118fdb9f584e6735e904638e48bae48314372fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 14:06:51 2011 -0400

    Fix fallback shaping

    Broke it a few commits ago.

 src/hb-ot-shape.cc | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 199abbd0f15bd295c3a56845c71b38dd20af1332
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 13:59:47 2011 -0400

    Minor

 test/test-unicode.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 4f052b93c0b17d92b9f0adddf64ef77518bf2ac4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 13:44:24 2011 -0400

    Fix build with glib but not freetype

 test/Makefile.am | 7 +++----
 1 file changed, 3 insertions(+), 4 deletions(-)

commit c21be799daa85d5edb2d831ac985d3e43c8755ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 12:05:49 2011 -0400

    Minor

 test/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit e9c2341b1384c161bbab9871411af0bc9f6c3cf4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 11:40:44 2011 -0400

    Don't use icu-config when cross-compiling

 configure.ac | 17 ++++++++++-------
 1 file changed, 10 insertions(+), 7 deletions(-)

commit 390dab49b6cf34f263b67d20a13f0752ada57bcc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 11:29:55 2011 -0400

    Unbreak icu-config results a bit

 configure.ac | 1 +
 1 file changed, 1 insertion(+)

commit b301478a69d961c724a4875b839a81fb458d1153
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 11:25:13 2011 -0400

    Bug 39763 - autogen.sh should check pkg-config availability

    (and revert change have_icu change I mistakenly pushed out)

 autogen.sh   | 10 ++++++++--
 configure.ac |  1 -
 2 files changed, 8 insertions(+), 3 deletions(-)

commit f60271c0c2b0101e7b2725f9a9ad950c277a616c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 2 09:56:30 2011 -0400

    Add mingw32 support

    With these changes, on Ubuntu I can do:

    ./configure --host=i586-mingw32msvc  && make

 configure.ac		     | 1 +
 src/hb-mutex-private.hh     | 4 ++--
 src/hb-open-type-private.hh | 5 +++++
 src/hb-private.hh	     | 6 +++++-
 src/main.cc		     | 1 +
 5 files changed, 14 insertions(+), 3 deletions(-)

commit 1264b23e4a4ae1c9831a3009e1c7ab8e65a5b434
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 1 16:39:32 2011 -0400

    Bug 39702 - configure check for ragel

 autogen.sh | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

commit f5414cf0a220d6e6f3d4b6e8221cd583b4684187
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 1 16:34:16 2011 -0400

    Use missing script for calling ragel

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a91c58bf98258a34e5f7c1ad39a38db58fadc4b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 1 16:30:11 2011 -0400

    [Indic] Disable CJCT-disabling logic

    Read comment.

 src/hb-ot-shape-complex-indic.cc | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 5e72071062c015237b79fbd0521341a63166a204
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 17:51:50 2011 -0400

    [Indic] Stop looking for base upon seeing joiners

    Not sure where this is documented, but I remember this being the
    desired
    behavior.

    test-shape-complex failures are down from 48 to 46.  Meh.

 src/hb-ot-shape-complex-indic.cc | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 281683995a46ed37aeeb84061249758c59822457
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 16:00:35 2011 -0400

    Cosmetic

 src/hb-ot-shape-complex-indic.cc | 23 +++++++++++++++--------
 1 file changed, 15 insertions(+), 8 deletions(-)

commit 6b37bc80843e38ca7b62500f95fd70c08af68d62
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 15:57:00 2011 -0400

    [Indic] Fix ZWJ/ZWNJ application

    Not quite working just yet.  False alarm re 10 failures.  It was
    crashing.  Ouch!  Back to 48 failures.

 src/hb-ot-shape-complex-indic.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit e7be05702447ae270d797398132c1930cd3a9b86
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 15:18:57 2011 -0400

    [Indic] Add Final Reordering rules into comments

    Not applied yet.

 src/hb-ot-shape-complex-indic.cc | 86
 ++++++++++++++++++++++++++++++++++++++--
 1 file changed, 83 insertions(+), 3 deletions(-)

commit cfd4382ec1af91640129551697de36fd42c0849a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 15:07:11 2011 -0400

    [Indic] Handle Reph when determining base consonant

 src/hb-ot-shape-complex-indic.cc | 24 +++++++++++++++---------
 1 file changed, 15 insertions(+), 9 deletions(-)

commit 97158392a5899ddb739afaac925128f33f699bd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 15:01:28 2011 -0400

    [Indic] Ra is a consonant too

 src/hb-ot-shape-complex-indic.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 0d8f8a177c4bfd4dc642a353bab8d03674e839ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 14:57:59 2011 -0400

    [Indic] Fix reph inhibition logic

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9da0487cd452d780673e24329ce03e174a4ef83b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 13:46:44 2011 -0400

    [Indic] Support ZWJ/ZWNJ

    Brings test-shape-complex failures down from 52 to 10!

    I hereby declare harfbuzz-ng supporting Indic!

 src/hb-ot-shape-complex-indic.cc | 57
 +++++++++++++++++++++++++++++++++-------
 1 file changed, 48 insertions(+), 9 deletions(-)

commit 9ee27a928a989c71923cef82a9e9828f8e9ca051
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 11:10:14 2011 -0400

    [Indic] Suppress reph formation upon joiners

 src/hb-ot-shape-complex-indic.cc | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit 8354e004e553856d7d743e0f0b4de4668484026a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jul 31 02:24:51 2011 -0400

    Un-Ra U+09F1.  According to the test suite this is correct.

    But I'm not sure...  Down from 54 failures to 52.

 src/hb-ot-shape-complex-indic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 07cedd81f48907b2e372cd2e963716bbded9ce29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 21:16:51 2011 -0400

    Minor

 test/test-shape-complex.c | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

commit ba7e85c104e68b4685c1b3b5c9a260fe0f6879df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 21:11:53 2011 -0400

    Cosmetic

 src/hb-ot-shape-complex-indic.cc | 1 +
 1 file changed, 1 insertion(+)

commit f5bc2725cb892264ba223e0a49f7fd2c622a0730
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 21:08:10 2011 -0400

    [Indic] For old-style Indic tables, move Halant around

    In old-style Indic OT standards, the post-base Halants are moved after
    their base.  Emulate that by moving first post-base Halant to
    post-last-consonant.

    Brings test-shape-complex failures down from 88 to 54.  Getting there!

 src/hb-ot-map-private.hh	  |  3 +++
 src/hb-ot-shape-complex-indic.cc | 20 ++++++++++++++++++++
 2 files changed, 23 insertions(+)

commit c47a31fb4793b825f4be57e9cb1b10db352b9512
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 20:57:01 2011 -0400

    [OT] Save chosen script tag

 src/hb-ot-layout.cc	  | 20 ++++++++++++++++----
 src/hb-ot-layout.h	  |  3 ++-
 src/hb-ot-map-private.hh |  1 +
 src/hb-ot-map.cc	  |  2 +-
 4 files changed, 20 insertions(+), 6 deletions(-)

commit 3a9b14dfdfc278b432890e1537672a4ca141a3b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 20:23:55 2011 -0400

    Minor

 test/test-shape-complex.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 8613193bbf28fe8951c900b68c4418a6fb929626
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 20:21:40 2011 -0400

    [test] Fix problem with N'ko test direction

    Old HarfBuzz test suite always shaped as left-to-right and hence
    had wrong
    0x14db, direction expected glyphstring for N'ko.  Doh!

    Failures down from 92 to 88.

 test/test-shape-complex.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit fd06bf56110e73826b3d5c73ac964e2609450d46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 20:14:44 2011 -0400

    [Indic] Handle initial Ra+Halant in scripts that support Reph

    Brings test-shape-complex failures down from 104 to 92.  Way to go!

 src/hb-ot-shape-complex-indic.cc | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit ee58f3bc75d2d071a71b94063bf12205a5871acb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 19:15:53 2011 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 23 ++++++++++++-----------
 1 file changed, 12 insertions(+), 11 deletions(-)

commit 352372ae5ea0998e40cf9fe43c22b6b610a5764e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 19:04:02 2011 -0400

    [Indic] Categorize Ra in scripts that have Reph

    Is the categorization correct?  I don't know.

 src/hb-ot-shape-complex-indic.cc | 31 ++++++++++++++++++++++++++++++-
 1 file changed, 30 insertions(+), 1 deletion(-)

commit 45d6f29f15f1d2323bcaa2498aed23ff0c8a1567
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 14:44:30 2011 -0400

    [Indic] Reorder matras

    Number of failing shape-complex tests goes from 125 down to 94.

    Next: Add Ra handling and it's fair to say we kinda support Indic :).

 src/hb-ot-shape-complex-indic.cc | 29 +++++++++++++++++++++++++++--
 src/hb-ot-shape-normalize.cc	  | 26 ++++++++++----------------
 src/hb-private.hh		  | 36
 ++++++++++++++++++++++++++++++------
 3 files changed, 67 insertions(+), 24 deletions(-)

commit 911bf32acad7f1cd161f666cb659990ade0925ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 30 11:16:00 2011 -0400

    Bug 39686 - Add '-no-undefined' to libharfbuzz LDFLAGS

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8f0b64fb6988f9502d2c5e39768a9af133d9a83f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 29 17:02:48 2011 -0400

    Minor

 src/hb-ot-shape-complex-arabic.cc | 6 +++---
 src/hb-private.hh		   | 8 ++++++--
 2 files changed, 9 insertions(+), 5 deletions(-)

commit 743807a3ce1b2229e5307a8aea074a7544623d8d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 29 16:37:02 2011 -0400

    [Indic] Apply Indic features

    Find the base consonant and apply basic Indic features accordingly.
    Nothing complete, but does something for now.  Specifically:
    no Ra handling right now, and no ZWJ/ZWNJ.

    Number of failing shape-complex tests goes from 174 down to 125.

    Next: reorder matras.

 src/hb-ot-shape-complex-indic-machine.rl |  35 ++++--
 src/hb-ot-shape-complex-indic.cc	  | 209
 ++++++++++++++++++++++++++++---
 2 files changed, 212 insertions(+), 32 deletions(-)

commit 1a1b5013159369b343d0c32df02c9c419277aead
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 29 16:36:46 2011 -0400

    Minor

 test/test-shape-complex.c | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit dd5546de15e63c0320b7db2bf42b0f15271f7915
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 29 16:27:31 2011 -0400

    Minor

 test/test-shape-complex.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9f9bcceca6321d5a5812f878de1de39901349a78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 28 17:06:46 2011 -0400

    Register buffer vars in Indic shaper

 src/hb-ot-shape-complex-indic.cc | 6 ++++++
 src/hb-ot-shape.cc		  | 2 ++
 2 files changed, 8 insertions(+)

commit be09bf6b799cafc2ff54a28915b307ffe99661b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 28 17:03:43 2011 -0400

    Oops.  This should have gone into the previous commit

 src/hb-ot-layout-gsub-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b65c06025d2b54a44f716e030d4b10072c65bea8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 28 16:48:43 2011 -0400

    Formalize buffer var allocations

 src/hb-buffer-private.hh	    | 25 ++++++----------
 src/hb-buffer.cc		    | 15 +++++-----
 src/hb-ot-layout-gpos-private.hh   | 14 +++++----
 src/hb-ot-layout-gsub-private.hh   |  5 +++-
 src/hb-ot-shape-complex-arabic.cc  |  6 +++-
 src/hb-ot-shape-complex-indic.cc   |  4 +--
 src/hb-ot-shape-complex-private.hh | 10 ++++++-
 src/hb-ot-shape.cc		    | 60
 +++++++++++++++++++++++---------------
 src/hb-private.hh		    |  1 +
 9 files changed, 83 insertions(+), 57 deletions(-)

commit a9ad3d3460ba863a8d8f3766ccbeab288c3c6822
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 28 15:42:18 2011 -0400

    Move more code around

    Buffer var allocation coming into shape

 src/hb-buffer-private.hh	  |  1 +
 src/hb-buffer.cc		  | 35 +++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gpos-private.hh |  7 +++++++
 src/hb-ot-layout-gsub-private.hh | 18 ++++++++++++++++++
 src/hb-ot-layout.cc		  |  8 +++-----
 5 files changed, 64 insertions(+), 5 deletions(-)

commit cc06c243d8be3ebb1190281653d2dba504c16c0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 20:25:44 2011 -0400

    Streamline debugging infrastructure even more

 src/hb-blob.cc			      |  26 ++++-----
 src/hb-object-private.hh	      |   8 +--
 src/hb-open-type-private.hh	      |  64 ++++++--------------
 src/hb-ot-layout-gsubgpos-private.hh |   2 +-
 src/hb-private.hh		      | 109
 +++++++++++++++++++++++++++++++----
 5 files changed, 136 insertions(+), 73 deletions(-)

commit 43ff203d8ea3e1b09e316e3aae1a4e5ec15bfdd2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 17:35:24 2011 -0400

    Use variadic macros for debugging

    Looks *so* much nicer!

 src/hb-blob.cc		     | 26 ++++++++--------
 src/hb-object-private.hh    |	8 ++---
 src/hb-open-type-private.hh | 75
 ++++++++++++++++++++-------------------------
 src/hb-private.hh	     |	7 +++--
 4 files changed, 56 insertions(+), 60 deletions(-)

commit decd4e3e16424dc311e9fb5b663170414a11556a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 16:47:02 2011 -0400

    Add sugar syntax for debug messages

    Buffer debugging coming soon.

 src/hb-blob.cc		     | 35 +++++++++++++----------------------
 src/hb-object-private.hh    |	9 ++++-----
 src/hb-open-type-private.hh | 44
 ++++++++++++++++++++++----------------------
 src/hb-private.hh	     |	7 +++++--
 4 files changed, 44 insertions(+), 51 deletions(-)

commit 3a81b1db89beba91fb91791918b9fdd9f8fc9fa0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 16:30:32 2011 -0400

    Minor, fix leak from my previous refactorings

 src/hb-buffer.cc | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit f4a579bc42fb811ff5c391a0e97b7d8656ef59b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 16:20:16 2011 -0400

    Add internal API for buffer var allocation

 src/hb-buffer-private.hh | 25 +++++++++++++++++++++++--
 src/hb-buffer.cc	  | 22 ++++++++++++++++++++++
 2 files changed, 45 insertions(+), 2 deletions(-)

commit 651e8dd79ec8eaca5ab75a61e8ce961ff7bd26eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 14:54:08 2011 -0400

    Start cleaning up buffer var allocation

    I've messed up a lot of stuff recently, different parts of the
    shaping process are stumbling on eachother's toes because
    manually tracking what's in which buffer var is hard.  I'm
    going to add some internal API to track those such that mistakes
    are discovered as soon as they are introduced.

 src/hb-ot-layout-gsubgpos-private.hh |  1 -
 src/hb-ot-layout.cc		      |  1 +
 src/hb-ot-shape.cc		      | 10 ----------
 3 files changed, 1 insertion(+), 11 deletions(-)

commit c86f932015bdf5803572b0904d343d3bc033e009
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 00:44:50 2011 -0400

    Move code around

 src/hb-ot-shape.cc | 85
 +++++++++++++++++++++++++++---------------------------
 1 file changed, 42 insertions(+), 43 deletions(-)

commit 18c42850c9327ab4479ff150660a76d4ff6f3e9c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 00:36:58 2011 -0400

    Shrink space used for ligature ids

    This frees 16bits in the glyph_info struct during the ot_layout
    process.
    We can use the freed space in the shapers now.

 src/hb-ot-layout-gsubgpos-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit d8787493c9aa420544096cef07c29a591a0c1a99
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 25 00:36:01 2011 -0400

    Minor

 src/hb-ot-layout-gsub-private.hh     | 6 ------
 src/hb-ot-layout-gsubgpos-private.hh | 7 +++++++
 2 files changed, 7 insertions(+), 6 deletions(-)

commit c311d852080b50ffc85e80168de62abb05a6be59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 23 23:43:54 2011 -0400

    Keep Unicode props updated as we go so we avoid a scan later

 src/hb-ot-shape-normalize.cc | 54
 +++++++++++++++++++++-----------------------
 1 file changed, 26 insertions(+), 28 deletions(-)

commit 5389ff4dbc46c76c9483e3c95f22524b60e21166
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 20:22:49 2011 -0400

    Implement the Unicode Canonical Composition algorithm

    Fallback normalization is complete and working now!

 src/hb-ot-shape-normalize.cc | 49
 +++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 46 insertions(+), 3 deletions(-)

commit dcdc51cdc0ba9d9fb75f84dd5fa7a49aa0b24ea0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 17:14:46 2011 -0400

    Handle singleton decompositions

 src/hb-ot-shape-normalize.cc | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit 34c22f816808d061a980cffca12de03beb437fa0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 17:04:20 2011 -0400

    Implement Unicode Canonical Reordering Algorithm

 src/hb-ot-shape-normalize.cc | 80
 +++++++++++++++++++++++++++++++++++++-------
 src/hb-ot-shape-private.hh   |  2 ++
 src/hb-ot-shape.cc	      |  6 ++--
 3 files changed, 73 insertions(+), 15 deletions(-)

commit 4ff0d2d9dfc4f7e4880a4e964ca9872624508ea0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 16:15:32 2011 -0400

    Decomposition works now!

 src/hb-ot-shape-normalize.cc | 109
 +++++++++++++++++++++++++++----------------
 src/hb-ot-shape.cc	      |   3 +-
 2 files changed, 70 insertions(+), 42 deletions(-)

commit 468e9cb25c9bc14781b7013e447d763f93bf76a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 11:28:07 2011 -0400

    Move buffer methods into the object

 src/hb-buffer-private.hh	      | 110 +++----
 src/hb-buffer.cc		      | 605
 +++++++++++++++++------------------
 src/hb-ot-layout-gpos-private.hh     |  88 ++---
 src/hb-ot-layout-gsub-private.hh     |  58 ++--
 src/hb-ot-layout-gsubgpos-private.hh |  50 +--
 src/hb-ot-shape-normalize.cc	      |  16 +-
 src/hb-ot-shape.cc		      |  14 +-
 7 files changed, 456 insertions(+), 485 deletions(-)

commit 45412523dc295cb5ee12e096bfacb282cc925843
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 22 11:07:05 2011 -0400

    More normalization kick

 src/hb-ot-shape-normalize.cc | 54
 +++++++++++++++++++++++++++++---------------
 src/hb-ot-shape-private.hh   |  8 ++++++-
 src/hb-ot-shape.cc	      | 13 +++--------
 3 files changed, 46 insertions(+), 29 deletions(-)

commit 63c0ef4a0763e579c9c80887bbfbd2651de05067
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 20:58:42 2011 -0400

    Fix decompose() implementations to work with non-starter
    non-composables

    Add tests.

 src/hb-glib.cc      | 10 +++++-----
 src/hb-icu.cc	     | 20 +++++++++++++-------
 test/test-unicode.c | 11 ++++++++---
 3 files changed, 26 insertions(+), 15 deletions(-)

commit 5d90a342e319068716429bf7af76c3896b61a0e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 15:25:01 2011 -0400

    Document normalization design

 src/hb-ot-shape-normalize.cc | 78
 +++++++++++++++++++++++++++++++++++---------
 src/hb-ot-shape-private.hh   |  2 +-
 src/hb-ot-shape.cc	      |  6 ++--
 3 files changed, 67 insertions(+), 19 deletions(-)

commit 02cdf743c2ec345a44d4fcf865594b6ac13fccd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 12:23:12 2011 -0400

    Add prefer_decomposed() complex-shaper callback

    This allows the Indic shaper to request decomposed characters.
    This will
    handle split matra for free.  Other shapers prefer precomposed
    characters.

 src/hb-ot-shape-complex-arabic.cc  |  6 ++++++
 src/hb-ot-shape-complex-indic.cc   |  7 +++++++
 src/hb-ot-shape-complex-misc.cc    |  6 ++++++
 src/hb-ot-shape-complex-private.hh | 31 +++++++++++++++++++++++++++++--
 4 files changed, 48 insertions(+), 2 deletions(-)

commit d6b9c6d20041b4f4fa11befc179aee757c41904d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 12:16:45 2011 -0400

    More kicking

 src/hb-ot-shape-normalize.cc | 17 ++++++++++++++---
 1 file changed, 14 insertions(+), 3 deletions(-)

commit 192445aef2e50087049243ce54ce7059ec441ffa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 12:13:04 2011 -0400

    Remove intermittent_glyph()

    Lets not worry about performance for now...

 src/hb-ot-shape-normalize.cc | 3 ++-
 src/hb-ot-shape-private.hh   | 2 --
 2 files changed, 2 insertions(+), 3 deletions(-)

commit d63adfc7d09b26764d9166da97372b21257e7611
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 11:48:57 2011 -0400

    No need to handle variation-selectors seperately, they are GC=Mn

 src/hb-ot-shape.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit aa7264123a088936f2043b45d4d41ca7413fabe5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 11:34:59 2011 -0400

    Only form clusters if we are reversing

    This produces more accurate cluster mappings.  Cluster mappings are
    minimal now.  Combining marks get their own cluster value most of
    the time.

 src/hb-ot-shape.cc | 45 ++++++++++++++++++++++-----------------------
 1 file changed, 22 insertions(+), 23 deletions(-)

commit 5c6f5982d78e2d7fadc2fbb8b4f3a4be9420c59a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 11:31:08 2011 -0400

    Towards normalization

 src/hb-ot-shape-normalize.cc | 33 ++++++++++++++++++++++-----------
 src/hb-ot-shape-private.hh   |  3 ++-
 src/hb-ot-shape.cc	      |  4 +++-
 3 files changed, 27 insertions(+), 13 deletions(-)

commit ad903e66b1cc4ec1b8160f93b3ab2b5e636f8d62
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 10:17:22 2011 -0400

    s/COMBINING_MARK/SPACING_MARK/ here too.  Oops!

 test/test-unicode.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cf7f43ec3382cac2af11f5637c840500daabf889
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 01:12:26 2011 -0400

    Remove stale comment

 src/hb-ot-shape.cc | 1 -
 1 file changed, 1 deletion(-)

commit 54d1a0d2b2c4ffe15494967122c6422ecb1fc80b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 01:11:09 2011 -0400

    Form clusters before ensuring native direciton

    This is essential as ensure_native_direction uses cluster info that
    is set by form_clusters().

 src/hb-ot-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 9111b21ef99d5e53348176f683261b0101eb427f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:58:29 2011 -0400

    Add _hb_buffer_output_glyph() and _hb_buffer_skip_glyph()

 src/hb-buffer-private.hh | 10 ++++++++++
 src/hb-buffer.cc	  | 19 ++++++++++++++++---
 src/hb-ot-shape.cc	  |  2 +-
 3 files changed, 27 insertions(+), 4 deletions(-)

commit 655586fe5e1fadf2a2ef7826e61ee9a445ffa37a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:51:18 2011 -0400

    Towards normalization

 src/Makefile.am	      |  1 +
 src/hb-ot-shape-normalize.cc | 71
 ++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape-private.hh   | 12 ++++++++
 src/hb-ot-shape.cc	      | 10 ++-----
 4 files changed, 86 insertions(+), 8 deletions(-)

commit 49741c86334d12fa08a5bfa2110ff3b9adcba1c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:35:37 2011 -0400

    Include variation-selectors in cluster calculation

 src/hb-ot-shape.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit dd89d958c139d85efb776fffaf314eead3952c78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:28:57 2011 -0400

    Fix cluster calculation for non-LTR text

 TODO		  | 6 ------
 src/hb-buffer.cc | 5 +++++
 2 files changed, 5 insertions(+), 6 deletions(-)

commit 4a68684654e645882095c1189477146287ce9437
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:14:01 2011 -0400

    When forming clusters, participate all mark types

 src/hb-ot-shape.cc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 5157e12a55f943b7fc5be7dce0b2ee1bcacca6ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 21 00:12:33 2011 -0400

    Rename HB_UNICODE_GENERAL_CATEGORY_COMBINING_MARK to
    HB_UNICODE_GENERAL_CATEGORY_SPACING_MARK

    Spacing_Mark is the current Unicode long-name for this property value.
    The previous name was wrongly carried from glib.

 src/hb-common.h | 2 +-
 src/hb-icu.cc	 | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 7b08b0a7f2057937dfc3ab2ec191656bf2386463
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 23:59:07 2011 -0400

    Minor

 src/hb-ot-shape-complex-arabic.cc |  8 ++++----
 src/hb-private.hh		   | 19 +++++++++++++++++++
 2 files changed, 23 insertions(+), 4 deletions(-)

commit 498e1a9be673bb02c00aac3f12bb4c6993a85910
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 23:19:49 2011 -0400

    [icu] Implement compose()/decompose()

 src/hb-icu.cc	     | 87
 +++++++++++++++++++++++++++++++++++++++++++++++++++--
 test/test-unicode.c |	1 +
 2 files changed, 86 insertions(+), 2 deletions(-)

commit ffd4a436f7baccb68a0c3602f94ea0246e32844f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 22:30:29 2011 -0400

    Add tests for compose()/decompose()

    Adjust glib fallback implementation.

    The tests are not hooked up for ICU yet.

 src/hb-glib.cc      | 17 ++++++++++++--
 src/hb-unicode.cc   |	2 +-
 test/test-unicode.c | 66
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 82 insertions(+), 3 deletions(-)

commit fca0923b04aeff9369849da97d247a647611f346
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 22:16:13 2011 -0400

    Minor

 src/hb-icu.cc | 62
 ++++++++++++++++++++++++++++++++++++-----------------------
 1 file changed, 38 insertions(+), 24 deletions(-)

commit 26b6024962b254b624d4f22088b6c87745074743
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 21:58:14 2011 -0400

    [glib] Use g_unicode_script_to/from_iso15924() if available

 src/hb-glib.cc | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 22fdc66712464bdb02e45eed49e4be57e79b442f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 21:51:37 2011 -0400

    [glib] Add compose() and decompose() implementations with fallback

 src/hb-glib.cc    | 126
 +++++++++++++++++++++++++++++++++++++++++++-----------
 src/hb-unicode.cc |   6 ++-
 2 files changed, 106 insertions(+), 26 deletions(-)

commit a54a5505a35eef5315a8e2e7a79502901e3eff5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 20 16:42:10 2011 -0400

    Minor

 src/hb-ot-shape-complex-indic.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 23db8d5c92c96a34c716b68e1aa6819c5a20477a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 12 12:02:26 2011 -0400

    [test] Work around glib <= 2.30 API

 test/hb-test.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 22989c5ffc8cce1ea05d729cdf33661c35a52334
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 12 11:54:58 2011 -0400

    Distribute hb-ot-shape-complex-indic-machine.rl

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit f6fd3780e12b23ff7ed3743497c8996e71dcb064
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 8 00:22:40 2011 -0400

    Let shapers decide when to apply ccmp and locl

    Instead of always applying those two features before the complex
    shaper,
    let the complex shaper decide whether they should be applied first.

    Also add stub for Indic's final_reordering().

 src/hb-ot-shape-complex-arabic.cc |  2 ++
 src/hb-ot-shape-complex-indic.cc  | 16 ++++++++++++++++
 src/hb-ot-shape.cc		   |  7 +------
 3 files changed, 19 insertions(+), 6 deletions(-)

commit c4641723fbf6532b2e80a662e15573b31276bc73
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 23:47:19 2011 -0400

    [API] Add compose() and decompose() unicode funcs, rename other ones

    Add compose() and decompose() unicode funcs.  These implement
    pair-wise canonical composition/decomposition.

    The glib/icu implementations are lacking for now.  We are adding
    API for this to glib, but I cannot find any useful API in ICU.
    May end of implementing these in-house.

    Changed all unicode_funcs callback names to remove the "_get" part.
    Eg, hb_unicode_get_script_func_t is now hb_unicode_script_func_t,
    and hb_unicode_get_script() is hb_unicode_script() now.

 TODO			   |  4 ++-
 src/hb-glib.cc		   |  6 +++-
 src/hb-icu.cc		   |  6 +++-
 src/hb-ot-shape.cc	   |  6 ++--
 src/hb-shape.cc	   |  2 +-
 src/hb-unicode-private.hh |  8 +++--
 src/hb-unicode.cc	   | 85
 ++++++++++++++++++++++++++++++++++-------------
 src/hb-unicode.h	   | 70 +++++++++++++++++++++++++++-----------
 test/test-unicode.c	   | 21 +++++++-----
 9 files changed, 146 insertions(+), 62 deletions(-)

commit d05dded1676924e8894c90f7a7c3527b492bcdff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 23:42:40 2011 -0400

    More code generation through preprocessor

 src/hb-ot-shape-complex-private.hh | 46
 ++++++++++++++++++++++++--------------
 1 file changed, 29 insertions(+), 17 deletions(-)

commit 891c4755baae6cd59fad59d27fd8933e5f548a74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 23:19:27 2011 -0400

    Humm, undo some shuffling

    In preparation for adding more advanced unicode funcs.

 src/hb-ot-shape.cc	   |  6 ++---
 src/hb-shape.cc	   |  2 +-
 src/hb-unicode-private.hh | 36 +++++++++++++-------------
 src/hb-unicode.cc	   | 65
 ++++++++++++++++++++++++++++++++++-------------
 4 files changed, 70 insertions(+), 39 deletions(-)

commit 4b6317c4f426cfaf21e509dbf6ee6d4e0422cdac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 23:14:42 2011 -0400

    More code shuffling

 src/hb-font-private.hh    |  16 +++---
 src/hb-font.cc		   |   3 +-
 src/hb-unicode-private.hh |  42 +++++++-------
 src/hb-unicode.cc	   | 140
 +++++++++++++++++-----------------------------
 4 files changed, 82 insertions(+), 119 deletions(-)

commit 3361c9a323575309d9fd55fe076697a3e22073c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 22:35:17 2011 -0400

    Minor

 src/Makefile.am		    |  1 +
 src/hb-ot-shape-complex-misc.cc    | 51
 ++++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-private.hh | 12 ++++++---
 3 files changed, 60 insertions(+), 4 deletions(-)

commit 76f76812ac7cca8ac6935952a2360d5e151480fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 22:25:25 2011 -0400

    Shuffle code around, remove shape_plan from complex shapers

 src/hb-ot-shape-complex-arabic.cc	  | 36 +++++++++++++-------------
 src/hb-ot-shape-complex-indic-machine.rl | 12 ++++-----
 src/hb-ot-shape-complex-indic.cc	  | 25 +++++++++---------
 src/hb-ot-shape-complex-private.hh	  | 44
 +++++++++++++++++++++-----------
 src/hb-ot-shape-private.hh		  | 13 ++--------
 src/hb-ot-shape.cc			  |  4 +--
 6 files changed, 69 insertions(+), 65 deletions(-)

commit e88bff9b4d77dc86c04832163081effbff752216
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 22:03:02 2011 -0400

    Minor, use function typedefs

 src/hb-ot-shape-complex-private.hh | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 359dcaa0d33271025ca42a5f54ecbac7ae3b56d3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 21:55:05 2011 -0400

    Update copyright headers

 src/hb-ot-map-private.hh	    | 2 +-
 src/hb-ot-map.cc		    | 2 +-
 src/hb-ot-shape-complex-private.hh | 2 +-
 src/hb-ot-shape.cc		    | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit d8d0c480c85246a74d47dd5297019c7e39391ab0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 21:22:08 2011 -0400

    Refactor some code common to GSUB and GPOS

 src/hb-ot-map-private.hh | 29 ++++++++++++++++++--------
 src/hb-ot-map.cc	  | 54
 +++++++++---------------------------------------
 2 files changed, 30 insertions(+), 53 deletions(-)

commit b70c96dbe41d6512b80fe3d966a1942e1ef64a4b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 21:07:41 2011 -0400

    Enable applying GSUB/GPOS features in multiple segments

    Fixes https://bugzilla.mozilla.org/show_bug.cgi?id=644184
    among others.

    Shapers now can request segmented feature application by calling
    add_gsub_pause() or add_gpos_pause().  They can also provide a
    callback to be called at the pause.  Currently the Arabic shaper
    uses pauses to enforce certain feature application.  The Indic
    shaper can use the same facility to pause and do reordering in the
    callback.

 src/hb-ot-map-private.hh	   |  50 +++++++++++----
 src/hb-ot-map.cc		   | 132
 +++++++++++++++++++++++++++++++++-----
 src/hb-ot-shape-complex-arabic.cc |  24 ++++++-
 src/hb-private.hh		   |   5 ++
 4 files changed, 181 insertions(+), 30 deletions(-)

commit f6d7a9bb4c19e605f1f16d9ca40adefba138c37e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 16:20:35 2011 -0400

    Shuffle code around

 src/hb-ot-map-private.hh | 68
 ++++++++++++++++++++++++------------------------
 1 file changed, 34 insertions(+), 34 deletions(-)

commit fc551edbf236d71a522ae7c2c9461aa71c5f7d66
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 7 16:09:38 2011 -0400

    Add todo

    I'm too lazy to fix the tests now.

 test/test-shape.c | 1 +
 1 file changed, 1 insertion(+)

commit 2e18c6dbdfbbfdec0490260bb7cb5213551b2188
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 6 16:05:45 2011 -0400

    Fix reverse_range() position loop

    Mozilla Bug 669175 - Slow rendering of text sometimes in this case,
    using direction: rtl

 src/hb-buffer.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit fa2befa46f215d8c33a54dfc57889928a628164c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 4 17:18:57 2011 -0400

    Minor

 src/hb-view.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d69d5ceaa0ad30e8d4b9783507c59c6d4221de4f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jul 4 12:56:38 2011 -0400

    [Indic] Well, at least finding syllables works now :)

    Still not much there.

 src/hb-ot-shape-complex-indic-machine.rl | 4 +++-
 src/hb-ot-shape-complex-indic.cc	  | 9 ++++++++-
 2 files changed, 11 insertions(+), 2 deletions(-)

commit 253a57fb5ab211f67140e6139d183e49483a9074
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 17:26:03 2011 -0400

    [test-shape-complex] Remove the greek tests

    They are outdated with respect to the DejaVu Sans I'm using.
    We need to add font version checking to the tests.

 test/test-shape-complex.c | 17 -----------------
 1 file changed, 17 deletions(-)

commit afa74bf90405fb121d3132982b87762c1686d80c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 17:25:17 2011 -0400

    [test-shape-complex] Print out expected and actual glyphstrings
    upon failure

    One has to run the test with --verbose to see that right now.

 test/test-shape-complex.c | 25 ++++++++++++++++++++++---
 1 file changed, 22 insertions(+), 3 deletions(-)

commit 42d453b0236f67239342df2003b7abce6e2c51ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 16:59:16 2011 -0400

    [test] Name tests after their input string

 test/Makefile.am	   |   2 +-
 test/test-shape-complex.c | 150
 ++++++++++++++++++++++++++++++----------------
 2 files changed, 100 insertions(+), 52 deletions(-)

commit 27413169782fdf79e278dd6552c8e194b3bc4eaa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 16:21:31 2011 -0400

    Minor

    Towards a better test runner.

 test/test-shape-complex.c | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit cc674cbf7fb9972975dc0499974e5e7fb4ae3c81
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 16:17:16 2011 -0400

    Minor

 test/test-shape-complex.c | 2 --
 1 file changed, 2 deletions(-)

commit 20d8a3982ae320035edd6a04b402cefc9a5e5779
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 16:16:21 2011 -0400

    [test] Remove disabled code

    We'd add normalization and decomposition tests later.

 test/test-shape-complex.c | 92
 -----------------------------------------------
 1 file changed, 92 deletions(-)

commit 9704f0ca6c2defed52640da77506c80bc67b4f56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 16:15:46 2011 -0400

    [test] Restructure shape test data a bit

 test/test-shape-complex.c | 75
 +++++++++++++++++++++++++++--------------------
 1 file changed, 43 insertions(+), 32 deletions(-)

commit 4ec30aec3014be6effc09cbbc88dcd075f3826df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 14:13:38 2011 -0400

    [Indic] Optimize Indic table storage

 src/hb-ot-shape-complex-indic.cc | 8 +++++---
 src/hb-private.hh		  | 1 +
 2 files changed, 6 insertions(+), 3 deletions(-)

commit c4a59de6d8c1e581b5c155319232be9e805e5cba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 14:03:29 2011 -0400

    [Indic] Generate a single data table instead of multiple ones

 src/gen-indic-table.py			| 30 +++++++++-------
 src/hb-ot-shape-complex-indic-table.hh | 62
 ++++++++++++++++------------------
 2 files changed, 48 insertions(+), 44 deletions(-)

commit a346e923a99f920bbebc25b335db51fdfb1429ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 28 12:49:18 2011 -0400

    [test] Add Indic tests from harfbuzz.old

    Needs fonts to be put in test/fonts.  Tests are skipped otherwise.
    Run with --verbose for details.  Working on improving the test runner
    to make it easier to make sense of what's going on.

 test/Makefile.am	   |   11 +-
 test/hb-test.h		   |   21 +
 test/test-shape-complex.c | 1179
 +++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 1209 insertions(+), 2 deletions(-)

commit 8fdba506f0f1c66b50f8f4b114d624cb956d03b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 24 20:45:55 2011 -0400

    [Indic] Define indic_position_t

 src/hb-ot-shape-complex-indic.cc | 239
 ++++++++++++++++++++-------------------
 1 file changed, 122 insertions(+), 117 deletions(-)

commit 65988a145b4a52c37fd53c1473034f9e701f61d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 24 19:05:52 2011 -0400

    [Indic] Add a table of consonant positions

    Copied form HarfBuzz.old Indic data.  These are below and post
    consonants.  This is temporary.  Read the comment in the patch.

 src/hb-ot-shape-complex-indic.cc | 106
 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 106 insertions(+)

commit c7fe56a1d5d3e969b6ec51cd9ecd471706a19568
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 24 19:05:34 2011 -0400

    [Indic] Some of the basic features are global;  Mark them so

 src/hb-ot-shape-complex-indic-machine.rl |  1 +
 src/hb-ot-shape-complex-indic.cc	  | 48
 ++++++++++++++++++++++----------
 2 files changed, 35 insertions(+), 14 deletions(-)

commit 867361c3ad39629a8d5b7dc48d558a1c19e37d43
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 17 18:35:46 2011 -0400

    [indic] Add syllable recognition state machine

    Using an incredible tool called Ragel.

 src/Makefile.am			  |   5 ++
 src/hb-ot-shape-complex-indic-machine.rl | 105
 +++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-indic.cc	  |  21 +++++--
 3 files changed, 125 insertions(+), 6 deletions(-)

commit 422e08dbb8e2c0c5664f1bdc7e159a673cfea8c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 15 17:22:48 2011 -0400

    Better categorize Indic character classes

    Matches OT types now.

 src/hb-ot-shape-complex-indic.cc | 51
 +++++++++++++++++++++++++---------------
 1 file changed, 32 insertions(+), 19 deletions(-)

commit 31f18abecb149f8888a72510f2660328dd6de16d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 15 09:49:58 2011 -0400

    Minor compiler warning fixes

 src/hb-buffer-private.hh	    |  8 ++++----
 src/hb-object-private.hh	    |  4 ++--
 src/hb-open-type-private.hh	    |  6 +++---
 src/hb-ot-layout-common-private.hh |  8 ++++----
 src/hb-ot-map.cc		    | 28 +++++++++++++++-------------
 src/hb-ot-shape-complex-arabic.cc  |  3 +--
 src/hb-view.cc			    | 11 ++++++-----
 test/test-object.c		    | 22 +++++++++++-----------
 test/test-unicode.c		    |  4 ++--
 9 files changed, 48 insertions(+), 46 deletions(-)

commit e3693b72f0651985d4f619cde668611639dca885
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 15 09:33:52 2011 -0400

    Change a couple strstr() to strchr()

 src/hb-ot-tag.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b9452bfc1696457e156e79037c863903da5454fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 14 14:47:07 2011 -0400

    Fix compiler warnings with -pedantic

 src/hb-blob.cc			  | 18 +++++++++---------
 src/hb-glib.cc			  | 20 ++++++++++----------
 src/hb-icu.cc			  | 20 ++++++++++----------
 src/hb-object-private.hh	  |  2 +-
 src/hb-open-type-private.hh	  | 14 +++++++-------
 src/hb-ot-layout-gdef-private.hh |  2 +-
 src/hb-ot-layout.cc		  |  2 +-
 src/hb-ot-map-private.hh	  |  2 +-
 src/hb-ot-shape-complex-indic.cc |  8 ++++----
 src/hb-ot-shape-private.hh	  |  2 +-
 src/hb-ot-shape.cc		  |  2 +-
 11 files changed, 46 insertions(+), 46 deletions(-)

commit 970e092dc23cbeb7897d4c7bb58c042209f518fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 14 14:35:44 2011 -0400

    Remove extra semicolon

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 81426808020e2b88f008480bd63519aa68c579a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jun 13 16:02:18 2011 -0400

    Cosmetic

 src/gen-indic-table.py			|    9 +-
 src/hb-ot-shape-complex-indic-table.hh | 1038
 ++++++++++++++++----------------
 2 files changed, 524 insertions(+), 523 deletions(-)

commit 902ab866f2d2edc3a71c1203065e6ddf49e5b431
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jun 10 23:08:54 2011 -0400

    GNOME Bug 652227 - Unconditional use of stdint.h

 src/hb-common.h | 33 ++++++++++++++++++++++-----------
 1 file changed, 22 insertions(+), 11 deletions(-)

commit 20503ccd578c9983162857954e3236413469ed35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 7 17:02:48 2011 -0400

    More Indic data shuffling

 src/hb-ot-shape-complex-indic.cc | 74
 +++++++++++++++++++++++++++-------------
 1 file changed, 50 insertions(+), 24 deletions(-)

commit 63b177e45c2405272da3fa6c26fe11ae37950bd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 7 15:51:40 2011 -0400

    Minor

 src/hb-ot-shape.cc | 1 +
 1 file changed, 1 insertion(+)

commit b9ddbd55930228422e82b34a141ad1b6093f5376
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 2 17:43:12 2011 -0400

    [Indic] Start an Indic shaper

    Nothing functional in there yet.

    So far, we're parsing IndicSyllabicCategory.txt and
    IndicMatraCategory.txt
    fils from Unicode Character Database and store them in an array to
    be used
    by the shaper.  Also hooked up the shaper, but it does not do anything
    right now.

 src/Makefile.am			|   3 +
 src/gen-indic-table.py			| 201 ++++++++
 src/hb-ot-shape-complex-arabic.cc	|   4 +-
 src/hb-ot-shape-complex-indic-table.hh | 834
 +++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-indic.cc	| 141 ++++++
 src/hb-ot-shape-complex-private.hh	|  58 ++-
 src/hb-ot-shape-private.hh		|   3 +-
 7 files changed, 1237 insertions(+), 7 deletions(-)

commit 697a65c5f5cda53bc68720886a253a019e8212a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 1 20:52:00 2011 -0400

    Minor

 src/gen-arabic-table.py		 | 21 +++++++++++++--------
 src/hb-ot-shape-complex-arabic-table.hh |  9 ++++-----
 2 files changed, 17 insertions(+), 13 deletions(-)

commit 9de1481f2bbbf2a174280b849628612f36a2f701
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 1 20:45:14 2011 -0400

    Update to ArabicShaping-6.1.0d2.txt

 src/hb-ot-shape-complex-arabic-table.hh | 307
 ++++++++++++++++++++------------
 1 file changed, 197 insertions(+), 110 deletions(-)

commit 9d49433efba2217852f4e44f056465b451961c49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 1 18:10:10 2011 -0400

    Minor rename

 src/Makefile.am			 |  2 +-
 src/gen-arabic-joining-table.py	 | 83
 ---------------------------------
 src/gen-arabic-table.py		 | 83
 +++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-arabic-table.hh |  2 +-
 4 files changed, 85 insertions(+), 85 deletions(-)

commit 0eafce56eed4c5166ee5b97b121a452ffd292a7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 1 12:44:30 2011 -0400

    [TODO] New items

 TODO | 4 ++++
 1 file changed, 4 insertions(+)

commit 89a2bc9ba674e7e57fec1fd8ce7648a44f3aab63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 31 15:18:13 2011 -0400

    [Vertical] Apply vertical features

    We apply all of vert, vrt2, vkrn, valt, and vpal.

 TODO		    |  7 -------
 src/hb-ot-shape.cc | 50
 +++++++++++++++++++++++++++++++++++++++++---------
 2 files changed, 41 insertions(+), 16 deletions(-)

commit 0c6a9767c812c00f2a6a02d9f43f4694e1f43815
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 31 12:59:17 2011 -0400

    [hb-view] Add --face-index to choose a face in a TrueType Collection

 src/hb-view.cc | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 4f28fbdd804fabeec57a98fe267d892ab58b3a6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 31 12:33:11 2011 -0400

    Fix TTC header handling

    Also change the Version type to avoid similar bugs in the future.

    Reported by Grigori Goronzy.

 src/hb-open-file-private.hh	  | 6 +++---
 src/hb-open-type-private.hh	  | 2 +-
 src/hb-ot-layout-gdef-private.hh | 6 +++---
 3 files changed, 7 insertions(+), 7 deletions(-)

commit 21deab2bdc58d8e9f1a3ba1f9c61c30a79e288a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 30 11:08:40 2011 -0400

    Fixed inifinite loop introduced in 7403e055cd1463f

    k is the index, not j.

    Reported by Tom Hacohen.

 src/hb-ot-layout-gpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 51881a61ca96c3328e2d92927a5a61e60997a429
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 18:15:56 2011 -0400

    Shrink code size

 src/hb-ot-map-private.hh | 11 +----------
 src/hb-ot-map.cc	  | 11 +++++++++++
 2 files changed, 12 insertions(+), 10 deletions(-)

commit 90645fb24bcbb78183576d3641a99560d87e49f2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 18:13:31 2011 -0400

    [OT] Separate map_builder from the actual map

    Respectively, separate planner from the actual plan.

 src/hb-ot-map-private.hh	    | 121
 ++++++++++++++++++++-----------------
 src/hb-ot-map.cc		    |  33 +++++-----
 src/hb-ot-shape-complex-arabic.cc  |	6 +-
 src/hb-ot-shape-complex-private.hh |	8 +--
 src/hb-ot-shape-private.hh	    |  22 +++++++
 src/hb-ot-shape.cc		    |  28 +++++----
 6 files changed, 127 insertions(+), 91 deletions(-)

commit 5560a19e2b3901437d8ee2e5905b4ac77073bfbe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 17:49:16 2011 -0400

    Minor

 src/hb-view.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1587c26fe94087040b4a5d682ec196f568e4a1a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 16:05:01 2011 -0400

    [TODO] Add item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 5c9f14932d59e306fbc72f7daecb384a16da73d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 15:59:33 2011 -0400

    Minor

 Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 5bc18195d55570ef01e4b24dd248f222f081b0a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 15:58:54 2011 -0400

    Add check-includes.sh

 src/Makefile.am	       |  7 +++++++
 src/check-c-linkage-decls.sh  |  6 +++++-
 src/check-header-guards.sh    |  8 +++++++-
 src/check-includes.sh	       | 42
 ++++++++++++++++++++++++++++++++++++++++++
 src/check-internal-symbols.sh |  8 ++++----
 src/check-libstdc++.sh        |  7 ++++---
 src/hb-ot-shape.h	       |  1 +
 7 files changed, 70 insertions(+), 9 deletions(-)

commit 3f12c434e20261f6d5c600e56575b7dfdd5b1470
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 04:58:11 2011 -0400

    [configure] Generate sha256sum and GPG-sign it

 Makefile.am | 29 ++++++++++++++++++++++++++++-
 1 file changed, 28 insertions(+), 1 deletion(-)

commit 75ba4073ca6f72c135927d9314197a605281b789
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 03:58:17 2011 -0400

    [test] Rename valgrind-log to log-vaglring.txt

 test/Makefile.am | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit e3b0ba8e292e6a90666cfbbab6faf11ae11f9ddb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 03:56:37 2011 -0400

    Minor

 harfbuzz.doap | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 595dc63eee926a0e0fee26f8225b5fbe00610fcb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 04:14:12 2011 -0400

    Bump version to 0.7.0 to open up for development

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f24557604281356131618546332d7ee3a0c8abef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 16:08:06 2011 -0400

    Release 0.6.0.  First official tarball release!

    There are no API guarantees just yet, but I *expect* that no
    incompatible API changes to happen before 1.0.0.

    Update NEWS.

 NEWS	      | 262
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 configure.ac |   2 +-
 2 files changed, 263 insertions(+), 1 deletion(-)

commit 654f88fbc9bcb54f9bd2d5586236234e03424044
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 03:38:46 2011 -0400

    [test-common] Test hb_direction_to_string()

    Caught by "make check-symbols".

 test/test-common.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 18bced134fc3379c9124ba029e22ff3f6434ca0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 03:38:30 2011 -0400

    [test] Rename test-symbols to check-symbols

    Shows undocumented symbols.

 test/Makefile.am | 37 +++++++++++++++++++++----------------
 1 file changed, 21 insertions(+), 16 deletions(-)

commit 376dafa6ed414e368e9dc1d5a2e0bfc8e55f410d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 03:35:58 2011 -0400

    Hide internal symbols

 src/hb-ot-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0e482ec6ba30b613f2d7ee97c61be458c5aebcd6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 02:46:28 2011 -0400

    [test/unicode] Fix double-free

    Caught by "make check-valgrind".

 test/Makefile.am    | 2 +-
 test/test-unicode.c | 2 --
 2 files changed, 1 insertion(+), 3 deletions(-)

commit 28b1bac5415774cf892c9cc0afcac1324c2093f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 02:44:29 2011 -0400

    [test] Switch to automake-based test-runner

    Adds check-valgrind among other modes.  We do not run under gtester by
    default anymore.

 Makefile.am		     |	2 +
 test/.valgrind-suppressions |	0
 test/Makefile.am	     | 48 ++++++++++++++++++++++--
 test/Makefile.decl	     | 90
 ---------------------------------------------
 4 files changed, 47 insertions(+), 93 deletions(-)

commit adbc97ddde27cf609d95d3249f3ea8060a6e1d20
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 01:33:18 2011 -0400

    [test] Add test-symbols that checks API symbol text coverage

    We're not at 100% coverage yet, so do not enable the test by default.

 test/Makefile.am | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit 9313b9aa66a82fd3fa60d8417c22a5350e5a8791
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 27 01:00:55 2011 -0400

    [test/version] Test hb-version.h

 test/Makefile.am    |	1 +
 test/test-version.c | 80
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 81 insertions(+)

commit 329c15714be90d3fc2d9054f80cb14fa325dc959
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 16:07:07 2011 -0400

    Add libtool versioning

    The versioning is automatic.  For now, soname-major is 0.  With
    the 1.0.0 release it will jump to 1 and stay there forever.

 configure.ac	 | 26 +++++++++++++++++++++-----
 src/Makefile.am |  1 +
 2 files changed, 22 insertions(+), 5 deletions(-)

commit 5b21eff8c4a00962d4315a47a65a143abe323299
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 14:49:35 2011 -0400

    Update README, etc

 COPYING      | 1 +
 README       | 8 +++-----
 configure.ac | 2 +-
 3 files changed, 5 insertions(+), 6 deletions(-)

commit 5bf56ea056b30fba8e07e82ec818c430cab8cafd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 14:43:10 2011 -0400

    [TODO] Add item

 TODO		   | 2 ++
 test/test-shape.c | 2 ++
 2 files changed, 4 insertions(+)

commit 2d8ebcb9d089c2cfbefac71ca6350e2703ab13e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 11:27:33 2011 -0400

    [API] One last font-funcs API change

    Now that vertical text works correctly, I'm doing a last round
    modification of the font-funcs API to simplify.  Expect no more
    changes around here.

 src/hb-font.cc    | 107
 ++++++++++++++++++------------------------------------
 src/hb-font.h	   |  50 +++++++++++--------------
 src/hb-ft.cc	   |  26 ++++++-------
 test/test-font.c  |  27 +++++++-------
 test/test-shape.c |  21 +++++------
 5 files changed, 91 insertions(+), 140 deletions(-)

commit d31691296f7d3051fcd345bf1325d17835484b50
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 11:01:32 2011 -0400

    [test] Update to API changes

 test/test-font.c  | 72
 ++++++++++++++++++++++---------------------------------
 test/test-shape.c | 35 +++++++++++++--------------
 2 files changed, 44 insertions(+), 63 deletions(-)

commit 7403e055cd1463f38215ad9faedd61c3e1b66ac5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 24 21:04:15 2011 -0400

    [Vertical] fix vertical gpos

    Wow, it took me a few days to find the right fix!

    We now set the advance for attached marks to zero, but we
    do this in the _finish() state of gpos, so it shouldn't
    regress with fonts like DejaVuSansMono that explicitly
    decrease the mark advance width to set it to zero.

 src/hb-ot-layout-gpos-private.hh | 167
 +++++++++++++++++++++++----------------
 src/hb-ot-shape.cc		  |   9 ++-
 2 files changed, 103 insertions(+), 73 deletions(-)

commit ff7cbd0219a7c260612c53b3bed343747d79ec4e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 25 09:56:06 2011 -0400

    [TODO] Update

 TODO | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

commit 3b0bb855e011099f1a4c77ffc5214c658e280b2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 20 15:59:59 2011 -0400

    [Vertical] GPOS x/y advance adjustments only apply in hori/vert
    respectively

 src/hb-ot-layout-gpos-private.hh | 31 +++++++++++++++++++++----------
 1 file changed, 21 insertions(+), 10 deletions(-)

commit cc2086d67ce559878a5ce2b41d89a37eabac90b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 19 19:19:50 2011 -0400

    [Vertical] Fix GPOS y-advance direction

 src/hb-ot-layout-gpos-private.hh | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 67d51ff96154c8909734046601e439dd8f6a86df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 19 19:08:57 2011 -0400

    [Vertical] Do fallback origin calculation

 src/hb-font.cc | 32 +++++++++++++++++++++++++++-----
 1 file changed, 27 insertions(+), 5 deletions(-)

commit 60fbb36096e344e9af79409ce8cfe3f1f7b0d321
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 19 18:46:15 2011 -0400

    [Vertical] GPOS is always done with horizontal origin

 src/hb-font-private.hh		  |   4 +-
 src/hb-font.cc			  | 187
 ++++++++++++++++++---------------------
 src/hb-font.h			  |  53 ++++++-----
 src/hb-ft.cc			  |  47 ++++------
 src/hb-ot-layout-gdef-private.hh |  18 ++--
 src/hb-ot-layout-gpos-private.hh |  23 ++---
 src/hb-ot-layout.h		  |   2 +-
 src/hb-ot-shape.cc		  |  15 ++++
 8 files changed, 166 insertions(+), 183 deletions(-)

commit 8b38faeede41e64eb0f6ac2e12ce51dd7138d50a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 19 13:08:00 2011 -0400

    More vertical

    Starting to get there, but not without yet another round of changes.

    I think I know wheere to go now.

 src/hb-font.cc     | 44 ++++++++++++++++++++++++++++++++------------
 src/hb-font.h	    | 10 ++++++++++
 src/hb-ft.cc	    | 14 ++++++++++++--
 src/hb-ot-shape.cc |  4 ++++
 4 files changed, 58 insertions(+), 14 deletions(-)

commit e609aeb1e24da6b7c812396cddb93ee3c95ef87a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 18 10:17:02 2011 -0400

    [hb-view] Add --annotate

    Currently it only marks glyph origins.

 src/hb-view.cc | 20 +++++++++++++++++++-
 1 file changed, 19 insertions(+), 1 deletion(-)

commit b8d76dd74e50d295918cc015e9d2a55e2bf6a461
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 23:31:00 2011 -0400

    Vertical: Adjust origin in glyph_extents() and glyph_contour_point()

    The base for vertical is almost ready now.

 src/hb-font.cc | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 190981851fe2bb6479b5c72451279f66fe4f6e23
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 23:27:22 2011 -0400

    Cosmetic

 src/hb-font.cc | 114
 ++++++++++++++++++++++++++++-----------------------------
 src/hb-ft.cc	|  36 +++++++++---------
 2 files changed, 74 insertions(+), 76 deletions(-)

commit 2c3f51a11c176aa3fc12a9522325efaef2c79d35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 23:23:27 2011 -0400

    Minor

 src/hb-font.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 7e2c85de305be59e1a6afa7d2061e4b7dd00acf7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 17:55:03 2011 -0400

    [API] Vertical support, take 2

    I like this API *much* better.  Implementation still incomplete, but
    horizontal works.

 src/hb-font-private.hh		  |   7 +-
 src/hb-font.cc			  | 185
 +++++++++++++++++++++++----------------
 src/hb-font.h			  | 109 ++++++++++++-----------
 src/hb-ft.cc			  |  66 ++++++++------
 src/hb-ot-layout-gdef-private.hh |   2 +-
 src/hb-ot-layout-gpos-private.hh |   2 +-
 src/hb-ot-shape.cc		  |   8 +-
 7 files changed, 218 insertions(+), 161 deletions(-)

commit 744970af4d884cc87ffa645804578fec8df674a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 18:15:37 2011 -0400

    [API] Add support for vertical text

    Design not final yet, and in fact I'm going to change it immediately,
    but this is an standalone change for itself.

 src/hb-font-private.hh		      |  35 ++--
 src/hb-font.cc			      | 387
 +++++++++++++++++++++++++----------
 src/hb-font.h			      | 164 +++++++++++----
 src/hb-ft.cc			      | 227 +++++++++++++-------
 src/hb-ot-layout-gdef-private.hh     |   2 +-
 src/hb-ot-layout-gpos-private.hh     |  35 ++--
 src/hb-ot-layout-gsub-private.hh     |   1 +
 src/hb-ot-layout-gsubgpos-private.hh |   1 +
 src/hb-ot-shape.cc		      |  14 +-
 src/hb-ot-tag.cc		      |   2 +-
 test/test-font.c		      |  61 +++---
 test/test-shape.c		      |  17 +-
 12 files changed, 650 insertions(+), 296 deletions(-)

commit 80dce8b7c8202766d52cc7666355446bbf5b0565
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 17:08:36 2011 -0400

    Minor

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 5be7d047f6bf54cc577e311b5426c463d2b9b131
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 17 15:05:34 2011 -0400

    Check for mmap()

    Apparently there exist systems with mprotect(), but not mmap()?

 configure.ac	  | 2 +-
 test/test-blob.c | 6 ++++--
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 4053f3f788353448b41e541ee617aafbe1cac366
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 16:20:48 2011 -0400

    Cosmetic

 src/hb-font.h	   | 8 ++++----
 test/test-shape.c | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 56d12e0356bee5a95b870dfbc2100b8caeb5d593
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 16:01:58 2011 -0400

    Remove unnecessary TODO item

 src/hb-ft.cc | 1 -
 1 file changed, 1 deletion(-)

commit 1883af3796459cafe2d194064403b6b1152c584d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 15:18:16 2011 -0400

    [hb-view] Start work on vertical support

 src/hb-view.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 9aa6f96af5e5940ba5c9596c6ae377fea23c0ec0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 15:08:31 2011 -0400

    [hb-view] No need to allocate an extra glyph item at the end

 src/hb-view.cc | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit a0359485c9997e3a211f7c00d40c09074d906c4f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 15:07:48 2011 -0400

    Minor

 test/test-shape.c | 6 ++++++
 1 file changed, 6 insertions(+)

commit 92de53ea450eaee077eb1730e6d7a487b20ac721
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 16 12:24:56 2011 -0400

    [test/buffer] Add more tests for nil buffer

 test/test-buffer.c | 38 ++++++++++++++++++++++++++++++++++++++
 1 file changed, 38 insertions(+)

commit 065fb38c9a338ddb095f2ec9e034fcc5a02167bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 13 23:04:46 2011 -0400

    [test/ot-tag] More tests

 test/test-ot-tag.c | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 1a64f6e19a4b483e278c85e4941107be2f71b0a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 13 22:55:32 2011 -0400

    [API] Add HB_LANGUAGE_INVALID

 src/hb-common.cc   | 5 +++--
 src/hb-common.h    | 2 ++
 src/hb-ot-tag.cc   | 2 +-
 src/hb-shape.cc    | 2 +-
 test/test-common.c | 9 ++++++---
 5 files changed, 13 insertions(+), 7 deletions(-)

commit 40b5c2e86c633441040196d158e965ad95d6ad37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 13 22:46:36 2011 -0400

    [test/test-ot-tag] Test hb-ot-tag.h, fix many bugs

    I'm in awe with how many bugs this test revealed.  All fixed.

 src/hb-ot-tag.cc   | 153 +++++++++++++++++++++---------------
 test/Makefile.am   |	3 +
 test/test-ot-tag.c | 227
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 320 insertions(+), 63 deletions(-)

commit 1368018b475c2a6dd5f625af99695ae2fcba1f05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 13 20:25:38 2011 -0400

    [TODO] Add items

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 7fc5a30cb4fbe9a4633ab842b0a8cbbcc6f6bd1b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 17:48:20 2011 -0400

    [API] Add hb_face_make/is_immutable()

 src/hb-font-private.hh |  2 ++
 src/hb-font.cc		| 18 ++++++++++++++++++
 src/hb-font.h		|  6 ++++++
 test/test-font.c	|  2 ++
 test/test-object.c	|  2 +-
 5 files changed, 29 insertions(+), 1 deletion(-)

commit 20c8b908ddf50a9814dfdd9fca595f258273cd4f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 15:19:33 2011 -0400

    Finish off previous change

 src/hb-font.cc | 1 +
 1 file changed, 1 insertion(+)

commit 0fd8c2f1be693616f19f2f1526369874763d6cf6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 15:14:13 2011 -0400

    [API] Make get_glyph() callback return a boolean

    We need to know whether the glyph exists, so we can fallback to
    composing / decomposing.  Assuming that glyph==0 means "doesn't exist"
    wouldn't work for applications like Pango that want to use different
    "doesn't exist" glyph codes for different characters.  An explicit
    return value fixes that.

 src/hb-font.cc     | 15 +++++++++------
 src/hb-font.h	    | 12 +++++++-----
 src/hb-ft.cc	    | 12 +++++++-----
 src/hb-ot-shape.cc | 13 +++++++++----
 test/test-font.c   |  5 ++++-
 test/test-shape.c  | 12 +++++++-----
 6 files changed, 43 insertions(+), 26 deletions(-)

commit 8e07f93ab4a3ef9adc7942727ef21f2f9a141d10
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 14:27:44 2011 -0400

    [test/shape] Check shape output

 test/test-shape.c | 23 +++++++++++++++++++----
 1 file changed, 19 insertions(+), 4 deletions(-)

commit 805af72405a2f653f08de392d7172291ffe8e902
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 12:39:40 2011 -0400

    Rename get_kernings() arguments from first/second_glyph to
    left/right_glyph

    Makes it clear that kerning is in visual order.

 src/hb-font.cc | 10 +++++-----
 src/hb-font.h	|  4 ++--
 src/hb-ft.cc	|  6 +++---
 3 files changed, 10 insertions(+), 10 deletions(-)

commit 23d2432219a91c6328efa9e041b1ecf137752ac3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 10:53:57 2011 -0400

    [test] Add test-shape.c.  Oops

 test/test-shape.c | 125
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 125 insertions(+)

commit c098c3acc8c48b4b6883c50c9a87e81dbe98ba24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 10:49:30 2011 -0400

    [test/blob] Use MAP_ANON instead of MAP_ANONYMOUS

    More portable.

 test/test-blob.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8329eb7c6ca39e162228733a2210e643b1a1019d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 01:39:17 2011 -0400

    [test/shape] Add simplest test for hb_shape()

 test/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit df077fadd7828b609bdfe4dbcad52ef2448525c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 01:19:39 2011 -0400

    [object] Make object inert during destruction

    Such that user_data and other finalizers cannot resurrect object

 src/hb-object-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit ee8dd83bb4e0b1c2ca5928391e35e8bd1fca6121
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 01:02:03 2011 -0400

    [TODO] Update

 TODO | 6 ++++++
 1 file changed, 6 insertions(+)

commit 52df150efeff4cf003cee65f8c91618f1a980bc8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 00:46:57 2011 -0400

    Fix font subclass chainup

    Test passing now.

 src/hb-font.cc | 6 +-----
 1 file changed, 1 insertion(+), 5 deletions(-)

commit f2c1dd4f746c36a44cf33d0257a3cd800107c286
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 00:35:12 2011 -0400

    [test/font] Test font_funcs subclassing

 test/test-font.c | 158
 +++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 155 insertions(+), 3 deletions(-)

commit 14f1e81b77971204e9325e2a8b6f8b690fac20a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 12 00:18:28 2011 -0400

    [test/font] Test empty funcs

 test/test-font.c | 75
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 73 insertions(+), 2 deletions(-)

commit 2ca0b5ae1e65d3f43df3a4a2144a1451d8b485c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:57:36 2011 -0400

    [test/font] Test more

 test/test-font.c | 63
 ++++++++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 54 insertions(+), 9 deletions(-)

commit 7033518f756490e9cf00b96387fee6f2f7fae785
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:31:15 2011 -0400

    [API] Pass face to get_table()

 src/hb-font.cc   | 4 ++--
 src/hb-font.h	  | 2 +-
 src/hb-ft.cc	  | 2 +-
 test/test-font.c | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

commit b46782780690e26a8221e2d63dd224159aebe413
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:25:28 2011 -0400

    [API] Remove const from font user_data

 src/hb-font.cc | 20 ++++++++++----------
 src/hb-font.h	| 20 ++++++++++----------
 src/hb-ft.cc	| 20 ++++++++++----------
 3 files changed, 30 insertions(+), 30 deletions(-)

commit ea93e7b27ca04a1655d62bd1d18a32805994af44
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:22:55 2011 -0400

    [test/font] More tests

 test/test-font.c | 36 +++++++++++++++++++++++++++++++++---
 1 file changed, 33 insertions(+), 3 deletions(-)

commit cdb153175f8a1521cde112c65b173f548ca6ee5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:12:58 2011 -0400

    [test/font] More tests

 test/test-font.c | 44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

commit 74d9fa3d9ac226ed72702884e721ef94ecc48e22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:07:47 2011 -0400

    [test/font] More get_empty() tests

 test/test-font.c | 5 +++++
 1 file changed, 5 insertions(+)

commit db9f4eb4e004fadae9d540522d1d21c3bbe659b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:06:02 2011 -0400

    [test/font] Test get_face() / get_parent()

 test/test-font.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 606923bb4304d5b9cf164745d657cba58949a80a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 23:05:02 2011 -0400

    [test/font] Add test_font_properties()

 test/test-font.c | 85
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 85 insertions(+)

commit da603e80386b41b360acb070a862b6ed87da57b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:52:35 2011 -0400

    [test/font] Start adding tests for hb-font.h

 test/Makefile.am    |	1 +
 test/test-buffer.c  |	2 +-
 test/test-font.c    | 69
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 test/test-unicode.c |	1 +
 4 files changed, 72 insertions(+), 1 deletion(-)

commit 9a14688e40e926b9453fcb75891f27bff1e45c49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:49:29 2011 -0400

    [API] Rename hb_face_create_for_data() to hb_face_create()

 src/hb-font.cc     | 4 ++--
 src/hb-font.h	    | 4 ++--
 src/hb-ft.cc	    | 2 +-
 src/test.cc	    | 2 +-
 test/test-object.c | 4 ++--
 5 files changed, 8 insertions(+), 8 deletions(-)

commit 46d6a21cc8613519e6ce27b1925e29285cccb71d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:33:13 2011 -0400

    [API] Add hb_ot_layout_substitute_start/finish()

 src/hb-ot-layout.cc | 13 +++++++++++++
 src/hb-ot-layout.h  |	8 ++++++++
 2 files changed, 21 insertions(+)

commit c84d15f52e1183164502d45b476b54f8fe812e0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:23:15 2011 -0400

    Remove unused hb_set_t

 src/hb-private.hh | 48 ------------------------------------------------
 1 file changed, 48 deletions(-)

commit 389a7c9e67549b1a9f7c538965e4647077f8e6ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:21:38 2011 -0400

    Remove hb_static_threadsafe_set_t

 src/hb-common.cc	 |  5 +++--
 src/hb-mutex-private.hh | 42 ------------------------------------------
 2 files changed, 3 insertions(+), 44 deletions(-)

commit e06d4eda7bbdb3a1be1f1ce8d98b059a0730f14d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:18:31 2011 -0400

    Use constructor/destructor for hb_ot_shape_plan_t

 src/hb-ot-shape-private.hh | 6 +++++-
 src/hb-ot-shape.cc	    | 4 +---
 2 files changed, 6 insertions(+), 4 deletions(-)

commit a5e4e109460ea23fa5e64926a1676c6a02ab6ba2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 22:00:56 2011 -0400

    Minor

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit daa446f184fa27c9764ff7f8a2444d47cf34d986
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:31:25 2011 -0400

    Fix compile with no mutex available

 src/hb-mutex-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 1e56c476c10577fe319fe553c5ced000bd740940
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:28:01 2011 -0400

    Free static mutex'es

 src/hb-mutex-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 831886a9b4073cfe27f7e1db0e957cbd5913fd31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:27:52 2011 -0400

    Streamline mutex stuff

 src/hb-mutex-private.hh | 61
 ++++++++++++++++++++++++++++++-------------------
 src/hb-private.hh	 |  8 +++++++
 2 files changed, 46 insertions(+), 23 deletions(-)

commit 438c4eee353ddf0de66171d84c6ef9b21cbdf8f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:14:34 2011 -0400

    Remove unused hb_mutex_trylock()

 src/hb-mutex-private.hh | 3 ---
 1 file changed, 3 deletions(-)

commit b8477e1da2785708f3232f8f2577f602a5d320d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:12:44 2011 -0400

    [test] Add tests for _get_empty() funcs

 test/test-blob.c    |	1 +
 test/test-buffer.c  |	7 +++++++
 test/test-unicode.c | 10 ++++++++++
 3 files changed, 18 insertions(+)

commit 3994be3ded40e5a3da0e187ad421b19a78865e02
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 21:08:31 2011 -0400

    [TODO] Update

 TODO | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 80a6833b032bc63b4e8c3da6489d3767af1168f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 18:14:44 2011 -0400

    [API] Add hb_*_get_empty() for all objects

 src/hb-buffer.cc   |  6 ++++++
 src/hb-buffer.h    |  3 +++
 src/hb-font.cc     | 18 ++++++++++++++++++
 src/hb-font.h	    |  9 +++++++++
 src/hb-unicode.cc  |  6 ++++++
 src/hb-unicode.h   |  3 +++
 test/test-object.c | 36 +++++++++++++++++++++++++++++++++---
 7 files changed, 78 insertions(+), 3 deletions(-)

commit d3b30be378c1dec0259a626d9a408bb9ca1b71ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 18:06:12 2011 -0400

    [API] Add HB_UNTAG()

    Useful in C API only.

 src/hb-common.h | 1 +
 1 file changed, 1 insertion(+)

commit 3cc6e9dcb42551761c3a1a9d3c25b1f1bcdc2419
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 18:02:48 2011 -0400

    Minor

 src/test.cc | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 4101ca7dbbdf1438fa116fb8cad935501ac7cca8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 14:30:56 2011 -0400

    Plug more leaks

    All good now.

 src/hb-blob.cc		     | 2 +-
 src/hb-open-type-private.hh | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 6a7ac79e26e85f6781186cf708a12825c0857324
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 14:19:18 2011 -0400

    Plug leaks

 src/hb-ot-map-private.hh   |  7 +++++++
 src/hb-ot-shape-private.hh |  2 ++
 src/hb-ot-shape.cc	    |  2 ++
 src/hb-private.hh	    | 10 +++++++++-
 4 files changed, 20 insertions(+), 1 deletion(-)

commit 7aa12ebdff11a4ffbd04bf9b164586eb0c172e37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 11:55:11 2011 -0400

    [unicode] Simplify method setting

 src/hb-unicode.cc   | 6 +-----
 test/test-unicode.c | 6 +++++-
 2 files changed, 6 insertions(+), 6 deletions(-)

commit d5bfd0272130a315d3b5e6cdcf9b7e6395879204
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 11:48:28 2011 -0400

    Minor

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6a4e7e1372ef9fde81b84ecc9c4d1f23d97396c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 10:31:33 2011 -0400

    Add maxp table

    Not used for anything right now.  Will use to get num_glyphs in
    the future.

 src/Makefile.am	   |  1 +
 src/hb-ot-head-private.hh |  1 -
 src/hb-ot-layout.cc	   |  1 +
 src/hb-ot-maxp-private.hh | 68
 +++++++++++++++++++++++++++++++++++++++++++++++
 4 files changed, 70 insertions(+), 1 deletion(-)

commit e0b0710ae52bcc8c6fbd87dfae83818faa5d5f5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 08:58:21 2011 -0400

    Minor

 TODO | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit a513dbcf73ab1cc39a7c9653034904d0c6cd9fe9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 00:24:34 2011 -0400

    [API] Change signature of get_contour_point and get_kerning ffuncs

    get_contour_point now takes glyph id before point_index.

    get_kerning now takes a vector to fill-in.

 src/hb-font.cc			  | 56
 +++++++++++++++++++++-------------------
 src/hb-font.h			  | 16 +++++++-----
 src/hb-ft.cc			  | 11 +++++---
 src/hb-ot-layout-gdef-private.hh |  2 +-
 src/hb-ot-layout-gpos-private.hh |  2 +-
 src/hb-ot-shape.cc		  | 15 ++++++++---
 6 files changed, 59 insertions(+), 43 deletions(-)

commit 63d646fb2933c2765ce526d321a498d0f7fae2f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 00:15:37 2011 -0400

    [font] Do user-space conversion when chaining up to parent font

 src/hb-font-private.hh | 28 ++++++++++++++++++++++++++++
 src/hb-font.cc		| 23 +++++++++++++++++------
 2 files changed, 45 insertions(+), 6 deletions(-)

commit b6f902a1a9c8b72b5d6a241a14a7bacfaea3a56a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 00:04:15 2011 -0400

    Minor

 src/hb-font-private.hh		  |  6 +++---
 src/hb-ot-layout-gdef-private.hh |  6 +++---
 src/hb-ot-layout-gpos-private.hh | 20 ++++++++++----------
 3 files changed, 16 insertions(+), 16 deletions(-)

commit abcfe9b59b4475eb02dd679aac4bc59616713b28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 11 00:02:02 2011 -0400

    Remove hb_ot_layout_context_t, simplify code

 src/hb-font-private.hh		      |  12 +++-
 src/hb-font.cc			      |   6 +-
 src/hb-ot-layout-common-private.hh   |   8 +--
 src/hb-ot-layout-gdef-private.hh     |  34 +++++-----
 src/hb-ot-layout-gpos-private.hh     | 121
 ++++++++++++++++++-----------------
 src/hb-ot-layout-gsub-private.hh     |  24 +++----
 src/hb-ot-layout-gsubgpos-private.hh |  11 ++--
 src/hb-ot-layout-private.hh	      |  13 ----
 src/hb-ot-layout.cc		      |  15 +----
 9 files changed, 118 insertions(+), 126 deletions(-)

commit 1ded6d8bbf93b7dabf2b1f620c07bd3236e7a60f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 20:49:02 2011 -0400

    Make default font-funcs chain-up to the parent

 src/hb-font.cc | 44 +++++++++++++++++++++++++++++++++++++++-----
 src/hb-font.h	| 41 +++++++++++++++++++++--------------------
 2 files changed, 60 insertions(+), 25 deletions(-)

commit b9d975b931d6310f25fab5ac280f523cdc27bf94
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 20:41:13 2011 -0400

    [API] Pass down closure user_data to font funcs

 src/hb-font-private.hh |  30 ++++++--
 src/hb-font.cc		| 184
 +++++++++++++++++++++++++------------------------
 src/hb-font.h		|  42 ++++++-----
 src/hb-ft.cc		| 103 ++++++++++++++-------------
 4 files changed, 198 insertions(+), 161 deletions(-)

commit 446df9cdb1fddb51819b731436fca54146d0bb23
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 20:14:44 2011 -0400

    Whitespace

 src/hb-unicode.h | 30 +++++++++++++++---------------
 1 file changed, 15 insertions(+), 15 deletions(-)

commit 686c2d165dfb284b74b78f6b902d04b585dcaef3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 20:04:26 2011 -0400

    [API] Remove font_funcs func getter functions

 src/hb-font.cc | 32 --------------------------------
 src/hb-font.h	| 18 ------------------
 2 files changed, 50 deletions(-)

commit defc45be6d75aba4a67fa7814b91b73bad953fe6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 20:02:49 2011 -0400

    [API] Add hb_font_create_sub_font() and hb_font_get_parent()

    Not quite useful just yet.

 src/hb-font-private.hh |  1 +
 src/hb-font.cc		| 41 ++++++++++++++++++++++++++++++++++++++---
 src/hb-font.h		|  5 +++++
 src/hb-unicode.h	|  2 +-
 4 files changed, 45 insertions(+), 4 deletions(-)

commit 11bb8fe7b3925bc9b019ad0c0218a231e581f152
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:57:00 2011 -0400

    [font] Fix internal sign of x/y_scale

    Should have been done as part of
    da975419884a535281745f30f4b32fee0bc8a7a1

 src/hb-font-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 85e6218e3306165d69ef44277459511d5b54b9ff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:40:44 2011 -0400

    [API] Remove broken-by-design hb_font_unset_funcs()

 src/hb-font.cc | 22 ----------------------
 src/hb-font.h	| 16 ----------------
 2 files changed, 38 deletions(-)

commit 74f1d896f2479500d65649cf3ec86dd201f0663a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:39:32 2011 -0400

    Add hb_font_make/is_immutable()

 src/hb-font-private.hh |  2 ++
 src/hb-font.cc		| 26 +++++++++++++++++++++++---
 src/hb-font.h		|  6 ++++++
 test/test-object.c	|  2 +-
 4 files changed, 32 insertions(+), 4 deletions(-)

commit 8c7a100a4d0f3a257fb7563cb08ed4356c3af669
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:21:07 2011 -0400

    Fix build without mutex

 src/hb-mutex-private.hh | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 19d3035c40e73923bcad709dc5eefe31cb34d681
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:18:12 2011 -0400

    Remove duplicate atomic_int implementation

 src/hb-mutex-private.hh | 17 -----------------
 1 file changed, 17 deletions(-)

commit 45bfa99034512e886d75b1d45a5a649647f4711f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:12:49 2011 -0400

    Fix set implementation to be truly threadsafe even with destroy()
    callbacks

    The test/object test is passing again, instead of deadlocking.

 src/hb-common.cc	  |  26 +++++------
 src/hb-mutex-private.hh  |  47 +++++++------------
 src/hb-object-private.hh |   6 ++-
 src/hb-private.hh	  | 117
 ++++++++++++++++++++++++++++++++++++++---------
 4 files changed, 128 insertions(+), 68 deletions(-)

commit 0c2ec1d78bfa0166ffd4afc204c2668d4f456ed9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:11:27 2011 -0400

    [test] Always initialize gthread such that our mutex() stuff is tested

    Now the test/object test deadlocks as expected.  Fix coming.

 configure.ac	  | 1 +
 test/Makefile.am | 4 ++--
 test/hb-test.h   | 1 +
 3 files changed, 4 insertions(+), 2 deletions(-)

commit 6a9093cc486c1899197cd7cc9a3eb907c2e756f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 19:00:07 2011 -0400

    [test/object] Test user_data with destroy() callback that calls
    user_data

    Exposes the non-atomicity of user_data opertaions at this time because
    we call finish() while still locked and modifying the object.
    In fact,
    I'm surprised that it doesn't deadlock.  It should.

 test/test-object.c | 22 ++++++++++++++++++++++
 1 file changed, 22 insertions(+)

commit abe636b8761e47ea60b193c7e72a044de224d172
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 17:55:40 2011 -0400

    Add DOAP file

 Makefile.am   |  6 +++++-
 harfbuzz.doap | 24 ++++++++++++++++++++++++
 2 files changed, 29 insertions(+), 1 deletion(-)

commit f82c18630471216a04e4e3ad42396da4e6d74cba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 17:48:34 2011 -0400

    [test/blob] Fix bug in test

 test/test-blob.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 785d23acd0ce72d399f9c5021bebc854872648af
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 17:41:44 2011 -0400

    [test/blob] Add create_sub_blob()

 test/test-blob.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit 0617b1558234673d3924f37541be01b04d36f05a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 10 17:37:08 2011 -0400

    [test] Test blob API

 test/Makefile.am   |	1 +
 test/test-blob.c   | 280
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 test/test-buffer.c | 149 ++++++++++++++--------------
 3 files changed, 359 insertions(+), 71 deletions(-)

commit 1c9f8717eb12c37c219333cbb0d123e1d2da4896
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 22:28:26 2011 -0400

    [API] Simplify blob API, remove lock

 TODO			     |	 2 -
 src/hb-blob.cc		     | 206
 ++++++++++++++++++--------------------------
 src/hb-blob.h		     |	19 ++--
 src/hb-font.cc		     |	 2 -
 src/hb-open-type-private.hh |	32 ++++---
 src/hb-ot-layout.cc	     |	 7 +-
 test/test-object.c	     |	 2 +-
 7 files changed, 118 insertions(+), 152 deletions(-)

commit 71cef14ac3de07e4fed0a2903b1f0f639406ec6c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 19:30:59 2011 -0400

    Add -Bsymbolic-functions to linker flags

 configure.ac | 3 +++
 1 file changed, 3 insertions(+)

commit ab428aeab724ca40341318b66640f992cd72d2fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 19:30:46 2011 -0400

    [TODO] Update

 TODO | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a0f337a1cce1788dbf3147b459e7f615acbfe81b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 19:20:52 2011 -0400

    Remove unused hb_blob_try_writable_inplace()

 src/hb-blob.cc | 20 --------------------
 src/hb-blob.h	|  3 ---
 2 files changed, 23 deletions(-)

commit 08611d5194144bbf5d96a1110aeb812db06e0901
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 16:28:10 2011 -0400

    Add note re deadlocks

 src/hb-common.cc	 | 1 +
 src/hb-mutex-private.hh | 4 ++++
 2 files changed, 5 insertions(+)

commit 34fb5521a5fbb6b95ceff4bbac42a62628bc9f31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 6 00:04:28 2011 -0400

    [API] Add hb_language_get_default()

    It uses locale information to detect default language.  It's used by
    hb_shape() whenever language is not set on the buffer.

    Not sure how to properly test it in the test suite.  Tested by
    observing
    that with DejaVu Sans we select the proper local glyph version
    for U+431
    under Serbian locale.  See http://www.pango.org/ScriptGallery

 src/hb-common.cc   | 21 +++++++++++++++++++++
 src/hb-common.h    |  3 +++
 src/hb-shape.cc    |  2 +-
 test/test-common.c |  5 +++++
 4 files changed, 30 insertions(+), 1 deletion(-)

commit c78f4485587cc1dee07e772c164a13fde9d2859f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 21:31:04 2011 -0400

    [API] Add version macros and functions

    Step version up to 0.5.0.

    Also, fix to pass "make distcheck"

 configure.ac		      | 24 ++++++++++++-----
 src/Makefile.am	      |  9 +++++++
 src/check-c-linkage-decls.sh |  2 +-
 src/hb-common.cc	      | 29 +++++++++++++++++++++
 src/hb-version.h.in	      | 62
 ++++++++++++++++++++++++++++++++++++++++++++
 src/hb.h		      |  1 +
 test/Makefile.am	      |  2 ++
 7 files changed, 122 insertions(+), 7 deletions(-)

commit 9ff819f6571fd0d570f271162d7a30d97ee64148
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 19:47:59 2011 -0400

    Add disable-static libtool flag

    No one who builds harfbuzz static uses the autotools build system
    to do it.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7ca7571ef91754274f6c84bbf988962d74a74098
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 19:47:12 2011 -0400

    Remove win32-dll libtool flag

    Since we're not win32-dll clean the way libtool docs define it.

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 174e3fe89b72729c9c34c647544a2dc1bf63cd84
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 19:37:53 2011 -0400

    Add AC_CANONICAL_HOST

 configure.ac | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit e6a5b88c01420366a70e0c9ae1775fb3c930cb8b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 16:24:42 2011 -0400

    Fix build with older glib

 configure.ac	|  2 +-
 test/hb-test.h | 55
 +++++++++++++++++++++++++++++++++----------------------
 2 files changed, 34 insertions(+), 23 deletions(-)

commit 3935af1c0d0f53a5fd6054e1ee219f3adda42dca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 16:09:45 2011 -0400

    [buffer] Remove wrong optimization

    While the cluster fields of the glyph string are usually sorted, they
    wouldn't be in special cases (for example for non-native direction).
    Blindly using bsearch is plain wrong.  If we want to reintroduce this
    optimization we have to make sure we know the buffer clusters are
    monotonic and in which direction.  Not sure it's worth it though.

 src/hb-buffer.cc | 16 +++-------------
 1 file changed, 3 insertions(+), 13 deletions(-)

commit 46df6828513d56cd60467e36cbe45aa06648f488
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 15:33:19 2011 -0400

    Make user_data access threadsafe

    For now, by taking a global user_data mutex.

 src/hb-common.cc	  | 25 +++++++++++++++++++++++--
 src/hb-object-private.hh |  2 --
 2 files changed, 23 insertions(+), 4 deletions(-)

commit 218e67b9eefa26e2e4fe43f99a84d082b185b1b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 15:28:37 2011 -0400

    Shrink code

 src/hb-common.cc	  | 26 ++++++++++++++++++++++++++
 src/hb-object-private.hh | 21 ++++-----------------
 2 files changed, 30 insertions(+), 17 deletions(-)

commit b8d6183ebc4697a434776cf2aec7857d63a7d881
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 15:14:04 2011 -0400

    Use threadsafe set implementation for hb_language lookups

    Note that the static variable has to be a global static, as gcc
    implements local statics differently and that would require linking
    to libstdc++, which we don't want.

 src/hb-common.cc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit d37486d87b65c5abaaa2998fa5c9e48eedde0933
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 15:07:54 2011 -0400

    Add hb_threadsafe_set_t

 src/hb-mutex-private.hh | 54
 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-private.hh	 |  3 +--
 2 files changed, 55 insertions(+), 2 deletions(-)

commit b45f32ee4e599c515ce93e44315283d236b073bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 15:00:43 2011 -0400

    Use hb_array_t for hb_language_t mapping

 src/hb-common.cc	  | 48
 ++++++++++++++++++++++--------------------------
 src/hb-object-private.hh |  4 ++--
 src/hb-private.hh	  | 19 +++++++++++++++----
 3 files changed, 39 insertions(+), 32 deletions(-)

commit 21d2c92fdf7307c7117f8948021f0dd7d5a5d2a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 14:47:53 2011 -0400

    Move code around

 src/hb-object-private.hh | 28 ++++++++++++++--------------
 1 file changed, 14 insertions(+), 14 deletions(-)

commit 448ea9bf63104d39f87fff66219034222fa632b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 14:39:24 2011 -0400

    [TODO] Remove done items

 TODO | 9 ---------
 1 file changed, 9 deletions(-)

commit 265ac614ea6d26041c7d64739098b76a82bbc4f4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 14:38:16 2011 -0400

    Replace fixed-size lookup_maps array with hb_array_t

 src/hb-ot-map-private.hh | 13 +++++--------
 src/hb-ot-map.cc	  | 47
 +++++++++++++++++++++++++----------------------
 src/hb-private.hh	  |  6 ++----
 3 files changed, 32 insertions(+), 34 deletions(-)

commit 6843569d2c70c1771ce964e3d1a4cf91e14e7687
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 14:12:37 2011 -0400

    Replace fixed-size feature_maps array with hb_array_t

 src/hb-ot-map-private.hh | 10 +++-------
 src/hb-ot-map.cc	  | 12 ++++++------
 src/hb-ot-shape.cc	  |  2 +-
 src/hb-private.hh	  | 42 +++++++++++++++++++++++++++++-------------
 4 files changed, 39 insertions(+), 27 deletions(-)

commit 44b0a4d2fc62689fc56ef57f412b4bb1e439a614
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 13:42:19 2011 -0400

    Replace fixed-size feature_infos array with hb_array_t

 src/hb-ot-map-private.hh |  9 +++++----
 src/hb-ot-map.cc	  |  9 +++++----
 src/hb-private.hh	  | 12 ++++++++++++
 3 files changed, 22 insertions(+), 8 deletions(-)

commit b214ec3ac0ce6568e9226fd09661d52de11dca96
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 13:24:07 2011 -0400

    Minor

 src/hb-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 811482bd650fb5652a9835471ae8ecf0fb185611
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 13:21:04 2011 -0400

    Replace hb_map_t with hb_set_t which is more intuitive and flexible

 src/hb-object-private.hh | 24 ++++++++++++++----------
 src/hb-private.hh	  | 44
 +++++++++++++++++---------------------------
 test/test-object.c	  |  4 ++++
 3 files changed, 35 insertions(+), 37 deletions(-)

commit 478a42536ff7ab777a7774fbfdb9c5e51334a14e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 12:39:51 2011 -0400

    Make array/map implementation more generic

 src/hb-object-private.hh |  2 ++
 src/hb-private.hh	  | 13 +++++++------
 2 files changed, 9 insertions(+), 6 deletions(-)

commit b81bd42951e1ce1569b29168015d3c5a2dacf773
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 00:21:16 2011 -0400

    Make hb_mutex_*() macros take a pointer

    More intuitive.

 src/hb-blob.cc		 | 28 ++++++++++++++--------------
 src/hb-mutex-private.hh | 32 ++++++++++++++++----------------
 2 files changed, 30 insertions(+), 30 deletions(-)

commit a4b1900913c91aa9db74c4fdfa7c691a5cdf02a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 5 00:17:43 2011 -0400

    Add hb_static_mutex_t

 src/hb-mutex-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 56eb5ad6f94c32189ad219438db9a18683ca6846
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 4 19:27:37 2011 -0400

    Move code around

    Mutex (and Windows.h by extension) are fairly isolated now.

 src/Makefile.am	  |   8 ++--
 src/hb-blob-private.hh   |  60 ---------------------------
 src/hb-blob.cc		  |  24 ++++++++++-
 src/hb-font-private.hh   |   3 --
 src/hb-font.cc		  |  12 +++---
 src/hb-mutex-private.hh  | 105
 +++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-object-private.hh |  33 ++-------------
 src/hb-unicode.cc	  |   1 -
 8 files changed, 141 insertions(+), 105 deletions(-)

commit d292885893395dcb345dce1010e5c8628a715ef4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 3 01:03:53 2011 -0400

    [ft] Fix font->face handling

    Don't use _cached()

 src/hb-ft.cc | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 2000179487b49e0d504ec127450dc6fcb5568cec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 3 00:49:06 2011 -0400

    Move Win32 thread-safety stuff to hb-object-private.h

    The Win32 definitions for LONG, ULONG, etc conflicts with
    hb-open-type.h.  Avoid that by making sure hb-object-private.h
    and hb-open-type.h are not included in the same compilation unit.

 src/hb-common.cc	  | 54 ---------------------------------------
 src/hb-object-private.hh | 66
 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-private.hh	  | 66
 ------------------------------------------------
 3 files changed, 66 insertions(+), 120 deletions(-)

commit 266b34418c9bbe23ccaf29cb354b58c465fa3b22
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 3 00:35:53 2011 -0400

    Refactor to keep hb-object-private.h and hb-open-type.h separate

    Needed to be able to include <Windows.h> from hb-object-private.h.

 src/hb-font.cc		     | 19 ++++----------
 src/hb-ot-layout-private.hh | 60
 +++++++++++++++++++++++++--------------------
 src/hb-ot-layout.cc	     | 28 ++++++++++++++++++---
 3 files changed, 63 insertions(+), 44 deletions(-)

commit d4141a44b97377a65e6d2a3e03b3709307af38c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 3 00:19:18 2011 -0400

    [blob] Implement sub_blob() in terms of create()

    Fixes problem with uninitialized sub_blob->mutex among other things.

    Reported by Bradley Grainger.

 src/hb-blob.cc | 12 +++++-------
 1 file changed, 5 insertions(+), 7 deletions(-)

commit fc52e9e44c2fe84d63f18dc0098720830f0b467d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 3 00:09:16 2011 -0400

    Implement win32 thread-safety stuff

    Patch from Bradley Grainger.

 src/hb-common.cc  | 54
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-private.hh | 30 +++++++++++++++++++++++++-----
 2 files changed, 79 insertions(+), 5 deletions(-)

commit f55272ecde857c116f97a3195f3abd1df3be4b86
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 20:57:28 2011 -0400

    Add hb_mutex_free() and use it

    Based on patch by Bradley Grainger.

 src/hb-blob.cc    |  1 +
 src/hb-private.hh | 16 +++++++++-------
 2 files changed, 10 insertions(+), 7 deletions(-)

commit 8d5186484b28b5f629b523e067d7d5166eec557a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 20:52:21 2011 -0400

    Cosmetic

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 72657e4ce757dcb055a8db7291b68f96f0d34bfb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 20:46:32 2011 -0400

    [API] Make hb_font_create() take a face and reference it

 src/hb-font-private.hh		  |  2 ++
 src/hb-font.cc			  | 42
 +++++++++++++++++++++++++---------------
 src/hb-font.h			  | 26 ++++++++++++++-----------
 src/hb-ft.cc			  |  7 +------
 src/hb-ot-layout-gdef-private.hh |  2 +-
 src/hb-ot-layout-gpos-private.hh |  2 +-
 src/hb-ot-layout.cc		  | 10 ++++------
 src/hb-ot-layout.h		  |  2 --
 src/hb-ot-map-private.hh	  |  2 +-
 src/hb-ot-shape.cc		  | 23 +++++++++++-----------
 src/hb-ot-shape.h		  |  1 -
 src/hb-shape.cc		  | 18 ++---------------
 src/hb-shape.h			  |  1 -
 src/hb-view.cc			  |  4 +---
 test/test-object.c		  |  7 +++++--
 15 files changed, 70 insertions(+), 79 deletions(-)

commit cec6611c5ce84d69d910bf7e9ec1fdd594398f9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 20:18:58 2011 -0400

    Protect NULL in a couple places

 src/hb-font.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 5a5030366e40baa8d96ca67b47a52ad5af143157
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:54:29 2011 -0400

    Fix bug in array growth implementation

    With this, test/object is now passing.  Yay!

 src/hb-private.hh | 24 +++++++++++-------------
 1 file changed, 11 insertions(+), 13 deletions(-)

commit 16123e10700436df18d14e37371bb621b31ea5d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:54:17 2011 -0400

    Fix bug in map implementation

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1cd5969f253528b1fc05a06c7a9f222baa29f68d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:53:39 2011 -0400

    [object] Fix bug in get_user_data() implementation

 src/hb-object-private.hh | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit db99589529a22a2113bcef1680ab6d9b934f382e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:52:47 2011 -0400

    [test/object] Add test for object lifecycle stuff

    Revealed many bugs in the (untested and known buggy) user_data
    support.

 test/Makefile.am   |	4 +
 test/test-object.c | 316
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 320 insertions(+)

commit f74d6c81f14f117b3cecfb65f0d5df22849c9a07
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:52:32 2011 -0400

    Cosmetic

 test/test-unicode.c | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 4911062d5be0d937ee8f1a70cc93e05d162f45b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:36:39 2011 -0400

    [API] Rename hb_blob_create_empty() to hb_blob_get_empty()

 src/hb-blob.cc		     | 2 +-
 src/hb-blob.h		     | 2 +-
 src/hb-font.cc		     | 2 +-
 src/hb-open-type-private.hh | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit 1ab1d3e38cdf8e7331efdbc4ef0c02ee9d5c8c04
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:35:53 2011 -0400

    [face] Return nil face if blob is inert

 src/hb-font.cc | 3 +++
 1 file changed, 3 insertions(+)

commit e87867cb88280e3f3a38d829e359cb686168b2cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 19:35:05 2011 -0400

    [buffer] Fail in _create() if we cannot pre-allocate the requested
    size

 src/hb-buffer.cc | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit cd361ec9a1b2bfc271e5490dbfc0a870fd5c439a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 16:54:05 2011 -0400

    Cosmetic

 test/test-unicode.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c784c67a28f5b92d396eaa9529d57ef91a5cb9ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 15:59:57 2011 -0400

    [unicode] Make _get_parent() return _nil object instead of NULL

 src/hb-unicode.cc   | 29 ++++++++++++-----------------
 test/test-unicode.c |	2 +-
 2 files changed, 13 insertions(+), 18 deletions(-)

commit 07e22779abd089d5921bf2d19d4a3bf1bd0173c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 14:58:04 2011 -0400

    [test/unicode] Add script roundtrip tests for glib and ICU

 test/test-unicode.c | 70
 ++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 64 insertions(+), 6 deletions(-)

commit 7cda65935c73c277550f6ac12f6730e96d4852a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 14:33:53 2011 -0400

    [test/unicode] Better test chainup

 test/test-unicode.c | 54
 ++++++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 49 insertions(+), 5 deletions(-)

commit 250c59225ead28449deb11522dee3819480a19b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 14:21:30 2011 -0400

    [test/unicode] Port the _custom test to test all property setters

 test/test-unicode.c | 186
 +++++++++++++++++++++++++++++-----------------------
 1 file changed, 104 insertions(+), 82 deletions(-)

commit e74b5b339ab0af53d893ec84a0955d5aa508fed3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 14:03:55 2011 -0400

    [test/unicode] Test Unicode 5.2+ but don't fail

 test/test-unicode.c | 21 +++++++++++++++++++--
 1 file changed, 19 insertions(+), 2 deletions(-)

commit c763aa42b46eaee95359806cab56fa632ff3ad58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 13:52:17 2011 -0400

    [test/buffer] Clean up testing

    Getting the hang of how to cleanly use gtest.

 test/test-buffer.c | 154
 +++++++++++++++++++++++++++++------------------------
 1 file changed, 85 insertions(+), 69 deletions(-)

commit 819e9d9e5310e67e8dcce9fa885f8a086a9b9ee8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 12:38:54 2011 -0400

    Minor

 test/test-unicode.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 03034acb8a9fdd33135bc3775a1f932da9ebdd42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 12:37:45 2011 -0400

    [icu] Make sure we return script UNKNOWN instead of INVALID

 src/hb-icu.cc | 3 +++
 1 file changed, 3 insertions(+)

commit d02985ec5a24c659a0a133cc6bc103f1d76bcb29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 12:35:14 2011 -0400

    ISO 15924 fixes

    Update to http://unicode.org/iso15924

    Fixes some of the test failures in test-unicode with ICU.  Still
    one more to fix before the test passes.

 src/hb-common.cc | 10 ++++++++--
 src/hb-common.h  |  5 +++--
 src/hb-ot-tag.cc |  2 --
 3 files changed, 11 insertions(+), 6 deletions(-)

commit e8e29c725a72c2e991cd1c4422a020457e1684e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 2 12:06:18 2011 -0400

    [test/unicode] Add log messages

    Use with --verbose to see what's failing

 test/test-unicode.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 208c2c31501f6eb2b81b6bf80fcf39f4646eb38b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 1 20:04:01 2011 -0400

    Minor

 test/test-unicode.c | 478
 ++++++++++++++++++++++++++--------------------------
 1 file changed, 243 insertions(+), 235 deletions(-)

commit 60833efaf1310c3f18e150b61daaeb0074ae3d91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 29 16:49:57 2011 -0400

    [test/unicode] Add testing of all unicode properties

    ICU fails for now.

 test/hb-test.h      |	 4 +-
 test/test-unicode.c | 432
 +++++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 416 insertions(+), 20 deletions(-)

commit da96ee072fa3544c3d36cf0b82ada11806789d70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 29 12:17:09 2011 -0400

    [test/unicode] Test is/make_immutable()

 test/test-unicode.c | 46 ++++++++++++++++++++++++++++++----------------
 1 file changed, 30 insertions(+), 16 deletions(-)

commit 6af9cff5e17e82100b435c8d21aed0765296d58d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 29 12:00:38 2011 -0400

    [test/unicode] Use text fixture instead of static variables

 src/hb-unicode-private.hh |   2 +-
 src/hb-unicode.h	   |   2 +-
 test/test-buffer.c	   |   2 +-
 test/test-c.c		   |   1 +
 test/test-common.c	   |   3 +-
 test/test-cplusplus.cc    |   1 +
 test/test-unicode.c	   | 112
 +++++++++++++++++++++++++++-------------------
 7 files changed, 74 insertions(+), 49 deletions(-)

commit 13db3d40bfc09c68f9761a71435b1840b9d34099
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 19:44:45 2011 -0400

    [test/buffer] Add UTF-16 tests

 test/test-buffer.c | 48 ++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 46 insertions(+), 2 deletions(-)

commit 243673d601588a6f704ceafbff5dd5cdf66c47b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 19:37:51 2011 -0400

    [test/buffer] Add more extensive UTF-8 test data from glib

 src/hb-buffer.cc   |	2 +-
 test/test-buffer.c | 317
 ++++++++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 303 insertions(+), 16 deletions(-)

commit dfec67f958482e5c3bb01e06b08694cd4ded6f66
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 18:34:42 2011 -0400

    [test/buffer] Add initial utf-8 tests

 test/hb-test.h     | 25 ++++++++++++++++++++++++-
 test/test-buffer.c | 46 +++++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 69 insertions(+), 2 deletions(-)

commit aafe395ab550d3ba2fabc69155662e87d45e74a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 17:10:44 2011 -0400

    Add test suite infrastructure

    Wraps around glib for convenience and ease of use.

 test/Makefile.am    |	 1 +
 test/hb-test.h      | 132
 ++++++++++++++++++++++++++++++++++++++++++++++++----
 test/test-buffer.c  |	29 ++++++------
 test/test-common.c  |	14 +++---
 test/test-unicode.c |	32 ++++++-------
 5 files changed, 160 insertions(+), 48 deletions(-)

commit c7ffe2ad5f6e97e26d14e2cc0d4098af8f5f36d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 16:03:29 2011 -0400

    [API Remove hb_font_funcs_copy()

    Will be adding font_funcs subclassing instead.

 src/hb-font.cc | 13 -------------
 src/hb-font.h	|  3 ---
 2 files changed, 16 deletions(-)

commit 30f34d08d445722320db711c3ddf41e66225752c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 16:02:40 2011 -0400

    [TODO] Remove finished items

 TODO	       |  2 --
 src/hb-font.h | 10 ----------
 2 files changed, 12 deletions(-)

commit 080a0eb7d82d7195be72c16ece6e0a3ffed636b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 16:01:01 2011 -0400

    Add _hb_unsigned_int_mul_overflows

 src/hb-buffer.cc		  | 7 ++-----
 src/hb-open-type-private.hh	  | 2 +-
 src/hb-ot-layout-gsub-private.hh | 2 +-
 src/hb-private.hh		  | 9 ++++++++-
 4 files changed, 12 insertions(+), 8 deletions(-)

commit 1d39d6e42b3d7628512d675a84a831a0f58624eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 15:54:16 2011 -0400

    Desable possibly lethal test on 64-bit machines

 test/test-buffer.c | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 3264042873fd639f3ef8ff0acfad777a0a9f3355
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 14:24:16 2011 -0400

    [test/buffer] Test pre_allocate() and allocation_successful()

 src/hb-buffer.cc   |  3 ++-
 test/test-buffer.c | 26 +++++++++++++++++++++++++-
 2 files changed, 27 insertions(+), 2 deletions(-)

commit 123aa04f7b3241d6e43de2d472c4a1cbdb250ac7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 12:58:28 2011 -0400

    Fix possible but improbable overflow in hb_array_t

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e0db4b868f9fdd8e680890f87dd4e13a1c27b7a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 12:56:49 2011 -0400

    [buffer] More error handling

    Should be all set now.

 src/hb-buffer-private.hh |  2 +-
 src/hb-buffer.cc	  | 60
 +++++++++++++++++++++++++++++++++---------------
 2 files changed, 43 insertions(+), 19 deletions(-)

commit 15c57e04bf05026ef424f8ae912d2f379301bf93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 12:28:54 2011 -0400

    [test/buffer] Add test pre_alloc(); hangs in the buffer code right now

    Because the following loop overflows:

      while (size > new_allocated)
	  new_allocated += (new_allocated >> 1) + 32;

 test/test-buffer.c | 33 ++++++++++++++++++++++++++-------
 1 file changed, 26 insertions(+), 7 deletions(-)

commit 1e5527e2d60ed3b4a5adf62b258415ec3aef41fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 12:15:24 2011 -0400

    [test/buffer] Test reset(), set_length(), and set/get_unicode_data()

 test/test-buffer.c | 66
 ++++++++++++++++++++++++++++++++++++++++++++++++------
 1 file changed, 59 insertions(+), 7 deletions(-)

commit db126b5448ec802285cf2b6f0e7da412d02dfb28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 28 11:56:29 2011 -0400

    [test/buffer] Test reverse() and reverse_clusters()

 test/test-buffer.c | 61
 ++++++++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 57 insertions(+), 4 deletions(-)

commit 5fa849b77d49da2212825ebb1bea9145713b8449
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 21:46:01 2011 -0400

    [API] Add _set/get_user_data() for all objects

 src/hb-blob.cc    | 17 +++++++++++++++++
 src/hb-blob.h	   | 12 ++++++++++++
 src/hb-buffer.cc  | 16 ++++++++++++++++
 src/hb-buffer.h   | 10 ++++++++++
 src/hb-font.cc    | 51
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-font.h	   | 36 ++++++++++++++++++++++++++++++++++++
 src/hb-unicode.cc | 17 +++++++++++++++++
 src/hb-unicode.h  | 12 ++++++++++++
 8 files changed, 171 insertions(+)

commit 852e08ec8fbfbce1d50e571d0bb0b52ef4d4cc58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 21:45:51 2011 -0400

    Move code around

 src/hb-object-private.hh | 153
 ++++++++++-------------------------------------
 src/hb-private.hh	  | 136 +++++++++++++++++++++++++++++++++++++----
 2 files changed, 157 insertions(+), 132 deletions(-)

commit 29c67d3f70b081766a6c01353980f457f38aeb12
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 21:22:32 2011 -0400

    Add initial implementation of user_data to objects

 src/hb-common.h	  |  11 ++-
 src/hb-object-private.hh | 186
 ++++++++++++++++++++++++++++++++++++++++++++++-
 2 files changed, 193 insertions(+), 4 deletions(-)

commit 47e71d9661946a4ffb96026bf1d697d788414ab5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 16:38:03 2011 -0400

    [object] Remove unnecessary use of macros

 TODO			  |  2 --
 src/hb-blob.cc		  | 18 +++++++++---------
 src/hb-buffer.cc	  |  6 +++---
 src/hb-font.cc		  | 30 +++++++++++++++---------------
 src/hb-object-private.hh |  9 ---------
 src/hb-unicode.cc	  |  8 ++++----
 6 files changed, 31 insertions(+), 42 deletions(-)

commit 8be1420f8fd0e5c53282245d6830efbee5c7409d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 16:14:04 2011 -0400

    [blob] Use HB_FUNC instead of __FUNCTION__

 src/hb-blob.cc | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit ae008b90cfc2028e878100f78b21d70f923a6044
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 16:12:12 2011 -0400

    [object] Add tracing support back in

 src/hb-object-private.hh | 38 ++++++++++++++++++++++++++------------
 1 file changed, 26 insertions(+), 12 deletions(-)

commit 5b7f38979fa90117861fe327477de1707f117a8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 15:10:12 2011 -0400

    GNOME Bug 612402 - (hb-arm) HarfBuzz compilation fix for arm

    With gcc on arm, request 8-bit structure alignment.

 configure.ac | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 39a840ae65327b173e6eb1bb291e235a8305d7a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 14:48:19 2011 -0400

    [API] Add hb_direction_from/to_string()

    And hb-view --direction argument.

 TODO		    |  1 -
 src/hb-common.cc   | 36 ++++++++++++++++++++++++++++++++++++
 src/hb-common.h    |  6 ++++++
 src/hb-view.cc     | 13 ++++++++++---
 test/test-common.c | 21 ++++++++++++++++++++-
 5 files changed, 72 insertions(+), 5 deletions(-)

commit f1425a549fef360c3750532de23604cd318999d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 12:15:06 2011 -0400

    Rename hb-view.c and test.c to .cc files

 src/Makefile.am |   4 +-
 src/hb-view.c	 | 540
 --------------------------------------------------------
 src/hb-view.cc  | 540
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/test.c	 |  94 ----------
 src/test.cc	 |  97 ++++++++++
 5 files changed, 639 insertions(+), 636 deletions(-)

commit eb5796f58897ecfb9d76fd99915bf1a30669a0fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 12:14:53 2011 -0400

    [TODO] Add hb-view items

 TODO | 10 ++++++++++
 1 file changed, 10 insertions(+)

commit 65e0063eae2f3adb25315b8bd7b0e7757aa960f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 09:33:58 2011 -0400

    Make buffer size growth start from 32 instead of 8

 src/hb-buffer.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit d4bee9f813bb299b1c4aab7c33d588be2a7d354b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 09:24:37 2011 -0400

    [API] Add hb_unicode_funcs_get_default()

 src/hb-buffer.cc	   |  4 ++--
 src/hb-glib.cc		   |  5 +++--
 src/hb-icu.cc		   |  5 +++--
 src/hb-unicode-private.hh | 11 +++++++++++
 src/hb-unicode.cc	   |  7 +++++++
 src/hb-unicode.h	   |  8 ++++++++
 src/hb-view.c		   | 13 ++++++-------
 test/test-unicode.c	   | 11 ++++++++++-
 8 files changed, 50 insertions(+), 14 deletions(-)

commit 153142dac8dd9abaf164bb88af07c600c17fc3a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 01:49:03 2011 -0400

    Replace simple macros with inline functions for better type safety

    Now that we use C++ for all source code, lets benefit from it!

    The hb_be_int16/32_get/put/eq() macros grow code size if replaced with
    inline functions, so leave them as is.

 src/hb-open-type-private.hh |	4 ++--
 src/hb-private.hh	     | 30 +++++++++++++++++++++---------
 2 files changed, 23 insertions(+), 11 deletions(-)

commit 40a9b8154f929947f4693bf90c64301afa407c3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 01:48:56 2011 -0400

    Add TODO item

 src/hb-object-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit ebdc83467c31574daa118fc18cd2ef2dc819b503
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 27 01:41:24 2011 -0400

    Don't return in void function

    Would have been nice if gcc had warned...

 src/hb-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ec6f9c2fd03a49d1e91cbaefa5bdbbfb35dff92e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 18:35:58 2011 -0400

    Further simplify object handling

 src/hb-object-private.hh | 53
 ++++++++++++++++++++++++------------------------
 1 file changed, 27 insertions(+), 26 deletions(-)

commit fca368c4682624346a0aaee690e1ad6ed4c0b337
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 18:24:02 2011 -0400

    Add hb_object_header_t which is the common part of all objects

    Makes way for adding arbitrary user_data support.

 src/hb-blob-private.hh    |  3 +-
 src/hb-blob.cc		   |  2 +-
 src/hb-buffer-private.hh  |  9 +++--
 src/hb-buffer.cc	   |  2 +-
 src/hb-font-private.hh    |  7 ++--
 src/hb-font.cc		   |  7 ++--
 src/hb-ft.cc		   |  3 +-
 src/hb-glib.cc		   |  3 +-
 src/hb-icu.cc		   |  3 +-
 src/hb-object-private.hh  | 95
 ++++++++++++++++++++++++++---------------------
 src/hb-private.hh	   |  5 +--
 src/hb-unicode-private.hh |  6 ++-
 src/hb-unicode.cc	   |  3 +-
 13 files changed, 82 insertions(+), 66 deletions(-)

commit a9f24c802956d57180d71b83e96a0fb81197df4a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 17:18:22 2011 -0400

    Move hb_reference_count_t to hb-private.h

 src/hb-object-private.hh | 17 -----------------
 src/hb-private.hh	  | 20 ++++++++++++++++++++
 2 files changed, 20 insertions(+), 17 deletions(-)

commit 2409d5f8d7dd8b535ce5ea29e933f7db27d33793
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 17:14:28 2011 -0400

    Update Copyright headers

 COPYING				 | 15 ++++++++-------
 src/hb-blob-private.hh			 |  2 +-
 src/hb-blob.cc				 |  2 +-
 src/hb-blob.h				 |  2 +-
 src/hb-buffer-private.hh		 |  4 ++--
 src/hb-buffer.cc			 |  6 +++---
 src/hb-buffer.h			 |  6 +++---
 src/hb-common.cc			 |  4 +++-
 src/hb-common.h			 |  4 +++-
 src/hb-font-private.hh			 |  4 +++-
 src/hb-font.cc				 |  2 +-
 src/hb-font.h				 |  2 +-
 src/hb-ft.cc				 |  4 ++--
 src/hb-ft.h				 |  2 +-
 src/hb-glib.cc				 |  4 +++-
 src/hb-glib.h				 |  4 +++-
 src/hb-icu.cc				 |  6 ++++--
 src/hb-icu.h				 |  4 +++-
 src/hb-object-private.hh		 |  6 ++++--
 src/hb-open-file-private.hh		 |  2 +-
 src/hb-open-type-private.hh		 |  2 +-
 src/hb-ot-head-private.hh		 |  2 +-
 src/hb-ot-layout-common-private.hh	 |  4 ++--
 src/hb-ot-layout-gdef-private.hh	 |  4 ++--
 src/hb-ot-layout-gpos-private.hh	 |  4 ++--
 src/hb-ot-layout-gsub-private.hh	 |  4 ++--
 src/hb-ot-layout-gsubgpos-private.hh	 |  4 ++--
 src/hb-ot-layout-private.hh		 |  2 +-
 src/hb-ot-layout.cc			 |  6 +++---
 src/hb-ot-layout.h			 |  2 +-
 src/hb-ot-map-private.hh		 |  4 ++--
 src/hb-ot-map.cc			 |  4 ++--
 src/hb-ot-shape-complex-arabic-table.hh |  2 +-
 src/hb-ot-shape-complex-arabic.cc	 |  2 +-
 src/hb-ot-shape-complex-private.hh	 |  2 +-
 src/hb-ot-shape-private.hh		 |  2 +-
 src/hb-ot-shape.cc			 |  4 ++--
 src/hb-ot-shape.h			 |  2 +-
 src/hb-ot-tag.cc			 |  4 +++-
 src/hb-ot-tag.h			 |  2 +-
 src/hb-ot.h				 |  2 +-
 src/hb-private.hh			 |  4 +++-
 src/hb-shape.cc			 |  2 +-
 src/hb-shape.h				 |  2 +-
 src/hb-unicode-private.hh		 |  4 ++--
 src/hb-unicode.cc			 |  4 ++--
 src/hb-unicode.h			 |  4 +++-
 src/hb-view.c				 |  4 ++--
 src/hb.h				 |  2 +-
 src/main.cc				 |  2 +-
 src/test.c				 |  2 +-
 test/hb-test.h				 | 17 ++++++++++++++++-
 test/test-buffer.c			 |  2 +-
 test/test-c.c				 |  2 +-
 test/test-common.c			 |  2 +-
 test/test-cplusplus.cc			 |  2 +-
 test/test-unicode.c			 |  2 +-
 57 files changed, 122 insertions(+), 84 deletions(-)

commit 08da7a3841ca7dfcb627314cae1c3a668b9c7236
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 16:59:10 2011 -0400

    [hb-view] Accept numbers in feature tag name

    Reported by Adam Twardoch.

 src/hb-view.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 24229eb13268a422efffbcb28a094b726824c7f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 16:55:17 2011 -0400

    Remove obsolete comment

    Talking to Ryan Lortie, he thinks my comment doesn't make sense.

    So I'm making the getter const.  Note that g_atomic_int_get()
    casts that away itself, so we don't need to worry about that
    (which kinda makes me uncomfortable actually).

 src/hb-object-private.hh | 16 ++--------------
 1 file changed, 2 insertions(+), 14 deletions(-)

commit dcb7026f33cbcdf60e9b7fcdd44c64cc08702c74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 16:34:22 2011 -0400

    Add ASSERT_STATIC_EXPR macro

    Unused right now.

 src/hb-private.hh | 2 ++
 1 file changed, 2 insertions(+)

commit 3e8bdbf9414291da5cf61213d5f4275c1ae23ae5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 16:16:21 2011 -0400

    Cleanup hb_refrence_count_t

 src/hb-object-private.hh | 23 ++++++++++++++++++-----
 src/hb-private.hh	  |  6 +++---
 2 files changed, 21 insertions(+), 8 deletions(-)

commit 783a7d69696bf0b1502ec9c1495e482e491c78e0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 16:03:59 2011 -0400

    [TODO] Remove finished items

 TODO	      | 6 +-----
 src/hb-ft.cc | 1 -
 2 files changed, 1 insertion(+), 6 deletions(-)

commit da975419884a535281745f30f4b32fee0bc8a7a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 15:08:01 2011 -0400

    [API] Allow negative font x_scale/y_scale

    I was reconsidering whether y should grow down, since all three/four
    times I've used this API I was tricked and got that wrong in my use.
    So I was very inclined to make y grow down instead of up.  However,
    considering that the font space has y up and it would be very
    confusing
    for callbacks to work against that, I decided that what I really want
    is for the user to be able to set y_scale to a negative number
    to imply
    that user-space y grows down.

    Changing x_scale/y_scale from unsigned int to int allows that,
    and I've
    made pango to use that instead of negating glyph y_offset later.
    hb-ft
    however still has y group up.  I *guess* that's how FreeType works?
    I'm not sure, FreeType docs don't make this clear...

    I'm happy with the resolution :-).

 src/hb-font.cc			    | 8 ++++----
 src/hb-font.h			    | 8 ++++----
 src/hb-ot-layout-common-private.hh | 6 +-----
 src/hb-ot-layout-private.hh	    | 2 +-
 4 files changed, 10 insertions(+), 14 deletions(-)

commit 4d559cddbb3b3a5c12c5167eba69598618a9f283
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 21 14:58:23 2011 -0400

    [icu] Remove big script switch(), rely on reverse-lookup

 src/hb-icu.cc | 137
 ++++------------------------------------------------------
 1 file changed, 9 insertions(+), 128 deletions(-)

commit d18431b4cd8c1b14523733cd60a62b862f5b471f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 18:59:10 2011 -0400

    Move hb_reference_count_t from macros to inline methods

 src/hb-object-private.hh | 25 +++++++++++--------------
 1 file changed, 11 insertions(+), 14 deletions(-)

commit c57d454accff66e5f2c58006e8fb40bc020b6182
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 18:50:27 2011 -0400

    Rename all private sources and headers to C++ files

    So we can liberally use the simple features of C++ that parts of the
    codebase is already using.

 src/Makefile.am			 |  17 +-
 src/hb-blob-private.h			 |  59 ---
 src/hb-blob-private.hh			 |  59 +++
 src/hb-blob.cc				 |   4 +-
 src/hb-buffer-private.hh		 |   2 +-
 src/hb-common.c			 | 222 -----------
 src/hb-common.cc			 | 222 +++++++++++
 src/hb-font-private.h			 |  97 -----
 src/hb-font-private.hh			 |  97 +++++
 src/hb-font.cc				 |   6 +-
 src/hb-ft.c				 | 262 ------------
 src/hb-ft.cc				 | 262 ++++++++++++
 src/hb-glib.cc				 |   2 +-
 src/hb-icu.cc				 |   2 +-
 src/hb-object-private.h		 | 134 -------
 src/hb-object-private.hh		 | 132 +++++++
 src/hb-open-type-private.hh		 |   2 +-
 src/hb-ot-layout-gdef-private.hh	 |   2 +-
 src/hb-ot-layout-private.hh		 |   4 +-
 src/hb-ot-shape-complex-arabic-table.h  | 674
 -------------------------------
 src/hb-ot-shape-complex-arabic-table.hh | 674
 +++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-arabic.cc	 |   2 +-
 src/hb-ot-shape-complex-private.hh	 |   2 +-
 src/hb-ot-shape-private.hh		 |   2 +-
 src/hb-ot-tag.c			 | 677
 --------------------------------
 src/hb-ot-tag.cc			 | 677
 ++++++++++++++++++++++++++++++++
 src/hb-private.h			 | 301 --------------
 src/hb-private.hh			 | 301 ++++++++++++++
 src/hb-shape.cc			 |   2 +-
 src/hb-unicode-private.hh		 |   2 +-
 src/hb-unicode.cc			 |   2 +-
 src/hb-view.c				 |   6 +
 32 files changed, 2457 insertions(+), 2452 deletions(-)

commit f19f4f9b0965ad7473a0f3a1ffcdbf16930e35d4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 18:25:56 2011 -0400

    Rename hb-blob.c to hb-blob.cc in preparation of more changes

 src/Makefile.am |   2 +-
 src/hb-blob.c	 | 356
 --------------------------------------------------------
 src/hb-blob.cc  | 356
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 357 insertions(+), 357 deletions(-)

commit 04744e73bad22d679986173b5f0d84dbbf49dd57
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 17:24:03 2011 -0400

    [TODO] Remove done items

 TODO | 6 ------
 1 file changed, 6 deletions(-)

commit 9417c1c0d2b005eadf0c087ca695121a6200d0f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 17:21:23 2011 -0400

    [API] Make hb_face_reference_table() return empty blob instead of NULL

    The idea here is that:

      - Like pretty much all other API in harfbuzz, user does not have to
	check for NULL.

      - In any caller code, the case of missing table should be handled
	exactly the same way that a too-short table is handled.  Turning
	a non-existent talbe into a table of size 0 makes the user code
	safer.

 src/hb-font.cc		     | 2 ++
 src/hb-open-type-private.hh | 3 ---
 2 files changed, 2 insertions(+), 3 deletions(-)

commit c035812feb0d385a9e8c334631738e4915912c71
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 17:03:00 2011 -0400

    [API] Rename hb_face_get_table() to hb_face_reference_table()

    That correctly reflects the reference ownership transfer happening.

 src/hb-font.cc      | 4 ++--
 src/hb-font.h	     | 7 ++-----
 src/hb-ot-layout.cc | 6 +++---
 src/hb-shape.cc     | 2 +-
 4 files changed, 8 insertions(+), 11 deletions(-)

commit 2d7b61a4b0ed212ca414b3281c2eae3e3db19c13
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 16:40:56 2011 -0400

    [TODO] Remove done items

 TODO	     | 10 ++--------
 src/hb-ft.h |	2 +-
 2 files changed, 3 insertions(+), 9 deletions(-)

commit af02933739e03a156b9f7761fd7a63e2a02d0df1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 15:49:31 2011 -0400

    [API] Remove hb_*_get_reference_count()

    This was a bizzare piece of API that I inherited from cairo.  It has
    been wrong adding them to cairo in the first place.  Remove them
    before
    someone uses them!

 src/hb-blob.c		 |  6 ------
 src/hb-blob.h		 |  3 ---
 src/hb-buffer.cc	 |  6 ------
 src/hb-buffer.h	 |  3 ---
 src/hb-font.cc		 | 18 ------------------
 src/hb-font.h		 |  9 ---------
 src/hb-object-private.h |  7 -------
 src/hb-unicode.cc	 |  6 ------
 src/hb-unicode.h	 |  3 ---
 test/test-unicode.c	 | 24 ------------------------
 10 files changed, 85 deletions(-)

commit 440a76b630a36a7336c93e8b05d988c6407b085e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 14:20:00 2011 -0400

    [OT] Fix script to ot-script-tag conversion

 src/hb-ot-tag.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a3036a3e97b14c8eb1df208aed944207f9b6cc0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 14:13:23 2011 -0400

    Minor

 src/hb-view.c | 1 -
 1 file changed, 1 deletion(-)

commit fb6291d9c9224bedf207bf0077ad9f0a2690f867
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 03:15:31 2011 -0400

    [test] Add test for headers included from C and C++

 test/Makefile.am	| 17 +++++++++++++++++
 test/test-c.c		| 49
 +++++++++++++++++++++++++++++++++++++++++++++++++
 test/test-cplusplus.cc | 29 +++++++++++++++++++++++++++++
 3 files changed, 95 insertions(+)

commit 107a50581ccab7df7c390d5b927fdab1bbe8e713
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 03:04:56 2011 -0400

    [test] Add todo items

 test/test-unicode.c | 3 +++
 1 file changed, 3 insertions(+)

commit 5668189c12c264e8d2caf0d12dac918363ef6f80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 03:03:32 2011 -0400

    [API] font: move user_data before destroy()

    This is the common convention for language binding tools.

 src/hb-font-private.h |  4 ++--
 src/hb-font.cc        | 30 +++++++++++++++---------------
 src/hb-font.h	       | 12 ++++++------
 src/hb-ft.c	       |  8 ++++----
 4 files changed, 27 insertions(+), 27 deletions(-)

commit e5847f75fb7bd25c5db6061d8e20d61fa469f9fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:59:28 2011 -0400

    [API] blob: move user_data before destroy()

    This is the common convention for language binding tools.

 src/hb-blob-private.h |  2 +-
 src/hb-blob.c	       | 16 ++++++++--------
 src/hb-blob.h	       |  4 ++--
 3 files changed, 11 insertions(+), 11 deletions(-)

commit 1fd73b594d611624ccb73f614c61298debf48994
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:56:39 2011 -0400

    [test] Rename test-types to test-common

 test/Makefile.am   |	2 +-
 test/test-common.c | 166
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 test/test-types.c  | 166
 -----------------------------------------------------
 3 files changed, 167 insertions(+), 167 deletions(-)

commit f144a8ea840c6452c1fece2fd988b42a8ea7c5a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:54:42 2011 -0400

    [icu] Add two-way script conversion functions

    Also optimizes the common-direction script lookup.

 src/hb-common.c   |   5 +-
 src/hb-icu.cc	   | 205
 +++++++++++++++++++++++++++++-------------------------
 src/hb-icu.h	   |   9 +++
 test/test-types.c |   2 +-
 4 files changed, 124 insertions(+), 97 deletions(-)

commit 0809aadd4bbd5d0f256407def7cc10b79772a824
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:44:29 2011 -0400

    [glib] Add two-way script conversion functions

    Also optimizes the common-direction script lookup to be an array
    lookup.

 src/hb-glib.cc | 270
 ++++++++++++++++++++++++++++++---------------------------
 src/hb-glib.h	|   8 ++
 2 files changed, 148 insertions(+), 130 deletions(-)

commit 5c8c1b680c4fa23c8574b9aebd21113e276f57a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:29:22 2011 -0400

    Remove verbose comments

 src/hb-glib.cc | 194 ++++++++++++++++++++---------------------
 src/hb-icu.cc	| 266
 ++++++++++++++++++++++++++++-----------------------------
 2 files changed, 230 insertions(+), 230 deletions(-)

commit fb194b8794898f51eb596fa4092c26606889d376
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 02:00:47 2011 -0400

    unicode: Cleanup implementation

 src/Makefile.am	   |   8 +-
 src/hb-buffer-private.hh  |   2 +-
 src/hb-glib.c		   | 230 -------------------------------------
 src/hb-glib.cc		   | 231 +++++++++++++++++++++++++++++++++++++
 src/hb-icu.c		   | 285
 ----------------------------------------------
 src/hb-icu.cc		   | 285
 ++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape.cc	   |  14 +--
 src/hb-shape.cc	   |   4 +-
 src/hb-unicode-private.h  |  77 -------------
 src/hb-unicode-private.hh |  96 ++++++++++++++++
 src/hb-unicode.c	   | 256 -----------------------------------------
 src/hb-unicode.cc	   | 223 ++++++++++++++++++++++++++++++++++++
 src/hb-unicode.h	   |  57 +++++-----
 test/test-unicode.c	   |  23 ++--
 14 files changed, 892 insertions(+), 899 deletions(-)

commit ecfb773829a5d98a4f5456a992f3e5ecd6731435
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 20 01:34:51 2011 -0400

    Cosmetic

 src/hb-unicode.h | 22 +++++++++-------------
 1 file changed, 9 insertions(+), 13 deletions(-)

commit 2fd0c577e322ccbf762927bc4600b3ea31db4c80
Author: Ryan Lortie <desrt@desrt.ca>
Date:	Wed Apr 20 00:19:20 2011 -0400

    [API] unicode: rework virtual functions for subclassing

    Unicode data providers can now be subclassed, including support for
    chain-up.  The interface should now be nicely bindable, as well.

    Also fix glib unicode funcs that where broken after hb_script_t
    changes.  Nicely caught by the test-unicode.c added in this commit.

 src/hb-glib.c		  | 186 ++++++++++++++++++++++++++++++++++++--
 src/hb-icu.c		  |  45 +++++++--
 src/hb-ot-shape.cc	  |   9 +-
 src/hb-shape.cc	  |   2 +-
 src/hb-unicode-private.h |  17 ++++
 src/hb-unicode.c	  | 231
 +++++++++++++++++++++++++----------------------
 src/hb-unicode.h	  |  68 +++++++-------
 test/Makefile.am	  |   1 +
 test/test-unicode.c	  | 215
 +++++++++++++++++++++++++++++++++++++++++++
 9 files changed, 610 insertions(+), 164 deletions(-)

commit f85faee9b3cb841ea977403945e2c877ab32b97a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 19 00:38:01 2011 -0400

    [API] Rename hb_buffer_add_glyph() to hb_buffer_add()

 src/hb-buffer.cc   | 10 +++++-----
 src/hb-buffer.h    |  8 ++++----
 test/test-buffer.c |  2 +-
 3 files changed, 10 insertions(+), 10 deletions(-)

commit aab0de50e23727b69fa8c3d4e05c50c114c62835
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 19 00:32:19 2011 -0400

    [API] Add hb_buffer_allocation_successful()

    Returns the error status of the buffer.

 src/hb-buffer.cc   | 6 ++++++
 src/hb-buffer.h    | 6 ++++++
 test/test-buffer.c | 2 +-
 3 files changed, 13 insertions(+), 1 deletion(-)

commit 02a534b23f2d1e7475109563b9f61221ed020e8b
Author: Ryan Lortie <desrt@desrt.ca>
Date:	Fri Apr 15 18:34:45 2011 -0400

    [API] Rename hb_buffer_ensure() to hb_buffer_pre_allocate()

    The new name is self-documenting.

 src/hb-buffer.cc | 4 ++--
 src/hb-buffer.h  | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 70566befc59cfa8b9c43ac682749c40ea783b1dd
Author: Ryan Lortie <desrt@desrt.ca>
Date:	Fri Apr 15 18:32:36 2011 -0400

    [API} hb_buffer_get_glyph_{infos,positions}: Add length out parameter

    Return the length, whenever we return an array.  Makes it easier
    on the
    language bindings.

 src/hb-buffer.cc		  | 12 ++++++++++--
 src/hb-buffer.h		  |  6 ++++--
 src/hb-ot-layout-gpos-private.hh |  4 ++--
 src/hb-view.c			  |  4 ++--
 test/test-buffer.c		  |  7 ++-----
 5 files changed, 20 insertions(+), 13 deletions(-)

commit 62879eebd9965179af8602ba29ac0a64a739b757
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 18 23:40:21 2011 -0400

    [API] Use ISO 15924 tags for hb_script_t

    This simplifies the code, reduces static data, and makes the design
    more extensible to future additions of new scripts.

 src/hb-common.c		    | 411
 ++++---------------------------------
 src/hb-common.h		    | 199 +++++++++---------
 src/hb-ot-map.cc		    |	4 +-
 src/hb-ot-shape-complex-private.hh |	3 +-
 src/hb-ot-tag.c		    | 228 +++++++++-----------
 src/hb-ot-tag.h		    |	6 +-
 src/hb-shape.cc		    |	4 +-
 test/test-types.c		    |	2 +-
 8 files changed, 252 insertions(+), 605 deletions(-)

commit c0af193c8e25c4f11d23b8893e9ce1c2d2615bb2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 19:26:24 2011 -0400

    Change buffer default properties to invalid

    This includes HB_DIRECTION_INVALID and HB_SCRIPT_INVALID.

    The INVALID will cause a "guess whatever from the text" in hb_shape().
    While it's not ideal, it works better than the previous defaults at
    least (HB_DIRECTION_LTR and HB_SCRIPT_COMMON).

 src/hb-buffer-private.hh |  9 +++------
 src/hb-buffer.cc	  | 24 ++++++++++++++++--------
 src/hb-view.c		  |  6 ++----
 test/test-buffer.c	  |  4 ++--
 4 files changed, 23 insertions(+), 20 deletions(-)

commit 00bec2c969555e76c3f84650a1d3c45308e585ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 19:16:54 2011 -0400

    Move enum types to hb-common.h

 src/hb-common.c  | 406
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-common.h  | 170 +++++++++++++++++++++++
 src/hb-unicode.c | 406
 -------------------------------------------------------
 src/hb-unicode.h | 166 -----------------------
 4 files changed, 576 insertions(+), 572 deletions(-)

commit 5dd4609f4da5674966a0169d9fa533ac5bc9f464
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 19:16:34 2011 -0400

    [TODO] Add new item

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit b54cd07b2623b68171e00179a9dc3ecbea7aa6a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 19:12:01 2011 -0400

    Mark internal buffer variables private

 src/hb-buffer.h | 4 ++++
 1 file changed, 4 insertions(+)

commit 0e8d35c0932ddc20ebf430f2fd82c087da698954
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 19:07:10 2011 -0400

    Add hb_script_from_string()

 src/hb-unicode.c | 6 ++++++
 src/hb-unicode.h | 4 ++++
 src/hb-view.c	  | 2 +-
 3 files changed, 11 insertions(+), 1 deletion(-)

commit 8f0d7e0c3fd4b05c43ac449be4f374dc2dc56127
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 18:59:56 2011 -0400

    Remove hb_buffer_clear_positions(), add hb_ot_layout_position_start()

 src/hb-buffer-private.hh |  6 +++++-
 src/hb-buffer.cc	  | 24 ++++++++++++------------
 src/hb-buffer.h	  |  5 +----
 src/hb-ot-layout.cc	  |  6 ++++++
 src/hb-ot-layout.h	  |  4 ++++
 src/hb-ot-shape.cc	  |  2 +-
 6 files changed, 29 insertions(+), 18 deletions(-)

commit 2fc56edff6d64f190271454ccb1b5fd347d4f172
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 18:35:08 2011 -0400

    [API] Remove hb_buffer_clear()

    One should use hb_buffer_reset() really.

 src/hb-buffer.cc   | 16 +++++-----------
 src/hb-buffer.h    |  4 ----
 test/test-buffer.c |  4 ----
 3 files changed, 5 insertions(+), 19 deletions(-)

commit 7f5bdc80541cdc90aa1acafba5e9e0bd2df53ff4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 18:34:55 2011 -0400

    [TODO] Remove done items

 TODO | 4 ----
 1 file changed, 4 deletions(-)

commit 5814dfa3f5aa41bc3df06b78980d57d7bea0ba58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 14:41:04 2011 -0400

    Cosmetic

 src/hb-ot-shape.cc | 14 +++++++-------
 src/hb-ot-shape.h  |  4 ++--
 src/hb-shape.cc    | 20 ++++++++++----------
 src/hb-shape.h     | 10 +++++-----
 4 files changed, 24 insertions(+), 24 deletions(-)

commit cfbfeb88a6ec059ea97a6624e63cfacc642b685a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 12:40:40 2011 -0400

    [TODO] Remove done items

 TODO | 4 ----
 1 file changed, 4 deletions(-)

commit 3cbdf70e0a92f1c24e16c0d4dcfbec4ac59a77a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 12:32:06 2011 -0400

    Make hb_language_t typesafe

 src/hb-common.c | 18 +++++++++++-------
 src/hb-common.h |  2 +-
 2 files changed, 12 insertions(+), 8 deletions(-)

commit 2f2f448af35c232d18888c0e57cb21c9796ba7a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 15 11:45:14 2011 -0400

    [test] Add more TODO items

 test/test-buffer.c | 2 ++
 1 file changed, 2 insertions(+)

commit c910bec863215f918c659f58debbc7fe5264d7b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 15:49:06 2011 -0400

    Add hb_buffer_reset() and hb_buffer_set_length()

 src/hb-buffer.cc | 31 +++++++++++++++++++++++++++++++
 src/hb-buffer.h  | 15 ++++++++++++++-
 2 files changed, 45 insertions(+), 1 deletion(-)

commit 69ea23cb5d47dd1cfd3129f68375021ef79bf63b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 15:02:40 2011 -0400

    Minor

 src/hb-buffer.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7dea908cd582c8c25555015940065c69c1e7e65b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 01:35:58 2011 -0400

    [test] Add todo items

 test/test-buffer.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 07cbaac07d7f43437b171e9275430b5fb3097716
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 01:11:19 2011 -0400

    [TODO] Add item re script iso15924 functions

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit d0f53fdbead15d9003b521b8ed47d02fd29a4c64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 01:09:09 2011 -0400

    [test] Test hb-buffer.h

 test/Makefile.am   |	8 ++-
 test/test-buffer.c | 195
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 202 insertions(+), 1 deletion(-)

commit 72d89404c2837d578f5305456c817130b6a15c73
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 01:07:42 2011 -0400

    [TODO] Add item re hb_buffer_reset()

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 5015c12dfb4de8525325178ae6def9e80fd83669
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 01:06:02 2011 -0400

    [TODO] Add item re hb_buffer_resize()

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 9329ec92078d0e2d7bb04f683e0c6a582aab92f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 13 00:06:23 2011 -0400

    [TODO] Add API item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 4744379efc6063d94e15ff99381a7ab8b88ee567
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 19:47:33 2011 -0400

    Minor

 test/test-types.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 9385caa8a693df0f06a511a71de9aa407637097c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 19:43:51 2011 -0400

    [test] Actually hook up hb_script_t tests

    I really shall find a way to automate the test enumeration.  Otherwise
    it's too easy to add a test and wrongly hook it up.  Did it twice
    today.

 test/test-types.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8e4bb3cacc269ed32187aaaeaa166c64f41a0418
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 17:55:58 2011 -0400

    Fold hb-language.[ch] into hb-common.[ch]

 src/Makefile.am   |   2 -
 src/hb-buffer.h   |   1 -
 src/hb-common.c   |  92 ++++++++++++++++++++++++++++++++++++++++-
 src/hb-common.h   |  42 +++++++++++++------
 src/hb-language.c | 120
 ------------------------------------------------------
 src/hb-language.h |  46 ---------------------
 src/hb-ot-tag.h   |   1 -
 src/hb.h	   |   1 -
 8 files changed, 120 insertions(+), 185 deletions(-)

commit 09125576ca745b3393f3dc49071df891400bbdc9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 17:49:33 2011 -0400

    [test] Test hb_language_t

 test/test-types.c | 26 +++++++++++++++++++++++++-
 1 file changed, 25 insertions(+), 1 deletion(-)

commit 316b7a1afb84a5dfeaed886a585669b4d549c9b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 17:49:10 2011 -0400

    Make hb_language_from_string("") return NULL language

 src/hb-language.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit db60c96f20426111ffa71e9802ef6e248f8b28d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 16:17:02 2011 -0400

    [teset] Test hb_script_t

 test/hb-test.h    |  8 ++++++++
 test/test-types.c | 35 ++++++++++++++++++++++++++++++++++-
 2 files changed, 42 insertions(+), 1 deletion(-)

commit 99b74760a4cddc798ab44b5ca897486bbb9c76d6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 15:47:40 2011 -0400

    Rename hb_category_t to hb_unicode_general_category_t

 src/hb-glib.c			   |  2 +-
 src/hb-icu.c			   | 64
 ++++++++++++++++++-------------------
 src/hb-ot-shape-complex-arabic.cc |  8 ++---
 src/hb-ot-shape-private.hh	   |  2 +-
 src/hb-ot-shape.cc		   |  2 +-
 src/hb-unicode.c		   |  4 +--
 src/hb-unicode.h		   | 66
 +++++++++++++++++++--------------------
 7 files changed, 74 insertions(+), 74 deletions(-)

commit 4188096a7722f09ffa9319986c0286071da10a27
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 14:58:28 2011 -0400

    Make HB_TAG_CHAR4 private

    It's just sugar.

 src/hb-common.h   | 5 +----
 src/hb-private.h  | 7 ++++++-
 test/test-types.c | 2 --
 3 files changed, 7 insertions(+), 7 deletions(-)

commit 7ff7401c9237cda661869c1cb196d685706ac4e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 13:27:30 2011 -0400

    Make hb_tag_from_string(NULL) return HB_TAG_NONE

 src/hb-common.c   | 3 +++
 test/test-types.c | 3 +++
 2 files changed, 6 insertions(+)

commit 02f6e62d6cabc7808c188daef26a1fe7ac626b1f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 13:27:21 2011 -0400

    Build fix

 test/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit db5227c40e5c35fe2ffb750f32b639cb44424a1d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 13:16:08 2011 -0400

    Move macros around

 src/hb-ot-tag.c  | 6 ++----
 src/hb-private.h | 7 +++++++
 2 files changed, 9 insertions(+), 4 deletions(-)

commit 07233581c9d953708d3c020907c42b8b89472b89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 13:12:37 2011 -0400

    Rename HB_TAG_STR() to HB_TAG_CHAR4()

    The problem with HB_TAG_STR() was that it expected a string of size 4
    exactly, and unlike hb_tag_from_string() it doesn't pad the tag with
    space characters.  So, the new name is more appropriate.

 src/hb-common.c   | 2 +-
 src/hb-common.h   | 8 ++++----
 src/hb-ot-tag.c   | 2 +-
 test/test-types.c | 2 +-
 4 files changed, 7 insertions(+), 7 deletions(-)

commit 9faa980067f802f712c2adf8263152ed40c98088
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 12:46:49 2011 -0400

    Add an in-tree test suite

    Uses the glib testing framework.  Wrote unit tests for hb-common.h
    types.

 Makefile.am	    |	2 +-
 test/Makefile.am   |  18 +++++++++
 test/Makefile.decl |  90 ++++++++++++++++++++++++++++++++++++++++++++
 test/hb-test.h     |  67 +++++++++++++++++++++++++++++++++
 test/test-types.c  | 108
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 284 insertions(+), 1 deletion(-)

commit d77b76200efbaa0611691920f9f2018b1e8be340
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 12:29:52 2011 -0400

    Add few more paratheses to the HB_TAG macro

    Never hurts.

 src/hb-common.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b13640de6992de9ee9d07e3581c33b8181b70ff9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 12:29:31 2011 -0400

    A few more ASSERTs

 src/hb-private.h | 3 +++
 1 file changed, 3 insertions(+)

commit ae9eeaff9300f3bb7bed588c5478e8e5461b3df0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 11:49:08 2011 -0400

    Remove warning message from public header file

    Since we now assert thos in hb-private.h, the int types cannot
    be wrong.
    (Except for when someone else includes hb-common.h in a very broken
    configuration, but that's not our problem!)

    Plus, we don't use inline in the public headers, so remove that too.

 src/hb-common.h  | 7 -------
 src/hb-private.h | 4 ++++
 2 files changed, 4 insertions(+), 7 deletions(-)

commit 6fd5364bdc3a2b459175377e9e16c86cff054232
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 11 11:47:14 2011 -0400

    Assert int types

 src/hb-private.h | 12 ++++++++++++
 1 file changed, 12 insertions(+)

commit bbdeff59646e5502b9fc53ab1761b3f014ee276c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 7 16:05:07 2011 -0400

    Add test directory

 configure.ac	  | 1 +
 test/Makefile.am | 0
 2 files changed, 1 insertion(+)

commit 4accc92afc702177ea53280d977cec839af3c12c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 7 15:53:26 2011 -0400

    Update TODO items

 TODO | 31 ++++++++++++++++++++-----------
 1 file changed, 20 insertions(+), 11 deletions(-)

commit a71b9c8579d73aea4549f12524bbc2e89f43b5c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 6 14:04:56 2011 -0400

    Disable 'cswh' by default except for Arabic shaper

    That better matches OpenType spec.	Note that we enable it for all
    Arabic-shaper scripts.  Ie. we enable it by default for Syriac too,
    but the SyriacOT spec does not require it.	I think this is a more
    useful compromise than special-casing for Arabic script alone.

 src/hb-ot-shape-complex-arabic.cc | 3 +++
 src/hb-ot-shape.cc		   | 1 -
 2 files changed, 3 insertions(+), 1 deletion(-)

commit cab6f65bba560ac1651d9152f1ecf12eb88eca74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 4 15:36:51 2011 -0400

    [hb-view] setlocale (LC_ALL, "")

    For now we don't use anything from the locale, but we should default
    to using $LANG, etc, if --language is not specified.  Right?

 src/hb-view.c | 3 +++
 1 file changed, 3 insertions(+)

commit fb9ca1bfabde7da0c274e7a1bd12bffaf7949c18
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 4 14:50:09 2011 -0400

    [hb-view] Rewrite --features parsing, with range support

    The --features parsing handles errors now.	More importantly, it
    allos limiting individual features to specific byte ranges.  The
    format is Python-esque.  Here is how it all works:

      Syntax:	Value:	Start:	End:

    Setting value:
      "kern"	1	0	∞	# Turn feature on
      "+kern"	1	0	∞	# Turn feature off
      "-kern"	0	0	∞	# Turn feature off
      "kern=0"	0	0	∞	# Turn feature off
      "kern=1"	1	0	∞	# Turn feature on
      "kern=2"	2	0	∞	# Choose 2nd alternate

    Setting index:
      "kern[]"	1	0	∞	# Turn feature on
      "kern[:]" 1	0	∞	# Turn feature on
      "kern[5:]"	1	5	∞	# Turn feature on, partial
      "kern[:5]"	1	0	5	# Turn feature on, partial
      "kern[3:5]"	1	3	5	# Turn feature on, range
      "kern[3]" 1	3	3+1	# Turn feature on, single char

    Mixing it all:

      "kern[3:5]=0"	1	3	5	# Turn feature off
      for range

 src/hb-view.c | 169
 +++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 132 insertions(+), 37 deletions(-)

commit ccc6745afaa68ce7497a6cd02ce85986d3c863d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 4 14:49:50 2011 -0400

    [hb-view] Use cached hb-ft face creation

    Avoids recreating the face the second time we call draw().

 src/hb-view.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1b4a2cc095d165dc573e0235f00fbbf2a5d3c2c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 4 14:45:28 2011 -0400

    [hb-view] Add --debug

    Frees all allocated memory before exiting.	Useful for valgrind run.

 src/hb-view.c | 17 +++++++++++++++++
 1 file changed, 17 insertions(+)

commit b2da26d1e32a012f7feaad7c7cced61e4fb269f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 1 15:48:43 2011 -0400

    [hb-view] Support --features

    Accepts values like:

      --features="-mkmk,aalt=2,calt=1,+cswh"

    A minus sign means "=0", a plus sign means "=1".  Default is "=1".
    A minus sign overrides an explicit value.

 src/hb-view.c | 70
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 1 file changed, 68 insertions(+), 2 deletions(-)

commit f48ff19b629070d13cee3c0eeeb06c98992f93c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 1 14:19:10 2011 -0400

    Sort options for clarity

 src/hb-view.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 5d91c3d547f78163b36aa7436d4388a836cca94a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 16 17:36:32 2011 -0300

    Add script to/from ISO 15924 tag support

    Also adds --script support to hb-view.

    If a script tag is not known to us, we pass the ISO 15924 tag around.
    Right now, the OT layer ignores that, but we can fix it to blindly
    convert that to an OT script tag.

 src/hb-ot-tag.c  |   4 +
 src/hb-unicode.c | 273
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-unicode.h |   8 +-
 src/hb-view.c	  |  10 +-
 4 files changed, 293 insertions(+), 2 deletions(-)

commit 3286fc0e9adc3f2874c9409e7fdb09e4d2b7dda1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 16 14:53:32 2011 -0300

    Let hb_shape() guess script and direction...

    - Rename HB_SCRIPT_INVALID_CODE to HB_SCRIPT_INVALID

    - Add HB_DIRECTION_INVALID

    - Make hb_script_get_horizontal_direction() public

    - Make hb_shape() guess script from buffer text (first non-common
      non-inherit script) if buffer script is set to HB_SCRIPT_INVALID
      (this
      is NOT the default.)

    - Make hb_shape() guess direction from buffer script if buffer
    direction
    is set to HB_DIRECTION_INVALID (this is NOT the default.)

    - Make hb-view.c set INVALID script and direction on the buffer.

    The above changes are meant to make hb-view fairly useful for
    uni-script
    uni-direction text.  The guessing behavior however is NOT the
    default of
    hb_shape() and must be asked for explicitly.  This is intended,
    because
    the guess is not a suitable substitute to full-fledged bidi and script
    segmentation.  It's just a testing tool.

 src/hb-common.h	  |  3 ++-
 src/hb-icu.c		  |  2 +-
 src/hb-ot-shape.cc	  |  3 ++-
 src/hb-shape.cc	  | 52
 ++++++++++++++++++++++++++++++++++++++++++------
 src/hb-unicode-private.h |  4 ----
 src/hb-unicode.c	  |  2 +-
 src/hb-unicode.h	  |  8 +++++++-
 src/hb-view.c		  |  4 ++--
 8 files changed, 61 insertions(+), 17 deletions(-)

commit b7b29684df67af7280b74ca4cf18f02ad6521bdc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 2 01:01:03 2011 -0500

    [hb-view] Handle write_to_png errors

 src/hb-view.c | 9 ++++++++-
 1 file changed, 8 insertions(+), 1 deletion(-)

commit c2cb98c8185c5560cfd04de7ee7c64c9496b986c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 1 23:18:09 2011 -0500

    [hb-view] Link with -lm

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b5dd44e24669cd35affcd92788d39ff56cac94db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 28 10:13:52 2011 -0800

    Fix possible overflow

 src/hb-buffer.cc | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit a4b781e93a0bee0549611e129b3564d9804d9090
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 23 12:47:56 2011 -0500

    Default background color shall either be white or transparent

    Definitely not black!

 src/hb-view.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5353bf439c150492708ef9337078cfd73b83627b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 22 18:06:19 2011 -0500

    Add initial hb-view tool

    Currently doesn't handle script or direction.

 configure.ac	 |  18 +++
 src/Makefile.am |  14 +++
 src/hb-view.c	 | 342
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 374 insertions(+)

commit 82438c6ad5f60b6afc75c48cef72e18bef532468
Author: Bradley Grainger <bgrainger@logos.com>
Date:	Tue Feb 15 18:37:29 2011 -0500

    Fix #pragma message for MSVC.

    __LOC__ was renamed to _HB__LOC__ in cd7555 but the corresponding
    change wasn't made in hb-private.h.

 src/hb-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ba9ab8d6d9c863662c4b44ace4a4d89e29e592f2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 10 07:45:41 2011 -0500

    Fix language extension matching

 src/hb-ot-tag.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a07874300a669ec0ea09a67df2a3ee8b0612d6b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 10 02:27:49 2011 -0500

    Don't use the m4/ dir

    We just require people to have libtool, pkg-config, etc installed
    when running autogen.sh

 Makefile.am  | 2 --
 configure.ac | 1 -
 2 files changed, 3 deletions(-)

commit 7bbe14bed8a886ea5b293c927c4bf937cbfc6f51
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 9 22:29:14 2011 -0500

    Fix 'make distcheck'

 src/Makefile.am | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 2abe1264a580858bf7803af1701117a462375fb4
Author: Javier Jardón <jjardon@gnome.org>
Date:	Sun Jan 9 22:18:53 2011 -0500

    Bug 31174 - Update autotools configuration

 Makefile.am  |   2 +
 autogen.sh   | 188
 ++++-------------------------------------------------------
 configure.ac |  22 +++++--
 3 files changed, 29 insertions(+), 183 deletions(-)

commit cc1a8a938b4c13e76b58825a9e1951c4134e634a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 6 14:58:52 2011 -0500

    Fix ChanContext backtrack matching with GPOS

    Reported on mailing list by Keith Stribley and Khaled Hosny.

 src/hb-buffer-private.hh	      | 5 +++--
 src/hb-buffer.cc		      | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 6 +++---
 3 files changed, 7 insertions(+), 6 deletions(-)

commit 1c3183027fe823cd673866ba29d169b69f8efba1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 6 14:44:14 2011 -0500

    Remove unused realloc

    We always allocate and grow str and pos together.

 src/hb-buffer.cc | 6 ------
 1 file changed, 6 deletions(-)

commit 76691f0240d6de230e9b42280b54e91639464635
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 6 14:16:59 2011 -0500

    Fix ICU detection

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 756f794a1fce701092345a3f9afae039583fb55b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 26 20:52:40 2010 -0500

    Remove Graphite backend

    It was unmaintained and the code has to be replaced to use the new
    grphite-ng code base.

 configure.ac	    |	6 --
 src/Makefile.am    |  14 ---
 src/hb-graphite.cc | 310
 -----------------------------------------------------
 src/hb-graphite.h  |  47 --------
 4 files changed, 377 deletions(-)

commit f3d9d9879364609502d9d3a3a9f4647adb167d78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 22 01:39:29 2010 -0500

    Docs

 src/hb-unicode.h | 60
 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 30 insertions(+), 30 deletions(-)

commit d86a5b3c5752abcc791724035ba4115958e6b5e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 21 18:36:25 2010 -0500

    Bug 32274 - classic mongolian shaper

    Add support for classic Mongolian script to the Arabic shaper.

    Still work to be done around U+180E MONGOLIAN VOWEL SEPARATOR as it
    should not be included in the final glyph stream the same way that
    ZWNJ, etc should not appear in the final glyph stream.

    But the joining part should be done.

    There remains the question of how should the U+18A9 MONGOLIAN
    LETTER ALI
    GALI DAGALGA be handled as it has General Category NSM but a letter
    nonetheless.  For now, our generic logic makes this a joining
    T instead
    of joining D as other Mongolian letters are.

 src/hb-ot-shape-complex-arabic.cc  | 8 ++++++++
 src/hb-ot-shape-complex-private.hh | 1 +
 2 files changed, 9 insertions(+)

commit b0e7378fa9a4fc6fc74d9b3c27d927602eaacc5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 21 14:19:32 2010 -0500

    Reroute Mandaic shaping through the Arabic shaper

    We added Mandaic joining data to the Arabic shaper a while ago, but
    were not actually using the Arabic shaper for Mandaic.  Fixed.

 src/hb-ot-shape-complex-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 88e7f37488e4e8590619d815b975232a0c9d2ea0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 21 14:18:24 2010 -0500

    Annotate the Arabic joining table with block information

 src/gen-arabic-joining-table.py	| 93
 +++++++++++++++++++++-------------
 src/hb-ot-shape-complex-arabic-table.h | 24 +++++++--
 2 files changed, 80 insertions(+), 37 deletions(-)

commit 1482a39e56cd4151874e5c073540274349240a87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 17 20:15:05 2010 -0500

    Rename remaining metrics uses to extents

 src/hb-font.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 22c537657cee1f47a4056a21e2cddfcbe6ab1c01
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 14 23:51:29 2010 -0500

    Rename TableDirectory to TableRecord as per OpenType 1.6

 src/hb-open-file-private.hh | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 33e8b86197239e667a887709104357bdc6566b7c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 13 15:54:56 2010 -0500

    Update 'head' table to OpenType 1.6

 src/hb-ot-head-private.hh | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

commit b7683335146bfe3a74d9419db92cd7a8019a9c10
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 13 14:22:35 2010 -0500

    Disallow ligature substitutions replacing one glyph

 src/hb-ot-layout-gsub-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7eb875118dc31e9fb0e23c45985396a8bfe977e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 13 14:13:35 2010 -0500

    Mozilla Bug 618592 - freeze on typekit

    Fix apply_lookup() for zero-input broken fonts.

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bbbbe80ec9bc45c5b685bc09c8f993e98496555c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 7 16:22:02 2010 -0500

    Rename original_direction to target_direction

 src/hb-ot-shape-private.hh | 2 +-
 src/hb-ot-shape.cc	    | 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit ee8aaf976a6eb42be49b63b4c51c7a0a338e0298
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 7 16:20:42 2010 -0500

    Fix arabic shaping of LTR text

    We should ensure-direction before doing any complex work.  The only
    exception is mirroring that needs to see the original / final
    direction,
    not the native.  Handle that.

 src/hb-ot-shape.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit d1f1707adc03317760b0f75e04d0f3dd425e547f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 30 00:57:15 2010 -0500

    Bug 31965 - some GNU/Linux distributions lack icu.pc but have
    icu-config

    Patch from suzuki toshiya.

 configure.ac | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit 3c48982be6b2286088541ee55cac78b0f2b6e771
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Nov 28 19:39:47 2010 -0500

    Adjust pyx files to reflect change from int to hb_var_int_t

    Patch from Thomas Hunger.

 contrib/python/lib/harfbuzz.pyx | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 4f9e4a40bc248aeb1364ed6f4aa7f392aa364497
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 22 11:30:32 2010 -0500

    Fix failing checks

 src/hb-ot-shape-complex-arabic-table.h | 37
 ++++++++++++++++++++++++++++++++++
 1 file changed, 37 insertions(+)

commit 9da26d6669e7f3b91ba37e71f6f8a6e2ea806688
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 22 11:03:18 2010 -0500

    Remove email address from Copyright headers

 COPYING      | 2 +-
 src/hb-ft.c  | 2 +-
 src/hb-icu.c | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit a45f00019242734fca742adeb2ed507305baeda6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 18 13:58:32 2010 -0500

    Clarify copyright notice

 COPYING		 | 12 ++++++++++++
 README			 |  4 ++--
 src/hb-graphite.cc	 |  4 ++--
 src/hb-object-private.h |  2 +-
 4 files changed, 17 insertions(+), 5 deletions(-)

commit 0884a8d9cd576f116400b3f7c8815e747c315d5e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 16:58:21 2010 -0500

    Move generated table to its own file

 src/Makefile.am			|   1 +
 src/hb-ot-shape-complex-arabic-table.h | 619
 ++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-arabic.cc	| 621
 +--------------------------------
 3 files changed, 621 insertions(+), 620 deletions(-)

commit 14d784116b08685425e4ddcb1c1f813dbe2b2986
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 16:52:58 2010 -0500

    Update Arabic joining table to include Mandaic

    Mandaic was added to Unicode 6.0, but the joining data was not
    updated.
    Draft ArabicShaping.txt from 6.1 includes the joining data for
    Mandaic.
    Use that.

 src/gen-arabic-joining-table.py   |  45 ++++++++++----
 src/hb-ot-shape-complex-arabic.cc | 123
 ++++++++++++++++++++++++++++++++------
 2 files changed, 137 insertions(+), 31 deletions(-)

commit 43bf2f7f1ec427c431e2ee2fd1a9345e7d5c9718
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 14:49:40 2010 -0500

    Add OpenType script tags for Unicode 5.2 and Unicode 6.0 scripts

    Based on tags proposed by Microsoft for inclusion in OpenType.

 src/hb-ot-tag.c | 34 +++++++++++++++++-----------------
 1 file changed, 17 insertions(+), 17 deletions(-)

commit afab01cf7caca79cf6dfabe6827d1703be1a74f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 14:35:34 2010 -0500

    Add Unicode 6.0 scripts

 src/hb-icu.c	  | 6 ++++++
 src/hb-ot-tag.c  | 7 ++++++-
 src/hb-unicode.c | 7 ++++++-
 src/hb-unicode.h | 7 ++++++-
 4 files changed, 24 insertions(+), 3 deletions(-)

commit f234b68d18d956f7e4eb4bf58d6dc408d9e5146e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 14:25:44 2010 -0500

    Change HB_SCRIPT_MEITEI_MAYEK to HB_SCRIPT_MEETEI_MAYEK

    The new name matches the Unicode name.  Reported by Jonathan Kew.

 src/hb-icu.c	  | 2 +-
 src/hb-ot-tag.c  | 2 +-
 src/hb-unicode.h | 2 +-
 3 files changed, 3 insertions(+), 3 deletions(-)

commit 3ca9a6d1cffe950b325e1d522b20d4a645ae448e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 13:08:47 2010 -0500

    Add TODO item

 TODO | 3 +++
 1 file changed, 3 insertions(+)

commit 300cb41417d40473268e3b4089bed24e9e77a753
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 17 12:57:23 2010 -0500

    Add XXX marks

 src/hb-ot-layout-gsubgpos-private.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit ea00aee9f94ae8c6cf03d620254817d5e1f51d64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 5 10:51:37 2010 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 3a852ae7fe6edfaadd75625d27515a3689503395
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 16:37:24 2010 -0400

    Save general category and combining class in the buffer for reuse

 src/hb-ot-layout-private.hh	   |  3 ++-
 src/hb-ot-shape-complex-arabic.cc | 16 ++++++++++------
 src/hb-ot-shape-private.hh	   |  6 ++++++
 src/hb-ot-shape.cc		   | 26 +++++++++++++++++++++-----
 4 files changed, 39 insertions(+), 12 deletions(-)

commit a5ab682b9ba8224fc132624f93e6fef9973a68ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 15:50:36 2010 -0400

    More "unreached code" warning fixes

    Ugly :(.

 src/hb-blob.c | 48 ++++++++++++++++++++++++------------------------
 1 file changed, 24 insertions(+), 24 deletions(-)

commit 4e22c7e94102c9f00c32b8cb6aaa832f83909149
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 15:47:12 2010 -0400

    Add comment

 src/hb-ot-layout-common-private.hh | 3 +++
 1 file changed, 3 insertions(+)

commit 0342034d1cb577d34b42f7204da7fb930c12a464
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 15:40:07 2010 -0400

    Pedantic

 src/hb-ot-layout-gpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4a2d844c2f12dc1b858ab4ddd737ded7c0852221
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 15:28:56 2010 -0400

    Minor code shuffling

 src/hb-ot-layout-private.hh | 21 +++-------------
 src/hb-ot-layout.cc	     | 61
 +++++++++++++++++++++++++++++++++------------
 2 files changed, 48 insertions(+), 34 deletions(-)

commit 11e3ec444a85fc72541823c2e98cc92c4ceb19af
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 15:11:04 2010 -0400

    Fix a few more "unreachable code" warnings

 src/hb-blob.c			      |  2 +-
 src/hb-object-private.h	      | 12 +++---
 src/hb-open-type-private.hh	      | 84
 +++++++++++++++++-------------------
 src/hb-ot-layout-gsubgpos-private.hh |  2 +-
 src/hb-private.h		      |  3 +-
 5 files changed, 49 insertions(+), 54 deletions(-)

commit 2304856340782c72cb30873f7907191dc359e921
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 12:46:58 2010 -0400

    Remove another couple lines of dead code

 src/hb-ot-layout-gsubgpos-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit b8783c85ac5dd9ea8f5a66eacb92dfcfbf649a6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 3 11:50:21 2010 -0400

    Fix unreachable-code warning

 src/hb-ot-layout-gpos-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit c2709119c8c610a0d4d71884a7d4fdba7cb65b72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 23:18:51 2010 -0400

    Move things around some more

 src/hb-ot-layout-gpos-private.hh     | 8 ++++----
 src/hb-ot-layout-gsub-private.hh     | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 9 +++++++--
 src/hb-ot-layout-private.hh	      | 7 +++----
 src/hb-ot-layout.cc		      | 6 +++---
 5 files changed, 19 insertions(+), 15 deletions(-)

commit 194d4566ec054db03fa31d369a9f1c6cf4941e74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 23:09:10 2010 -0400

    Move buffer var allocation local

 src/hb-ot-layout-gpos-private.hh | 19 ++++++++++++++-----
 src/hb-ot-layout-private.hh	  |  2 --
 2 files changed, 14 insertions(+), 7 deletions(-)

commit 1e7c1fcbc33599faefc32d4a28e5d8506d2c56fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 22:48:31 2010 -0400

    Move code around

 src/hb-ot-layout-gpos-private.hh | 59
 ++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout.cc		  | 59
 ++--------------------------------------
 src/hb-ot-layout.h		  |  4 +--
 src/hb-ot-shape.cc		  |  2 +-
 4 files changed, 63 insertions(+), 61 deletions(-)

commit bf94b3ad22b2fe4730d4e64d673c63154fc5b5fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 22:37:59 2010 -0400

    Move some more code around

 src/hb-ot-layout-gdef-private.hh | 21 +++++++++++++++
 src/hb-ot-layout-private.hh	  | 27 ++++++++++++++++---
 src/hb-ot-layout.cc		  | 56
 ++++++----------------------------------
 3 files changed, 52 insertions(+), 52 deletions(-)

commit 6334658fe79d6acfb46a2a147721b78f92510ebb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 22:11:32 2010 -0400

    Simplify mark skipping logic

 src/hb-ot-layout.cc | 17 +++--------------
 1 file changed, 3 insertions(+), 14 deletions(-)

commit 8c69e65abed961002d90024c92e18538c6516262
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 22:07:49 2010 -0400

    Rename lookup_flags to lookup_props since it's more than just flags

 src/hb-ot-layout-common-private.hh   |  6 +++++-
 src/hb-ot-layout-gpos-private.hh     | 14 +++++++-------
 src/hb-ot-layout-gsub-private.hh     |  8 ++++----
 src/hb-ot-layout-gsubgpos-private.hh | 10 +++++-----
 src/hb-ot-layout-private.hh	      |  4 ++--
 src/hb-ot-layout.cc		      | 36
 ++++++++++++++++++------------------
 src/main.cc			      |  4 ++--
 7 files changed, 43 insertions(+), 39 deletions(-)

commit 98370e89d1bff248737b482d129c2a4deb8bfd95
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 17:39:01 2010 -0400

    WIP removing external synthesized GDEF support and implementing
    it internally

 TODO				      |   2 -
 src/hb-buffer-private.hh	      |   4 -
 src/hb-buffer.cc		      |   3 -
 src/hb-ot-layout-common-private.hh   |   8 +-
 src/hb-ot-layout-gdef-private.hh     |   6 +-
 src/hb-ot-layout-gpos-private.hh     |   4 +-
 src/hb-ot-layout-gsub-private.hh     |  66 ++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh |  29 +++++++-
 src/hb-ot-layout-private.hh	      |  29 +++-----
 src/hb-ot-layout.cc		      | 138
 +++++------------------------------
 src/hb-ot-layout.h		      |  26 -------
 src/hb-ot-shape.cc		      |  10 +++
 12 files changed, 98 insertions(+), 227 deletions(-)

commit 870e2d6eac01d004c72a925ea93e6823251d5fa2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 17:37:20 2010 -0400

    Remove unused function

 src/hb-buffer-private.hh | 10 ----------
 src/hb-buffer.cc	  | 27 ---------------------------
 2 files changed, 37 deletions(-)

commit 1115890b90709fa5329a55d22f543020f3df9f6f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 17:07:04 2010 -0400

    More cleanup

 src/hb-buffer-private.hh    | 5 +----
 src/hb-ot-layout-private.hh | 6 ++++++
 2 files changed, 7 insertions(+), 4 deletions(-)

commit dbf56b1d94910f04823e53e39ace1e5145bddc04
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 17:06:12 2010 -0400

    More lig-id cleanup

 src/hb-buffer-private.hh	  | 4 ++--
 src/hb-buffer.cc		  | 2 +-
 src/hb-ot-layout-gsub-private.hh | 8 +++++++-
 3 files changed, 10 insertions(+), 4 deletions(-)

commit f6a23a0b9171958f76c1d0473b09fc08d2b3a0d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 17:01:03 2010 -0400

    More removal of lig-id code from buffer

 src/hb-buffer.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit dd2ffd282c059194fd87fb1664e2e0cdb56a87a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 16:57:01 2010 -0400

    Minor renaming

 src/hb-buffer-private.hh	  | 41
 ++++++++++++++++++++--------------------
 src/hb-buffer.cc		  | 20 ++++++++++----------
 src/hb-ot-layout-gsub-private.hh |  8 ++++----
 src/hb-ot-shape.cc		  |  6 +++---
 4 files changed, 37 insertions(+), 38 deletions(-)

commit fe263272a2b26204bc39829a94d90ab537517f3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 16:51:02 2010 -0400

    Move setting lig_id/component out of buffer and to the gsub code

 src/hb-buffer-private.hh	  | 30 +++++++----------------
 src/hb-buffer.cc		  | 52
 +++++++---------------------------------
 src/hb-ot-layout-gsub-private.hh | 27 ++++++++++++---------
 3 files changed, 34 insertions(+), 75 deletions(-)

commit 2e2b2480c01c788ea702d78ca830c2bb659654a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 16:25:28 2010 -0400

    Always allocate new ligature id

    No practical point in reusing ligature ids.

 src/hb-ot-layout-gsub-private.hh | 5 +----
 1 file changed, 1 insertion(+), 4 deletions(-)

commit bf07d5a29c61baf6fd683289c7764f487ad7e413
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 16:19:13 2010 -0400

    Set component=0 for ligature glyph

 src/hb-ot-layout-gsub-private.hh | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 37ab877149582c7ce7416425bb402340e3f948a2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 15:38:06 2010 -0400

    Remove comment

 src/hb-buffer.cc | 20 --------------------
 1 file changed, 20 deletions(-)

commit 88474c6fdaf35c56368694a5b164f4988a004d49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 14:42:15 2010 -0400

    Get rid of the OpenType-specific internal buffer representation

    Add variant integers to buffer item types.	More cleanup coming.

 TODO				   |  2 --
 src/hb-buffer-private.hh	   | 35 ++++++----------------
 src/hb-buffer.cc		   | 62
 +++++++++++++++++++--------------------
 src/hb-buffer.h		   |  2 +-
 src/hb-ot-layout-gpos-private.hh  | 24 +++++++--------
 src/hb-ot-layout-gsub-private.hh  |  2 +-
 src/hb-ot-layout-private.hh	   |  4 +--
 src/hb-ot-layout.cc		   | 39 ++++++++++++------------
 src/hb-ot-shape-complex-arabic.cc |  8 ++---
 9 files changed, 79 insertions(+), 99 deletions(-)

commit 6cb8c3493019e1497921666fc268cb81943f9f1f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 14:27:03 2010 -0400

    Add hb_var_int_t

 src/hb-buffer.h |  6 +++---
 src/hb-common.h | 10 ++++++++++
 2 files changed, 13 insertions(+), 3 deletions(-)

commit f22802431a983bd4bc60a7653b1103973c3475cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 2 19:12:37 2010 -0400

    Remove trailing comma

 src/hb-ot-shape-complex-arabic.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 13528d0c78cadb1f67267c9a692558caef9fdaa6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 14:09:27 2010 -0400

    Supposedly implement vertical support in GPOS

    Not tested at all.

 src/hb-ot-layout-gpos-private.hh | 27 ++++++++++++++++++++-------
 src/hb-ot-layout.cc		  | 39
 ++++++++++++++++++++++++---------------
 2 files changed, 44 insertions(+), 22 deletions(-)

commit 9624de5b496846cd89ee4f7b07d38029aca70ce1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 13:44:59 2010 -0400

    Clarify cursive_chain (and change its sign)

 src/hb-ot-layout-gpos-private.hh |  4 ++--
 src/hb-ot-layout.cc		  | 13 +++++++------
 2 files changed, 9 insertions(+), 8 deletions(-)

commit d6c9eadb88240c40b3cb9a33f067e575cbc2f729
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 12:34:50 2010 -0400

    Remove more pointless LONGTERMTODO items

 src/hb-ot-layout-common-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit e204674fe340a57c48a9fe7e1ed02a9a08f4aca4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 12:32:02 2010 -0400

    Rename hb_ot_layout_get_lig_carets() to
    hb_ot_layout_get_ligature_carets()

 src/hb-ot-layout.cc | 14 +++++++-------
 src/hb-ot-layout.h  | 14 +++++++-------
 2 files changed, 14 insertions(+), 14 deletions(-)

commit 3357d145f81cb7b746c910018fe3a0dfab00972c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 12:30:46 2010 -0400

    Implement vertical support in get_lig_carets()

 src/hb-ot-layout-gdef-private.hh | 34 ++++++++++++++++++----------------
 src/hb-ot-layout.cc		  |  3 ++-
 src/hb-ot-layout.h		  |  1 +
 3 files changed, 21 insertions(+), 17 deletions(-)

commit 8eeed7eddc789151cbffe62ed6bfd77612266bf1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 12:07:49 2010 -0400

    Remove LONGTERMTODO item that I'll never fix

 src/hb-ot-layout-gsubgpos-private.hh | 6 ------
 1 file changed, 6 deletions(-)

commit 184a5279c64f37bc2ceefbe2191bb64ca87f88d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 12:00:49 2010 -0400

    Remove unused macro

 src/hb-ot-layout-gpos-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit af5d02a269d55331300df1e382241893928d64e0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 11:54:26 2010 -0400

    Rewrite Cursive joining to act more like other pair lookups

    Look forward for next character instead of joining to the last
    character.

 src/hb-ot-layout-gpos-private.hh | 71
 ++++++++++++++++++----------------------
 src/hb-ot-layout-private.hh	  | 10 ------
 2 files changed, 31 insertions(+), 50 deletions(-)

commit ea22c749c7371cf66ca44f0bfe7030aef1926edd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 11:09:48 2010 -0400

    Fix Cursive positioning

    Test case: "مرا" rendered using IranNastaliq.

 src/hb-ot-layout-gpos-private.hh | 124
 +--------------------------------------
 1 file changed, 3 insertions(+), 121 deletions(-)

commit aefdb64689aab19df76590a36c4a04052a8bffdb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 10:40:39 2010 -0400

    Fix segfault with Arabic combining marks

 src/hb-ot-shape-complex-arabic.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 12b2d09a87adc1e1aac089cd2e09a68fb7129829
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 01:28:28 2010 -0400

    Remove obsolete TODO item

    We don't cache any metrics internally, so the correct way to add more
    glyph metrics items is to add new callbacks for them.  We already have
    separeate callbacks for advance vs extents.

 TODO | 2 --
 1 file changed, 2 deletions(-)

commit 248e3c2ba47889c247959e44166644872aed59ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 01:23:14 2010 -0400

    Oops, remove extra mask setting that broke complex shaping

 src/hb-ot-shape.cc | 2 --
 1 file changed, 2 deletions(-)

commit 502f4cba3e0bcd625d31f8fd295b8b18e2d02a5a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 27 01:13:56 2010 -0400

    Divide get_metrics into get_advance and get_extents

    Graphite module not updated.
    Bump version to 0.3.

 configure.ac	       |  2 +-
 src/hb-font-private.h |  3 +-
 src/hb-font.cc        | 96
 +++++++++++++++++++++++++++++++++++----------------
 src/hb-font.h	       | 61 ++++++++++++++++++++------------
 src/hb-ft.c	       | 72 +++++++++++++++++++++++---------------
 src/hb-ot-shape.cc    |  7 ++--
 6 files changed, 154 insertions(+), 87 deletions(-)

commit ec6c0e54d322d58cbc835feb58dcec7ede6ab744
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 26 11:28:14 2010 -0400

    Fix blob leak

 src/hb-font.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bd7378b2ef9793de4e7f57b920f29f48ac9d0c25
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 18:33:16 2010 -0400

    Massage mask setting a bit more

    Still finding the exact correct way the masks should be set.

 src/hb-buffer-private.hh | 19 ++++++++++++++++---
 src/hb-buffer.cc	  |  9 +++++++++
 src/hb-ot-shape.cc	  |  6 ++++--
 3 files changed, 29 insertions(+), 5 deletions(-)

commit 961f9baa7bc3556f1e4e7135859cebe1351f73a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 17:17:00 2010 -0400

    Oops, actually set global mask

 src/hb-buffer.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 39dede9ffffe732f78cbd092ccb3b48d77ddd66d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 15:54:06 2010 -0400

    Make sure boolean features always use value=1

    Previously boolean features turned on the entire feature mask.
    This is
    wrong if feature is Alternate and user has provided values bigger
    than one.
    Though, I don't think other engines support such corner cases.

 src/hb-ot-map-private.hh	   | 10 ++++++++--
 src/hb-ot-map.cc		   |  3 ++-
 src/hb-ot-shape-complex-arabic.cc |  2 +-
 src/hb-ot-shape.cc		   |  2 +-
 4 files changed, 12 insertions(+), 5 deletions(-)

commit 3506b2e78db27e7835bd2c09c053a9807c9cac40
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 15:38:52 2010 -0400

    Return early if mask is 0

 src/hb-buffer.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 5c1c8c9c50ddbe66ea595afb245a208b7775b27c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 15:36:38 2010 -0400

    Make sure feature values don't leak out of their mask

 src/hb-buffer.cc | 1 +
 1 file changed, 1 insertion(+)

commit 852912fc2db06b6183a2dc87c45ec1b563063572
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 15:34:50 2010 -0400

    Fix applying default-value for features

    Previously if a default global feature was overrided by a non-global
    user feature, we were not setting any default mask for the feature,
    essentially disabling the feature by default.  Fix that.

 TODO			  |  2 --
 src/hb-ot-map-private.hh | 10 ++++++----
 src/hb-ot-map.cc	  | 13 +++++++------
 3 files changed, 13 insertions(+), 12 deletions(-)

commit 2989be4919242670c94825bded96db20a7b2035b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 15:18:29 2010 -0400

    Set user masks after complex masks

 src/hb-ot-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit a7820b7b15a809b4a1a4077147ceed7bea528483
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 14:20:48 2010 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 04a3023a66203d94b77f2d7a8d6bcdedf067e155
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 10:57:27 2010 -0400

    Cleanup TODO

    Looks like a roadmap now.

 TODO | 72
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++-------------
 1 file changed, 59 insertions(+), 13 deletions(-)

commit 3111b8a0d5b38da57c0f6285aec2b92eb690188f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 13 10:41:53 2010 -0400

    Fix stupid bug, oops

 src/hb-font.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3703f88b74707113e782eb6ca9a77603561760d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 18:34:20 2010 -0400

    Step the version up to 0.2 now that Arabic shaper is in

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 758f68b860b44b5a04eb3dde5cb40b1b04cf634a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 17:37:44 2010 -0400

    Fix Arabic shaper

    It's tested now.  It works!

 src/hb-ot-shape-complex-arabic.cc | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 13403bc67a01e0d4908fb964093fd02ddd11c580
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 17:23:54 2010 -0400

    Hookup Arabic shaper!

    Not tested yet.

 src/hb-ot-shape-complex-arabic.cc  |  6 +++---
 src/hb-ot-shape-complex-private.hh | 37
 ++++++++++++++++++++++---------------
 src/hb-ot-shape-private.hh	    | 14 +++++++++++++-
 src/hb-ot-shape.cc		    |  3 ++-
 4 files changed, 40 insertions(+), 20 deletions(-)

commit 57ac0ecb7843533b2e6e6d6c8a12b2a44437cc1c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 17:07:02 2010 -0400

    Merge clearing masks and setting global masks

 src/hb-buffer-private.hh | 11 ++++++-----
 src/hb-buffer.cc	  |  5 +++--
 src/hb-ot-map.cc	  |  2 +-
 src/hb-ot-shape.cc	  |  7 ++-----
 4 files changed, 12 insertions(+), 13 deletions(-)

commit fc96596b7c1c4e62491e951a3c256fb00dcde550
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 17:00:25 2010 -0400

    Form clusters before setting masks

 src/hb-ot-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 1e80782244cdb1dedae9d1e61079d0508e57ca72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 17:00:07 2010 -0400

    Clear masks before setting them up, not after!

 src/hb-ot-shape.cc | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit fd3d32d31cb6d74a9994b6850d539fd0b707d941
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 16:57:47 2010 -0400

    Add hb_ot_shape_execute()

    Not public yet.

 src/hb-ot-shape-private.hh |  5 ++---
 src/hb-ot-shape.cc	    | 19 ++++++++++++++-----
 2 files changed, 16 insertions(+), 8 deletions(-)

commit 49baa1f69efb0e3c62e45bd59dd88459a84bf390
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 16:50:36 2010 -0400

    Add hb_ot_complex_shaper_t stuff and start hooking Arabic shaper up

 src/Makefile.am		    |	3 +-
 src/hb-ot-map-private.hh	    |	2 +-
 src/hb-ot-map.cc		    |	2 +-
 src/hb-ot-shape-arabic.cc	    | 706
 ------------------------------------
 src/hb-ot-shape-complex-arabic.cc  | 715
 +++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape-complex-private.hh |  88 +++++
 src/hb-ot-shape-private.hh	    |  12 +-
 src/hb-ot-shape.cc		    |	8 +-
 8 files changed, 813 insertions(+), 723 deletions(-)

commit 605ed468f380f86d642031f6451447d270cb6de1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 16:19:29 2010 -0400

    Add hb_ot_shape_plan_t

    This is the object that a separate plan/execute shaping API will
    use in
    between the two stages.

 src/hb-ot-shape-private.hh | 12 ++++++++++--
 src/hb-ot-shape.cc	    | 38 ++++++++++++++++++--------------------
 2 files changed, 28 insertions(+), 22 deletions(-)

commit 895fb5d364e7ae5d9d2e34b9f68b8651804369ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 16:00:21 2010 -0400

    Refactor, in a different direction

 src/hb-ot-map-private.hh   | 15 ++++++++-------
 src/hb-ot-map.cc	    | 23 ++++++++++++-----------
 src/hb-ot-shape-private.hh | 13 +------------
 src/hb-ot-shape.cc	    | 33 +++++++++++++++++----------------
 4 files changed, 38 insertions(+), 46 deletions(-)

commit d2ba016ca1ba7489537768b619980d5159b5870c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 15:35:45 2010 -0400

    More refactoring

 src/hb-ot-map-private.hh   | 32 +++++---------------------------
 src/hb-ot-map.cc	    | 32 +++++++++++++++++++++++++++++---
 src/hb-ot-shape-private.hh | 16 ++++++++++++++--
 src/hb-ot-shape.cc	    | 43
 ++++++++++++++++++++++++++++---------------
 src/hb-ot-shape.h	    | 10 +++++-----
 5 files changed, 81 insertions(+), 52 deletions(-)

commit 66e487dfbfdccd0c4be8cd11661d412ca27c3425
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 13:51:19 2010 -0400

    Update Arabic shaping table to Unicode 6.0.0.

 src/hb-ot-shape-arabic.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit f4792d99eee0e8cd72b7cb01c96a09f16e2a72ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 12:32:18 2010 -0400

    Fix infinite loop!

    Untested code is indeed buggy code.

    Mozilla bug #603352.

 src/hb-ot-tag.c | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 993d1e786a32612b796dae8309ce402a4121bec7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 12 11:17:30 2010 -0400

    Fix missing negation in unreachable code!

    Mozilla bug #603346

 src/hb-open-type-private.hh | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 52601275d5e4000dada4f925fb78723eeeee7bd4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:38:46 2010 -0400

    More separation

 src/hb-ot-shape.cc | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit 6b7e6758626268ba1c7c266128e618ec73ae2c0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:30:04 2010 -0400

    Minor

 src/hb-ot-shape.cc | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit aa9c450bb2d7c3c9e36ea32e3558250391a0582d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:27:38 2010 -0400

    Enable 'rtlm' mirroring

 src/hb-ot-map-private.hh |  9 +++++----
 src/hb-ot-shape.cc	  | 30 +++++++++++++++---------------
 2 files changed, 20 insertions(+), 19 deletions(-)

commit 36925f695d349a53d52ecc3a58f18240a6977463
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:20:32 2010 -0400

    Rename hb_mask_allocator_t to hb_ot_map_t

    hb_ot_plan_t may be a better name, donno.

 src/hb-ot-map-private.hh   |  4 ++--
 src/hb-ot-map.cc	    |  2 +-
 src/hb-ot-shape-private.hh |  4 ++--
 src/hb-ot-shape.cc	    | 49
 +++++++++++++++++++++-------------------------
 4 files changed, 27 insertions(+), 32 deletions(-)

commit f5dd3be46b5c77a2c5b97b82a0b67ac9e851b898
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:16:23 2010 -0400

    Improve checks

 src/check-c-linkage-decls.sh | 2 +-
 src/check-header-guards.sh   | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 5a2b0b3878cd9c62121bb4fd6344e102a9ee1825
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:14:57 2010 -0400

    Add hb-ot-map.cc

 src/Makefile.am	  |   1 +
 src/hb-ot-map-private.hh | 129 +-----------------------------------
 src/hb-ot-map.cc	  | 165
 +++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 168 insertions(+), 127 deletions(-)

commit ecc4550ed7bc900a61081edfbcd0ad09cbf29b36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 20:05:29 2010 -0400

    Fix feature overriding

 src/hb-ot-map-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 8f08c3275040870a645ef034a38d30c05c619f21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 19:43:48 2010 -0400

    Minor cleanup

 src/hb-open-type-private.hh |	8 ++----
 src/hb-ot-map-private.hh    | 61
 +++++++++++++--------------------------------
 src/hb-ot-tag.c	     | 11 ++++----
 src/hb-private.h	     |	4 +++
 4 files changed, 28 insertions(+), 56 deletions(-)

commit a806762a314e83154793d96ee665e6668d6b56de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 19:18:40 2010 -0400

    Add hb-ot-shape-private.hh

 src/Makefile.am	    |  1 +
 src/hb-ot-shape-arabic.cc  |  2 +-
 src/hb-ot-shape-private.hh | 60
 ++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 62 insertions(+), 1 deletion(-)

commit 4924affe0f0adf75f2a0e2137a71206b0576d63f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 19:18:16 2010 -0400

    Add hb-ot-map-private.hh

 src/Makefile.am	  |   1 +
 src/hb-ot-map-private.hh | 307
 +++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-shape.cc	  | 274 ++----------------------------------------
 3 files changed, 315 insertions(+), 267 deletions(-)

commit a7c5046d6b676a32298b97403a49235f7f255161
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 18:47:47 2010 -0400

    Add private hb_segment_properties_t

 src/hb-buffer-private.hh | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit b897c607d91d569f4eaa681d1f5b3d9f3d2bb093
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 18:41:57 2010 -0400

    Flip the OT bit-allocation vs gsub/gpos inside-out

    We now build our entire attack plan before jumping in.

 src/hb-ot-shape.cc | 333
 ++++++++++++++++++++++++++++-------------------------
 1 file changed, 176 insertions(+), 157 deletions(-)

commit e89b7d2a61b7f58e6c7cec00d5ce2246dee1e8a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 12:29:59 2010 -0400

    Logically separate feature collection

 src/hb-ot-shape.cc | 29 ++++++++++++++++++-----------
 1 file changed, 18 insertions(+), 11 deletions(-)

commit 5b88908f12ad1d828dd6075fb8fc0036c2d6af3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 8 12:23:01 2010 -0400

    Minor

 src/hb-ot-shape.cc | 18 ++++++------------
 1 file changed, 6 insertions(+), 12 deletions(-)

commit 5360ce0c5c33f921b3f9ad3f42529a19df5ad0fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 7 21:21:11 2010 -0400

    Move some more code around

 src/hb-ot-shape.cc | 27 +++++++++++++--------------
 1 file changed, 13 insertions(+), 14 deletions(-)

commit d9c726078828d50db62e05407a3f38f2e7607533
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 7 21:19:54 2010 -0400

    Minor

 src/hb-ot-shape.cc | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit efe0d682e860ffd23a1d17c68c8273f17d51c1c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 7 21:12:46 2010 -0400

    Simplify compiling lookups

 src/hb-ot-shape.cc | 66
 ++++++++++++++++++++++--------------------------------
 1 file changed, 27 insertions(+), 39 deletions(-)

commit 476c94218b4f5b8e119e82b0e10b641e0c10bf56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 7 17:47:33 2010 -0400

    Rename

 src/hb-ot-shape.cc | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit 34db6f031d7ac009f554386ef990bad44886b9ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 7 01:21:19 2010 -0400

    Add XXX note

 src/hb-buffer.cc | 1 +
 1 file changed, 1 insertion(+)

commit 98aa3f65446496dc250d9b01d98cacfdf1157e06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 6 00:23:36 2010 -0400

    Call hb_ot_shape_setup_lookups_complex()

 src/hb-ot-shape.cc | 10 +++++++++-
 1 file changed, 9 insertions(+), 1 deletion(-)

commit f1d07885dc358e79c237e824c94b3320c0a9c17d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 6 00:21:37 2010 -0400

    Rename setup_lookups()

 src/hb-ot-shape.cc | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit affc5abac7bdae51df85856a5478d34d96fda4fe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Oct 6 00:18:16 2010 -0400

    Move table_tag to hb_ot_shape_context_t

 src/hb-ot-shape.cc | 31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)

commit 967240dd8b96802345ef273e75427066e91ea8fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 5 23:00:05 2010 -0400

    Add internal hb_ot_shape_context_t

 src/hb-ot-shape-arabic.cc |  26 ++---
 src/hb-ot-shape.cc	   | 237
 +++++++++++++++++++---------------------------
 2 files changed, 108 insertions(+), 155 deletions(-)

commit 3eb936f1539475098f39be78654b9c39b86f0799
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 5 18:36:58 2010 -0400

    Add Arabic/Syriac/N'ko shaping logic

    Not hooked up just yet.

 src/Makefile.am		 |   9 +
 src/gen-arabic-joining-table.py |  39 +++
 src/hb-ot-shape-arabic.cc	 | 716
 ++++++++++++++++++++++++++++++++++++++++
 3 files changed, 764 insertions(+)

commit 0109816b50064a314389333ff64aaf22cb4b1e56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Oct 5 18:36:45 2010 -0400

    Update build system

 autogen.sh   | 3 ---
 configure.ac | 1 +
 2 files changed, 1 insertion(+), 3 deletions(-)

commit e81d7afe6e0e9dd26025f3243a11cf0b408a8046
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 4 18:18:48 2010 -0400

    Add hb_face_get_upem()

 src/hb-font.cc | 6 ++++++
 src/hb-font.h	| 3 +++
 2 files changed, 9 insertions(+)

commit d47f79db92fa45d51cd5f7845db8a206f5ec122b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 4 18:13:30 2010 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit bd361945a89ea31e6c4525aa030e18744ea81fb3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 4 17:22:57 2010 -0400

    Add API comments

 src/hb-font.h | 17 +++++++++++++++--
 1 file changed, 15 insertions(+), 2 deletions(-)

commit 645f6f265b5f6fb85b3c0f59ea874d58c86e3917
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 4 17:01:01 2010 -0400

    Add is_mutable() functions

    Correspond to the make_mutable() ones.

 src/hb-font.cc   | 6 ++++++
 src/hb-font.h	  | 2 ++
 src/hb-unicode.c | 6 ++++++
 src/hb-unicode.h | 2 ++
 4 files changed, 16 insertions(+)

commit 19c0eab8cf96d00e168c4b11ec435019c1ed44f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Oct 4 16:45:21 2010 -0400

    Add getters for all setter APIs

    One in particular is not a straight getter: hb_font_unset_funcs() is
    special because of the specific needs of the lifecycle management of
    the user_data object.

 src/hb-font.cc   | 64
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-font.h	  | 40 +++++++++++++++++++++++++++++++++++
 src/hb-unicode.c | 32 ++++++++++++++++++++++++++++
 src/hb-unicode.h | 31 ++++++++++++++++++++++++++-
 4 files changed, 166 insertions(+), 1 deletion(-)

commit f0feb084b0fd1510474b25404d1dcc5686ee0538
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Oct 3 19:09:39 2010 -0400

    Minor

 src/hb-ot-layout-private.hh | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit ac0c1663fa6e93a5a94c88fc7497bc11ca17f0a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 1 19:09:23 2010 -0400

    Avoid div-by-zero, validate upem

 src/hb-ot-head-private.hh   | 7 +++++++
 src/hb-ot-layout-private.hh | 6 +++---
 2 files changed, 10 insertions(+), 3 deletions(-)

commit 7f97d2cd904ea999c099c73c52187c5d65aeec67
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Oct 1 18:58:50 2010 -0400

    Pedantic

 src/hb-open-type-private.hh	    | 12 ++++++------
 src/hb-ot-layout-common-private.hh |  2 +-
 src/hb-ot-layout-gdef-private.hh   | 10 +++++-----
 src/hb-ot-layout-gpos-private.hh   |  6 +++---
 4 files changed, 15 insertions(+), 15 deletions(-)

commit 2841436926d6a406bd1f4a35c66a0e3c2fdbeca7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 29 12:20:36 2010 -0400

    Don't zero glyph advances in MarkToBase and similar lookups

    See email thread "Should MarkToBase attachment zero the mark advance?"
    started by Jonathan Kew on 23 August 2010 for details.

 src/hb-ot-layout-gpos-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit 36b3862009c00ad922d68810173a69ac59723365
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 29 12:10:24 2010 -0400

    One fewer cmp() implementation...

 src/hb-ot-layout-common-private.hh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 4e573715ae5f5ed486ad66382bb44c47a86591ff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 28 16:23:58 2010 -0400

    Improve cmp function parameter namings and casts

    No semantic change.

 src/hb-open-type-private.hh	    | 6 +++---
 src/hb-ot-layout-common-private.hh | 6 +++---
 src/hb-ot-shape.cc		    | 8 ++++----
 3 files changed, 10 insertions(+), 10 deletions(-)

commit dca8aff24652c83c53efbb9d06e5e1c7ef1c2fa5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 28 16:25:23 2010 -0400

    Add comment re DejaVu Sans Mono having 'dflt' script

 src/hb-ot-layout.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 9dc45401c07cb40114067cafbe286c63a9598f3b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Sep 28 16:23:28 2010 -0400

    Fix stupid bug in bsearch cmp function!

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6fca4c18c42bdcbc67ee8855499c51c7d6311eb2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 23 10:28:51 2010 -0400

    Add TODO iteam

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit f2a30bd605a57b99fce4b78e288c2ca62f7191ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Sep 23 10:27:08 2010 -0400

    Remove unimplemented method hb_font_get_funcs()

    Got to add a suitable replacement.

 src/hb-font.h | 3 ---
 1 file changed, 3 deletions(-)

commit 7b9a38a112aa2421d97187a9b30619360edeabbe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 22 17:42:59 2010 -0400

    Add test.c using public API

 src/Makefile.am |  6 +++-
 src/test.c	 | 94
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 2 files changed, 99 insertions(+), 1 deletion(-)

commit 9ea7368fce3fa373d8d2925961ad211f5cf6ce70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 22 17:38:44 2010 -0400

    Fix hb_ot_layout leak

 src/hb-ot-layout.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 8e577acae2e605547b6a1b9b3a941cb9e3c56a4c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 22 17:37:02 2010 -0400

    Fix blob refcounting with insane SFNT table directories

 src/hb-font.cc | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 75371bea4fbf50b8604d2698b4935c011648a6b6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 22 17:12:10 2010 -0400

    Add TODO item

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 5bd1e95236320aed60fb29ca1e93b9595d4aeeec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Sep 22 16:46:18 2010 -0400

    Speedup Device table delta computation for common cases

 src/hb-ot-layout-common-private.hh | 25 +++++++++++++++++++++----
 1 file changed, 21 insertions(+), 4 deletions(-)

commit ed4acbde9c5e3323cc95037b500d1bf2878ed3ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 16 14:36:27 2010 -0400

    Fix NULL dereference

    Reported by Jonathan Kew.  Face table handling needs to be redone
    anyway, but fix this for now.

 src/hb-ot-layout.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 258305c2a5dd47bd2d83f12eaf9caa5b19ae5efb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 13 14:10:02 2010 -0400

    [GPOS] Fix div-by-zero

    Patch by Jonathan Kew.  Mozilla bug #465728.

 src/hb-ot-layout-gpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2422c4b96d32037a5cdaef4c427ed1d25db5f647
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 13 14:00:34 2010 -0400

    Add TODO

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 27f0b092a13344e8791c496c77a3c1e5de4f887c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 17:35:54 2010 -0400

    Logically separate feature allocation from application

 src/hb-ot-shape.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 6cf63132dc771e1bcd5627720daf4bd2ea0800a5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 17:32:26 2010 -0400

    Minor

 src/hb-ot-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4e4ef24e46f273ad2bdda2f718223e05b37dd50f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 17:22:11 2010 -0400

    Towards separating bit allocation from shaping

 src/hb-buffer-private.hh	  |  9 ++++++---
 src/hb-buffer.cc		  | 12 ++++++------
 src/hb-ot-layout-gpos-private.hh |  2 +-
 src/hb-ot-layout.cc		  |  2 +-
 src/hb-ot-shape.cc		  | 41
 ++++++++++++++++------------------------
 5 files changed, 30 insertions(+), 36 deletions(-)

commit da6cff3864d2ef4a061a29e5918359bafcd51f4c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 15:40:58 2010 -0400

    Add TODO items

 TODO | 3 +++
 1 file changed, 3 insertions(+)

commit acdba3f90b232fc12fcb200dca2584481b339118
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 15:11:18 2010 -0400

    Prefer C linkage

 src/Makefile.am		      |  1 +
 src/check-c-linkage-decls.sh	      | 18 ++++++++++++++++++
 src/hb-blob-private.h		      |  2 ++
 src/hb-blob.c			      | 18 ++++++++++++------
 src/hb-blob.h			      |  2 ++
 src/hb-buffer-private.hh	      |  1 +
 src/hb-buffer.cc		      |  7 ++++++-
 src/hb-buffer.h		      |  1 +
 src/hb-common.c		      |  6 ++++++
 src/hb-common.h		      | 21 +++++++++++++--------
 src/hb-font-private.h		      |  1 +
 src/hb-font.cc			      |  4 ++++
 src/hb-font.h			      |  1 +
 src/hb-ft.c			      | 10 ++++++++--
 src/hb-ft.h			      |  2 ++
 src/hb-glib.c			      |  6 ++++++
 src/hb-glib.h			      |  2 ++
 src/hb-graphite.cc		      |  6 ++++++
 src/hb-graphite.h		      |  3 ++-
 src/hb-icu.c			      |  6 ++++++
 src/hb-icu.h			      |  2 ++
 src/hb-language.c		      |  5 +++++
 src/hb-language.h		      |  2 ++
 src/hb-object-private.h	      |  2 ++
 src/hb-open-file-private.hh	      |  4 ++++
 src/hb-open-type-private.hh	      |  5 +++++
 src/hb-ot-head-private.hh	      |  5 +++++
 src/hb-ot-layout-common-private.hh   |  6 ++++++
 src/hb-ot-layout-gdef-private.hh     |  4 ++++
 src/hb-ot-layout-gpos-private.hh     |  6 ++++++
 src/hb-ot-layout-gsub-private.hh     |  7 ++++++-
 src/hb-ot-layout-gsubgpos-private.hh | 13 +++++++++++++
 src/hb-ot-layout-private.hh	      |  3 ++-
 src/hb-ot-layout.cc		      |  5 +++++
 src/hb-ot-layout.h		      |  1 +
 src/hb-ot-shape.cc		      |  6 ++++++
 src/hb-ot-shape.h		      |  2 ++
 src/hb-ot-tag.c		      |  5 +++++
 src/hb-ot-tag.h		      |  2 ++
 src/hb-ot.h			      |  3 +++
 src/hb-private.h		      |  5 +++++
 src/hb-shape.cc		      |  5 +++++
 src/hb-shape.h			      |  1 +
 src/hb-unicode-private.h	      |  1 +
 src/hb-unicode.c		      |  6 ++++++
 src/hb-unicode.h		      |  1 +
 src/hb.h			      |  3 +++
 src/main.cc			      |  6 ++++++
 48 files changed, 214 insertions(+), 20 deletions(-)

commit cc6d52279d10a2edcf0d86c3a18a79ff4f6d3858
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 15:00:13 2010 -0400

    De-C++ where possible

    Helps with avoiding many "extern C" declarations in source files.

 src/Makefile.am		  |   4 +-
 src/check-header-guards.sh	  |   2 +-
 src/hb-font-private.h		  |  95 ++++++++++++++++
 src/hb-font-private.hh		  |  95 ----------------
 src/hb-font.cc			  |   2 +-
 src/hb-ft.c			  | 240
 +++++++++++++++++++++++++++++++++++++++
 src/hb-ft.cc			  | 240
 ---------------------------------------
 src/hb-graphite.cc		  |   2 +-
 src/hb-ot-layout-gdef-private.hh |   2 +-
 src/hb-ot-layout-private.hh	  |   2 +-
 10 files changed, 342 insertions(+), 342 deletions(-)

commit 0dd200d28f51bf4062d8a377432c8977c80cb210
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 14:56:29 2010 -0400

    Header dep cleanup

 src/hb-font-private.hh      | 2 --
 src/hb-ot-layout-private.hh | 1 +
 2 files changed, 1 insertion(+), 2 deletions(-)

commit fb0d25246267851a1fc200ead28c56359a40047e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 14:54:22 2010 -0400

    dos2unix

 src/hb-ot-head-private.hh | 256
 +++++++++++++++++++++++-----------------------
 1 file changed, 128 insertions(+), 128 deletions(-)

commit 81408cd51ce575891e79e6483be187130f864c28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 23 14:46:57 2010 -0400

    Don't use "operator ="

    Some compilers don't like operator = defined on members of union
    members
    either.  Reported by Ginn Chen for Sun Studio compilers.

 src/hb-open-type-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 39fe34d4c356516f0a92f42b13a168572829d24e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 22 18:12:38 2010 -0400

    Add TODO option

 TODO | 2 ++
 1 file changed, 2 insertions(+)

commit 243a96f41482edb83e4798358064bd3329dd278c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 21 17:21:12 2010 -0400

    Add arm build fix to TODO

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit c407f05f99f9225916d3d0ae06eac8fbc8b55b97
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 21 17:20:44 2010 -0400

    Remove fixed TODO item

 TODO | 1 -
 1 file changed, 1 deletion(-)

commit 4f801bd6586defdbf70162e0c7f8968d2b476df2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 21 16:37:01 2010 -0400

    Mozilla bug 580233 - check for zero-length record in hb sanitizer.

    Patch / report by Jonathan Kew.

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 17e9ff938b638fd1cb80c990ba13bd47562116b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 15 11:21:34 2010 -0700

    Fix 64bit issues with debug prints

 src/hb-blob.c		     | 10 +++++-----
 src/hb-open-type-private.hh |	5 +++--
 2 files changed, 8 insertions(+), 7 deletions(-)

commit fd56ae49637b978ea3b36fab5b48f1a3cc99e90e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 8 00:53:40 2010 -0400

    Don't bother sorting, it's a safe font error if the array is not
    sorted

 src/hb-open-type-private.hh	    | 29 -----------------------------
 src/hb-ot-layout-common-private.hh |  7 -------
 2 files changed, 36 deletions(-)

commit cc8a4abea68f2dba26feb5785f9e518e6853c744
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 8 00:40:04 2010 -0400

    Use bsearch where applicable

 src/hb-open-type-private.hh	    |  49 +++++++++++++
 src/hb-ot-layout-common-private.hh | 145
 +++++++++++++------------------------
 2 files changed, 100 insertions(+), 94 deletions(-)

commit 2f418f5709b2b8b3ef2f6056b9d8c13b66f0b74a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 7 22:07:40 2010 -0400

    Remove useless TODO

 src/hb-open-file-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit da8edbb62204dc39f93d500ef85929e234e0bd19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 9 07:15:39 2010 -0400

    Fix header

 src/hb-buffer-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit d05d13df02fbe76814694fe49cc01bbb41c3d0e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 9 07:15:03 2010 -0400

    Add a test for header preprocessor guards

 src/Makefile.am	    |  4 +++-
 src/check-header-guards.sh | 20 ++++++++++++++++++++
 src/check-libstdc++.sh     |  1 -
 3 files changed, 23 insertions(+), 2 deletions(-)

commit 0f0cd9d361f1bb614aa3fd4616160d027062370e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 9 06:32:56 2010 -0400

    Fix header tags

 src/hb-font-private.hh      | 6 +++---
 src/hb-object-private.h     | 6 +++---
 src/hb-open-type-private.hh | 4 ++--
 src/hb-ot-layout-private.hh | 6 +++---
 src/hb-ot-shape.h	     | 2 +-
 5 files changed, 12 insertions(+), 12 deletions(-)

commit f2a1b411b1d48c3dfac0df8e78c848d9aa3bb047
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jun 3 11:37:51 2010 -0400

    Followup fix for variation-selectors

    Patch from Jonathan Kew

 src/hb-ot-shape.cc | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit a224b4d502d026fa642ee4098bf7bc0b4ba7ce27
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 2 22:24:54 2010 -0400

    Fix skipping variation-selectors

 src/hb-ot-shape.cc | 14 ++++++++------
 1 file changed, 8 insertions(+), 6 deletions(-)

commit 81a77b115db401f69e869690f24b9047370bdfde
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jun 1 23:03:54 2010 -0400

    Make feature sorting stable

 src/hb-ot-shape.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit fdc322a82047c4bda9fa3dab4338a0eac1c1bde7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 20:55:52 2010 -0400

    Minor

 src/hb-ot-shape.cc | 38 +++++++++++++++++++++-----------------
 1 file changed, 21 insertions(+), 17 deletions(-)

commit f062ec6bb24b1c21d37b12adc7e944a5fe53526a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 20:54:43 2010 -0400

    Further simplify mask allocator

 src/hb-ot-shape.cc | 23 +++++++----------------
 1 file changed, 7 insertions(+), 16 deletions(-)

commit 8af45fda475d075c5a285002463a00a0423d3926
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 20:41:20 2010 -0400

    Fix global feature handling

 src/hb-ot-shape.cc | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit e04685ee7be01695ec437fab50f919f1b7423c57
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 20:37:06 2010 -0400

    Simplify mask allocation

 src/hb-ot-shape.cc | 48 ++++++++++++++++++++----------------------------
 1 file changed, 20 insertions(+), 28 deletions(-)

commit 0e235d0fc9bdeeaffa7215c21abc5d40767a10c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 20:21:47 2010 -0400

    Towards a mask allocator

 src/hb-ot-shape.cc | 291
 ++++++++++++++++++++++++++++++++++-------------------
 1 file changed, 186 insertions(+), 105 deletions(-)

commit 81c5e8724b740c6e42ed3a45e0574c7c5f3ad8e6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 28 18:31:16 2010 -0400

    Allow disabling default features

    Patch from Jonathan Kew

 src/hb-buffer-private.hh |  18 +++--
 src/hb-buffer.cc	  |  15 ++--
 src/hb-ot-shape.cc	  | 196
 ++++++++++++++++++++++++++++++++---------------
 3 files changed, 153 insertions(+), 76 deletions(-)

commit 2163afbf35044f59dbf449254e65b8c9feb6cdeb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 27 14:04:15 2010 -0400

    Add note about UTF-8 decoder

 src/hb-buffer.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 226faa58f4e23eb655bebb0eff7206a3024c8d55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 27 11:42:34 2010 -0400

    Fix loop

 src/hb-ot-tag.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 56bef5680cc76a67d16ca14ac69f0dda1a691968
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Thu May 27 10:09:04 2010 +0100

    Fixes to Python and Graphite from Martin

 contrib/python/README		   |  10 ++++
 contrib/python/lib/fontconfig.pyx |  47 +++++++++++++++++
 contrib/python/lib/harfbuzz.pyx   | 104
 ++------------------------------------
 contrib/python/scripts/hbtestfont | 103
 +++++++++++++++++++++++++++++++++----
 contrib/python/setup.py	   |   3 +-
 src/hb-graphite.cc		   |   8 +--
 6 files changed, 159 insertions(+), 116 deletions(-)

commit b485da0b719cb03cc33da57802c5151301664c2f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 27 11:39:19 2010 -0400

    Disable Graphite as it crashes all over the place...

 src/hb-shape.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 93ac709b1f6b015371c29bf244a9ece62baedff0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 26 16:22:00 2010 -0400

    Cypriot is RTL

 src/hb-unicode.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 15c7379c16dbb9ee8ed1c0333ca7492532ce8423
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 26 10:48:10 2010 -0400

    Revert "Merge remote branch 'martin/master'"

    This reverts commit 80af2812fb3b231ddcb4608ec13c6038a681c818,
    reversing
    changes made to c442672ec2fb83ed41f3994b3aa4f92a097664ab.

 contrib/python/README		   |  10 ----
 contrib/python/lib/fontconfig.pyx |  47 -----------------
 contrib/python/lib/harfbuzz.pyx   | 104
 ++++++++++++++++++++++++++++++++++++--
 contrib/python/scripts/hbtestfont |  98
 ++++-------------------------------
 contrib/python/setup.py	   |   3 +-
 src/Makefile.am		   |   2 +-
 src/hb-graphite.cc		   |   8 +--
 src/hb-ot-shape.cc		   |   2 +-
 src/hb-ot-tag.c		   |   1 -
 src/hb-ot.h			   |   2 +-
 src/hb-shape.cc		   |   2 +-
 11 files changed, 119 insertions(+), 160 deletions(-)

commit 80af2812fb3b231ddcb4608ec13c6038a681c818
Merge: c442672 3109a86
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 24 18:14:24 2010 +0100

    Merge remote branch 'martin/master'

commit c442672ec2fb83ed41f3994b3aa4f92a097664ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 24 18:02:32 2010 +0100

    Fix struct initializers

 src/hb-ft.cc  | 12 ++++++------
 src/hb-glib.c | 14 +++++++-------
 src/hb-icu.c  | 14 +++++++-------
 3 files changed, 20 insertions(+), 20 deletions(-)

commit f5ac9de259773a5f86809892e58166a485d70a3d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 24 18:01:09 2010 +0100

    Minor

 src/hb-object-private.h | 24 +++++++++++++-----------
 1 file changed, 13 insertions(+), 11 deletions(-)

commit f97bf4f81257c97a46dff51be31b2ec214d6c270
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 24 17:50:19 2010 +0100

    Make sure we initialize all callbacks upon creation

    Also fixes issue with unicode callbacks never being set really.

 src/hb-font.cc   | 18 +++++++-----------
 src/hb-unicode.c |  9 ++-------
 2 files changed, 9 insertions(+), 18 deletions(-)

commit bf36a1074ab23abeab0a7a6c47db26770dc1ab0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 24 17:46:21 2010 +0100

    Move all callback functions in a vtable structs

 src/hb-font-private.hh   | 10 ++++++----
 src/hb-font.cc		  | 28 +++++++++++++++-------------
 src/hb-ot-shape.cc	  |  4 ++--
 src/hb-unicode-private.h | 12 +++++++-----
 src/hb-unicode.c	  | 32 +++++++++++++++++---------------
 5 files changed, 47 insertions(+), 39 deletions(-)

commit 3109a86add936ae4cc77541fc026c4fe2db4e328
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Mon May 24 13:25:37 2010 +0100

    hb-graphite now no longer has -ve advances within clusters. Fix
    infinite loop in tag_to_script(). python fixed to use tag_to_script
    and allow hbtestfont to be passed font files, where fontconfig knows
    about them.

 contrib/python/lib/harfbuzz.pyx   | 4 ++--
 contrib/python/scripts/hbtestfont | 6 +++++-
 src/hb-graphite.cc		   | 4 ++--
 src/hb-ot-tag.c		   | 1 +
 4 files changed, 10 insertions(+), 5 deletions(-)

commit e5bed0a37fe1b0576d08435179e455cb28eadcdb
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Sat May 22 20:19:00 2010 +0100

    Tidy up hbtestfont and add README

 contrib/python/README		   |  10 +++
 contrib/python/scripts/hbtestfont | 134
 +++++++++++++++++++-------------------
 2 files changed, 77 insertions(+), 67 deletions(-)

commit 70ae332fe66510500d303b6fcc79537833b42f05
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Sat May 22 19:58:00 2010 +0100

    Add fontconfig to hbtestfont

 contrib/python/lib/fontconfig.pyx | 47 ++++++++++++++++++++++++++++
 contrib/python/scripts/hbtestfont | 64
 ++++++++++++++++++++++++---------------
 contrib/python/setup.py	   |  3 +-
 3 files changed, 88 insertions(+), 26 deletions(-)

commit 72631c9d06b131d82080f212908e7d0b0266b841
Merge: 1432ab1 1094a29
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Sat May 22 09:38:02 2010 +0100

    Merge branch 'master' of git://git.freedesktop.org/~behdad/harfbuzz-ng

commit 1432ab15c163eb0b5be3de66a4cb3df15ad73500
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Sat May 22 00:56:40 2010 +0100

    Add graphical output to hbtestfont

 contrib/python/lib/harfbuzz.pyx   | 100
 +-------------------------------------
 contrib/python/scripts/hbtestfont |  62 ++++++++++++++++++++++-
 src/Makefile.am		   |   2 +-
 src/hb-ot-shape.cc		   |   2 +-
 src/hb-ot.h			   |   2 +-
 src/hb-shape.cc		   |   2 +-
 6 files changed, 67 insertions(+), 103 deletions(-)

commit bbc7a99d01298f9be1ebaaceacbc9bc961e247e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 18:24:34 2010 +0100

    Move mirroring around a bit

 src/hb-ot-shape.cc | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit bd0987386b3a4dddf208ccf1a70ebfff6242ba73
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 18:06:35 2010 +0100

    Add a few more standard features

 src/hb-ot-shape.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 75f3469ca6d626b08eb411984a2ba7fd48ca5b5f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 17:59:04 2010 +0100

    Add note

 src/hb-ot-shape.cc | 1 +
 1 file changed, 1 insertion(+)

commit 1094a294f6a44c47fc75867983f2b135a6442bab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 17:58:20 2010 +0100

    Add rtlm

 src/hb-ot-shape.cc | 26 +++++++++++++++++++++-----
 1 file changed, 21 insertions(+), 5 deletions(-)

commit 074ea787493a37ae8f68d17be7820f13fff57520
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 17:53:10 2010 +0100

    Add ltra, ltrm, and rtla features

 src/hb-ot-shape.cc | 60
 +++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 48 insertions(+), 12 deletions(-)

commit 1ce7b87c4d8d1ab3ec1d5198351d71b7199f7c64
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 17:31:45 2010 +0100

    Cleanup bitmask allocation

 src/hb-buffer-private.hh | 16 +++++++++++++
 src/hb-buffer.cc	  | 36 +++++++++++++++++++++++++++++
 src/hb-ot-shape.cc	  | 60
 +++++++++++++++++++++---------------------------
 3 files changed, 78 insertions(+), 34 deletions(-)

commit dd22a8f7bfd424a69286e90f79d2a23af6e89ec1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 16:43:17 2010 +0100

    Add note

 src/hb-ot-layout-gsub-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit cbd1d6a63a5d696b7d6a5aba9ee7305ea228416a
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Fri May 21 15:16:43 2010 +0100

    Rename Grxxx to HbGrxxx

 src/hb-graphite.cc | 26 +++++++++++++-------------
 1 file changed, 13 insertions(+), 13 deletions(-)

commit 0375bdd2027767ee7bebef1ed289b33dc64f430e
Author: Martin Hosken <martin_hosken@sil.org>
Date:	Fri May 21 15:01:37 2010 +0100

    Rename classes from Grxxx to HbGrxxx

 src/hb-graphite.cc | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit a5a72e004bb7123445c2c3a94352d358fc80d904
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 15:12:52 2010 +0100

    Add hb-ot-shape.h, oops.

 src/hb-ot-shape.h | 44 ++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 44 insertions(+)

commit aa62a402a72bdecad2a955dbfaf6e24cd2c00e55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:42:11 2010 +0100

    Fix Makefile to install hb-ot-shape.h

 src/Makefile.am | 2 +-
 src/hb-ot.h	 | 1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 9722b8f005a10fd16e841df4da3ccd80be66e296
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:37:47 2010 +0100

    Simple renames

 src/hb-ot-shape.cc | 36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit 02f28550d785671cf92fd4239c5f913f7e71585f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:37:28 2010 +0100

    Graphite also forces us to link to libstdc++ currently

 src/Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit ca663bb23c16f6a1f04efa6e10dad0e3e7c260a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:34:23 2010 +0100

    Move main shaper code into hb_ot_shape()

 src/hb-ot-shape-private.hh |  53 -----------
 src/hb-ot-shape.cc	    | 225
 ++++++++++++++++++++++++++++++++++++++++++---
 src/hb-shape.cc	    | 209
 +----------------------------------------
 3 files changed, 214 insertions(+), 273 deletions(-)

commit 7acd232d36c2b2ed03823e6aa6bb2b814bf673b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:20:48 2010 +0100

    Fix test failing

 src/hb-graphite.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dd47924d88d86b83e7f3ab040de6e7136ac0ca09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:18:08 2010 +0100

    Fix warnings

 src/hb-graphite.cc | 14 +++++---------
 1 file changed, 5 insertions(+), 9 deletions(-)

commit 305ba8671553cd955c20a54db622666c0bb02532
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 14:02:20 2010 +0100

    Import Graphite shaping backend by Martin Hosken

 configure.ac	    |	6 ++
 src/Makefile.am    |  11 ++
 src/hb-graphite.cc | 308
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-graphite.h  |  46 ++++++++
 src/hb-shape.cc    |  15 +++
 5 files changed, 386 insertions(+)

commit 3ba6818ba9be950e46902f0239f2451ec0e65d44
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 13:51:29 2010 +0100

    Update the Python module

 contrib/python/lib/harfbuzz.pyx | 40
 +++++++++++++++++++++-------------------
 1 file changed, 21 insertions(+), 19 deletions(-)

commit 83f34677bcbc6bb194940407b0fcb23575650e3d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 13:43:49 2010 +0100

    Add hb_tag_from_string()

 src/Makefile.am |  1 +
 src/hb-common.c | 41 +++++++++++++++++++++++++++++++++++++++++
 src/hb-common.h |  3 +++
 3 files changed, 45 insertions(+)

commit 4a9a5c0b06e8aa5d15327242609a7c766d3e0e94
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 13:33:46 2010 +0100

    Don't allocate bits for features not available

 src/hb-ot-shape.cc | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit e53d77142ac4ecbe38ab3235491fa93cb7ff16ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 13:32:38 2010 +0100

    Speed up feature mask setting

    Patch from Jonathan Kew.

 src/hb-ot-shape.cc | 31 +++++++++++++++++++++++++------
 1 file changed, 25 insertions(+), 6 deletions(-)

commit 4fa67f34ecc65056ce60a572213fbdae66e0423b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 13:29:12 2010 +0100

    Add Unicode 5.2 scripts

 src/hb-icu.c	  | 29 ++++++++++++++++++++++++++++-
 src/hb-ot-tag.c  | 21 +++++++++++++++++++--
 src/hb-unicode.c | 19 ++++++++++++++++++-
 src/hb-unicode.h | 19 ++++++++++++++++++-
 4 files changed, 83 insertions(+), 5 deletions(-)

commit ee1b322100a6bd575b999904592abbd9fed5587f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 12:55:57 2010 +0100

    Fix feature mask setting

 src/hb-ot-shape.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit b490fa343322f1b5abaf880abc073287c1f34132
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 11:15:07 2010 +0100

    Add hb_ot_tag_to_script()

 src/hb-ot-tag.c | 14 ++++++++++++++
 src/hb-ot-tag.h |  3 +++
 2 files changed, 17 insertions(+)

commit 50355309047765558ef8f5d60aefed42a7f954cc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 21 10:33:23 2010 +0100

    Add Python wrapper from Martin Hosken

 contrib/python/lib/harfbuzz.pyx   | 306
 ++++++++++++++++++++++++++++++++++++++
 contrib/python/runpy		   |   2 +
 contrib/python/scripts/hbtestfont |  35 +++++
 contrib/python/setup.py	   |  24 +++
 4 files changed, 367 insertions(+)

commit 280af1bddb958ff97cf7ce12fe7ec2b6352e61d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 18:33:35 2010 +0100

    Let hb_face_get_table() return NULL if table not found

 src/hb-font.cc		     | 2 +-
 src/hb-font.h		     | 1 +
 src/hb-open-type-private.hh | 3 +++
 3 files changed, 5 insertions(+), 1 deletion(-)

commit 1cdbfd944eecb58587461f57f037e47a44f39990
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 17:47:28 2010 +0100

    Fix alternate, again

 src/hb-ot-layout-gsub-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit fdca3d51603bd6bef6a4b0ee4a560f7dcd2f1d37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 17:46:20 2010 +0100

    Fix alternate off-by-one

 src/hb-ot-layout-gsub-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b634beb39e0a4fef7167a8af646f6b2d8cafe69b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 17:44:52 2010 +0100

    Fix delta scale, again...

 src/hb-ot-layout-common-private.hh |  8 ++++++++
 src/hb-ot-layout-gdef-private.hh   |  3 +--
 src/hb-ot-layout-gpos-private.hh   | 12 ++++++------
 src/hb-ot-layout-private.hh	    |  2 +-
 4 files changed, 16 insertions(+), 9 deletions(-)

commit 40335d4533ac2b08121c9dc6003f3ebc5b44a67b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 17:35:14 2010 +0100

    Remove unused operator

 src/hb-ot-layout-common-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit f7acd8df5146155b51d6f50aeb04f54f3030c1c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 17:26:35 2010 +0100

    Do alternate glyph selection!

    Kinda hand-wavy right now.	Not tested.

 src/hb-ot-layout-gpos-private.hh     | 12 +++++++-----
 src/hb-ot-layout-gsub-private.hh     | 20 +++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh |  1 +
 src/hb-private.h		      | 19 ++++++++++++++++++-
 4 files changed, 35 insertions(+), 17 deletions(-)

commit 750a2294553d252e28875b605fe61fd9d6696e0f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 16:23:27 2010 +0100

    get_table() is allowed to return NULL.  Use that to simplify code

 src/hb-font.cc | 2 +-
 src/hb-ft.cc	| 6 +++---
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 99d9ef785f108df76f80a307eaa2784685ea86ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 15:47:49 2010 +0100

    Write hb_face_create_for_data() in terms of
    hb_face_create_for_tables()

    Fixes lack of head_table initialization in create_for_tables() also.

 src/hb-font.cc | 35 ++++++++++++-----------------------
 1 file changed, 12 insertions(+), 23 deletions(-)

commit 6774463883978b00b4d8c719ed75edfc4537c77f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 15:40:12 2010 +0100

    Apply user features to ranges!

 src/hb-ot-shape.cc | 23 ++++++++++++++++++++++-
 1 file changed, 22 insertions(+), 1 deletion(-)

commit 9b6023338530a2dbb8214eb4391ef3e8372f3892
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 15:31:12 2010 +0100

    Add _hb_bit_storage()

 src/hb-private.h | 35 ++++++++++++++++++++++-------------
 1 file changed, 22 insertions(+), 13 deletions(-)

commit 6b1b957f6d2955cbe4fa97e2659e033b3eaaf4d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 15:14:44 2010 +0100

    Add lookup_map

 src/hb-ot-shape.cc | 48 +++++++++++++++++++++++++++++++++---------------
 1 file changed, 33 insertions(+), 15 deletions(-)

commit 60010a0c4d8efae5c61a0c9cf10cfe2c1860f41e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 14:05:02 2010 +0100

    Update always-apply mask from 0xFFFF to 1

    We plan to use the first bit to be always on.

 src/hb-ot-shape.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 009aad567863c05ee2ec4a3ee76fe0ee79c767bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 14:00:57 2010 +0100

    Invert the mask logic

    Before, the mask in the buffer was inverted.  That is, a 0 bit meant
    feature should be applied and 1 meant not applied, whereas in the
    lookups, the logic was positive.

    Now both are in sync.  When calling hb_buffer_add_glyph() manually,
    the mask should be 1 instead of 0.

 src/hb-buffer.cc		  | 2 +-
 src/hb-ot-layout-gpos-private.hh | 2 +-
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 3 files changed, 4 insertions(+), 4 deletions(-)

commit 7f411dbfd9f8d5360c948531ff9f6c3998d1d897
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 13:40:18 2010 +0100

    Apply user features

    No ranges yet

 src/hb-ot-shape.cc | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 0db299ccad346d9ea5573ea8408b78d9997bd379
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 20 13:30:09 2010 +0100

    Change hb_feature_t to keep tag/int instead of string

 src/hb-shape.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0a4399ca228d244e646abdb3487da0f13b228889
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 19 15:45:06 2010 -0400

    Fix scale issues

    hb_font_set_scale() now sets the value to be used to represent a unit
    pixel.  For example, if rendering a 10px font with a 26.6
    representation,
    you would set scale to (10 << 6).  For 10px in 16.16 you would set
    it to
    (10 << 16).  This space should be the same space that the
    get_glyph_metrics
    and get_kerning callbacks work in.

 src/hb-common.h		  |  1 -
 src/hb-font-private.hh		  |  8 +++-----
 src/hb-font.cc			  | 12 ++++++------
 src/hb-font.h			  | 12 +++---------
 src/hb-ft.cc			  |  4 ++--
 src/hb-ot-layout-gdef-private.hh |  6 +++---
 src/hb-ot-layout-gpos-private.hh | 37
 +++++++++++++++++--------------------
 src/hb-ot-layout-gsub-private.hh |  2 +-
 src/hb-ot-layout-private.hh	  | 20 +++++++++++---------
 src/hb-ot-layout.cc		  | 31 +++++++++++++++----------------
 src/hb-private.h		  |  4 ----
 11 files changed, 61 insertions(+), 76 deletions(-)

commit cf5585cfa6cac6fdf627a99941299e76af5ae0f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 19 12:03:35 2010 -0400

    Add 'head' table

 src/Makefile.am	     |	 1 +
 src/hb-font-private.hh      |	 5 ++
 src/hb-font.cc		     |	 9 ++++
 src/hb-open-type-private.hh |	 2 +-
 src/hb-ot-head-private.hh   | 128
 ++++++++++++++++++++++++++++++++++++++++++++
 5 files changed, 144 insertions(+), 1 deletion(-)

commit e29caf3f943b2b6f4997f469f7274252c82f465e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 19 11:47:17 2010 -0400

    Add LONGDATETIME

 src/hb-open-type-private.hh | 15 +++++++++++++++
 1 file changed, 15 insertions(+)

commit f415755fdf011d3fa3b9aad04c38f2255dd7acf8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 17 15:14:14 2010 -0400

    Minor

 src/hb-ot-layout.cc | 52
 +++++++++++++++++++++++++++-------------------------
 1 file changed, 27 insertions(+), 25 deletions(-)

commit 73af7756dc6d3961f176854246e5722baff101fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 23:38:08 2010 -0400

    Indent

 src/hb-ot-layout-gsub-private.hh | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 3567b87cce541dfb0af7caf024ec67c9d3c09214
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 23:28:44 2010 -0400

    Add an inline version of hb_buffer_ensure()

 src/hb-buffer.cc | 117
 ++++++++++++++++++++++++++++++-------------------------
 1 file changed, 63 insertions(+), 54 deletions(-)

commit a6a79df5fe2ed2cd307e7a991346faee164e70d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 23:20:16 2010 -0400

    Handle malloc failture in the buffer

 src/hb-buffer-private.hh |  5 ++--
 src/hb-buffer.cc	  | 71
 +++++++++++++++++++++++++++++-------------------
 src/hb-buffer.h	  |  2 +-
 3 files changed, 47 insertions(+), 31 deletions(-)

commit ca54a12658510f9aa0b2db82f20a8fac230d6bb6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:25:42 2010 -0400

    Minor

 src/hb-shape.cc | 60
 +++++++++++++++++++++++++--------------------------------
 1 file changed, 26 insertions(+), 34 deletions(-)

commit 910a33fe8457a8e13f7eb77fc92fa59c31f5e8fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:13:38 2010 -0400

    Update buffer docs

 src/hb-buffer-private.hh | 13 +++++++------
 src/hb-buffer.cc	  | 16 ++++++++--------
 2 files changed, 15 insertions(+), 14 deletions(-)

commit 36b73c80df91e96492357c6da945e081e9046a93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:10:39 2010 -0400

    Shortening buffer accessors: rename buffer->in_pos to buffer->i

 src/hb-buffer-private.hh	      |  2 +-
 src/hb-buffer.cc		      | 52 ++++++++++----------
 src/hb-ot-layout-gpos-private.hh     | 94
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 48 +++++++++---------
 src/hb-ot-layout-gsubgpos-private.hh | 46 +++++++++---------
 src/hb-shape.cc		      | 40 +++++++--------
 6 files changed, 141 insertions(+), 141 deletions(-)

commit 29427c5c51ac70aca53ed523fa5ddb3de4355fb0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:08:22 2010 -0400

    Shortening buffer accessors: rename buffer->out_length to
    buffer->out_len

 src/hb-buffer-private.hh	      |  2 +-
 src/hb-buffer.cc		      | 52
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  6 ++---
 4 files changed, 31 insertions(+), 31 deletions(-)

commit 6960350be97f24e97140391025b56369c393a3df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:07:46 2010 -0400

    Shortening buffer accessors: rename buffer->in_length to buffer->len

 src/hb-buffer-private.hh	      |  2 +-
 src/hb-buffer.cc		      | 26 +++++++++++++-------------
 src/hb-ot-layout-gpos-private.hh     |  8 ++++----
 src/hb-ot-layout-gsub-private.hh     |  8 ++++----
 src/hb-ot-layout-gsubgpos-private.hh |  8 ++++----
 src/hb-shape.cc		      | 12 ++++++------
 6 files changed, 32 insertions(+), 32 deletions(-)

commit 1b621823f3e31b48c80cc8b0691dfa873ba086cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:05:53 2010 -0400

    Shortening buffer accessors: rename buffer->positions to buffer->pos

 src/hb-buffer-private.hh	  |  4 ++--
 src/hb-buffer.cc		  | 32 ++++++++++++++++----------------
 src/hb-ot-layout-gpos-private.hh | 26 +++++++++++++-------------
 src/hb-shape.cc		  | 10 +++++-----
 4 files changed, 36 insertions(+), 36 deletions(-)

commit 9d5e26df0877aa5b187764ba09bd7bf221e92968
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:03:11 2010 -0400

    Shortening buffer accessors: rename buffer->out_string to
    buffer->out_info

 src/hb-buffer-private.hh	      |  2 +-
 src/hb-buffer.cc		      | 56
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsubgpos-private.hh |  4 +--
 3 files changed, 31 insertions(+), 31 deletions(-)

commit 7e7007a1c9bf2c07a8369752126ece8fa6164248
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 22:02:37 2010 -0400

    Shortening buffer accessors: rename buffer->in_string to buffer->info

 src/hb-buffer-private.hh	      |  2 +-
 src/hb-buffer.cc		      | 82
 ++++++++++++++++++------------------
 src/hb-ot-layout-gpos-private.hh     | 58 ++++++++++++-------------
 src/hb-ot-layout-gsub-private.hh     | 30 ++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 26 ++++++------
 src/hb-shape.cc		      | 18 ++++----
 6 files changed, 108 insertions(+), 108 deletions(-)

commit 8e6b6bb2932946ebc7b01c3abf575b654c741e20
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:58:22 2010 -0400

    Merge buffer->out_pos and buffer->out_length

 src/hb-buffer-private.hh	      |  1 -
 src/hb-buffer.cc		      | 48
 +++++++++++++++---------------------
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  6 ++---
 4 files changed, 24 insertions(+), 33 deletions(-)

commit 22f668eb9ad5f62d9fcd2e0c826ea78977687e5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:41:04 2010 -0400

    Remove the unused BUFFER macro

 src/hb-buffer-private.hh	      | 6 ------
 src/hb-ot-layout-gpos-private.hh     | 6 ------
 src/hb-ot-layout-gsub-private.hh     | 6 ------
 src/hb-ot-layout-gsubgpos-private.hh | 5 -----
 4 files changed, 23 deletions(-)

commit 7e53ebe478597778c25c197ff9f0cb379f1d0043
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:38:13 2010 -0400

    Remove the IN_CURGLYPH() macro

 src/hb-buffer-private.hh	      |  3 ---
 src/hb-ot-layout-gpos-private.hh     | 24 ++++++++++++------------
 src/hb-ot-layout-gsub-private.hh     | 16 ++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++--------
 src/hb-shape.cc		      | 14 +++++++-------
 5 files changed, 35 insertions(+), 38 deletions(-)

commit d784da1923ff2ca093f8b0210449731d376b7513
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:37:18 2010 -0400

    Remove the IN_CURINFO() macro

 src/hb-buffer-private.hh	      | 1 -
 src/hb-ot-layout-gpos-private.hh     | 2 +-
 src/hb-ot-layout-gsub-private.hh     | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 4 files changed, 4 insertions(+), 5 deletions(-)

commit 281f59b4fb16f7c73767eb042a91f70f4c109b3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:34:22 2010 -0400

    Remove IN_INFO() and IN_NEXTGLYPH() macros

 src/hb-buffer-private.hh	      |  2 --
 src/hb-ot-layout-gpos-private.hh     | 10 +++++-----
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++--
 src/hb-shape.cc		      |  4 ++--
 5 files changed, 10 insertions(+), 12 deletions(-)

commit 6e489cdf7623ac627d06d59a80ecea03ca97dc1b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:07:35 2010 -0400

    Remove the IN_GLYPH() macro

 src/hb-buffer-private.hh	      |  1 -
 src/hb-ot-layout-gpos-private.hh     | 12 ++++++------
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++--
 src/hb-shape.cc		      |  2 +-
 5 files changed, 10 insertions(+), 11 deletions(-)

commit 01feb74c78a3a302fa3472a0be7b2a1d52fd1ba3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 21:00:08 2010 -0400

    Remove the IN_CLUSTER() macro

 src/hb-buffer-private.hh | 1 -
 src/hb-shape.cc	  | 2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)

commit d63a1e089acad9ab9f80addd936d36b6d38fb46a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 20:30:07 2010 -0400

    Remove the IN_MASK() macro

 src/hb-buffer-private.hh	  | 1 -
 src/hb-ot-layout-gpos-private.hh | 2 +-
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 3 files changed, 3 insertions(+), 4 deletions(-)

commit 89e2834dabd2d17f2823c51fe3a7fcadeaba7a59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 20:25:55 2010 -0400

    Remove the IN_LIGID() macro

 src/hb-buffer-private.hh	  | 1 -
 src/hb-ot-layout-gpos-private.hh | 4 ++--
 src/hb-ot-layout-gsub-private.hh | 2 +-
 3 files changed, 3 insertions(+), 4 deletions(-)

commit 4a871041f4718834afa312ed17cdd157603468b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 20:25:04 2010 -0400

    Remove IN_COMPONENT() macro

 src/hb-buffer-private.hh	  | 1 -
 src/hb-ot-layout-gpos-private.hh | 8 ++++----
 src/hb-ot-layout-gsub-private.hh | 2 +-
 3 files changed, 5 insertions(+), 6 deletions(-)

commit 27da6dd89a359f7ef340c646c4cb79373782261d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 20:17:50 2010 -0400

    Remove OUT_GLYPH() and OUT_INFO() macros

 src/hb-buffer-private.hh	      | 2 --
 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 2 files changed, 2 insertions(+), 4 deletions(-)

commit cc6ae7ff91eeb93bef153f331ed02b500062f90e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 20:09:48 2010 -0400

    Fix lookahead matching.  Oops!

 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3109375b849f340b4807724218010c53dea58082
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 14 19:55:27 2010 -0400

    Remove POSITION() and CURPOSITION() macros

 src/hb-buffer-private.hh	  |  2 --
 src/hb-ot-layout-gpos-private.hh | 54
 ++++++++++++++++++++--------------------
 src/hb-shape.cc		  | 10 ++++----
 3 files changed, 32 insertions(+), 34 deletions(-)

commit d7cfb3b2d1dd2e9fdae2b3e540bbe313660895e8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 13 14:18:49 2010 -0400

    s/\<context\>/c/g

 src/hb-open-file-private.hh	      |  28 +--
 src/hb-open-type-private.hh	      | 100 ++++----
 src/hb-ot-layout-common-private.hh   |  84 +++----
 src/hb-ot-layout-gdef-private.hh     |  98 ++++----
 src/hb-ot-layout-gpos-private.hh     | 460
 +++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 306 +++++++++++------------
 src/hb-ot-layout-gsubgpos-private.hh | 258 ++++++++++----------
 src/hb-ot-layout.cc		      |  24 +-
 8 files changed, 679 insertions(+), 679 deletions(-)

commit f679635893eebc13402c5ee51a6f106eed0c76be
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 13 13:34:17 2010 -0400

    Don't use variable-length-arrays

 src/hb-open-type-private.hh | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit 72071a8afaba2952fe42be093024ae9dbd37f233
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 13 13:22:24 2010 -0400

    Add a few more buffer convenience methods

 src/hb-buffer-private.hh	  | 12 ++++++++++++
 src/hb-ot-layout-gsub-private.hh | 20 ++++++++++----------
 2 files changed, 22 insertions(+), 10 deletions(-)

commit 11a81612e51c598e857507c268312206423cbfca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 13 00:01:40 2010 -0400

    Minor

 src/hb-unicode.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3f93518a634cb1852bf050877db23b9b9203ad03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:48:40 2010 -0400

    Improve check for internal symbols

 src/check-internal-symbols.sh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 357d0f29c431b842179ee4b56c21bcc402178ce7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:46:16 2010 -0400

    Make HB_PRIVATE more useful

    So we can apply it to class methods also.  Not sure if that works!

 src/hb-blob-private.h	  | 2 +-
 src/hb-font-private.hh   | 4 ++--
 src/hb-private.h	  | 2 +-
 src/hb-unicode-private.h | 3 +--
 4 files changed, 5 insertions(+), 6 deletions(-)

commit 1d5e78013696b10751d8a35027619e81978e1312
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:43:00 2010 -0400

    Add a few other buffer methods

 src/hb-buffer-private.hh	      | 11 +++++++----
 src/hb-buffer.cc		      |  7 -------
 src/hb-ot-layout-gsub-private.hh     | 10 +++++-----
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++--
 4 files changed, 14 insertions(+), 18 deletions(-)

commit d0316a81f59a4e814b0af78797d915d7ce04d119
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:34:52 2010 -0400

    Add buffer->swap()

 src/hb-buffer-private.hh	  | 68
 ++++++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh |  2 +-
 2 files changed, 38 insertions(+), 32 deletions(-)

commit 3b649a38b5772dd7aba7f07ff7698a7f427f421f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:28:38 2010 -0400

    Add check for internal symbols

 src/Makefile.am	       |  3 ++-
 src/check-internal-symbols.sh | 28 ++++++++++++++++++++++++++++
 2 files changed, 30 insertions(+), 1 deletion(-)

commit eee8598d75d3af692d9ececf7e8ac458e892ba9e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:22:55 2010 -0400

    Hide internal symbols

 src/hb-ot-layout-private.hh | 4 ++--
 src/hb-private.h	     | 8 ++++----
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 8951fc2c82f2db4865da6d9e303fce419b6363bb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 23:13:39 2010 -0400

    Add buffer->allocate_lig_id()

 src/hb-buffer-private.hh	  | 5 ++---
 src/hb-buffer.cc		  | 6 ------
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 3 files changed, 4 insertions(+), 11 deletions(-)

commit 1ce4dc95dbb28842085342aea4f9d12cbe9671a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 18:29:25 2010 -0400

    Use bit tricks for HB_DIRECTION_IS_*

    We already depend on the exact values of the direction enum
    in HB_DIRECTION_REVERSE(), so we may as well use that.

 src/hb-common.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 22da7fd94d6318c52df69d70470a85464ffc533d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 12 18:23:21 2010 -0400

    Rename a few files to be C++ sources

    In anticipation for buffer revamp coming.

 src/Makefile.am		      |  16 +-
 src/hb-buffer-private.h	      | 155 ---------
 src/hb-buffer-private.hh	      | 155 +++++++++
 src/hb-buffer.c		      | 650
 -----------------------------------
 src/hb-buffer.cc		      | 650
 +++++++++++++++++++++++++++++++++++
 src/hb-common.h		      |   1 +
 src/hb-font-private.h		      |  92 -----
 src/hb-font-private.hh		      |  92 +++++
 src/hb-font.cc			      |   4 +-
 src/hb-ft.c			      | 240 -------------
 src/hb-ft.cc			      | 240 +++++++++++++
 src/hb-ot-layout-common-private.hh   |   2 +-
 src/hb-ot-layout-gdef-private.hh     |   2 +-
 src/hb-ot-layout-gsubgpos-private.hh |   2 +-
 src/hb-ot-layout-private.h	      | 121 -------
 src/hb-ot-layout-private.hh	      | 121 +++++++
 src/hb-ot-layout.cc		      |   2 +-
 src/hb-ot-shape-private.h	      |  53 ---
 src/hb-ot-shape-private.hh	      |  53 +++
 src/hb-ot-shape.c		      | 164 ---------
 src/hb-ot-shape.cc		      | 164 +++++++++
 src/hb-shape.c			      | 258 --------------
 src/hb-shape.cc		      | 258 ++++++++++++++
 23 files changed, 1748 insertions(+), 1747 deletions(-)

commit c3df649f258b334e93c7626a43cd8ebfbd5a610e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 11 13:54:12 2010 -0400

    Fix comment

 src/hb-buffer-private.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 281f08954a1d96d7807153c25073b8eb7630703b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 11 11:37:58 2010 -0400

    Remove obsolete friend

 src/hb-ot-layout-gpos-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit 70c9bfd5646a4a55a7f43c0cf0b5ac5993615d5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 11 00:23:50 2010 -0400

    Simplify PairSet

 src/hb-ot-layout-gpos-private.hh | 101
 +++++++++++++++++++++------------------
 1 file changed, 54 insertions(+), 47 deletions(-)

commit 97e7f8f305c47caf2968a9da3b8407825547286d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 11 00:11:36 2010 -0400

    Add CONST_FUNC annotation

 src/hb-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 494d28ad988e505c1c45cc35a7ec6b880cfec5fc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 23:50:07 2010 -0400

    Simplify likely() implementation

    Shrinks .text by 1%!

 src/hb-private.h | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

commit 75651b20871047d3ec17f4221794b8ef5d60e14b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 23:44:51 2010 -0400

    Fix warnings

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4c20d8c057738b66150a88472714690e137884f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 23:27:54 2010 -0400

    Sprinkle a few strategic likely()'s

    Shrinks the code size by some 2% even.

 src/hb-open-file-private.hh |	4 ++--
 src/hb-open-type-private.hh | 20 ++++++++++----------
 2 files changed, 12 insertions(+), 12 deletions(-)

commit 69cb28bc13d236a01acf40da62e345c7e83ccba7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 23:13:08 2010 -0400

    Remove a few likely()'s

 src/hb-ot-layout-common-private.hh | 2 +-
 src/hb-ot-layout-gpos-private.hh   | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 24552ecf92982fe561dc47d5102fcf1a7b337c70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 23:08:41 2010 -0400

    Remove excess sub_format sanitize

 src/hb-ot-layout-gpos-private.hh | 1 -
 src/hb-ot-layout-gsub-private.hh | 1 -
 2 files changed, 2 deletions(-)

commit f7adc5e9be352ac31ad3ab847abb6fceb239aa12
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 22:41:50 2010 -0400

    Shrink NullPool now that we have accurate size tracking

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3d44fb6f15177dc6518166e435597936b044acc1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 22:22:54 2010 -0400

    Fix warning

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b5db4f1e4eefa266a71a28b5496f47ff9d1a81e8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 22:22:22 2010 -0400

    Clean up NO_INDEX

 src/hb-open-file-private.hh	    |  2 +-
 src/hb-open-type-private.hh	    | 10 ++++++----
 src/hb-ot-layout-common-private.hh | 17 ++++-------------
 src/hb-ot-layout.cc		    |  8 ++++----
 src/main.cc			    |  2 +-
 5 files changed, 16 insertions(+), 23 deletions(-)

commit fe9bc070e1d545b0df2ea548eebf5a1fc4c92ddc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 21:39:24 2010 -0400

    Fix awful confusion between lookup format and subtable format

    As reported by John Daggett.

 src/hb-ot-layout-gpos-private.hh | 14 +++++++-------
 src/hb-ot-layout-gsub-private.hh | 14 +++++++-------
 2 files changed, 14 insertions(+), 14 deletions(-)

commit 458ecbb60bb7e8e32aca62a562586d921d5396aa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 21:11:35 2010 -0400

    Fix tracing order

 src/hb-open-type-private.hh	      | 14 +++++---------
 src/hb-ot-layout-gsubgpos-private.hh |  3 +--
 2 files changed, 6 insertions(+), 11 deletions(-)

commit 48146e5612f6d272d6962f6829c6d64a31edef89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 20:07:56 2010 -0400

    Don't fail sanitize on NULL data

 src/hb-open-type-private.hh | 5 +++++
 1 file changed, 5 insertions(+)

commit d2c2ca8faf62fc380d4717d286556139a62d2356
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 19:58:25 2010 -0400

    Fix comment

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b435ab7e29c388e3b100f729957319931625a3a8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 19:51:57 2010 -0400

    Fix accessing tables from NULL pointer

 src/hb-font.cc		     | 2 +-
 src/hb-open-type-private.hh | 5 +++++
 src/hb-ot-layout.cc	     | 6 +++---
 3 files changed, 9 insertions(+), 4 deletions(-)

commit dacebcadae36b35531d635d81df2afb937677b7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 19:45:41 2010 -0400

    Simplify unions

 src/hb-open-file-private.hh	      |  24 +++----
 src/hb-ot-layout-common-private.hh   |  24 +++----
 src/hb-ot-layout-gdef-private.hh     |  24 +++----
 src/hb-ot-layout-gpos-private.hh     | 120
 +++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     |  88 ++++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh |  44 ++++++-------
 6 files changed, 163 insertions(+), 161 deletions(-)

commit fd671e02433bcbc1fd07901fa2d6065020f41ba8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 19:02:32 2010 -0400

    Remove unused macro

 src/hb-open-type-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit 0eb9fc6e37935707dba2bf4b3705de2161a08cb7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 19:01:17 2010 -0400

    Change DEFINE_SIZE_VAR to DEFINE_SIZE_ARRAY

 src/hb-open-file-private.hh	      |  4 ++--
 src/hb-open-type-private.hh	      | 10 +++++-----
 src/hb-ot-layout-common-private.hh   | 27 +++++++++++++++------------
 src/hb-ot-layout-gdef-private.hh     | 10 +++++-----
 src/hb-ot-layout-gpos-private.hh     | 25 ++++++++++++-------------
 src/hb-ot-layout-gsub-private.hh     | 14 +++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++--------
 7 files changed, 54 insertions(+), 52 deletions(-)

commit 596e471aa5053d955fb5d5b5923088c8814469b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 18:47:48 2010 -0400

    Cleanup DEFINE_SIZE_VAR2

 src/hb-open-type-private.hh	      | 18 +++++++++++-------
 src/hb-ot-layout-common-private.hh   |  6 +++---
 src/hb-ot-layout-gdef-private.hh     |  4 ++--
 src/hb-ot-layout-gpos-private.hh     |  4 ++--
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++--
 6 files changed, 21 insertions(+), 17 deletions(-)

commit 33afa4e2dc352f08cc094703e3f01d3ecd83b354
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 18:35:02 2010 -0400

    Minor

 src/hb-open-type-private.hh | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit b961518b9611471ff7060e97686e5625974847eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 18:20:54 2010 -0400

    Simplify array access

 src/hb-open-type-private.hh	      | 29 ++++++++++-------------------
 src/hb-ot-layout-common-private.hh   |  8 ++++----
 src/hb-ot-layout-gsub-private.hh     |  6 +++---
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++--------
 4 files changed, 25 insertions(+), 34 deletions(-)

commit 54842374c2b291ef208c51ae1d853ec0403ccf84
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 18:13:32 2010 -0400

    Fix check_struct to check min_size instead of sizeof

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ed07422c33bbb52ff4d79e65986171e3f07697d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 18:08:46 2010 -0400

    Further cleanup of sizeof

 src/hb-open-type-private.hh	      |  7 +++++--
 src/hb-ot-layout-common-private.hh   |  4 ++++
 src/hb-ot-layout-gdef-private.hh     |  4 ++++
 src/hb-ot-layout-gpos-private.hh     | 10 +++++++---
 src/hb-ot-layout-gsub-private.hh     |  4 +++-
 src/hb-ot-layout-gsubgpos-private.hh |  2 ++
 6 files changed, 25 insertions(+), 6 deletions(-)

commit a82ef7a893b773a17f7548375de9f588dfc83aba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 17:55:03 2010 -0400

    Remove CastP completely

 src/hb-open-type-private.hh | 39 +++++++++++++++++----------------------
 1 file changed, 17 insertions(+), 22 deletions(-)

commit 40cbefe858192531ed64dd51d402f7ca7b8153a3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 17:47:22 2010 -0400

    Remove unnecessary casts

 src/hb-open-type-private.hh	      | 12 ++++++------
 src/hb-ot-layout-common-private.hh   |  2 +-
 src/hb-ot-layout-gpos-private.hh     | 34
 +++++++++++++++++-----------------
 src/hb-ot-layout-gsub-private.hh     |  4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 34
 +++++++++++++++++-----------------
 5 files changed, 43 insertions(+), 43 deletions(-)

commit 09766b1ec5ec55a61edbcd7a89ed3613cc92d4cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 17:36:03 2010 -0400

    Make StructAtOffset take a pointer

    Is safer.

 src/hb-open-type-private.hh	  | 26 +++++++++++++-------------
 src/hb-ot-layout-gpos-private.hh |  6 +++---
 src/hb-ot-layout-gsub-private.hh |  4 ++--
 3 files changed, 18 insertions(+), 18 deletions(-)

commit bea34c7cbb583cf7660776e95cab3171590b8427
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 17:28:16 2010 -0400

    Further cleanup of DEFINE_SIZE

 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-type-private.hh	      | 10 +++++-----
 src/hb-ot-layout-common-private.hh   | 16 ++++++++--------
 src/hb-ot-layout-gdef-private.hh     |  8 ++++----
 src/hb-ot-layout-gpos-private.hh     | 16 +++++-----------
 src/hb-ot-layout-gsub-private.hh     | 14 +++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 14 +++++++-------
 7 files changed, 37 insertions(+), 43 deletions(-)

commit 0abcc3b48cfd51a22695c9e988938b2f45cb19d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 17:04:20 2010 -0400

    Cleanup

 src/hb-open-type-private.hh | 18 ++++++++++--------
 1 file changed, 10 insertions(+), 8 deletions(-)

commit b3651231bf80bb7009214547a75ed90e21815c68
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 16:57:29 2010 -0400

    Remove ASSERT_SIZE in favor of the safer DEFINE_SIZE_STATIC

 src/hb-open-file-private.hh	      |  3 ++-
 src/hb-open-type-private.hh	      | 20 +++++++++++++---
 src/hb-ot-layout-common-private.hh   | 24 ++++++++++++--------
 src/hb-ot-layout-gdef-private.hh     | 22 +++++++++++-------
 src/hb-ot-layout-gpos-private.hh     | 44
 ++++++++++++++++++++----------------
 src/hb-ot-layout-gsub-private.hh     | 32 ++++++++++++++++----------
 src/hb-ot-layout-gsubgpos-private.hh | 27 ++++++++++++++--------
 src/hb-private.h		      |  2 --
 8 files changed, 109 insertions(+), 65 deletions(-)

commit 569da92bc6956f42d9b2d65c784e184fb6380efe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 10 16:38:32 2010 -0400

    Cleanup ASSERT_SIZE_VAR

 src/hb-open-file-private.hh	      |  9 ++++++---
 src/hb-open-type-private.hh	      |  6 ++++--
 src/hb-ot-layout-common-private.hh   | 22 ++++++++++++----------
 src/hb-ot-layout-gdef-private.hh     |  3 ++-
 src/hb-ot-layout-gpos-private.hh     | 30 +++++++++++++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh | 10 ++++++----
 src/hb-private.h		      |  8 --------
 7 files changed, 49 insertions(+), 39 deletions(-)

commit 99bf03459ff2f00cf3fb7fa3c8b8336ec9fcca56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 19:37:32 2010 -0400

    Whitespace

 src/hb-ot-layout-gpos-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 65f46b00333e20ab8a52a4b350747507541ec1db
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 19:35:19 2010 -0400

    Simplify DEFINE_NULL_DATA

    Using ::min_size.

 src/hb-open-type-private.hh	    | 6 +++---
 src/hb-ot-layout-common-private.hh | 9 +++++----
 2 files changed, 8 insertions(+), 7 deletions(-)

commit e45d3f86f9a5f3d29ca35a282de7f98e702878f9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 19:33:31 2010 -0400

    Start cleaning up get_size()

    So we know when the size is static and when dynamic.

 src/hb-open-file-private.hh	      |  7 +++---
 src/hb-open-type-private.hh	      | 42
 +++++++++++++++++++++++++-----------
 src/hb-ot-layout-common-private.hh   | 14 ++++++------
 src/hb-ot-layout-gpos-private.hh     | 17 ++++++---------
 src/hb-ot-layout-gsubgpos-private.hh | 19 ++++++++--------
 5 files changed, 55 insertions(+), 44 deletions(-)

commit b157617644d1e38f680163889d1dc2e2f64d9ba3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 14:48:27 2010 -0400

    Remove the last of SANITIZE macros: SANITIZE_SELF

 src/hb-open-file-private.hh	      |  4 ++--
 src/hb-open-type-private.hh	      | 21 ++++++++++++---------
 src/hb-ot-layout-common-private.hh   | 16 ++++++++--------
 src/hb-ot-layout-gdef-private.hh     |  6 +++---
 src/hb-ot-layout-gpos-private.hh     | 26 +++++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh |  6 +++---
 6 files changed, 41 insertions(+), 38 deletions(-)

commit 4f252fedc7136c66a9d7fbcb2978581986da6227
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 13:30:23 2010 -0400

    Remove SANITIZE macro

 src/hb-open-file-private.hh	      |  4 ++--
 src/hb-open-type-private.hh	      |  6 ++----
 src/hb-ot-layout-common-private.hh   | 18 +++++++++---------
 src/hb-ot-layout-gdef-private.hh     |  6 +++---
 src/hb-ot-layout-gpos-private.hh     | 18 +++++++++---------
 src/hb-ot-layout-gsub-private.hh     | 26 +++++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh | 22 +++++++++++-----------
 7 files changed, 49 insertions(+), 51 deletions(-)

commit c2ddfd2d268385257c77c09a9abeacf4230d5377
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 13:06:15 2010 -0400

    Cleanup Value casts

 src/hb-ot-layout-gpos-private.hh | 34 +++++++++++++++++++++-------------
 1 file changed, 21 insertions(+), 13 deletions(-)

commit 41a93d2c1ff175ef06328a99983577459c2d34b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 12:55:14 2010 -0400

    Remove SANITIZE_WITH_BASE

 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-type-private.hh	      |  2 -
 src/hb-ot-layout-common-private.hh   |  6 +--
 src/hb-ot-layout-gdef-private.hh     | 24 +++++-----
 src/hb-ot-layout-gpos-private.hh     | 90
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 31 ++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 44 +++++++++---------
 7 files changed, 98 insertions(+), 101 deletions(-)

commit f5fab0c71837371cce32dc3e9edca1ccb8d44e29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 10:26:52 2010 -0400

    Remove SANITIZE_MEM

 src/hb-open-type-private.hh	      | 4 +---
 src/hb-ot-layout-common-private.hh   | 2 +-
 src/hb-ot-layout-gpos-private.hh     | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 6 +++---
 4 files changed, 6 insertions(+), 8 deletions(-)

commit 4ad2cc5dec6b0639da2b1846282bdd99d06d5ff1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 6 09:24:24 2010 -0400

    Rename check to check_range

 src/hb-open-type-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 1cd1e117d060d38e314618b627d7663cb01ed584
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 20:15:14 2010 -0400

    Remove SANITIZE_ARRAY

 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-type-private.hh	      | 16 +++++++---------
 src/hb-ot-layout-gpos-private.hh     |  8 ++++----
 src/hb-ot-layout-gsubgpos-private.hh |  4 ++--
 4 files changed, 14 insertions(+), 16 deletions(-)

commit 583d7f9586ce69754f1354aa3895e6d732a0c2ce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:49:22 2010 -0400

    Cosmetic

 src/hb-open-file-private.hh	      |  3 ++-
 src/hb-open-type-private.hh	      |  6 ++++--
 src/hb-ot-layout-common-private.hh   | 15 ++++++++++-----
 src/hb-ot-layout-gpos-private.hh     |  5 ++---
 src/hb-ot-layout-gsub-private.hh     |  3 ++-
 src/hb-ot-layout-gsubgpos-private.hh |  9 +++++----
 6 files changed, 25 insertions(+), 16 deletions(-)

commit 705e215268aa95c2bc6af8af9b48b72b690ec1f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:40:25 2010 -0400

    Minor

 src/hb-open-type-private.hh	      | 4 ++--
 src/hb-ot-layout-gpos-private.hh     | 2 +-
 src/hb-ot-layout-gsub-private.hh     | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

commit b18eafd0f62f854d15276c78f99843aecd47acad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:39:26 2010 -0400

    Minor

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4169710911450e0f9bc045fe279bfc8ba9e8457c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:37:58 2010 -0400

    Simplify chaining

 src/hb-ot-layout-gsubgpos-private.hh | 61
 +++++++++++++++---------------------
 1 file changed, 25 insertions(+), 36 deletions(-)

commit 1911b9d21b2b7b6b8219ce6c888540e3a60aa9c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:32:04 2010 -0400

    Remove APPLY_ARG_DEF and APPLY_ARG

 src/hb-ot-layout-gpos-private.hh     | 92
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 88
 +++++++++++++++++-----------------
 src/hb-ot-layout-gsubgpos-private.hh | 89
 ++++++++++++++++------------------
 3 files changed, 132 insertions(+), 137 deletions(-)

commit 6c42cddfe53a1c664081862bb9a3e1c38d05a823
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:30:48 2010 -0400

    Port apply to use hb_trace_t

 src/hb-ot-layout-gpos-private.hh     |  9 ++++-----
 src/hb-ot-layout-gsub-private.hh     | 11 +++++------
 src/hb-ot-layout-gsubgpos-private.hh | 13 +++++--------
 3 files changed, 14 insertions(+), 19 deletions(-)

commit 969c9705ae0c64577c3f69f5300fec975f952e1f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:23:44 2010 -0400

    Move context_length into apply_context

 src/hb-ot-layout-gpos-private.hh     |  9 ++---
 src/hb-ot-layout-gsub-private.hh     |  9 ++---
 src/hb-ot-layout-gsubgpos-private.hh | 70
 ++++++++++++++++++++----------------
 3 files changed, 50 insertions(+), 38 deletions(-)

commit 94a23aaeca39c662614037ef887412249bdc8d49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:13:09 2010 -0400

    Move buffer into apply_context

 src/hb-buffer-private.h	      | 30 +++++++++--------
 src/hb-ot-layout-gpos-private.hh     | 64
 ++++++++++++++++++++----------------
 src/hb-ot-layout-gsub-private.hh     | 45 ++++++++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh | 49 ++++++++++++++-------------
 4 files changed, 106 insertions(+), 82 deletions(-)

commit 63493f956dca519df49da0a6badc3cb0a1b92779
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 01:01:05 2010 -0400

    Move layout_context into apply_context

 src/hb-ot-layout-gpos-private.hh     | 105
 ++++++++++++++++++-----------------
 src/hb-ot-layout-gsub-private.hh     |  47 ++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh |  11 ++--
 3 files changed, 82 insertions(+), 81 deletions(-)

commit fff9aa263d1daf7c5117cf383fafa5043d5eb5af
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 00:32:21 2010 -0400

    Minor

 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 27e302dc8e794ff6bf878bc76e17d336d510849e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 00:26:16 2010 -0400

    I keep changing my mind about this

 src/hb-open-type-private.hh | 30 ++++++++++--------------------
 1 file changed, 10 insertions(+), 20 deletions(-)

commit 39840474afd2cda9ff576c08aff9c87095496c27
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 00:23:19 2010 -0400

    Remove SANITIZE_ARG_DEF and SANITIZE_ARG

 src/hb-open-file-private.hh	      |  16 ++---
 src/hb-open-type-private.hh	      |  59 +++++++--------
 src/hb-ot-layout-common-private.hh   |  42 +++++------
 src/hb-ot-layout-gdef-private.hh     |  28 ++++----
 src/hb-ot-layout-gpos-private.hh     | 136
 +++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     |  72 +++++++++----------
 src/hb-ot-layout-gsubgpos-private.hh |  46 ++++++------
 7 files changed, 197 insertions(+), 202 deletions(-)

commit b261e2ad5c5a065599ce1dbc4ba437caa2cee1e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 00:20:16 2010 -0400

    Remove trace from sanitize_shallow()

 src/hb-open-type-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit dfc8cbe85479dde1ffdc6b2e73f4907331d77a19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 5 00:19:46 2010 -0400

    Add hb_trace_t

 src/hb-open-type-private.hh | 33 +++++++++++++++++++--------------
 1 file changed, 19 insertions(+), 14 deletions(-)

commit 20e3dd5d292b65f70d2eae63b8d8713a1c889d47
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 23:21:57 2010 -0400

    Make sanitize_depth variable automatic and not passed through
    function args

 src/hb-open-type-private.hh | 72
 +++++++++++++++++++++++++++------------------
 1 file changed, 43 insertions(+), 29 deletions(-)

commit 4a446ac35136eff23d55f47bdd7b40095ad707ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 22:46:21 2010 -0400

    Use function template for pass-thru argument

 src/hb-open-type-private.hh	  | 26 ++++++--------------------
 src/hb-ot-layout-gpos-private.hh |  6 +++---
 2 files changed, 9 insertions(+), 23 deletions(-)

commit 98daaf183d6dbf2b68959da608cd9876ba55d7aa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 22:42:49 2010 -0400

    Make _hb_sanitize_*() methods of the context object

 src/hb-open-type-private.hh | 190
 +++++++++++++++++++++++---------------------
 1 file changed, 98 insertions(+), 92 deletions(-)

commit bb029af943faa9905e652d58856998687e60c31d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 15:28:52 2010 -0400

    Remove SANITIZE_THIS

 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-type-private.hh	      |  3 +-
 src/hb-ot-layout-common-private.hh   |  4 +--
 src/hb-ot-layout-gdef-private.hh     | 25 ++++++++--------
 src/hb-ot-layout-gpos-private.hh     | 55
 ++++++++++++++++++++----------------
 src/hb-ot-layout-gsub-private.hh     | 29 ++++++++++---------
 src/hb-ot-layout-gsubgpos-private.hh | 42 +++++++++++++--------------
 7 files changed, 85 insertions(+), 75 deletions(-)

commit 2226fc93d1427b8830bfb892fe1b25b488ea36dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 15:12:17 2010 -0400

    Rename SANITIZE_BASE to SANITIZE_WITH_BASE

 src/hb-open-type-private.hh	    | 11 +++++++----
 src/hb-ot-layout-common-private.hh |  3 ++-
 src/hb-ot-layout-gpos-private.hh   | 15 ++++++++-------
 3 files changed, 17 insertions(+), 12 deletions(-)

commit 89da1346ec3a8dec8a368df46d61ca75356e22fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 15:01:45 2010 -0400

    Remove SANITIZE_OBJ

 src/hb-open-type-private.hh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 4d4cce96266b777a01cec03e8766dc8c0b159351
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:57:55 2010 -0400

    Remove SANITIZE_THIS2

 src/hb-open-type-private.hh	      |  2 --
 src/hb-ot-layout-common-private.hh   |  3 ++-
 src/hb-ot-layout-gdef-private.hh     | 10 ++++++----
 src/hb-ot-layout-gpos-private.hh     |  9 ++++++---
 src/hb-ot-layout-gsub-private.hh     | 11 +++++++----
 src/hb-ot-layout-gsubgpos-private.hh | 14 +++++++++-----
 6 files changed, 30 insertions(+), 19 deletions(-)

commit 26bfcb64e473c40e439d6efbe974781dada28eca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:49:45 2010 -0400

    Cosmetic

 src/hb-ot-layout-gdef-private.hh     | 5 ++---
 src/hb-ot-layout-gsubgpos-private.hh | 7 +++----
 2 files changed, 5 insertions(+), 7 deletions(-)

commit be74284673a1944e0f1884e861c3fe8f9855172c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:47:05 2010 -0400

    Remove SANITIZE_THIS3

 src/hb-open-type-private.hh	      |  1 -
 src/hb-ot-layout-gpos-private.hh     | 21 +++++++++++++++------
 src/hb-ot-layout-gsubgpos-private.hh |  8 ++++++--
 3 files changed, 21 insertions(+), 9 deletions(-)

commit fbab9f9bd8ba59e7e5811f33c1dda198f95cf05a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:42:10 2010 -0400

    Remove SANITIZE_BASE2

 src/hb-open-type-private.hh	  | 1 -
 src/hb-ot-layout-gpos-private.hh | 3 ++-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 73c7dbf7f5433c0cdd467ef32402f52867e9798e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:40:55 2010 -0400

    Remove SANITIZE2

 src/hb-open-type-private.hh	  | 1 -
 src/hb-ot-layout-gsub-private.hh | 2 +-
 2 files changed, 1 insertion(+), 2 deletions(-)

commit c9f14687a30866181feb57ee2736a147ec9f25a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:38:08 2010 -0400

    Remove the NEUTER macro, move code to a method

 src/hb-open-type-private.hh | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit 30fa2821c277df99a14089749313dfe2b541e2d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:28:18 2010 -0400

    Make internal method private

 src/hb-open-type-private.hh | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit ce5694c79671bf75990923c1da17bb611e4e7d15
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 4 14:10:18 2010 -0400

    [main] Recognize Apple SFNTs

 src/hb-open-file-private.hh | 4 ++--
 src/main.cc		     | 6 ++++++
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 710500a93ecc2a0c595045602aa367073485ff91
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 3 23:11:16 2010 -0400

    Comment new SFNT tags

 src/hb-open-file-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 64d3fc8d0dada673245cc8c0b1c12cd849b30997
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 3 22:51:19 2010 -0400

    Cosmetic: Rename HB_LIKELY/HB_UNLIKELY to likely/unlikely

 src/hb-buffer.c		      | 14 ++++----
 src/hb-font.cc			      |  6 ++--
 src/hb-ft.c			      | 14 ++++----
 src/hb-language.c		      |  2 +-
 src/hb-object-private.h	      | 10 +++---
 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-type-private.hh	      | 38 ++++++++++-----------
 src/hb-ot-layout-common-private.hh   | 16 ++++-----
 src/hb-ot-layout-gdef-private.hh     |  2 +-
 src/hb-ot-layout-gpos-private.hh     | 64
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 52 ++++++++++++++---------------
 src/hb-ot-layout-gsubgpos-private.hh | 40 +++++++++++-----------
 src/hb-ot-layout.cc		      | 12 +++----
 src/hb-ot-tag.c		      |  2 +-
 src/hb-private.h		      |  8 ++---
 src/hb-shape.c			      | 10 +++---
 src/hb-unicode.c		      |  2 +-
 17 files changed, 147 insertions(+), 147 deletions(-)

commit fa3b3d58443a7c22eca3f86243993ba2d4bd9f4a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 3 22:47:22 2010 -0400

    Mark a couple functions as inline

 src/hb-open-type-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6b84198f9d471defb6f55d44d4f5423df70b2a10
Merge: 631d10b eaf29ed
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 3 22:46:52 2010 -0400

    Merge remote branch 'jrmuizel/master'

commit eaf29edb8fa49390e5f48b78105dfd173aff445b
Author: Jeff Muizelaar <jmuizelaar@mozilla.com>
Date:	Mon May 3 22:27:56 2010 -0400

    HB_UNUSED is unneeded on static inline functions

 src/hb-object-private.h     | 2 +-
 src/hb-open-type-private.hh | 6 +++---
 src/hb-private.h	     | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 4ce578ed369f1526c91deedcf9e72537b3e4328f
Author: Jeff Muizelaar <jmuizelaar@mozilla.com>
Date:	Mon May 3 15:03:53 2010 -0400

    Include the tags from the Apple specification for TrueType fonts

 src/hb-open-file-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 631d10b728d9e1a02c7dddf505d4fae5e244c6e8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 2 21:14:21 2010 -0400

    Remove unused method

 src/hb-open-file-private.hh | 5 -----
 1 file changed, 5 deletions(-)

commit f0abcd69408a3af65207cdf8847575ade4579bd4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 2 18:14:25 2010 -0400

    Whitespace

 src/hb-open-type-private.hh | 9 ++++-----
 1 file changed, 4 insertions(+), 5 deletions(-)

commit a8d960bd26883ee937b04ca2a3c16a3644870356
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 14:31:56 2010 -0400

    [GPOS] Speedup apply_value()

 src/hb-ot-layout-gpos-private.hh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit 2cd1ea4411d0808559a942ff3fa4e637f9c9a9c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 14:15:32 2010 -0400

    [ft] Disallow getting the entire font data with tag=0

 src/hb-ft.c | 3 +++
 1 file changed, 3 insertions(+)

commit 33d13fdda99acaeffa9600737e8870278d053ebe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 13:56:44 2010 -0400

    Rename HB_GNUC_UNUSED -> HB_UNUSED

 src/hb-buffer.c		      |  6 ++---
 src/hb-font.cc			      | 44
 ++++++++++++++++++------------------
 src/hb-ft.c			      | 16 ++++++-------
 src/hb-object-private.h	      |  2 +-
 src/hb-open-type-private.hh	      | 18 +++++++--------
 src/hb-ot-layout-gdef-private.hh     |  4 ++--
 src/hb-ot-layout-gpos-private.hh     |  4 ++--
 src/hb-ot-layout-gsubgpos-private.hh |  6 ++---
 src/hb-ot-layout.cc		      |  4 ++--
 src/hb-ot-shape.c		      |  2 +-
 src/hb-private.h		      | 16 ++++++-------
 src/hb-shape.c			      | 32 +++++++++++++-------------
 src/hb-unicode.c		      |  8 +++----
 13 files changed, 81 insertions(+), 81 deletions(-)

commit 7d3a126334f8e6f6441561c1bb592bd3fa7a2c5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 13:54:01 2010 -0400

    Define HB_FUNC for portability to non-gcc

 src/hb-open-type-private.hh	      | 12 ++++++------
 src/hb-ot-layout-gsubgpos-private.hh |  2 +-
 src/hb-private.h		      |  9 +++++++++
 3 files changed, 16 insertions(+), 7 deletions(-)

commit fa030175ca998b00cc42cbced6e98de323ec01ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 13:48:26 2010 -0400

    [sanitize] Make debug code always available to the compiler

    Such that we don't break debug build all the time.

 src/hb-open-type-private.hh | 71
 ++++++++++++++++++++-------------------------
 1 file changed, 31 insertions(+), 40 deletions(-)

commit fde6f5bd682f5ad0cc5e2ec69fc831b0192bf90b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 04:41:41 2010 -0400

    Convert to uppercase in hb_ot_tag_from_language()

 src/hb-ot-tag.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 6f729b45b04243c42ad7201b67cda9d5e5c363f1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:59:06 2010 -0400

    More contour point use

 src/hb-font.cc			  |  1 +
 src/hb-ot-layout-gdef-private.hh |  8 +++++---
 src/hb-ot-layout-gpos-private.hh | 13 +++++++++----
 3 files changed, 15 insertions(+), 7 deletions(-)

commit 3840b6b50503ba2c9a99f774284e0077baffa8a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:48:27 2010 -0400

    [gdef] Fix delta scale

 src/hb-ot-layout-gdef-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4ac6cc284b2c1eb670c2a3659ec385ed729acac4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:48:11 2010 -0400

    [gdef] Fix rounding

 src/hb-ot-layout-gdef-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b52fbb1bab608bda76efb936f08344afaec600a1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:47:00 2010 -0400

    [gdef] Implement getting contour point

 src/hb-ot-layout-gdef-private.hh | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 4c5fbae011a33b9efef5aedd61c357fc0ded1113
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:39:39 2010 -0400

    Make sure mirroring is done in original direction

    Reported by Jonathan Kew.

 src/hb-shape.c | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit ce23c9234b87513d6460fb89bad178fb8537e161
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:31:03 2010 -0400

    Use BCP47 private-use tags for OpenType tag language string mapping

 src/hb-ot-tag.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit eaf1d9a46c4a320f3b0026c0a610f95a620d566f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 03:11:32 2010 -0400

    Minor

 src/hb-ot-tag.c | 1 +
 1 file changed, 1 insertion(+)

commit 3a4784fe88a0f14147ccdd3633952c9c0f3ae8f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:58:38 2010 -0400

    Fix bug in hb_language_from_string()

    Reported by Jonathan Kew.

 src/hb-language.c | 2 ++
 1 file changed, 2 insertions(+)

commit 602e4f8d5512cdf48c696ad64ad62ff97f6dbdcc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:28:54 2010 -0400

    Use const_cast

 src/hb-open-type-private.hh | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit abff3580a5b229641086e0da097efee11d22ff81
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:27:20 2010 -0400

    Add const

 src/hb-object-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6617eada95928457a25e29f793f1a93c6b3edaec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:25:30 2010 -0400

    Rename apply_context -> context

 src/hb-ot-layout-gpos-private.hh     | 22 +++++++++++-----------
 src/hb-ot-layout-gsub-private.hh     | 26 +++++++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++------
 3 files changed, 30 insertions(+), 30 deletions(-)

commit b4c7fab762935b9c182b3e2ac3415f29fc6a5558
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:24:25 2010 -0400

    Rename

 src/hb-ot-layout-gpos-private.hh     | 98
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 46 ++++++++---------
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++---
 3 files changed, 78 insertions(+), 78 deletions(-)

commit 1376fb7bf9ef07970f0ba13dc64d6a8ab8252762
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 02:19:21 2010 -0400

    [apply] Use a context object to reduce number of parameters passed
    around

 src/hb-open-type-private.hh	      |  5 ++---
 src/hb-ot-layout-gpos-private.hh     | 26 ++++++++++++++-----------
 src/hb-ot-layout-gsub-private.hh     | 37
 +++++++++++++++++++-----------------
 src/hb-ot-layout-gsubgpos-private.hh | 29 +++++++++++++++-------------
 4 files changed, 53 insertions(+), 44 deletions(-)

commit 173fde7087c0db3e99409f1119530477c14072f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 01:47:30 2010 -0400

    Further simplify tracing

 src/hb-open-type-private.hh	      | 31 +++++++++++++++----------------
 src/hb-ot-layout-gpos-private.hh     |  9 +++++----
 src/hb-ot-layout-gsub-private.hh     | 11 ++++++-----
 src/hb-ot-layout-gsubgpos-private.hh |  8 --------
 4 files changed, 26 insertions(+), 33 deletions(-)

commit bc200457430c083914a64bf4b056153506749610
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 29 01:40:26 2010 -0400

    Simplify trace code

 src/hb-open-type-private.hh	      | 41 +++++++++---------------------
 src/hb-ot-layout-gsubgpos-private.hh | 25 +++++--------------
 src/hb-private.h		      | 48
 +++++++++++++++++++++++++-----------
 3 files changed, 51 insertions(+), 63 deletions(-)

commit 807c5b03a2251a3c29a520852639421783101b55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 20:25:22 2010 -0400

    [sanitize] Make debug code always available to the compiler

    Such that we don't break debug build all the time.

 src/hb-open-type-private.hh	      | 31 ++++++++++++++++++++-----------
 src/hb-ot-layout-gsubgpos-private.hh |  2 +-
 2 files changed, 21 insertions(+), 12 deletions(-)

commit 74e313c016704e1d9157c2763691c4151f049dfc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 15:15:09 2010 -0400

    [gsubgpos] Make debug code always available to the compiler

    Such that we don't break debug build all the time.

 src/hb-ot-layout-gsubgpos-private.hh | 52
 ++++++++++++++++++------------------
 1 file changed, 26 insertions(+), 26 deletions(-)

commit 41011a6ed7c4891b20c0eddbb6d4ad9c820cfddb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:33:09 2010 -0400

    Fix compiler warning about value unused

 src/hb-object-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 863df68e894b7644dcd12da88aa22f73edf829dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:29:55 2010 -0400

    [object] Make debug code always available to the compiler

    Such that we don't break debug build all the time.

 src/hb-object-private.h | 42 +++++++++++++++++++++++++++---------------
 1 file changed, 27 insertions(+), 15 deletions(-)

commit 1d52151a19ed8ec776276aac5cc6ce3769e0d947
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:18:41 2010 -0400

    Minor

 src/hb-private.h | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 444fffb1ab378cb3022e2a8e9f90d20a00c82f6a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:16:38 2010 -0400

    [blob] Make debug code always available to the compiler

    Such that we don't break debug build all the time.

 src/hb-blob.c | 78
 ++++++++++++++++++++++++-----------------------------------
 1 file changed, 32 insertions(+), 46 deletions(-)

commit ba51b25c7ba568aeced17f016eceba987569c5d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:10:36 2010 -0400

    Fix build.	Ouch!

 src/hb-object-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit a92f0fda7fee9d60b399b8865541bf73e6e30141
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 28 13:09:40 2010 -0400

    Fix debug build

 src/hb-open-type-private.hh	      | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

commit c165f25410f817d248ad5d07e1827d33efd1b0a0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 27 23:28:10 2010 -0400

    [object] Actually handle malloc() failure

    Caught by John Daggett.

 src/hb-object-private.h | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit caff7db93d205e32a535d49e51a3cad70f91dfdd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 26 10:07:35 2010 -0400

    Fix Device::get_size() calculation

 src/hb-ot-layout-common-private.hh | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 66d6eb30eb0b8d61e00f86ea0c7829abaddb52fa
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Apr 25 23:01:45 2010 -0400

    Rename Var to Obj

 src/hb-open-type-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 690b9194619589c32ffc0c092e45262ae7776e79
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Apr 25 22:51:05 2010 -0400

    Remove use of flexible arrays

    Also remove wrong ASSERT_SIZE that would trigger only when not using
    flexible arrays (which was the case on win32, but not with gcc).

 configure.ac		     | 2 --
 src/hb-open-file-private.hh | 1 -
 src/hb-private.h	     | 4 ----
 3 files changed, 7 deletions(-)

commit 1cebfbb0636b13dc5dc6a4b8b7acbb7da28129d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 20:49:18 2010 -0400

    Cleanup hb_face_create_for_data()

 src/Makefile.am       |  1 +
 src/hb-blob-private.h | 57 +++++++++++++++++++++++++++++++
 src/hb-blob.c	       | 20 ++---------
 src/hb-font-private.h |  3 --
 src/hb-font.cc        | 92
 +++++++++++++++++++++++++++++++++++----------------
 5 files changed, 123 insertions(+), 50 deletions(-)

commit d6b3c83a90f60bedb4049750ffb351161710980d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 19:59:53 2010 -0400

    Allow get_table() to return NULL

 src/hb-font.cc | 6 +++++-
 src/hb-ft.c	| 2 +-
 2 files changed, 6 insertions(+), 2 deletions(-)

commit ad3653751b1e4a03f7058200cb83f64db46722d5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 19:43:40 2010 -0400

    Typo

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 990443e5f282ad61de00dcf1ebff9cf1d5bc2d70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 17:53:32 2010 -0400

    Remove lock_instance()

 src/hb-font.cc		     | 2 +-
 src/hb-open-type-private.hh | 4 ----
 src/hb-ot-layout.cc	     | 6 +++---
 3 files changed, 4 insertions(+), 8 deletions(-)

commit 187454c595559ce48d072fee6bccb51f3de283d4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 16:35:01 2010 -0400

    Add different casts from pointer and ref to avoid bugs

 src/hb-open-type-private.hh	  | 22 +++++++++++++++-------
 src/hb-ot-layout-gpos-private.hh |  8 ++++----
 src/hb-ot-layout-gsub-private.hh | 12 ++++++------
 src/main.cc			  |  6 +++---
 4 files changed, 28 insertions(+), 20 deletions(-)

commit efb324a46ff64adb4ec8612b4089e8daff1e6d8e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 16:22:54 2010 -0400

    Remove GET_FOR_DATA macros

    The major-version check is now handled by sanitize.  If major
    doesn't match, we reject and fall back to the Null object.

 src/hb-open-file-private.hh	      |  4 ----
 src/hb-open-type-private.hh	      | 23 ++---------------------
 src/hb-ot-layout-gdef-private.hh     |  2 --
 src/hb-ot-layout-gpos-private.hh     |  3 ---
 src/hb-ot-layout-gsub-private.hh     |  3 ---
 src/hb-ot-layout-gsubgpos-private.hh |  2 --
 src/main.cc			      |  6 +++---
 7 files changed, 5 insertions(+), 38 deletions(-)

commit f1aaa2a43654c28405ffd393de2cb127437c99a5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 15:19:50 2010 -0400

    Add TODO

 src/hb-ft.c			    |  2 --
 src/hb-ft.h			    |  1 +
 src/hb-open-file-private.hh	    |  2 +-
 src/hb-open-type-private.hh	    |  2 ++
 src/hb-ot-layout-common-private.hh | 12 ++++++------
 5 files changed, 10 insertions(+), 9 deletions(-)

commit 33d4d4325e15e332105ea8f361bab79ee542f0f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 14:56:55 2010 -0400

    Zero glyph metrics before calling user callback

 src/hb-font.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 4206e9511a222c0c50cc9b4fe72ec421983bba2c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 14:44:55 2010 -0400

    More warning fixes

 src/hb-ot-layout.cc |	4 ++--
 src/hb-ot-shape.c   |	9 ++++-----
 src/hb-shape.c      | 32 ++++++++++++++++----------------
 3 files changed, 22 insertions(+), 23 deletions(-)

commit ef66ebeabc6c234004bd9e9bb67eb5c9711f4a1e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 14:40:36 2010 -0400

    Remove unused parameter

 src/hb-open-file-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 1d720192b193f48b44be0385eda3c2c5d5cd28ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 14:39:10 2010 -0400

    Fix compile warnings (HB_GNUC_UNUSED)

 src/hb-buffer.c	     |	6 +++---
 src/hb-font.cc		     | 31 ++++++++++++++++++++++---------
 src/hb-ft.c		     | 29 +++++++++++++++++++++--------
 src/hb-open-type-private.hh |	2 +-
 src/hb-unicode.c	     |	8 ++++----
 5 files changed, 51 insertions(+), 25 deletions(-)

commit 8dfdca599c0a3ba5255131002910bca3b381acac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 14:07:34 2010 -0400

    No need to keep blob in sanitize context

 src/hb-open-type-private.hh | 13 +++++--------
 1 file changed, 5 insertions(+), 8 deletions(-)

commit 254933c397f1ce9796f59689a25f9fc2e58df4ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 13:57:10 2010 -0400

    When sanitizing, delay making writable

    Before, as soon as we needed to make an edit, we tried to make
    the blob
    writable inplace.  That grows code unnecessarily though.  We can
    simply
    fail, make writable, then start again.  That's indeed what the
    fallback
    was doing anyway.

 src/hb-open-type-private.hh | 11 +++++++----
 1 file changed, 7 insertions(+), 4 deletions(-)

commit 71e735e915c85536ee4d3035576f7426e8cd19dd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 13:48:06 2010 -0400

    [blob] Fallback to copying if mprotect() fails

 src/hb-blob.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 1aa4666b914da7747fc58a8f6f2d913c94e3b8da
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 13:32:03 2010 -0400

    Cleanup OpenTypeFontFile

 src/hb-open-file-private.hh | 44
 ++++++++++++++++++++++++++------------------
 src/main.cc		     |	2 +-
 2 files changed, 27 insertions(+), 19 deletions(-)

commit ae4190cafe927649f8ff8be6a0082478d1298fda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 23 12:33:02 2010 -0400

    Properly define separate structs for TTCHeader and TTCHeaderVersion1

 src/hb-open-file-private.hh | 71
 +++++++++++++++++++++++++++++++++++----------
 1 file changed, 55 insertions(+), 16 deletions(-)

commit a065f471b3bc23d33ef75217308efeaed4ffd033
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 20:15:11 2010 -0400

    Cleanup Extension lookups

    Two things:

    1. Allow nested Extension lookups.	The offset is always positive, so
    it can't loop circularly.

    2. Move the check for all Extension subtables having the same lookup
    type to the correct place.	Before it wasn't really working.

 src/hb-ot-layout-gpos-private.hh | 29 +-------------------
 src/hb-ot-layout-gsub-private.hh | 57
 ++++++++++++++++++++++------------------
 2 files changed, 33 insertions(+), 53 deletions(-)

commit a0bb49c5830f8a7f25d573ec57b79df2620ddba7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 18:47:03 2010 -0400

    Add comment re bsearch effect on sanitize

 src/hb-open-file-private.hh	    | 2 +-
 src/hb-ot-layout-common-private.hh | 8 ++++----
 2 files changed, 5 insertions(+), 5 deletions(-)

commit d632ec4000b3079150e6424e88a3ab7509f7445c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 18:33:12 2010 -0400

    Cosmetic

 src/hb-open-type-private.hh	      | 6 +++---
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit a3263aa773ad7a914496792466c69047048b093c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 18:29:09 2010 -0400

    Convert the last set of cast macros to templates

 src/hb-open-file-private.hh	      |  4 +--
 src/hb-open-type-private.hh	      | 53
 +++++++++++++++++++++++-------------
 src/hb-ot-layout-gpos-private.hh     | 16 +++++------
 src/hb-ot-layout-gsub-private.hh     | 14 +++++-----
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++----
 5 files changed, 57 insertions(+), 42 deletions(-)

commit c38188a1912f72d9ef90ae1bcbdbba7ecce63371
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 16:52:09 2010 -0400

    Remove unused macro

 src/hb-open-type-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit 3b2c2df41b90f2a1d9e33b3dc15a92cff58a689a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 16:51:42 2010 -0400

    Cleanup Extension sanitize()

 src/hb-ot-layout-common-private.hh   | 20 +++-----------------
 src/hb-ot-layout-gpos-private.hh     | 20 +++++++++++++-------
 src/hb-ot-layout-gsub-private.hh     | 20 +++++++++++++-------
 src/hb-ot-layout-gsubgpos-private.hh | 13 ++++---------
 4 files changed, 33 insertions(+), 40 deletions(-)

commit 1856184b93760a1a54fb1a3c54281bb252df7ce6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 14:15:11 2010 -0400

    Fail sanitize on major version mismatch

    We handle major-version differences via get_for_data(), so sanitize
    should never see a major version mismatch.

 src/hb-open-file-private.hh	      | 4 ++--
 src/hb-ot-layout-gdef-private.hh     | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 3 files changed, 4 insertions(+), 4 deletions(-)

commit df3f505dcfeefc8cd395900b116767d22549f756
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 14:11:33 2010 -0400

    More sanitize cleanup

 src/hb-open-file-private.hh | 24 ++----------------------
 src/main.cc		     |	4 ++--
 2 files changed, 4 insertions(+), 24 deletions(-)

commit 278a91f0cd802ac817c2603429bae1fa4a350ea0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:59:39 2010 -0400

    Minor cleanup of sanitize

    Done with an audit of all sanitize()

 src/hb-ot-layout-gpos-private.hh | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit 9ac7dc73bc24b6dafb94df5de9cbf8fa0c82d5bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:50:22 2010 -0400

    Check for (impossible) overflow

 src/hb-ot-layout-gpos-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 9fc8684fd85ef6ec82b3b54323761bbdd4c3d891
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:37:58 2010 -0400

    Cleanup ContextFormat3 sanitize

 src/hb-ot-layout-gsubgpos-private.hh | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit e77302c61f1f1620d1f438a997575fa6ee5c172e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:34:00 2010 -0400

    Add comment

 src/hb-ot-layout-common-private.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 7c469c3ca4ed4e45c50eff70df59b1a4780bae5b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:26:21 2010 -0400

    Minor

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit dc228048a813e43356373505168d3822deea5d72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 13:22:41 2010 -0400

    Remove integrity check in Tag sanitize

    Serves no useful purpose.

 src/hb-open-type-private.hh	    | 9 ---------
 src/hb-ot-layout-common-private.hh | 2 +-
 2 files changed, 1 insertion(+), 10 deletions(-)

commit 8015a8c762dc7be36998d529b7a3af59e3d14d87
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 11:06:30 2010 -0400

    Don't sanitize raw table data

    That part is performed by individual table sanitize.

 src/hb-open-file-private.hh | 15 +++++++++------
 1 file changed, 9 insertions(+), 6 deletions(-)

commit c293581e962b7982622e7d607fa3909b40da718e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 11:15:46 2010 -0400

    Add coment

 src/hb-open-type-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 1faa76c6e848c6b0e360d9ddcf567533b87f8f31
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 10:54:26 2010 -0400

    Remove unnecessary casts

 src/hb-open-type-private.hh | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 079dc40112d3908ff7b7028ea3019bfe82bf606d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 10:47:12 2010 -0400

    Avoid overflow in TableDirectory sanitize

 src/hb-open-file-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit fb5904ec935d925a423401bc975ffaa22022ce1b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 10:43:30 2010 -0400

    Make casts more explicit

 src/hb-ot-layout-gpos-private.hh | 4 ++--
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 565c80bd2960366ace2d10dd71beaaf2a80213c8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 10:26:35 2010 -0400

    Make sure semicolon is expected after DEFINE_NULL_DATA()

 src/hb-open-type-private.hh | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit bb1e16335e537231246f44740f73cc23c0707364
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 01:01:35 2010 -0400

    Improve Subst/Pos SubTable access and sanitize

 src/hb-ot-layout-gpos-private.hh | 4 ++--
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 81f2af40f9afd5bb9695018e6baddcd4aa3361c1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:58:49 2010 -0400

    Simplify Extension offset now that our int types have no alignment

 src/hb-ot-layout-gsubgpos-private.hh | 9 +++------
 1 file changed, 3 insertions(+), 6 deletions(-)

commit 19828ad42d8117563412aae3c70887aa117805a9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:49:16 2010 -0400

    Sanitize shallow in Lookup since the generic SubLookup has no methods

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e5546a4352c54311ac4a9ef138b187378155ebe1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:45:42 2010 -0400

    Watch for overflow in Array sanitize

 src/hb-open-type-private.hh	    | 21 +++++++++++++++------
 src/hb-ot-layout-common-private.hh |  2 +-
 2 files changed, 16 insertions(+), 7 deletions(-)

commit 4f5f1c34dda1e0629bfa6d7b0ffa2e1ce003b7c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:27:39 2010 -0400

    Rename const_sub_array to sub_array since all consts are implicit now

 src/hb-open-type-private.hh	    | 2 +-
 src/hb-ot-layout-common-private.hh | 4 ++--
 src/hb-ot-layout-gdef-private.hh   | 4 ++--
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 0795b784dd1009976c185482a376df250167e73b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:23:14 2010 -0400

    Cosmetic

 src/hb-ot-layout-common-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 2d98d3bbaa0ddadcb08b5a8f437b18c211c50768
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:19:30 2010 -0400

    Simplify Lookup sanitize

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c755cb3e3ac55156d0d2ec05adea7a650b97cc41
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 22 00:11:43 2010 -0400

    Change header comment

 README				      | 2 +-
 src/hb-blob.c			      | 2 +-
 src/hb-blob.h			      | 2 +-
 src/hb-buffer-private.h	      | 2 +-
 src/hb-buffer.c		      | 2 +-
 src/hb-buffer.h		      | 2 +-
 src/hb-common.h		      | 2 +-
 src/hb-font-private.h		      | 2 +-
 src/hb-font.cc			      | 2 +-
 src/hb-font.h			      | 2 +-
 src/hb-ft.c			      | 2 +-
 src/hb-ft.h			      | 2 +-
 src/hb-glib.c			      | 2 +-
 src/hb-glib.h			      | 2 +-
 src/hb-icu.c			      | 2 +-
 src/hb-icu.h			      | 2 +-
 src/hb-language.c		      | 2 +-
 src/hb-language.h		      | 2 +-
 src/hb-object-private.h	      | 2 +-
 src/hb-open-file-private.hh	      | 2 +-
 src/hb-open-type-private.hh	      | 2 +-
 src/hb-ot-layout-common-private.hh   | 2 +-
 src/hb-ot-layout-gdef-private.hh     | 2 +-
 src/hb-ot-layout-gpos-private.hh     | 2 +-
 src/hb-ot-layout-gsub-private.hh     | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 src/hb-ot-layout-private.h	      | 2 +-
 src/hb-ot-layout.cc		      | 2 +-
 src/hb-ot-layout.h		      | 2 +-
 src/hb-ot-shape-private.h	      | 2 +-
 src/hb-ot-shape.c		      | 2 +-
 src/hb-ot-tag.c		      | 2 +-
 src/hb-ot-tag.h		      | 2 +-
 src/hb-ot.h			      | 2 +-
 src/hb-private.h		      | 2 +-
 src/hb-shape.c			      | 2 +-
 src/hb-shape.h			      | 2 +-
 src/hb-unicode-private.h	      | 2 +-
 src/hb-unicode.c		      | 2 +-
 src/hb-unicode.h		      | 2 +-
 src/hb.h			      | 2 +-
 src/main.cc			      | 2 +-
 42 files changed, 42 insertions(+), 42 deletions(-)

commit 243d20e011e251462a07947275e0e98cc19c7e9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:57:01 2010 -0400

    More cast simplification

 src/hb-open-type-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0dfcc13a4668cdd2c2ebdd5f4a7540a51222cf2f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:41:26 2010 -0400

    Rename ConstCharP to CharP (overloaded now)

 src/hb-open-file-private.hh	      | 10 +++++-----
 src/hb-open-type-private.hh	      | 24 ++++++++++++------------
 src/hb-ot-layout-gpos-private.hh     | 12 ++++++------
 src/hb-ot-layout-gsub-private.hh     |  4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 14 +++++++-------
 5 files changed, 32 insertions(+), 32 deletions(-)

commit 62c0fd75737a69721dbf29e773405a4c529f8b6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:30:48 2010 -0400

    Cleanup de-const-casting during sanitize

 src/hb-open-file-private.hh	    |  2 +-
 src/hb-open-type-private.hh	    | 29 ++++++++++++++---------------
 src/hb-ot-layout-common-private.hh |  4 ++--
 src/hb-ot-layout-gpos-private.hh   | 12 ++++++------
 4 files changed, 23 insertions(+), 24 deletions(-)

commit dd155870567cfb9647b2e71593ace8b2705d7cff
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:13:33 2010 -0400

    Add more comments

 src/hb-open-type-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit c85c3620675f38ffdca59134aeec2641485f40ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:12:54 2010 -0400

    Add comment

 src/hb-open-type-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 2467c669c2aee4de2a6621a9d06cba0262376d41
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:11:45 2010 -0400

    Add comment

 src/hb-open-type-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit 29c3f5e1b6212c775a7b911becd44ba093b7b0eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 23:01:00 2010 -0400

    Improve comment

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 01c01618e98283611628cd54d5ba4bf122f24cd9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 22:49:56 2010 -0400

    Further simplify IntType struct defs

 src/hb-open-type-private.hh | 21 ++++++++++++---------
 1 file changed, 12 insertions(+), 9 deletions(-)

commit 2cb08458f674301cde9d962c13911035a251f7c5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 22:37:31 2010 -0400

    Rename const_array() to array() (overloaded)

 src/hb-open-type-private.hh	      | 12 ++++++------
 src/hb-ot-layout-common-private.hh   |  4 ++--
 src/hb-ot-layout-gsub-private.hh     |  6 +++---
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++--------
 4 files changed, 19 insertions(+), 19 deletions(-)

commit 2e2f43edf2f49f4047e28b1ce2ea95938536de9c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 22:30:36 2010 -0400

    Remove ArrayAfter, use StructAfter in place

 src/hb-open-type-private.hh | 21 ++++++---------------
 1 file changed, 6 insertions(+), 15 deletions(-)

commit e961c86c579fd98ee604342a9c70c4e7f8d4f220
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 15:56:11 2010 -0400

    Convert NEXT() and ARRAY_AFTER() macros to templates

 src/hb-open-type-private.hh	      | 40
 ++++++++++++++++++++++++++----------
 src/hb-ot-layout-common-private.hh   |  4 ++--
 src/hb-ot-layout-gsub-private.hh     |  8 ++++----
 src/hb-ot-layout-gsubgpos-private.hh | 24 +++++++++++-----------
 4 files changed, 47 insertions(+), 29 deletions(-)

commit 198facdc55756cb48cdfb8ba7fa50916fac54ec3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 13:35:36 2010 -0400

    Use templates for const char * casts

 src/hb-open-file-private.hh	      | 12 ++++-----
 src/hb-open-type-private.hh	      | 48
 ++++++++++++++++++------------------
 src/hb-ot-layout-common-private.hh   |  2 +-
 src/hb-ot-layout-gpos-private.hh     | 32 ++++++++++++------------
 src/hb-ot-layout-gsub-private.hh     |  4 +--
 src/hb-ot-layout-gsubgpos-private.hh | 14 +++++------
 6 files changed, 56 insertions(+), 56 deletions(-)

commit 1922ffe7013c46014803a9f18c42e193a25b1968
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 04:19:51 2010 -0400

    Const correctness

 src/hb-ot-layout-gsub-private.hh     |  4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 30 +++++++++++++++---------------
 2 files changed, 17 insertions(+), 17 deletions(-)

commit e032ed9f75d4a0f365649a25706871bbb5ae6651
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 03:11:46 2010 -0400

    Use templates for defining int typess

 src/hb-open-type-private.hh | 66
 ++++++++++++++++++++++++++++++---------------
 src/hb-private.h	     | 10 ++-----
 2 files changed, 46 insertions(+), 30 deletions(-)

commit 2c9fd2adce5a6a9dcd62c874bd64613ea68d8d9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:15:39 2010 -0400

    Remove unused macro

 src/hb-open-type-private.hh | 15 ---------------
 1 file changed, 15 deletions(-)

commit 7a52f281178867379adb6e6c6fb0022102f75d17
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:14:44 2010 -0400

    Rename macros

 src/hb-open-type-private.hh |	6 +++---
 src/hb-private.h	     | 30 +++++++++++++++---------------
 2 files changed, 18 insertions(+), 18 deletions(-)

commit ffff7dc44cb2a35a60f92831165e9d3c3a61ce19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:13:55 2010 -0400

    Minor

 src/hb-private.h | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit f60f2166c48d07f556ff83f04e95181946eb03df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:12:45 2010 -0400

    Move macros around

 src/hb-private.h | 122
 ++++++++++++++++++++++++++++---------------------------
 1 file changed, 62 insertions(+), 60 deletions(-)

commit 649a4344ca363da3d44cdd908350449ec40ed0f9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:11:59 2010 -0400

    Remove unused macros

 src/hb-private.h | 7 -------
 1 file changed, 7 deletions(-)

commit eba8b4f644701cc6b78b0fcb4e932dce15561598
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 29 00:04:12 2010 -0400

    GNOME Bug 613015 - [HB] Does not sanitize Device tables referenced
    from ValueRecords

 src/hb-ot-layout-gpos-private.hh | 47
 ++++++++++++++++++++++++++++++----------
 1 file changed, 36 insertions(+), 11 deletions(-)

commit 673a4efcbc72a62105a24d9b0b54047417160f7d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 02:02:57 2010 -0400

    WIP

 src/hb-ot-layout-gpos-private.hh | 102
 +++++++++++++++++++++++++++++++--------
 1 file changed, 81 insertions(+), 21 deletions(-)

commit 40d73bc68dd828cf68f90fde0f9499a6ce9fbb19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 00:49:40 2010 -0400

    Improve comments

 src/hb-open-type-private.hh | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

commit 394bad41a76f90e441e327cef76efb99997e9ae0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 00:40:50 2010 -0400

    Remove stale TODO item

 src/hb-open-type-private.hh | 1 -
 1 file changed, 1 deletion(-)

commit 9d3677899f90abdc7fb3e3d854db654a8707a84b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 00:32:47 2010 -0400

    Use a function template instead of struct template for Null

 src/hb-open-type-private.hh | 24 ++++++++++--------------
 1 file changed, 10 insertions(+), 14 deletions(-)

commit ffd321afd91429c5de7ab03d71ef1030044f53cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 21 00:14:12 2010 -0400

    Simplify Tag struct

 src/hb-open-file-private.hh	    | 3 ++-
 src/hb-open-type-private.hh	    | 6 +-----
 src/hb-ot-layout-common-private.hh | 3 ++-
 3 files changed, 5 insertions(+), 7 deletions(-)

commit 00e23fcc6fd0eee5c582251bf3de6a2703fbbd3e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 20 23:50:45 2010 -0400

    Cosmetic

 src/hb-open-type-private.hh	    | 8 ++++----
 src/hb-ot-layout-common-private.hh | 6 +++---
 2 files changed, 7 insertions(+), 7 deletions(-)

commit a87072db5d41e25b2e31191545298bca4838c65c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 20 15:52:47 2010 -0400

    Fix Class operator return type

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f9b37727985191c9b4aedb0e9835736027e59260
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 20 15:51:53 2010 -0400

    Add couple consts to operators

 src/hb-open-type-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 53d237ec6352d7c6fab3b2805b48154a25506beb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Apr 20 15:25:27 2010 -0400

    Remove ASSERT_SIZE_DATA

 src/hb-open-type-private.hh	    | 4 ----
 src/hb-ot-layout-common-private.hh | 9 ++++++---
 2 files changed, 6 insertions(+), 7 deletions(-)

commit 06558d2a745b8f3af11a8d6dce956ae52187a7e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 19 02:34:10 2010 -0400

    Round instead of trunc

 src/hb-ot-layout-gpos-private.hh | 20 ++++++++++----------
 src/hb-private.h		  |  2 +-
 2 files changed, 11 insertions(+), 11 deletions(-)

commit 0e206de98621ed8a55824b42e9e6bf320f4c6cc8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 19 02:29:04 2010 -0400

    Fix warnings

 src/hb-open-type-private.hh	      | 2 +-
 src/hb-ot-layout-gdef-private.hh     | 2 +-
 src/hb-ot-layout-gpos-private.hh     | 4 ++--
 src/hb-ot-layout-gsubgpos-private.hh | 6 +++---
 4 files changed, 7 insertions(+), 7 deletions(-)

commit d5943407a4251cb947fbfc130c0facb2f6216bd6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Apr 19 02:27:56 2010 -0400

    Fix debug build

 src/hb-open-type-private.hh	      | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 12b27ed91de0192deee4e9feffcaf4aca4c78113
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Mar 27 17:00:19 2010 -0400

    Fix leak when duplicating blob

 src/hb-blob.c | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit 4b8487d83e0c10076a6c573cb3487790ce366607
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Mar 16 03:46:17 2010 -0400

    Fix the mystery bug!

    A couple bugs joined forces to exhibit the mystery behavior of
    crashes / infinite loops on OS X / wrong kerning / invalid memory
    access.  Pooh!

    The bugs were involved:

      - Wrong pointer math with ValueRecord in PairPosFormat1

      - Fallout from avoiding flex arrays, code not correctly updated
	to remove sizeof() usage.

    We strictly never use sizeof() directly now.  And the PairPos code
    is cleaned up.  Should fix them all.  Bugs are:

      Bug 605655 - Pango 1.26.2 introduces kerning bug
      Bug 611229 - Pango reads from uninitialized memory
      Bug 593240 - (pangoosx) Crash / infinite loop with Mac OS X

    We were also doing wrong math converting Device adjustments to
    hb_position_t.  Fallout from FreeType days.  Should shift 16, not
    6.	Fixed that too.

    There's still another bug: we don't sanitize Device records
    referenced from value records.  Fixing that also.

 src/hb-open-file-private.hh	      |  4 +++-
 src/hb-open-type-private.hh	      | 11 ++++++-----
 src/hb-ot-layout-common-private.hh   | 10 ++++++++--
 src/hb-ot-layout-gpos-private.hh     | 37
 ++++++++++++++++++++----------------
 src/hb-ot-layout-gsubgpos-private.hh | 15 ++++++++-------
 5 files changed, 46 insertions(+), 31 deletions(-)

commit 9b39755d104603d1163738f77637cc1923d4055b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 15 14:00:25 2010 -0400

    Typo

 src/hb-open-type-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f85ec1c7da36d2c2c9b1c94a988563697dcc79c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Mar 10 04:14:40 2010 -0500

    Cosmetic

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e48ed72230a83499dabbd02af2ac63340220a353
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 1 22:33:45 2010 -0500

    [ft] Check stream->read instead of stream->base

    The former is more robust.	See discussion on freetype-devel.

 src/hb-ft.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 917c227500305aee543981ad24a39f868c5ca0b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 23 16:47:51 2010 -0500

    Make blob unlocking 64bit-safe

    GNOME Bug 604128 - Applications crash when displaying Hebrew
    characters

 src/hb-blob.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit ecd2e996d2137fef30011a41dd57ea45f9a796de
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Feb 23 02:42:00 2010 -0500

    Improve the alignment for NullPool

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bc7830e4259755ce7549025c6f5bf750e78c2ff1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Feb 17 15:14:57 2010 -0500

    Use __attribute__((unused)) only with gcc 4 and later

    See discussion at:
    https://bugzilla.gnome.org/show_bug.cgi?id=610183

 src/hb-private.h | 7 +++++--
 1 file changed, 5 insertions(+), 2 deletions(-)

commit 555d11273ee4c30e84eda3a78ffadb3ee7da65d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 26 12:58:59 2010 -0500

    [GDEF] Fix bug in building synthetic GDEF

 src/hb-ot-layout.cc | 5 +++--
 src/hb-ot-layout.h  | 1 -
 2 files changed, 3 insertions(+), 3 deletions(-)

commit 70834d89c30a56fcd78825fbc28fc9c6bec31124
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jan 26 12:17:37 2010 -0500

    [TODO] Add kern/GPOS interaction

 TODO | 3 +++
 1 file changed, 3 insertions(+)

commit cd11a98fa1426e9dbc4b61e702913b23a4794ae2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 23:05:02 2009 +0100

    Fix compile with older FreeType

 configure.ac | 7 +++++++
 src/hb-ft.c  | 2 ++
 2 files changed, 9 insertions(+)

commit 7f7448a354c43650348b4e91b4e40ecf18718d66
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 21:42:14 2009 +0100

    Indent

 src/hb-ot-layout-gpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e70f45eb522bcb41388cc218b79bbd6aaecf8050
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 21:26:24 2009 +0100

    Revert "Fallback to 'kern' if no GPOS applied"

    This reverts commit d740c8f78bcbe80a8bcd8a9468830a406da37cc0.

    The change is wrong.  If there is a GPOS table, we should not use
    'kern'.

 src/hb-ot-shape.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d740c8f78bcbe80a8bcd8a9468830a406da37cc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 21:23:56 2009 +0100

    Fallback to 'kern' if no GPOS applied

 src/hb-ot-shape.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2f78c17197892b2bdc2f64caeb1c1c806ef44545
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 21:03:11 2009 +0100

    Remove glibism!

 src/hb-ot-shape-private.h | 4 ++--
 src/hb-ot-shape.c	   | 4 ++--
 src/hb-shape.c		   | 4 ++--
 3 files changed, 6 insertions(+), 6 deletions(-)

commit 907e67da13b5ed719362702138703fe2f90e790d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 20:59:51 2009 +0100

    Oops, add file.

 src/hb-ot-shape-private.h | 53
 +++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 53 insertions(+)

commit 2014b8d110231b13e524008282ece7451f1ae9e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 20:58:26 2009 +0100

    Hook OpenType shaping up

    Default features only for now.

 src/Makefile.am     |	 2 +
 src/hb-ot-layout.cc |	28 +++++++++
 src/hb-ot-layout.h  |	 7 +++
 src/hb-ot-shape.c   | 165
 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-shape.c      |	 8 +--
 5 files changed, 206 insertions(+), 4 deletions(-)

commit 196610ba4c7071c2b802d0fc921a63cbc0753114
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 19:01:14 2009 +0100

    Pass features down

 src/hb-shape.c | 49 +++++++++++++++++++++++++++++++++----------------
 1 file changed, 33 insertions(+), 16 deletions(-)

commit 51f141a7f38a73f671b23f58cadf97a72c43b625
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 18:22:28 2009 +0100

    Avoid overflow

 src/hb-shape.c | 2 ++
 1 file changed, 2 insertions(+)

commit 26d7a75752631b2596a5bcb7e645b34cc3d139ab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 17:58:25 2009 +0100

    Refactor hb_shape a bit

 src/hb-shape.c | 87
 +++++++++++++++++++++++++++++++++++++++++++++++++---------
 1 file changed, 74 insertions(+), 13 deletions(-)

commit 001fc2d2aa22f14302739fe4ca45f7535855e0fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 17:24:05 2009 +0100

    Add TrueType kern support

 src/hb-shape.c | 74
 +++++++++++++++++++++++++++++++++++++---------------------
 1 file changed, 48 insertions(+), 26 deletions(-)

commit 2c1b85cf66e5ecb7521b6018b76f0e161fb68967
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 16:29:17 2009 +0100

    Direct unicode->get_mirroring directly

 src/hb-shape.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 6a2ef5aa5459def232708af30ef8a484906b868b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 16:28:01 2009 +0100

    Do mirroring

 src/hb-shape.c | 18 +++++++++++++++++-
 1 file changed, 17 insertions(+), 1 deletion(-)

commit 0465e69832393cc1ed36508ec5d597fbab64877a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 16:25:18 2009 +0100

    Protect against NULL funcs

 src/hb-buffer.c | 3 +++
 src/hb-font.cc  | 3 +++
 2 files changed, 6 insertions(+)

commit 5ceefa1d8dbd310570ea8d1c47107fe8d3dc96d9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 15:29:16 2009 +0100

    Add hb_unicode_get_*() functions

 src/hb-unicode.c | 37 +++++++++++++++++++++++++++++++++++++
 src/hb-unicode.h | 21 +++++++++++++++++++++
 2 files changed, 58 insertions(+)

commit b8a53e44ce05911ce98b7cff34dee165e19d87ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 14:56:25 2009 +0100

    We'll have to link to libstdc++ if linking to ICU, so disable test
    for now

    We have to get rid of the ICU in main lib.	Still thinking about
    best way
    to do it.

 src/Makefile.am | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 314905d7548d5be58354546d660754b807b6efb2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 14:50:42 2009 +0100

    Explicitly track whether the buffer has positions

 src/hb-buffer-private.h |  3 ++-
 src/hb-buffer.c	 | 27 ++++++++++++++-------------
 2 files changed, 16 insertions(+), 14 deletions(-)

commit 314b460d8a02ed4b2789ff527cf6c9bc19769114
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Dec 20 13:58:50 2009 +0100

    Add HB_DIRECTION_IS_FORWARD/BACKWARD

 src/hb-common.h | 2 ++
 src/hb-shape.c  | 3 +--
 2 files changed, 3 insertions(+), 2 deletions(-)

commit bdd0ff5290bae4db65c3fdf95c5728031f13ca84
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 15 04:07:40 2009 -0500

    Make main.cc compile without glib

 src/main.cc | 18 ++++++++++++++++--
 1 file changed, 16 insertions(+), 2 deletions(-)

commit 8a7d16808200f4fa02d6d12a8b8492bdedeb2c24
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 15 03:53:45 2009 -0500

    Distribute autogen.sh

 Makefile.am | 3 +++
 1 file changed, 3 insertions(+)

commit 807b8aa486753474e05e09f4fcca8ac94021b97c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 19 20:28:03 2009 -0500

    Another C++ strictness fix

    Pango Bug 602408 - Invalid C++ code breaks compile with Sun C++
    Compiler
    (Error: A union member cannot have a user-defined assignment operator)

    According to the bug:

    C++ Programming Language by Bjarne Stroustrup: Chapter 10.4.12 forbids
    explicitly using of union members with constructors, destructors
    or assignment
    operations.

    So we use a set() method instead of the assignment operator.  Ugly,
    but hey,
    that's life.

 src/hb-open-type-private.hh	    | 8 ++++----
 src/hb-ot-layout-common-private.hh | 2 +-
 2 files changed, 5 insertions(+), 5 deletions(-)

commit 8b9b866d3e495c186f0530fcf4e00ffcdc170d3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 19 20:27:57 2009 -0500

    Fix warning

 src/hb-ot-layout-gdef-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c65b26acf28bd1a5b346fd8f6f28bec1f7d17a2a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 18 11:27:33 2009 -0500

    Use autoconf FLEXIBLE_ARRAY_MEMBER when available

 configure.ac			  |  2 ++
 src/hb-ot-layout-gpos-private.hh |  4 ++--
 src/hb-private.h		  | 13 ++++++++++---
 3 files changed, 14 insertions(+), 5 deletions(-)

commit d33f674cb793af40f1612df3660b138383f2de95
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 18 09:47:44 2009 -0500

    Add Mongolian variation selectors

 src/hb-shape.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit d6387757de2c27867d6f57c4ee7c4ef436b3a74f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 11 17:15:03 2009 -0500

    Fix sanitize

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 636f017e387d46d4083c9f9ee57647a94dc5dc6d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 10 12:56:35 2009 -0500

    Remove obsolete TODO item

 src/hb-open-file-private.hh | 2 --
 1 file changed, 2 deletions(-)

commit bf2b25dd8591e92f3944c763641b613a70c379a7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 19:52:47 2009 -0500

    Remove done item

 src/hb-shape.c | 1 -
 1 file changed, 1 deletion(-)

commit 4a8605315901e0ff1e6e09437a92dd5ac39164cc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 19:52:01 2009 -0500

    Reverse buffer at the end if RTL

 src/hb-shape.c | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit ff44f88df2c46920f3ec2384ef321a4c7bb0f6ef
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 19:48:16 2009 -0500

    Handle shaping in non-native direction

 src/hb-buffer-private.h  |   1 +
 src/hb-buffer.c	  |  42 +++++++++++++++++--
 src/hb-buffer.h	  |  10 ++---
 src/hb-common.h	  |  11 +++++
 src/hb-shape.c		  |  38 +++++++++++++++--
 src/hb-unicode-private.h |   5 +++
 src/hb-unicode.c	  | 103
 +++++++++++++++++++++++++++++++++++++++++++++++
 7 files changed, 196 insertions(+), 14 deletions(-)

commit b4b4272c8d19ba3e0cb8f12b3b7d1590349e3d14
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 17:46:33 2009 -0500

    Oops, wrong change

 src/hb-ot-layout.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 52ea47767c7c35650ebddfba6ddc8203a3e33d3a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 17:45:38 2009 -0500

    Change order of font and face for API consistency

 src/hb-ot-layout.cc | 14 +++++++-------
 src/hb-ot-layout.h  | 14 +++++++-------
 2 files changed, 14 insertions(+), 14 deletions(-)

commit f4f1fc970b3e37d9903cbf5e05bbd38be4df3047
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 17:42:38 2009 -0500

    Remove debug info that crept in

 src/hb-ot-layout.cc | 2 --
 1 file changed, 2 deletions(-)

commit aa196d6026b496ec70be3d3588cc8cd2b8ccdb36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 17:23:31 2009 -0500

    [GSUB] More ligature/component fixing

    We can only reuse the ligid if it belongs to a previous ligature,
    not a
    component!

 src/hb-ot-layout-gsub-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 25e7ef704633447f109b148620336c42d6fb310e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 17:21:01 2009 -0500

    Add _hb_buffer_add_output_glyphs() that takes codepoint_t*

 src/hb-buffer-private.h	  | 10 ++++++++-
 src/hb-buffer.c		  | 45
 ++++++++++++++++++++++++++++++++++++++--
 src/hb-ot-layout-gsub-private.hh | 16 +++++++-------
 3 files changed, 60 insertions(+), 11 deletions(-)

commit 9db8ad75317d589807e7725455f49cafece58d5d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 16:47:31 2009 -0500

    Add hb_ot_layout_position_finish()

    We expect buffer to be setup with default positions before GPOS.

 src/hb-buffer-private.h	  |  6 +----
 src/hb-buffer.h		  | 11 +--------
 src/hb-ot-layout-gpos-private.hh |  8 +++----
 src/hb-ot-layout.cc		  | 52
 ++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout.h		  | 16 +++++++++----
 5 files changed, 69 insertions(+), 24 deletions(-)

commit edb54e9aeca25f4120a69ed3d5562cbb68fdb348
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 15:19:22 2009 -0500

    Fix FT_Face finalizer call

 src/hb-ft.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 3d14528b8b2e7da425a9df7057fc9fb326d8298c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 15:13:17 2009 -0500

    Rename hb_buffer_get_len() to hb_buffer_get_length()

 src/hb-buffer.c | 2 +-
 src/hb-buffer.h | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

commit 1ff7775051559a8ca442be3938450c7ed3817806
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Nov 6 13:52:57 2009 -0500

    Minor.

 src/hb-shape.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 3648bdf5b221adfe01ad99714de420b49964921e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 20:17:53 2009 -0500

    Fix FT_Face generic finalizer

 src/hb-ft.c | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 5a11c875d8c95d480e6f32b57e969ee34ca1940d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 20:08:17 2009 -0500

    Cosmetic

 src/hb-blob.c | 10 ++++++----
 1 file changed, 6 insertions(+), 4 deletions(-)

commit 44533e773f75b9a1171d884fcbe91a2f3879e2d8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 19:58:02 2009 -0500

    Fix warning

 src/hb-object-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit bcc0406a525ca3fe597aec5f2a97e5c50965d49c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 19:54:23 2009 -0500

    include errno.h

 src/hb-blob.c | 1 +
 1 file changed, 1 insertion(+)

commit 799b3c375ad0e1293fd37a0e3a0d422a3166dcd8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 19:37:58 2009 -0500

    Add debugging to object lifecycle

 src/hb-object-private.h | 18 ++++++++++++++++++
 1 file changed, 18 insertions(+)

commit 25edb940ab050545f47a06648e73c192fa213548
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 19:20:06 2009 -0500

    Cosmetic

 src/hb-ft.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 850dc5bb551409bb9bf6113ec2199bb3fb905e43
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 18:26:52 2009 -0500

    Return 0 from get_glyph_nil

 src/hb-font.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 85555a953376ee68a8fcc64485e74d44a353577b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 18:25:56 2009 -0500

    Initialize font->klass

 src/hb-font.cc | 2 ++
 1 file changed, 2 insertions(+)

commit bcd26bd7b1c96057bf154d7d50a61018d40f0d29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 18:03:26 2009 -0500

    Add TODO item

 src/hb-ft.c | 1 +
 1 file changed, 1 insertion(+)

commit f4281e0a92a40746fa630fb15b877adaf3ff15b1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 17:58:41 2009 -0500

    Fix ref counting

 src/hb-ft.c | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

commit 6358ff45ae8cfc0b58b4976619319e3dde43add2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 17:39:16 2009 -0500

    Add hb_ft_face_create_cached

 src/hb-ft.c | 16 ++++++++++++++++
 src/hb-ft.h |	3 +++
 2 files changed, 19 insertions(+)

commit 2027f74b286cabe3c60c275170c4f4b437a30f55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 16:34:47 2009 -0500

    Add default positioning to hb-shape

 src/hb-shape.c | 28 ++++++++++++++++++++++++----
 1 file changed, 24 insertions(+), 4 deletions(-)

commit c3f9f7e59d865f8664862b7ca99d9a3a9221e456
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 16:16:14 2009 -0500

    Fix MarkMark issue with ligid and components

 src/hb-ot-layout-gpos-private.hh | 11 ++++++-----
 src/hb-ot-layout-gsub-private.hh |  6 +-----
 2 files changed, 7 insertions(+), 10 deletions(-)

commit d0351314cd29fbdf0efb5c7f89a569648f7a7fc7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 16:16:06 2009 -0500

    Include stdio.h if debugging

 src/hb-blob.c			      | 4 ++++
 src/hb-open-type-private.hh	      | 1 +
 src/hb-ot-layout-gsubgpos-private.hh | 1 +
 3 files changed, 6 insertions(+)

commit 2e336692913405976392bf505028481a5caa53b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 13:55:41 2009 -0500

    Add hb_font_get_*

 src/hb-font.cc | 35 +++++++++++++++++++++++++++++++++++
 src/hb-font.h	| 18 ++++++++++++++++++
 src/hb-shape.c |  2 +-
 3 files changed, 54 insertions(+), 1 deletion(-)

commit 9bef3611f07b45ba8199a4a339c72f49d266216a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 12:20:11 2009 -0500

    Rename [xy]_pos to [xy]_offset since we don't accumulate positions

 src/hb-buffer-private.h	  |  4 ++--
 src/hb-buffer.h		  |  4 ++--
 src/hb-font.h			  |  4 ++--
 src/hb-ft.c			  | 10 +++++-----
 src/hb-ot-layout-gpos-private.hh | 40
 ++++++++++++----------------------------
 src/hb-shape.c			  | 14 +++++++-------
 src/hb-shape.h			  |  4 ++--
 7 files changed, 32 insertions(+), 48 deletions(-)

commit 2daa47e9cdbfb027f76765301b3a78950e92eb09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Nov 5 12:08:34 2009 -0500

    Cosmetic

 src/hb-shape.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2f50d873680ce0a43b6ec79df1ac946b91f31e63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 21:07:03 2009 -0500

    Start filling hb_shape() in

 src/hb-buffer-private.h |  1 +
 src/hb-shape.c		 | 40 +++++++++++++++++++++++++++++++++++++++-
 2 files changed, 40 insertions(+), 1 deletion(-)

commit ae070b7d39d03bd8bc1244f687b24db505f4af3f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 20:29:54 2009 -0500

    Add script and language to buffer

 TODO			 |  1 -
 src/hb-buffer-private.h |  6 +++---
 src/hb-buffer.c	 | 26 ++++++++++++++++++++++++++
 src/hb-buffer.h	 | 15 ++++++++++++++-
 4 files changed, 43 insertions(+), 5 deletions(-)

commit 8a3511ac6c795226699c2b36e03401ecdf88f5f8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 19:45:39 2009 -0500

    Add hb_language_t as well as language/script conversion to OT tags

 src/Makefile.am     |	 4 +
 src/hb-language.c   | 113 +++++++++
 src/hb-language.h   |	44 ++++
 src/hb-ot-layout.cc |	 6 +-
 src/hb-ot-layout.h  |	 4 +-
 src/hb-ot-tag.c     | 662
 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-tag.h     |	49 ++++
 src/hb-ot.h	     |	 1 +
 src/hb-private.h    |	 3 +
 src/hb.h	     |	 1 +
 10 files changed, 882 insertions(+), 5 deletions(-)

commit 4591753ad4b5ec0224e3f1befdfe4fc5f6075562
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 18:15:59 2009 -0500

    Define ARRAY_LENGTH

 src/hb-private.h | 15 ++++++++-------
 1 file changed, 8 insertions(+), 7 deletions(-)

commit 214ac7c1ff51b397d227832526f882e824cb9ea3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 18:12:32 2009 -0500

    Another one

 src/hb-unicode.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 1e91434569a9e9535ef021ca52b60b2e2af75d19
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 18:12:09 2009 -0500

    Minor

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 48de3730cdf91b9f6473509e22260a902ccec992
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 16:59:50 2009 -0500

    Fix previous commit, ouch!

 src/hb-open-type-private.hh	    | 12 ++++++++++++
 src/hb-ot-layout-common-private.hh | 12 ++++--------
 src/hb-ot-layout-gdef-private.hh   | 12 ++++--------
 3 files changed, 20 insertions(+), 16 deletions(-)

commit e21899bc3593aa0d3adf64cee21c5de2ea219783
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 16:36:14 2009 -0500

    Fix array query API

    The array query APIs now all do:

      - Return the total number of items
      - Take a start_offset, such that individual items can be fetched
      - The _count IN/OUT variable always has number of items written
	into the array upon return of the function

 TODO				      |  1 -
 src/hb-ot-layout-common-private.hh   | 59 ++++++++++++++-----------
 src/hb-ot-layout-gdef-private.hh     | 84
 +++++++++++++++++++++---------------
 src/hb-ot-layout-gsubgpos-private.hh | 14 +++---
 src/hb-ot-layout.cc		      | 40 ++++++++++-------
 src/hb-ot-layout.h		      | 24 +++++++----
 6 files changed, 131 insertions(+), 91 deletions(-)

commit 3b59306b858d31d97be0ea8c64461de1d0d03572
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Nov 4 15:48:32 2009 -0500

    Finish FT glue.  Rough and untested

 src/hb-font.cc |   2 +-
 src/hb-font.h	|   2 +-
 src/hb-ft.c	| 114
 ++++++++++++++++++++++++++++++---------------------------
 3 files changed, 63 insertions(+), 55 deletions(-)

commit f8be443aecd54b479470e6559b1dfbc8f33c5f55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 20:28:27 2009 -0500

    Add TODO item

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit 7951279b4a52b48f13631e7838dbc180c7249ea4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 20:27:05 2009 -0500

    Implement nil font functions

 TODO				  |  1 +
 src/hb-font-private.h		  |  8 ++---
 src/hb-font.cc			  | 72
 +++++++++++++++++++++++++++++++++++++---
 src/hb-font.h			  |  9 +++--
 src/hb-ot-layout-gpos-private.hh |  7 ++--
 src/hb-ot-layout-gsub-private.hh |  2 +-
 src/hb-private.h		  | 18 +++++-----
 7 files changed, 91 insertions(+), 26 deletions(-)

commit 8fb3d1aa4e613cdf965a83bd650c668884c58ad8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 18:34:20 2009 -0500

    Start ft glue

 TODO		       |   3 -
 src/Makefile.am       |  16 ++++-
 src/hb-font-private.h |   4 +-
 src/hb-font.cc        |  17 ++++-
 src/hb-font.h	       |   6 +-
 src/hb-ft.c	       | 192
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-ft.h	       |  52 ++++++++++++++
 src/hb-glib.h	       |   2 -
 src/hb-icu.h	       |   2 -
 src/hb.h	       |   4 +-
 10 files changed, 281 insertions(+), 17 deletions(-)

commit d94647e2cd187bf4a4c8fb1c0c15c3d23c1293ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 16:35:10 2009 -0500

    Add ICU glue

 configure.ac	 |   8 +-
 src/Makefile.am |  23 +++++-
 src/hb-icu.c	 | 221
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-icu.h	 |  41 +++++++++++
 4 files changed, 288 insertions(+), 5 deletions(-)

commit b7dd4b945b4ec384526439b365a25739bf9cd2df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 15:21:15 2009 -0500

    Fix hb_be_uint16()

 src/hb-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cd7555eef27cb18857c0c06d2afdaf3a354a3c15
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 15:16:10 2009 -0500

    Namespace MSVC defines in public header

 src/hb-common.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 5ebabecef382c3e8b0a2a5657b2c01f7ff37d796
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 15:15:07 2009 -0500

    Move unicode_funcs to buffer

 TODO			 |  1 -
 src/hb-buffer-private.h | 12 +++++++++++-
 src/hb-buffer.c	 | 47
 ++++++++++++++++++++++++++++++++++++++---------
 src/hb-buffer.h	 | 10 ++++++++++
 src/hb-font-private.h	 |  3 ---
 src/hb-font.cc		 | 17 -----------------
 src/hb-font.h		 |  9 ++++-----
 7 files changed, 63 insertions(+), 36 deletions(-)

commit d5a8e46099e363d928b54de104126b1b34ba401c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 15:14:40 2009 -0500

    [Makefile] Install hb-unicode.h

    Separate OT headers also.

 src/Makefile.am | 27 ++++++++++++++++-----------
 1 file changed, 16 insertions(+), 11 deletions(-)

commit 63d7a41dd0704a7e89bd2872ad096f470f51866a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 15:14:08 2009 -0500

    [TODO] Add item for fixing buffer error handling

 TODO | 1 +
 1 file changed, 1 insertion(+)

commit 21d0fce3d5364c91e5582bd530210f03e054d1a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 14:28:32 2009 -0500

    Add check for not linking to libstdc++

 TODO			|  3 +--
 src/Makefile.am	|  4 ++++
 src/check-libstdc++.sh | 28 ++++++++++++++++++++++++++++
 3 files changed, 33 insertions(+), 2 deletions(-)

commit ca95ce460adf2ca6901595d4a6107fd000d90151
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 14:18:33 2009 -0500

    Use the C linker, not C++ linker

    Such that we don't link to libstdc++.

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit eb4ebda2d10637b966f42a4ed5cfaec46082a050
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 14:09:32 2009 -0500

    [configure] Fix check for FreeType

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit cb0e99a5a76136c128faba1c27d7e7eac2f219ee
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 14:09:10 2009 -0500

    [TODO] Remove obsolete item

 TODO | 2 --
 1 file changed, 2 deletions(-)

commit 3a59ec37c5576b711c7c36dcfa2a63f6c00a3f5c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 11:36:06 2009 -0500

    Add bunch of TODO items

 TODO | 15 ++++++++++++---
 1 file changed, 12 insertions(+), 3 deletions(-)

commit ffbe0a853d5e7defa85d0eef53814c22d1ecb412
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 10:52:45 2009 -0500

    More MSVC fixes from Jonathan Kew

 src/hb-common.h  | 7 ++++++-
 src/hb-private.h | 5 +++++
 2 files changed, 11 insertions(+), 1 deletion(-)

commit d3480ba37fbb5d4be75b094060f5b2f1ce98fb53
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Nov 3 10:47:29 2009 -0500

    Don't use zero-sized arrays

    It's not part of the standard and MSVC doesn't like it.  It makes
    the code
    a lot less elegant than it used to be, but I think it should work now.

 src/hb-open-file-private.hh	      |  4 +-
 src/hb-open-type-private.hh	      | 36 +++++++++++------
 src/hb-ot-layout-common-private.hh   | 33 ++++++++--------
 src/hb-ot-layout-gdef-private.hh     | 14 +++----
 src/hb-ot-layout-gpos-private.hh     | 76
 ++++++++++++++----------------------
 src/hb-ot-layout-gsub-private.hh     | 44 ++++++++-------------
 src/hb-ot-layout-gsubgpos-private.hh | 47 +++++++++++-----------
 src/hb-private.h		      |  5 +++
 8 files changed, 122 insertions(+), 137 deletions(-)

commit 6bec81aa3a58b8be255568b2ea63b7854e1b0ea7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 19:17:36 2009 -0500

    Cosmetic

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f94cf6b969281cf8a7f701ff26ea4f134ff9746e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:55:19 2009 -0500

    Another try at build without glib

 configure.ac | 8 ++++++--
 1 file changed, 6 insertions(+), 2 deletions(-)

commit 2f3e69f3cb7e571cc62b0840d0b3f2072b29345a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:53:15 2009 -0500

    Fix build without glib, again

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit d03f81865914b40e941bf680557c0d8f98e30ad5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:52:21 2009 -0500

    Disable configure cache

 autogen.sh | 1 -
 1 file changed, 1 deletion(-)

commit a6451aa626fa5850d7c3b716bd52126995154e27
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:35:12 2009 -0500

    We don't really use gthread directly

 configure.ac | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 63a792a811e0ad69d05e8805d4f347bd533db4c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:33:52 2009 -0500

    Update Makefile to build without glib

 src/Makefile.am | 12 +++++++++---
 src/hb-glib.c	 |  2 ++
 2 files changed, 11 insertions(+), 3 deletions(-)

commit 68a2c771e2b923461a552bf3673e9e8245e1bfea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:31:53 2009 -0500

    Build without glib

    Thready-safety disabled in that case, until we add support for
    pthread, etc.
    Fun...

 src/hb-private.h | 19 +++++++++++++++++--
 1 file changed, 17 insertions(+), 2 deletions(-)

commit cc4c096a7e08ae96b3030fe27f871ce5b797f370
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:13:17 2009 -0500

    MSVC has no stdint.h

 src/hb-common.h | 13 +++++++++++++
 1 file changed, 13 insertions(+)

commit 9a204c7ab57ca0a866c72e1431c54a8883b15605
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 18:11:55 2009 -0500

    Remove use of GINT16_FROM_BE

 src/hb-private.h | 10 ++--------
 1 file changed, 2 insertions(+), 8 deletions(-)

commit 1f0ceeb8cf2fad0a0dfd338ce1472470a81789d4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 16:28:39 2009 -0500

    Install library

 autogen.sh	 | 2 +-
 src/Makefile.am | 5 ++---
 2 files changed, 3 insertions(+), 4 deletions(-)

commit 5932f8f7c3b73ade3752020351fa8b6a9a3bf500
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 16:38:41 2009 -0500

    Generate ChangeLog

 Makefile.am | 39 +++++++++++++++++++++++++++++++++++++++
 1 file changed, 39 insertions(+)

commit 29aa40018301a4f138cd5e73463079c7704bf3ac
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 16:28:39 2009 -0500

    Add build system

 AUTHORS	 |   0
 COPYING	 |  17 +++++
 Makefile.am	 |   3 +
 NEWS		 |   0
 README		 |   9 +++
 TODO		 |   6 ++
 autogen.sh	 | 189
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 configure.ac	 |  40 ++++++++++++
 git.mk		 | 184
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++
 harfbuzz.pc.in  |  11 ++++
 src/.gitignore  |   1 -
 src/COPYING	 |  17 -----
 src/Makefile.ng |  11 ----
 src/README	 |   9 ---
 src/TODO	 |   6 --
 15 files changed, 459 insertions(+), 44 deletions(-)

commit c09ed9801ead002d6f8e507ce664b83707b202e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 29 03:08:42 2009 -0400

    [HB] Add glyph_metrics typedef

 src/hb-font.h | 9 +++++++++
 1 file changed, 9 insertions(+)

commit 91b1e03e0312be2a7a165308239b40449e3ab360
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 29 03:05:18 2009 -0400

    [HB] Add point_index to get_contour_point()

    Pointed out by Keith Stribley on HarfBuzz list.

 src/hb-font.h | 1 +
 1 file changed, 1 insertion(+)

commit aa87d951739f6beacb66daa235cd033fdcfcadd7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Oct 29 03:00:44 2009 -0400

    [HB] Fix lookup_flag ignoring

    Reported by Keith Stribley on HarfBuzz list.

 src/hb-ot-layout-common-private.hh | 1 +
 src/hb-ot-layout.cc		    | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 52e9a71d578c5171bbb0f4bfc1b70841c3270328
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 21 13:58:56 2009 -0400

    [HB] Add comment

 src/hb-ot-layout-gsubgpos-private.hh | 5 +++++
 1 file changed, 5 insertions(+)

commit f9c0a2dad09cd168fb28cdee09b4303f307ea56d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 21 13:43:54 2009 -0400

    [HB] Fix apply_lookup() loop

    Part of Bug 595539 - Regressions in rendering certain Thai sequences
    with
    OpenType font

 src/hb-ot-layout-gsubgpos-private.hh | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit c0ab43c05833e8fc06d770a89370bec58a627e74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Sep 21 13:40:38 2009 -0400

    [HB] Fix bug in chain_context_lookup() invocations

    Part of Bug 595539 - Regressions in rendering certain Thai sequences
    with
    OpenType font

 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e6bd4e93bd5722249ab977dfa98bdc8eb765318c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 30 21:02:28 2009 -0400

    [HB] Add TODO item

 src/TODO | 1 +
 1 file changed, 1 insertion(+)

commit 3e2401f6c53d2b047954d75c37aef5e5e7cdc51a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 28 17:17:11 2009 -0400

    [HB] Rename DEBUG to TRACE where appropriate

 src/hb-open-file-private.hh	      |  8 ++--
 src/hb-open-type-private.hh	      | 50 ++++++++++----------
 src/hb-ot-layout-common-private.hh   | 32 ++++++-------
 src/hb-ot-layout-gdef-private.hh     | 20 ++++----
 src/hb-ot-layout-gpos-private.hh     | 92
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.hh     | 72 ++++++++++++++--------------
 src/hb-ot-layout-gsubgpos-private.hh | 78 +++++++++++++++---------------
 7 files changed, 176 insertions(+), 176 deletions(-)

commit 0535b50f436f3dac85e6df1761957f86c2bd7213
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 28 17:14:33 2009 -0400

    [HB] Add GSUB/GPOS tracing

 src/hb-ot-layout-gpos-private.hh     | 29 ++++++++++++++++++---
 src/hb-ot-layout-gsub-private.hh     | 28 ++++++++++++++++++---
 src/hb-ot-layout-gsubgpos-private.hh | 49
 ++++++++++++++++++++++++++++++++++--
 3 files changed, 98 insertions(+), 8 deletions(-)

commit 95e202403ffa543c817f45cca21fbc116eb8e807
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 28 16:31:20 2009 -0400

    [HB] Allow enabling different debug facilities individually

 src/hb-blob.c		     | 28 ++++++++++++++++------------
 src/hb-open-type-private.hh | 32 ++++++++++++++++++--------------
 2 files changed, 34 insertions(+), 26 deletions(-)

commit 37006bd1bd107ac1a1c1b131579e9c494ba3a20f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 28 09:46:14 2009 -0400

    Fix stupid array growing bug

 src/hb-ot-layout.cc | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 9897749113f76dc26a83bfae8de62e55d384fcad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 27 01:32:17 2009 -0400

    [HB] Simplify counting

 src/hb-ot-layout.cc | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit 81a5c4df94e7c6066314d5fe75bbaf24483bc022
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 27 00:21:04 2009 -0400

    [HB] Indent

 src/hb-blob.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c91facd83b5dc3b9aed75617c7c35585ff18889f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 26 18:53:43 2009 -0400

    [HB] Bug 593231 - < c99 compiler dislikes ValueRecord

 src/hb-ot-layout-gpos-private.hh | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit f0c7540c4e217a7354072365a7301453d1e25b80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 20 14:01:37 2009 -0400

    Bug 592484 -  invalid write in HB

    Fix off-by-one.

 src/hb-ot-layout.cc | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b614b004723ead60849dd37e7ba2faee67cebd93
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 20 13:07:50 2009 -0400

    [HB][glib] Make glib unicode funcs static

 src/hb-glib.c | 36 +++++++++++++++++-------------------
 1 file changed, 17 insertions(+), 19 deletions(-)

commit 8b5346130425c7c101f6ff2432874ba2fd372edc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 18:16:50 2009 -0400

    [HB] Fix more casts

 src/hb-open-type-private.hh | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 9d2e02db74deb3b3b92beab96f112cc387c8bd88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 18:07:36 2009 -0400

    [HB] Rename CAIRO_ in macro prefix to HB_

    Hiss!

 src/hb-private.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 388ad037ff399c23c5e24bbcede27e0e35bed07e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 16:45:41 2009 -0400

    [HB] Remove HB_MEMORY_MODE_READONLY_NEVER_DUPLICATE

    Unlike the rest of the memory-mode enum, this one didn't only
    describe the access mode of the input memory region.  Remove it.

    If someone wants to inhibit duplicating, they can lock the blob
    and throw away the key.

    Based on mailing list discussion with Carl Worth.

 src/hb-blob.c | 51 +++++++++++++++++++++++++--------------------------
 src/hb-blob.h |  1 -
 2 files changed, 25 insertions(+), 27 deletions(-)

commit 977eeb714454630bd045bb11f58ff6397f10b143
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 16:17:24 2009 -0400

    [HB] s/writeable/writable/g

 src/hb-blob.c		     | 38 +++++++++++++++++++-------------------
 src/hb-blob.h		     | 10 +++++-----
 src/hb-open-type-private.hh |	6 +++---
 3 files changed, 27 insertions(+), 27 deletions(-)

commit 2f5931e404cb56e31d24b2eb7ff0a849fb077b55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 16:07:40 2009 -0400

    [HB] Hide lig_id and component members of hb_glyph_info_t

 src/hb-buffer.h | 5 ++---
 1 file changed, 2 insertions(+), 3 deletions(-)

commit 6b600dd6199104cff01b3fa43d2abb52ae4319ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 19 14:45:24 2009 -0400

    [HB] Fix typo

 src/hb-font.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 32c65a5ca3bde673bf2aa8fca911dd32914d3122
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 18:37:36 2009 -0400

    [HB] Add font funcs prototypes

 src/hb-font-private.h |  2 --
 src/hb-font.cc        | 14 ++++++--------
 src/hb-font.h	       | 23 ++++++++++++++++-------
 3 files changed, 22 insertions(+), 17 deletions(-)

commit 8f034d5849627ee95a5889fa34c9ba294fff13ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 16:41:59 2009 -0400

    Fix a few other pedantic warnings

 src/hb-ot-layout-common-private.hh | 2 +-
 src/hb-ot-layout-gdef-private.hh   | 2 +-
 src/hb-ot-layout-gpos-private.hh   | 4 ++--
 src/hb-ot-layout-gsub-private.hh   | 2 +-
 4 files changed, 5 insertions(+), 5 deletions(-)

commit 864e2560b627f1e73be3b0635e02f00844cb67c3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 16:38:48 2009 -0400

    [HB] Fix pedantic warnings

 src/hb-blob.h		 |  2 +-
 src/hb-buffer-private.h | 18 +++++++++---------
 src/hb-buffer.h	 |  6 +++---
 3 files changed, 13 insertions(+), 13 deletions(-)

commit 3e09722214d9bbcc9014409342072c79d0c4447f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 16:32:31 2009 -0400

    [HB] Fix more wrong method signatures

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 822e99fe9ae920df41a0bd3f1125495c2ea96b45
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 16:27:48 2009 -0400

    [HB] Fix wrong method signature

 src/hb-ot-layout-common-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 4ff2a58952f010c6252f06e5f404d6840d257250
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 18 15:49:23 2009 -0400

    Bug 592194 -  Fix missing _SC_PAGE_SIZE macro

    Autoconfiscate a simple call to mprotect() even more.

 src/hb-blob.c | 94
 ++++++++++++++++++++++++++++++++++++++---------------------
 1 file changed, 60 insertions(+), 34 deletions(-)

commit 3c69bd46e27069fac0bfdefdecf5492c17eb01df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 17 16:48:13 2009 -0400

    [HB] Avoid int overflow in GPOS

    Bug 592036 - integer overflow bug causes misrendering of Nepali
    characters

 src/hb-ot-layout-gpos-private.hh | 20 ++++++++++----------
 src/hb-private.h		  |  3 +++
 2 files changed, 13 insertions(+), 10 deletions(-)

commit b2b18ef43c5bac6a5bb8412da7c9a37f815d4deb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 19:37:18 2009 -0400

    [HB] Simplify loop

 src/hb-ot-layout-gpos-private.hh | 31 ++++++++++++++-----------------
 1 file changed, 14 insertions(+), 17 deletions(-)

commit b41f210d12d8df48e645823463343f7e14b0ddd0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 19:33:24 2009 -0400

    [HB] Merge mark positionin code between three types of lookups

 src/hb-ot-layout-gpos-private.hh | 95
 ++++++++++++----------------------------
 1 file changed, 29 insertions(+), 66 deletions(-)

commit cd33cb9ed84308da72bd7c64b9355dc2410c63ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 18:42:42 2009 -0400

    [HB] More minor shuffling

 src/hb-open-type-private.hh	    | 3 ---
 src/hb-ot-layout-common-private.hh | 5 +++++
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 80e2aa2e1bfa2c8ecedcfa4cce8cadeb15792ac3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 18:40:56 2009 -0400

    [HB] Move code around

 src/hb-open-type-private.hh	    | 21 +++++++++++++++++++++
 src/hb-ot-layout-common-private.hh | 19 -------------------
 2 files changed, 21 insertions(+), 19 deletions(-)

commit 3564ee5216004d45d30b0ded61184cf8dde5dd89
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 18:32:56 2009 -0400

    [HB] Correctly sanitize LigatureAttach

 src/hb-open-type-private.hh	    | 14 ++++++++++----
 src/hb-ot-layout-common-private.hh |  4 ++++
 src/hb-ot-layout-gdef-private.hh   |  4 ++--
 src/hb-ot-layout-gpos-private.hh   |  6 +++---
 4 files changed, 19 insertions(+), 9 deletions(-)

commit cb71a2fb76c6ddee050f775eb299ee44230c3ac9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 18:14:03 2009 -0400

    [HB] Simplify MarkBase and MarkLig too

 src/hb-ot-layout-gpos-private.hh | 127
 +++++++++++++++------------------------
 1 file changed, 48 insertions(+), 79 deletions(-)

commit dfa54f4440960c39d37ef02fff4c0d9eb315d4b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 17:53:31 2009 -0400

    [HB] Simplify MarkMark

 src/hb-ot-layout-gpos-private.hh | 29 ++++++++++++++++-------------
 1 file changed, 16 insertions(+), 13 deletions(-)

commit 815a73e4202ca17677f12e862b70ca8724cf2f57
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 17:31:16 2009 -0400

    [HB] Fix possible int overflows during sanitize

 src/TODO			  |  1 -
 src/hb-open-type-private.hh	  | 22 ++++++++++++++++++++++
 src/hb-ot-layout-gpos-private.hh | 15 ++++++++-------
 3 files changed, 30 insertions(+), 8 deletions(-)

commit ae728e51e94d18d731b7c8dc524da1a4f427d63b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 16:41:00 2009 -0400

    [HB] Debug output for SANITIZE_MEM()

 src/hb-open-type-private.hh | 34 +++++++++++++++++++++++-----------
 1 file changed, 23 insertions(+), 11 deletions(-)

commit 41895506cb6a41b1a833866f8822261ea449ea0b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 16:25:33 2009 -0400

    [HB] Use inline function for SANITIZE_MEM()

 src/hb-open-type-private.hh | 33 ++++++++++++++++++++-------------
 1 file changed, 20 insertions(+), 13 deletions(-)

commit 95528131b5ab9fc9e265ace715832135ebd457a4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 16:17:32 2009 -0400

    [HB] Use SANITIZE_THIS() when applicable

 src/hb-open-type-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 5769538abfe153c503da4801649493e57a9854c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 14 16:12:22 2009 -0400

    [HB] Add note about auditing sanitize code for overflows

 src/TODO			  | 1 +
 src/hb-ot-layout-gpos-private.hh | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit 15232e26f4a89dab1b6de35ad9d3d16e75bf93d0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 13 17:13:25 2009 -0400

    [HB] Add empty hb_shape() API

 src/Makefile.am |  2 ++
 src/hb-shape.c  | 40 ++++++++++++++++++++++++++++++++++++++++
 src/hb-shape.h  | 53
 +++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 95 insertions(+)

commit 2866d2974b6768e93cc7d473d14c5a8abae5f7fd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 13 11:47:08 2009 -0400

    [HB] Bitfield packing *is* very delicate

    Fix the second instance.

 src/hb-buffer.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit ec90ee23b29aab187c3fa209970aa97434c84b1b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 13 05:25:23 2009 -0400

    Bug 591511 – hh-blob.c does not compile using mingw on windows

    Check for sys/mman.h, not mprotect().

 src/hb-blob.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 12eae6d55d468ff2fbe2bc12bec188d313c671f9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 13 05:20:46 2009 -0400

    [HB] Fix buffer sizing issue with mingw gcc

    Bit field packing is a delicate field.  Issue reported in comment
    3 here:
    http://bugzilla.gnome.org/show_bug.cgi?id=591511

 src/hb-buffer-private.h | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 6936706cd77f96961a1239d0c9dc8ede64d7f06d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 19:45:50 2009 -0400

    Bug 591413 – needs to link with libstdc++

    Enforce -fno-exceptions better.

 src/Makefile.am | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c486ea9c3582710474c1085c21c1dc5e2700adc3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 19:36:29 2009 -0400

    Bug 591511 – hb-blob.c does not compile using mingw on windows

    Only call mprotect() when available.  For optimal performance, a win32
    way to make memory writeable needs to be added.

 src/hb-blob.c | 8 ++++++++
 1 file changed, 8 insertions(+)

commit a579584594f1ca4781f1c5b92ad78513c0b37480
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 19:23:16 2009 -0400

    [HB] Add comment

 src/hb-buffer-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b6e66ee102eb5b64d945e5a73ab63fe8cac5edcb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 16:50:28 2009 -0400

    [HB] Always clear positions if dirty, before returning to user

 src/hb-buffer.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit e4679d9fae43f3219c476c5b9e411d1f5d0d5bae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 16:47:27 2009 -0400

    [HB] Fix _hb_buffer_next() when positioning

    We were copying glyphs to output.  This should not happen when in
    GPOS.  Back then it was fine, then some optimizations broke then
    assumption.

 src/hb-buffer-private.h |  1 +
 src/hb-buffer.c	 | 12 ++++++++++++
 2 files changed, 13 insertions(+)

commit 5ccf1ba339d6ffb4469f1c4f20d8d8d00012c857
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 15:55:23 2009 -0400

    [HB] Fixed signedness warnings

 src/hb-open-type-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit f71329147bd3087588cfeafd6feff45f29d1ca7a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 15:48:44 2009 -0400

    [HB] Ouch.	Fix compilation.

 src/hb-ot-layout-gpos-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 0532ed160c678b5404b20594fd2ca9a640bf6a0a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 12 15:40:04 2009 -0400

    [HB] Fix invalid access / overflow on x86-64

    Bug 591557 – [HB] crash scrolling the evolution message list
    Bug 591576 – crashed with SIGSEGV at pango

 src/hb-ot-layout-gpos-private.hh | 21 ++++++++++++---------
 src/hb-ot-layout-gsub-private.hh |  2 --
 2 files changed, 12 insertions(+), 11 deletions(-)

commit 8d70312c7b899131c3aafa7a43527ef3ced33bfe
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:50:51 2009 -0400

    [HB] Add hb_font_funcs_make_immutable()

 src/hb-font-private.h |  4 ++++
 src/hb-font.cc        | 17 +++++++++++++++--
 src/hb-font.h	       |  3 +++
 3 files changed, 22 insertions(+), 2 deletions(-)

commit 3284d05da27c338d94f0da99df66d924cd9d6717
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:45:57 2009 -0400

    [HB] Add missing initializer

 src/hb-font.cc | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 081819ea8b98c0a4b4dffe8d4aca3512f9798719
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:40:28 2009 -0400

    [OT] Hookup glib unicode funcs

 src/hb-buffer.c     | 14 +++++++-------
 src/hb-glib.c	     |	4 +++-
 src/hb-glib.h	     |	4 ++--
 src/hb-ot-layout.cc | 10 +++++-----
 src/hb-private.h    |	2 +-
 5 files changed, 18 insertions(+), 16 deletions(-)

commit 49f261df2aa753e8b09e97f7835e6a827f92970a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:35:05 2009 -0400

    [HB] Add hb-glib

 src/Makefile.am	  |  4 +++-
 src/hb-glib.c		  | 56
 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-glib.h		  | 41 +++++++++++++++++++++++++++++++++++
 src/hb-unicode-private.h |  2 +-
 src/hb-unicode.c	  | 10 ++++-----
 src/hb-unicode.h	  |  6 +++---
 6 files changed, 109 insertions(+), 10 deletions(-)

commit eb27ec0cef0d92740875ab5035b53acc639e5fae
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:25:28 2009 -0400

    [HB] Add hb_unicode_funcs_make_immutable()

 src/hb-unicode-private.h |  2 ++
 src/hb-unicode.c	  | 22 +++++++++++++++++-----
 src/hb-unicode.h	  |  2 ++
 3 files changed, 21 insertions(+), 5 deletions(-)

commit af9e104028b7cdc1fbba0eb1d86cfa4d5258657f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:21:33 2009 -0400

    [HB] Use nil unicode funcs in nil face

 src/hb-font.cc		  | 7 ++++---
 src/hb-unicode-private.h | 3 +++
 src/hb-unicode.c	  | 2 +-
 3 files changed, 8 insertions(+), 4 deletions(-)

commit 48910f8f0034c54b4e11cef3d08aa40e52c06b28
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 23:05:05 2009 -0400

    [HB] Initialize unicode funcs to nil getters

 src/hb-unicode.c | 29 +++++++++++++++++++----------
 1 file changed, 19 insertions(+), 10 deletions(-)

commit 04cc0a29ee1472c318c36efcd19b9c1a6657d9ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 22:58:56 2009 -0400

    [HB] Flesh out Unicode funcs

 src/hb-object-private.h  |  2 +-
 src/hb-unicode-private.h | 12 ++++-----
 src/hb-unicode.c	  | 67
 ++++++++++++++++++++++++++++++++++++++++++------
 src/hb-unicode.h	  |  3 ---
 4 files changed, 65 insertions(+), 19 deletions(-)

commit 299f08961ffcea27e8def4f0743d0c86ef8dadf1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 22:47:57 2009 -0400

    [HB] Implement buffer UTF-X input

 src/hb-buffer.c | 110
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-buffer.h |  12 +++----
 2 files changed, 116 insertions(+), 6 deletions(-)

commit 1b7b97f28ac192006ca5b6d1cc9fbc80fa2bdb55
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 21:10:37 2009 -0400

    [HB] Add buffer UTF-X API

 src/hb-buffer.h | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit fbaf8ffa098bd2b6fb4f4bc2d04b360a319c4af5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 20:59:25 2009 -0400

    [HB] Add hb_buffer_reverse()

 src/hb-buffer.c | 32 +++++++++++++++++++++++++++++---
 src/hb-buffer.h |  7 +++++++
 2 files changed, 36 insertions(+), 3 deletions(-)

commit cbe5a4e08e6c2ccfdf98e630d48ec9da69374516
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 20:24:49 2009 -0400

    [HB] Reuse the positions array as alt string array

 src/hb-buffer-private.h |  1 -
 src/hb-buffer.c	 | 28 +++++++++-------------------
 2 files changed, 9 insertions(+), 20 deletions(-)

commit 5c44188455ca1b696aa24b20c3a83877dfae2fb2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 20:05:16 2009 -0400

    [HB] Start adding Unicode funcs

 src/Makefile.am	  |   3 +
 src/hb-font-private.h	  |  29 ++-----
 src/hb-font.cc		  | 163 ++++++++++-------------------------
 src/hb-font.h		  | 140 ++++++++++--------------------
 src/hb-unicode-private.h |  54 ++++++++++++
 src/hb-unicode.c	  |  89 +++++++++++++++++++
 src/hb-unicode.h	  | 220
 +++++++++++++++++++++++++++++++++++++++++++++++
 7 files changed, 463 insertions(+), 235 deletions(-)

commit 20b035dad41247076815a2bbb0346d63058b322f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 19:00:36 2009 -0400

    [HB] Put C++ inline's back

    Apparetly in C++, inline means a totally different thing.

 src/hb-open-file-private.hh	      | 14 +++++++-------
 src/hb-open-type-private.hh	      | 16 ++++++++--------
 src/hb-ot-layout-common-private.hh   | 12 ++++++------
 src/hb-ot-layout-gdef-private.hh     |  4 ++--
 src/hb-ot-layout-gpos-private.hh     | 12 ++++++------
 src/hb-ot-layout-gsub-private.hh     | 12 ++++++------
 src/hb-ot-layout-gsubgpos-private.hh | 12 ++++++------
 7 files changed, 41 insertions(+), 41 deletions(-)

commit a62f776d8e7e3e57d28ee71b34abab0a5b8471eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 13:57:02 2009 -0400

    [HB] Don't override CXX compiler

    Just add couple of options to it (still assuming gcc)

 src/Makefile.am | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 6bdab706ecb41c1305e85d041a586e86c54d0ab7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 10 09:35:11 2009 -0400

    [HB] Indent

 src/hb-ot-layout.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 797724904a3ab294f8390d4ff80c299d8213a5c6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 9 22:25:17 2009 -0400

    [HB] Remove unused code

 src/hb-ot-layout-gdef-private.hh | 10 ----------
 1 file changed, 10 deletions(-)

commit 284899ccbe79fda7405ab09d3092fc25fd89e810
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 9 22:10:39 2009 -0400

    [HB] Add a NEXT() macro

 src/hb-open-type-private.hh	      |  2 ++
 src/hb-ot-layout-common-private.hh   |  4 ++--
 src/hb-ot-layout-gsub-private.hh     |  8 ++++----
 src/hb-ot-layout-gsubgpos-private.hh | 24 ++++++++++++------------
 4 files changed, 20 insertions(+), 18 deletions(-)

commit 918572fc870dfd7596155ce700247a5bb024fb1a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 9 18:31:47 2009 -0400

    [HB] Remove done TODO item

 src/TODO | 1 -
 1 file changed, 1 deletion(-)

commit 67cb8111f209de26b3afa46e9fb7e4d01c9ecad4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 9 13:05:08 2009 -0400

    [HB] Print mark sets in main.cc

 src/main.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 17878255fa88e76cd503461fc1ade2ed365cebd2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 8 16:57:27 2009 -0400

    [HB] Remove hb_ot_layout_table_find_feature()

    That function doesn't make much sense as multiple features in the
    table may
    have the same tag.

 src/hb-ot-layout.cc | 16 ----------------
 src/hb-ot-layout.h  |	6 ------
 2 files changed, 22 deletions(-)

commit 468769b8f5332940278244e744ec2bd5a5dc5ee9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 8 16:53:23 2009 -0400

    [HB] Rename hb_ot_layout_feature_mask_t to hb_mask_t

 src/TODO			  |  1 -
 src/hb-buffer-private.h	  |  4 ++--
 src/hb-buffer.c		  | 12 ++++++------
 src/hb-buffer.h		  |  4 ++--
 src/hb-common.h		  |  1 +
 src/hb-ot-layout-gpos-private.hh | 12 ++++++------
 src/hb-ot-layout-gsub-private.hh | 14 +++++++-------
 src/hb-ot-layout.cc		  | 18 +++++++++---------
 src/hb-ot-layout.h		  | 34 +++++++++-------------------------
 9 files changed, 42 insertions(+), 58 deletions(-)

commit 7f96b39a9d5a81ba77e0c3dea8fe2cdb9957c4c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 8 16:37:22 2009 -0400

    [HB] Fix bug introduced recently

 src/hb-open-type-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit bff3c0fde5da04a70d1f7aeeb9fa2a75fe5c07f6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Aug 7 19:46:30 2009 -0400

    [HB] Remove clumsy macros and improve API

 src/TODO			      |   2 -
 src/hb-open-file-private.hh	      |  41 ++++++++--
 src/hb-open-type-private.hh	      | 104 +------------------------
 src/hb-ot-layout-common-private.hh   | 103 ++++++++++++++++++------
 src/hb-ot-layout-gsubgpos-private.hh |  35 +++++++--
 src/hb-ot-layout.cc		      | 146
 ++++++++++++-----------------------
 src/hb-ot-layout.h		      | 101 ++++++++++--------------
 7 files changed, 240 insertions(+), 292 deletions(-)

commit d0b657379bbe63602953412d6bc944b2a0f430eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:34:47 2009 -0400

    [HB] Fix various XXX issues

 src/hb-open-type-private.hh	  | 13 ++++++++++---
 src/hb-ot-layout-gdef-private.hh |  5 ++---
 2 files changed, 12 insertions(+), 6 deletions(-)

commit 82199868fb036b63799af761762225d45d36f575
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:28:45 2009 -0400

    [HB] Remove unused var

 src/hb-ot-layout-private.h | 2 --
 1 file changed, 2 deletions(-)

commit 07e69226cbd4167741fd868a3125487bbabb99dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:28:00 2009 -0400

    [HB] Remove another stale XXX

 src/hb-ot-layout.cc | 2 --
 1 file changed, 2 deletions(-)

commit e605c367c5627e7ab05af9cb59247a89290e598a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:27:28 2009 -0400

    [HB] Rebrand XXX as TODO

 src/hb-open-file-private.hh | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit c5a13048e21fcfcfd3b74f800e8d521e6245b451
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:26:38 2009 -0400

    [HB] Remove stale XXX

 src/hb-blob.c | 2 --
 1 file changed, 2 deletions(-)

commit 9e826ea2832f0444bcef9075b445d481a58a09c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 18:24:55 2009 -0400

    [HB] Fix unaligned access

 src/hb-open-type-private.hh | 20 +++++++++++++++++---
 src/hb-private.h	     | 22 ++++++++++++++++++++++
 2 files changed, 39 insertions(+), 3 deletions(-)

commit 71a8344a5eeaa34e31d53138cf3bbe30b819f83c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 14:28:18 2009 -0400

    [HB] Remove a few 'inline's, though the compiler mostly ignores them

 src/hb-open-file-private.hh	      |  1 -
 src/hb-open-type-private.hh	      | 16 ++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh |  6 +++---
 3 files changed, 11 insertions(+), 12 deletions(-)

commit 7f3d5c8166e5205e9d9bf8b4b2f31d44387a8006
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 13:33:51 2009 -0400

    [HB] Fix blob to use a actual mutex

 src/hb-blob.c		 | 125
 +++++++++++++++++++++++++++++++++++-------------
 src/hb-object-private.h |   4 +-
 src/hb-private.h	 |  20 +++++---
 3 files changed, 106 insertions(+), 43 deletions(-)

commit a794ebf4be9896393f4badf02905a4007981a588
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 12:32:35 2009 -0400

    [HB] Use glib again

 src/Makefile.am	 |  5 +++--
 src/hb-blob.c		 |  4 ++--
 src/hb-object-private.h | 19 ++++++-------------
 src/hb-private.h	 | 45
 ++++++++++++++++++++++++++-------------------
 4 files changed, 37 insertions(+), 36 deletions(-)

commit 9b76a290a94f2603f3cb9498ae976125347cf54b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 10:27:38 2009 -0400

    [HB] Improve debug output

 src/hb-open-type-private.hh | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

commit 9faee63034d3965735bd6362c0beeca1613bd771
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Aug 6 10:24:49 2009 -0400

    [HB] Minor

 src/hb-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f72059ee6946d9b4812b794f662ee83c7e25fe53
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 15:35:02 2009 -0400

    [HB] Add a few TODO items

 src/TODO | 8 +++++---
 1 file changed, 5 insertions(+), 3 deletions(-)

commit 0d77ab8a73f57c9fca4c6f9301dae394d79526e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 15:27:42 2009 -0400

    [HB] Improve debug output

 src/hb-open-type-private.hh | 8 ++++++++
 1 file changed, 8 insertions(+)

commit 268cac4c9ef8cb592cfb8507273332165b8d3ad3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 15:21:48 2009 -0400

    [HB] Fix blob unlock

 src/hb-blob.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 7acb389569cf99c6bae9db31a8ed7c7007fbb566
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 15:20:34 2009 -0400

    [HB] Improve debug output and fix mprotect bug

 src/hb-blob.c		     | 57
 ++++++++++++++++++++++++++++++++++++++-------
 src/hb-open-type-private.hh | 30 +++++++++++-------------
 src/hb-private.h	     |	3 ++-
 3 files changed, 65 insertions(+), 25 deletions(-)

commit ec9f8db0d3cad146801b7dc5c59e517de3b6fa34
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 14:52:03 2009 -0400

    [HB] Minor

 src/hb-private.h | 3 +++
 1 file changed, 3 insertions(+)

commit d341881d9a0f835f691b121480046081ad162918
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Aug 5 14:49:25 2009 -0400

    [HB] Fix build of main.cc

 src/Makefile.am | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 8f3be25e7ec88ea451ee8097bf32e5f729f4fef9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 23:43:40 2009 -0400

    [HB] turn debugging off

 src/hb-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 62ed5850d9e0e0d0231889470d58e815420c21e5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 23:30:32 2009 -0400

    [HB] Fix another sanitize() bug;  hopefully it's the last one

 src/hb-ot-layout-common-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 90482b68178b687c0f0a3f82cd6a36b2c0bb9384
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 23:24:35 2009 -0400

    [HB] Fix a couple other sanitize() bugs

 src/hb-ot-layout-gpos-private.hh | 4 ++--
 src/hb-ot-layout-gsub-private.hh | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 4f3ad9115a4161fc23fa559c26082440196217ec
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 23:01:23 2009 -0400

    [HB] More debugging output

 src/hb-open-type-private.hh | 45
 ++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 40 insertions(+), 5 deletions(-)

commit 8cd6fa28d1b77100491519b8dedb2e113508bf59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 22:55:44 2009 -0400

    [HB] Fix fatal Sanitizer bug

 src/hb-open-type-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2870ac5e5d5d87646a4b273a9805fb3fcf280f97
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 22:43:47 2009 -0400

    [HB] Add missing sanitize

 src/hb-open-file-private.hh | 1 +
 1 file changed, 1 insertion(+)

commit b28815c1f6e46d38471cacbc31248ca6fda8c4d1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 22:35:36 2009 -0400

    [HB] Add sanitize debugging facilities

 src/hb-open-file-private.hh	      |  4 ++++
 src/hb-open-type-private.hh	      | 43
 +++++++++++++++++++++++++++++++-----
 src/hb-ot-layout-common-private.hh   | 17 ++++++++++++++
 src/hb-ot-layout-gdef-private.hh     | 10 +++++++++
 src/hb-ot-layout-gpos-private.hh     | 28 +++++++++++++++++++++++
 src/hb-ot-layout-gsub-private.hh     | 18 +++++++++++++++
 src/hb-ot-layout-gsubgpos-private.hh | 16 ++++++++++++++
 src/hb-private.h		      |  6 ++++-
 8 files changed, 136 insertions(+), 6 deletions(-)

commit 7edb430f9182723b7b720708c56088cec1200a70
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 22:06:57 2009 -0400

    [HB] Rename open-types to open-type; beauty

 src/Makefile.am		    |	2 +-
 src/hb-open-file-private.hh	    |	2 +-
 src/hb-open-type-private.hh	    | 565
 +++++++++++++++++++++++++++++++++++++
 src/hb-open-types-private.hh	    | 565
 -------------------------------------
 src/hb-ot-layout-common-private.hh |	2 +-
 5 files changed, 568 insertions(+), 568 deletions(-)

commit f4b58d3fc2956a9d1b6178588d809c781f7a5c0c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 21:47:29 2009 -0400

    [HB] Save edit even if not writeable

 src/hb-open-types-private.hh | 6 ++----
 1 file changed, 2 insertions(+), 4 deletions(-)

commit 9bd629ccd064e739789e504c41ad875eed93abba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 21:42:23 2009 -0400

    [HB] Fix warnings

 src/hb-open-file-private.hh	  | 1 +
 src/hb-open-types-private.hh	  | 5 +++++
 src/hb-ot-layout-gsub-private.hh | 3 +--
 3 files changed, 7 insertions(+), 2 deletions(-)

commit 5ff4e13143c227fa57854c987b5a98e610f89361
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 21:35:32 2009 -0400

    [HB] Avoid infinite recusion in Extension sanitize()

 src/hb-ot-layout-gpos-private.hh | 1 +
 src/hb-ot-layout-gsub-private.hh | 1 +
 2 files changed, 2 insertions(+)

commit d60bb8ca2ae6edf29b2227b56c57f0d16879370b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 21:32:57 2009 -0400

    [HB] Hook Sanitizer up.  Hell's breaking loose right now

 src/hb-font.cc		      |  7 ++-----
 src/hb-open-types-private.hh |  2 +-
 src/hb-ot-layout.cc	      | 12 ++++++------
 3 files changed, 9 insertions(+), 12 deletions(-)

commit 679f41fe61242aa8d7f45b64bdb66395aa530fe2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 21:32:06 2009 -0400

    [HB] Fix leak

 src/hb-ot-layout.cc | 2 ++
 1 file changed, 2 insertions(+)

commit 4e8a0602bb0b3cbf7f26cc38790e37cdec7b0b37
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 20:52:47 2009 -0400

    [HB] Add Sanitizer

 src/hb-open-types-private.hh | 58
 ++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 53 insertions(+), 5 deletions(-)

commit 2765d333e523a13dbd932fa33f3b39a5cf83f0f7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 20:50:18 2009 -0400

    [HB] Add XXX

 src/hb-open-file-private.hh | 3 +++
 1 file changed, 3 insertions(+)

commit a328d66e6a8122f7d4d71941449d4d0136203e08
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 20:27:05 2009 -0400

    [HB] Minor cleanup

 src/hb-ot-layout-gdef-private.hh     | 2 +-
 src/hb-ot-layout-gpos-private.hh     | 2 +-
 src/hb-ot-layout-gsub-private.hh     | 2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 4 ++--
 4 files changed, 5 insertions(+), 5 deletions(-)

commit 577c1116493d785d3455626612f97dabb383abf0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 19:31:02 2009 -0400

    [HB] Shuffle code around

 src/hb-open-types-private.hh | 127
 ++++++++++++++++++++++---------------------
 1 file changed, 65 insertions(+), 62 deletions(-)

commit b1e187fc6365f5355c652a61494a5e9f6acf51b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 15:28:49 2009 -0400

    [HB] More sanitize infrastructure

 src/hb-open-types-private.hh | 29 ++++++++++++++++++++++++++++-
 1 file changed, 28 insertions(+), 1 deletion(-)

commit b508e5ccd528f3f0f49f545bd5f30a525d5abd5a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 15:07:24 2009 -0400

    [HB] open-file sanitize()

 src/hb-open-file-private.hh  | 46
 ++++++++++++++++++++++++++++++++++++++++----
 src/hb-open-types-private.hh | 13 +++++++++++++
 2 files changed, 55 insertions(+), 4 deletions(-)

commit 738c54d9caa3affc4b434e56bfb810ff6dc9b0b3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 14:42:46 2009 -0400

    [HB] Tag sanitize()

 src/hb-open-types-private.hh	    | 8 ++++++++
 src/hb-ot-layout-common-private.hh | 6 +-----
 2 files changed, 9 insertions(+), 5 deletions(-)

commit e49a84c9e37c08808880e74e94c8160731ababa1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 14:33:23 2009 -0400

    [HB] GDEF sanitize()

 src/hb-ot-layout-gdef-private.hh     | 54
 ++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gpos-private.hh     |  2 +-
 src/hb-ot-layout-gsub-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh |  2 +-
 4 files changed, 57 insertions(+), 3 deletions(-)

commit 18939487d04dba86880b0af8e89cf2cc44a431f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 14:27:56 2009 -0400

    [HB] Fix Extension sanitize()

 src/hb-ot-layout-gpos-private.hh     | 3 ++-
 src/hb-ot-layout-gsub-private.hh     | 3 ++-
 src/hb-ot-layout-gsubgpos-private.hh | 2 +-
 3 files changed, 5 insertions(+), 3 deletions(-)

commit f2be750981be58a723831e69b1670275851d4be9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 14:12:46 2009 -0400

    [HB] Remove stale TODO

 src/hb-ot-layout.cc | 2 --
 1 file changed, 2 deletions(-)

commit ac26e2a838d1266bb5f39c43245eb2a52c5e072d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 14:10:39 2009 -0400

    [HB] Hookup NEUTER()

 src/hb-open-types-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 15164d9258a74122a4db748d35532bd72c47cec2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 13:57:41 2009 -0400

    [HB] Fix mix warnings

 src/Makefile.am		    |  2 +-
 src/hb-font.cc			    | 15 +++------------
 src/hb-open-types-private.hh	    |  2 +-
 src/hb-ot-layout-common-private.hh |  6 +++---
 src/hb-ot-layout-gdef-private.hh   |  2 +-
 src/hb-ot-layout-gpos-private.hh   |  9 ++++-----
 src/hb-ot-layout.cc		    |  2 +-
 src/main.cc			    |  4 +---
 8 files changed, 15 insertions(+), 27 deletions(-)

commit 42b778f89e0818fe06910ce04e2203485823da09
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 13:30:49 2009 -0400

    [HB] GPOS sanitize()

 src/hb-open-types-private.hh	  |  22 ++++-
 src/hb-ot-layout-gpos-private.hh | 195
 ++++++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout-gsub-private.hh |   2 -
 3 files changed, 213 insertions(+), 6 deletions(-)

commit dc9c4d93cd0f3ac991f32df08c1c17fc389054c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 12:26:26 2009 -0400

    [HB] Sanitize DeviceTable

 src/hb-open-types-private.hh	    |  8 ++++----
 src/hb-ot-layout-common-private.hh | 17 ++++++++++++++---
 src/hb-ot-layout-gsub-private.hh   |  2 +-
 3 files changed, 19 insertions(+), 8 deletions(-)

commit ad3a3cd4955661c591b20af1f2c493432f0bebf0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 12:13:52 2009 -0400

    [HB] More casts

 src/hb-ot-layout-gsub-private.hh | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 95639fccc1ef18eadeb737e8b611d1d1f1315fc2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 12:05:24 2009 -0400

    [HB] Fix couple of bugs

 src/hb-open-types-private.hh | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 2b5a59c277f4c5bf7aac9a9005054763e322e02d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 11:38:50 2009 -0400

    [HB] More cast cleanup

 src/hb-open-types-private.hh	      | 23 ++++++++-----
 src/hb-ot-layout-common-private.hh   |  7 ++--
 src/hb-ot-layout-gsub-private.hh     | 27 ++++++---------
 src/hb-ot-layout-gsubgpos-private.hh | 64
 +++++++++++++-----------------------
 4 files changed, 50 insertions(+), 71 deletions(-)

commit 196598bbccff08415ff5192314cba044df258cad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 11:04:32 2009 -0400

    [Hb] Use reinterpret casts instead of direct casts to char *

 src/hb-open-file-private.hh	      |  4 ++--
 src/hb-open-types-private.hh	      | 19 +++++++++++-----
 src/hb-ot-layout-common-private.hh   |  8 +++----
 src/hb-ot-layout-gpos-private.hh     | 12 +++++-----
 src/hb-ot-layout-gsub-private.hh     | 20 ++++++++--------
 src/hb-ot-layout-gsubgpos-private.hh | 44
 ++++++++++++++++++------------------
 6 files changed, 57 insertions(+), 50 deletions(-)

commit 92b5dd8e71e1bdeaa6e86a53f167683a3f5f4289
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 10:41:32 2009 -0400

    [HB] Merge more templates

 src/hb-open-types-private.hh | 167
 ++++++++++++++-----------------------------
 1 file changed, 55 insertions(+), 112 deletions(-)

commit e6ab2c59ba2d37942ac5fcbfe61d38b7e359ac8c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 10:23:01 2009 -0400

    [HB] Simplify indirect sanitize()

 src/hb-open-types-private.hh	    | 52
 ++++++++++++++++++--------------------
 src/hb-ot-layout-common-private.hh | 11 +-------
 2 files changed, 26 insertions(+), 37 deletions(-)

commit 29d8644a315ebe6976f15db2fe96069376d9b8cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 02:27:37 2009 -0400

    [HB] Finish GSUB sanitize()

 src/hb-ot-layout-gsub-private.hh | 21 ++++++++++++++++++++-
 1 file changed, 20 insertions(+), 1 deletion(-)

commit cf086adca1b7b5a361a248808f9a847e513d3630
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 02:14:24 2009 -0400

    [HB] Add comment

 src/hb-ot-layout-common-private.hh | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit a97ce570ab693190350886e4e80942851c4d5727
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 02:10:48 2009 -0400

    [HB] Optimize sanitize()

 src/hb-open-types-private.hh | 7 ++++++-
 1 file changed, 6 insertions(+), 1 deletion(-)

commit cd3827ee567612c5500206b62840702fc956e0f5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 02:09:34 2009 -0400

    [HB] More sanitize()

 src/hb-open-file-private.hh	      |  2 +-
 src/hb-open-types-private.hh	      | 12 ++++---
 src/hb-ot-layout-common-private.hh   | 64
 +++++++++++++++++++++++++++++++-----
 src/hb-ot-layout-gdef-private.hh     |  2 +-
 src/hb-ot-layout-gsubgpos-private.hh | 15 +++++++--
 5 files changed, 79 insertions(+), 16 deletions(-)

commit 70de50c11ed7037b20eb6814ff60f6e32a9944e4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Aug 4 00:58:28 2009 -0400

    [HB] Start sanitize()

 src/hb-open-types-private.hh	      | 105 ++++++++++++++++++++++++++++-
 src/hb-ot-layout-common-private.hh   |  48 +++++++++++++-
 src/hb-ot-layout-gsub-private.hh     | 125
 ++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout-gsubgpos-private.hh | 104 +++++++++++++++++++++++++++++
 4 files changed, 376 insertions(+), 6 deletions(-)

commit 5fc22e647c8a2bf6d3cb59185e351ac625e7e322
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 3 22:43:02 2009 -0400

    [HB] Remove use of typeof()

 src/hb-blob.c		 |  4 ++--
 src/hb-buffer.c	 |  2 +-
 src/hb-font.cc		 | 14 +++++++-------
 src/hb-object-private.h |  4 ++--
 4 files changed, 12 insertions(+), 12 deletions(-)

commit 70e0f2a75ec1559f2f70ada837ce4bc4baca49e3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 3 22:01:47 2009 -0400

    [HB] Make it all work again

 src/hb-font.cc		    | 23 ++++++++++++---------
 src/hb-ot-layout-private.h |  9 +++++---
 src/hb-ot-layout.cc	    | 51
 +++++++++++++++++++++++-----------------------
 3 files changed, 44 insertions(+), 39 deletions(-)

commit 23c86aa0009324433e78fcd0c47f2c0ff14b1949
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 3 21:40:20 2009 -0400

    [HB] Use face_t directly instead of ot_layout_t

 src/TODO			      |   1 +
 src/hb-font-private.h		      |   4 +
 src/hb-font.cc			      |  74 +++++++++---
 src/hb-font.h			      |   3 +
 src/hb-object-private.h	      |  36 +++---
 src/hb-ot-layout-gdef-private.hh     |   2 +
 src/hb-ot-layout-gpos-private.hh     |  14 +--
 src/hb-ot-layout-gsub-private.hh     |  32 ++---
 src/hb-ot-layout-gsubgpos-private.hh |   8 +-
 src/hb-ot-layout-private.h	      |  40 ++++---
 src/hb-ot-layout.cc		      | 220
 +++++++++++++++--------------------
 11 files changed, 237 insertions(+), 197 deletions(-)

commit fc6c94002dd5478cf9fbdaff12d8374a786c85e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 3 21:27:08 2009 -0400

    [HB] Simplify sub-blob support

 src/hb-blob.c | 172
 ++++++++++++++++++++++------------------------------------
 src/hb-blob.h |  14 +++--
 2 files changed, 74 insertions(+), 112 deletions(-)

commit a26442437ae9f11674e0d68cd5cbf395ade7695d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Aug 3 17:53:29 2009 -0400

    [HB] Add sub-blobs

 src/hb-blob.c | 162
 +++++++++++++++++++++++++++++++++++++++++++++++++---------
 src/hb-blob.h |  12 ++++-
 2 files changed, 147 insertions(+), 27 deletions(-)

commit b28e21b90c4105a0c2e17009b748777294614664
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 20:06:48 2009 -0400

    [HB] Rename hb-font.c to hb-font.cc

 src/Makefile.am |   2 +-
 src/hb-font.c	 | 349
 --------------------------------------------------------
 src/hb-font.cc  | 349
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 350 insertions(+), 350 deletions(-)

commit 5f5b24f99f52bbc922e238b65c06061ba07c8548
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 20:03:12 2009 -0400

    [OT] Rename C++ header files from *.h to *.hh

 src/Makefile.am		      |   14 +-
 src/hb-open-file-private.h	      |  145 ----
 src/hb-open-file-private.hh	      |  145 ++++
 src/hb-open-types-private.h	      |  386 ----------
 src/hb-open-types-private.hh	      |  386 ++++++++++
 src/hb-ot-layout-common-private.h    |  447 -----------
 src/hb-ot-layout-common-private.hh   |  447 +++++++++++
 src/hb-ot-layout-gdef-private.h      |  320 --------
 src/hb-ot-layout-gdef-private.hh     |  320 ++++++++
 src/hb-ot-layout-gpos-private.h      | 1355
 ----------------------------------
 src/hb-ot-layout-gpos-private.hh     | 1355
 ++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gsub-private.h      |  751 -------------------
 src/hb-ot-layout-gsub-private.hh     |  751 +++++++++++++++++++
 src/hb-ot-layout-gsubgpos-private.h  |  773 -------------------
 src/hb-ot-layout-gsubgpos-private.hh |  773 +++++++++++++++++++
 src/hb-ot-layout.cc		      |    8 +-
 src/main.cc			      |    6 +-
 17 files changed, 4191 insertions(+), 4191 deletions(-)

commit 2098a021a826e76ee27d5db74e32738d7d1c3d30
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 19:57:00 2009 -0400

    [HB] Move OT file handling out of ot-layout

 src/Makefile.am		   |   3 +-
 src/hb-open-file-private.h	   | 145 +++++++++++
 src/hb-open-types-private.h	   | 386 +++++++++++++++++++++++++++++
 src/hb-ot-layout-common-private.h |   4 +-
 src/hb-ot-layout-open-private.h   | 495
 --------------------------------------
 src/hb-ot-layout.cc		   |   2 +-
 src/main.cc			   |   4 +-
 7 files changed, 539 insertions(+), 500 deletions(-)

commit 0ead481a5a8623103565fd7d924666e7342278dd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 17:41:36 2009 -0400

    [HB] Port ot-layout to new public API

 src/TODO			     |	 1 +
 src/hb-common.h		     |	 1 +
 src/hb-font.c			     |	 9 +
 src/hb-font.h			     |	 3 +
 src/hb-ot-layout-gdef-private.h     |	32 ++--
 src/hb-ot-layout-gpos-private.h     | 106 ++++++------
 src/hb-ot-layout-gsub-private.h     |	50 +++---
 src/hb-ot-layout-gsubgpos-private.h |	12 +-
 src/hb-ot-layout-private.h	     |	36 +++-
 src/hb-ot-layout.cc		     | 334
 ++++++++++++++++++++----------------
 src/hb-ot-layout.h		     | 207 ++++++++++------------
 11 files changed, 415 insertions(+), 376 deletions(-)

commit 678bed433371d90536976a2d57195c1e1867f766
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 15:35:31 2009 -0400

    [HB] Add top-level header files

 src/Makefile.am |  2 ++
 src/hb-ot.h	 | 34 ++++++++++++++++++++++++++++++++++
 src/hb.h	 | 35 +++++++++++++++++++++++++++++++++++
 3 files changed, 71 insertions(+)

commit 2c80296aa5991ad67483889147f5c84fefe54af2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Aug 2 15:20:22 2009 -0400

    [HB] Add XXX marks

 src/hb-ot-layout-private.h | 2 ++
 src/hb-ot-layout.cc	    | 7 ++-----
 2 files changed, 4 insertions(+), 5 deletions(-)

commit c46f8efd6ddd981b5724b2600ac98a80193385be
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 23:06:27 2009 -0400

    [HB] Rename _duplicate to _copy

    To be in line with cairo

 src/hb-font.c | 4 ++--
 src/hb-font.h | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit f1ebe44985e2192844cf1747a4e36ed81e715ce6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 22:55:11 2009 -0400

    [HB] Cleanup TODO

 src/TODO | 10 +---------
 1 file changed, 1 insertion(+), 9 deletions(-)

commit f1322e52d557726baa010be8d35a594748e8fa1a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 22:53:04 2009 -0400

    [HB] Cleanup public buffer structs

 src/hb-buffer-private.h	 | 46
 +++++++++++++++++++++++++++++++-------
 src/hb-buffer.c		 | 49
 +++++++++++++++++++++--------------------
 src/hb-buffer.h		 | 35 ++++++++++++++---------------
 src/hb-ot-layout-gpos-private.h |  8 +++----
 src/hb-ot-layout-private.h	 |  5 +++--
 src/hb-ot-layout.cc		 | 20 ++++++++---------
 6 files changed, 97 insertions(+), 66 deletions(-)

commit 6d5bb18e93d2a53350b342869a3ec8f25f0396c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 22:25:04 2009 -0400

    [OT] Match struct with HB's

 src/hb-buffer.c     |	6 +++---
 src/hb-buffer.h     |	2 +-
 src/hb-ot-layout.cc | 12 ++++++------
 3 files changed, 10 insertions(+), 10 deletions(-)

commit 11fbb5487d9900a019440ef8235f35c9f525decb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 22:19:06 2009 -0400

    [HB] Port buffert to new object API

 src/hb-buffer-private.h | 24 +++++++++++++++---
 src/hb-buffer.c	 | 65
 +++++++++++++++++++++++++++++++++++++------------
 src/hb-buffer.h	 | 53 +++++++++++++++++++++++++---------------
 3 files changed, 104 insertions(+), 38 deletions(-)

commit 0cc7bc59ea6e8f38bf1e196c558cca9862ac3302
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 21:38:39 2009 -0400

    [HB] Move typedef's around

 src/hb-blob.h	 |  2 ++
 src/hb-common.h |  9 ---------
 src/hb-font.h	 | 10 ++++++++++
 3 files changed, 12 insertions(+), 9 deletions(-)

commit a12dd324a3859496a95602d426aee34ce6c5c8a6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 21:36:15 2009 -0400

    [HB] Add get_reference_count()

 src/hb-blob.c		 |  6 ++++++
 src/hb-blob.h		 |  3 +++
 src/hb-font.c		 | 24 ++++++++++++++++++++++++
 src/hb-font.h		 | 12 ++++++++++++
 src/hb-object-private.h |  7 +++++++
 5 files changed, 52 insertions(+)

commit baec684fde2303edb16341bfcf1022cd72acf129
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 21:06:11 2009 -0400

    [HB] Remove glib dependency

 src/Makefile.am  |  7 ++-----
 src/hb-buffer.c  |  2 +-
 src/hb-private.h | 30 ++++++++++++++++++------------
 src/main.cc	  |  1 +
 4 files changed, 22 insertions(+), 18 deletions(-)

commit df66028781a7609a515980e64396e6f1044d764a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 20:46:02 2009 -0400

    [HB] Assorted compiler macros

 src/hb-ot-layout-open-private.h |  4 +-
 src/hb-private.h		 | 88
 +++++++++++++++++++++++++++++++----------
 2 files changed, 70 insertions(+), 22 deletions(-)

commit ba8d94ce3360bfaf2c530d01f2af69237018a531
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 20:29:22 2009 -0400

    [HB] Simplify object creation

 src/Makefile.am	   |  2 +-
 src/hb-blob.c		   |  6 +--
 src/hb-font-private.h	   |  1 -
 src/hb-font.c		   | 37 ++++++------------
 src/hb-object-private.h   | 97
 +++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-private.h	   |  2 +
 src/hb-refcount-private.h | 87 ------------------------------------------
 7 files changed, 112 insertions(+), 120 deletions(-)

commit c62b503770325819f249885dfc9d4683a69c9efd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 19:54:49 2009 -0400

    [HB] Add abstract font and face API

    Not used yet.

 src/Makefile.am	   |   3 +
 src/hb-blob.c		   |   6 +-
 src/hb-font-private.h	   | 108 +++++++++++++++
 src/hb-font.c		   | 331
 ++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-font.h		   | 182 +++++++++++++++++++++++++
 src/hb-refcount-private.h |  14 +-
 6 files changed, 636 insertions(+), 8 deletions(-)

commit 35a7383c6138fd705560f0d4bb30659cbd1ab64c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 19:30:31 2009 -0400

    [HB] Simplify refcounting functions

 src/hb-blob.c		   | 32 ++++++++++----------------------
 src/hb-common.h	   |  2 ++
 src/hb-private.h	   |  2 ++
 src/hb-refcount-private.h | 31 ++++++++++++++++++++++++++++++-
 4 files changed, 44 insertions(+), 23 deletions(-)

commit 23af767a4475fecc1fe9fe9108f12c05c89bc8c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 19:10:41 2009 -0400

    [HB] Fix for dfont's with multiple faces

 src/hb-ot-layout-open-private.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit e97a95f2ea2770689bbf076d3c3ac404f273271e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Aug 1 19:05:44 2009 -0400

    [HB] Use calloc instead of malloc where feasible

 src/hb-blob.c	 | 8 +++++---
 src/hb-buffer.c | 4 ++--
 2 files changed, 7 insertions(+), 5 deletions(-)

commit 0090dc0f67b553d2f6eaaedc289c0956ade09ef6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 30 16:28:45 2009 -0400

    [HB] Remove hinting setting and use ppem==0 to mean "no hinting"

 src/hb-blob.h			 |  3 ---
 src/hb-common.h		 |  9 +++++++++
 src/hb-ot-layout-gpos-private.h | 36 ++++++++++++++++++++++++------------
 src/hb-ot-layout-private.h	 |  2 --
 src/hb-ot-layout.cc		 |  7 -------
 src/hb-ot-layout.h		 |  4 ----
 6 files changed, 33 insertions(+), 28 deletions(-)

commit f0954d1e08ae288eda9904e17108fc73f48c0b98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 30 15:33:57 2009 -0400

    [HB] Add a "blob" manager

 src/Makefile.am	   |   5 +-
 src/hb-blob.c		   | 181
 ++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-blob.h		   |  74 +++++++++++++++++++
 src/hb-private.h	   |   2 +
 src/hb-refcount-private.h |  54 ++++++++++++++
 5 files changed, 315 insertions(+), 1 deletion(-)

commit 02a370697d25b986dbf1d5c38f46a89a4833b495
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 29 18:41:25 2009 -0400

    [HB] Move direction to buffer

 src/hb-buffer.c		 |  9 +++++++++
 src/hb-buffer.h		 | 14 ++++++++++++++
 src/hb-ot-layout-gpos-private.h |  2 +-
 src/hb-ot-layout-private.h	 |  1 -
 src/hb-ot-layout.cc		 |  7 -------
 src/hb-ot-layout.h		 |  5 -----
 6 files changed, 24 insertions(+), 14 deletions(-)

commit 7cda6fa24c26887c5543d0657b07aad466452cb3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jul 29 18:37:57 2009 -0400

    [HB] Rename internal vars

 src/hb-ot-layout-gsubgpos-private.h | 56
 ++++++++++++++++++-------------------
 1 file changed, 28 insertions(+), 28 deletions(-)

commit b196e6f2743d631ef181f1116370be3055063d36
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 28 15:50:42 2009 -0400

    [HB] Fix buffer enlargement.  Ouch

 src/hb-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f9cd1014f8f4d0394b5e0e9eefc1e2af13c59cab
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Jul 28 15:43:34 2009 -0400

    Apply patch from Jonathan Kew

 src/hb-buffer.c     | 75
 ++++++++++++++++++++++++++++-------------------------
 src/hb-buffer.h     |	6 ++++-
 src/hb-ot-layout.cc | 31 ++++++++++++++++++++++
 src/hb-ot-layout.h  | 15 +++++++++++
 src/hb-private.h    |	2 +-
 5 files changed, 91 insertions(+), 38 deletions(-)

commit 2ebb89d63dd27e800f2b6cbf624924601105f48a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Jul 25 19:09:01 2009 -0400

    Revert "XX"

    This reverts commit c939f6aff405ca7b10b1f1538f46148bff719fcb.

 src/Makefile.am		     |	 2 -
 src/hb-buffer.c		     |	 9 ---
 src/hb-buffer.h		     |	14 -----
 src/hb-common.h		     |	 3 -
 src/hb-ot-layout-gdef-private.h     |	32 +++++------
 src/hb-ot-layout-gpos-private.h     | 108
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.h     |	46 +++++++--------
 src/hb-ot-layout-gsubgpos-private.h |	68 +++++++++++------------
 src/hb-ot-layout-private.h	     |	28 ++++------
 src/hb-ot-layout.cc		     |	30 ++++++++++
 src/hb-ot-layout.h		     |	 5 ++
 src/hb-private.h		     |	16 ------
 12 files changed, 174 insertions(+), 187 deletions(-)

commit 55520d2af172f5f6617b909e80cbd7d898f2bc15
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jun 10 23:26:51 2009 -0400

    XX

 src/Makefile.am		     |	 2 +
 src/hb-buffer.c		     |	 9 +++
 src/hb-buffer.h		     |	14 +++++
 src/hb-common.h		     |	 3 +
 src/hb-ot-layout-gdef-private.h     |	32 +++++------
 src/hb-ot-layout-gpos-private.h     | 108
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.h     |	46 +++++++--------
 src/hb-ot-layout-gsubgpos-private.h |	68 +++++++++++------------
 src/hb-ot-layout-private.h	     |	28 ++++++----
 src/hb-ot-layout.cc		     |	30 ----------
 src/hb-ot-layout.h		     |	 5 --
 src/hb-private.h		     |	16 ++++++
 12 files changed, 187 insertions(+), 174 deletions(-)

commit f53d434b9151c4ec43c148734b49bb165e522cc9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 30 22:17:32 2009 -0400

    [GPOS] Advance buffer cursor in SinglePos lookups.	Ouch!

 src/hb-ot-layout-gpos-private.h | 4 ++++
 1 file changed, 4 insertions(+)

commit e35bbd570a5d914f86f1ea83941ee4328f268059
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 30 12:02:46 2009 -0400

    [HB] Improve buffer.  Don't dup out buffer unless out is longer
    than in

    That is, we work in-place even for ligatures now.

 src/hb-buffer.c | 156
 ++++++++++++++++++++++++--------------------------------
 src/hb-buffer.h |   7 ++-
 2 files changed, 71 insertions(+), 92 deletions(-)

commit 6734ed4b6b2ce382917bf644aaf1acfa993f00ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 27 18:16:55 2009 -0400

    [GPOS] Fix property checking

 src/hb-ot-layout-gpos-private.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit cc83ae12484108586fba6586bd9008971338b322
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 27 00:17:37 2009 -0400

    [GPOS] Add vertical TODO

 src/hb-ot-layout-gpos-private.h | 2 ++
 1 file changed, 2 insertions(+)

commit b69d38e7eaea544ba6c1876cdc6ddac61a698dd3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 22:29:02 2009 -0400

    [HB] Remove useless include

 src/hb-ot-layout-private.h | 3 ---
 1 file changed, 3 deletions(-)

commit 6c8108cb583292a679b05844ab613b7f4587adc6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 22:26:08 2009 -0400

    [GPOS] Remove unused variables

 src/hb-ot-layout-gpos-private.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 09c292e3b688a67fbae67b645d1e6ffcf8d8eb6e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 19:48:16 2009 -0400

    [HB] Fix glyph properties

 src/hb-ot-layout-common-private.h | 6 +++---
 src/hb-ot-layout-open-private.h   | 2 +-
 src/hb-ot-layout.cc		   | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 64e33f008ff9cc807fdfdc4553ad3fe01bb0615f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 18:57:56 2009 -0400

    [GPOS] Fix PairPos signedness

 src/hb-ot-layout-gpos-private.h | 11 ++++-------
 1 file changed, 4 insertions(+), 7 deletions(-)

commit 80ea5bd10e72561a7627a5196621a6d7eccd91b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 17:58:37 2009 -0400

    [GPOS] Fix mark matching

 src/hb-ot-layout-gpos-private.h | 44
 +++++++++++++++++++----------------------
 1 file changed, 20 insertions(+), 24 deletions(-)

commit 4189b92aaa41e4a1756c561cc6e08b0ed024afda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 17:31:56 2009 -0400

    [HB] When looking back/forward, skip marks only

 src/TODO			     |	1 -
 src/hb-ot-layout-gpos-private.h     | 13 ++-----
 src/hb-ot-layout-gsub-private.h     | 38 +++++++++-----------
 src/hb-ot-layout-gsubgpos-private.h | 14 ++++----
 src/hb-ot-layout-private.h	     |	6 ++++
 src/hb-ot-layout.cc		     | 69
 ++++++++++++++++++++++++-------------
 6 files changed, 76 insertions(+), 65 deletions(-)

commit 1246e41021ab1d782b4c97e5d81c4917a57e3ed4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 15:58:34 2009 -0400

    [GDEF] Support MarkFilteringSets

 src/hb-ot-layout.cc | 59
 +++++++++++++++++++----------------------------------
 1 file changed, 21 insertions(+), 38 deletions(-)

commit 5130c35e93528bcf3095fee5baf3847589167a58
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 15:45:41 2009 -0400

    [HB] Simplify MarkAttachmentType handling

 src/hb-ot-layout-gpos-private.h |  6 +++---
 src/hb-ot-layout-gsub-private.h |  6 ++----
 src/hb-ot-layout.cc		 | 18 ++++++++----------
 3 files changed, 13 insertions(+), 17 deletions(-)

commit e4b92b85a7750bd4271ad607b3c41f0184e89feb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 15:38:53 2009 -0400

    [HB] Support parsing MarkFilteringSets introduced in OpenType 1.6

 src/hb-ot-layout-gdef-private.h | 55
 +++++++++++++++++++++++++++++++++++------
 src/hb-ot-layout-gpos-private.h |  1 +
 src/hb-ot-layout.cc		 |  6 ++---
 3 files changed, 51 insertions(+), 11 deletions(-)

commit 515ce4ceb2ab0151d8dfc03ff0bfc7d110dd93b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 13:08:00 2009 -0400

    [HB] More de-C++'ization

 src/hb-ot-layout-gsubgpos-private.h | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit d7df42d7ee586219475878d160f85ae5a188bd59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 13:04:59 2009 -0400

    [HB] Start MarkFilteringSet support

 src/hb-ot-layout-common-private.h | 24 +++++++++++++++++++-----
 1 file changed, 19 insertions(+), 5 deletions(-)

commit 62964afcecd96038cfaa8bc2bc931f43ee83be7e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 12:40:10 2009 -0400

    [HB] Implement get_lig_carets()

 src/hb-ot-layout-gdef-private.h | 57
 ++++++++++++++++++++++++++++++++---------
 src/hb-ot-layout.cc		 | 17 +++++++++---
 src/hb-ot-layout.h		 |  8 +++++-
 src/main.cc			 |  9 +------
 4 files changed, 66 insertions(+), 25 deletions(-)

commit 79420ad9caf2d5fc94c3693e8292edfa27060b2d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 12:24:16 2009 -0400

    [HB] Add get_attach_points()

 src/Makefile.am		 |  2 +-
 src/hb-ot-layout-gdef-private.h | 35 +++++++++++++++++++++++++----------
 src/hb-ot-layout-gpos-private.h | 28 +++++++---------------------
 src/hb-ot-layout-gsub-private.h | 28 +++++++---------------------
 src/hb-ot-layout-open-private.h | 12 +++---------
 src/hb-ot-layout.cc		 |  9 +++++++++
 src/hb-ot-layout.h		 |  6 ++++++
 src/main.cc			 |  8 ++++----
 8 files changed, 62 insertions(+), 66 deletions(-)

commit 855720ca47bf5a7a44eb5b84dce9f7da6e7156bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 26 12:00:28 2009 -0400

    [HB] Remove more macros

 src/hb-ot-layout-gdef-private.h | 18 +++++++++---------
 1 file changed, 9 insertions(+), 9 deletions(-)

commit c968fc2dc87cf85b53f60a40db59d5ee7b992edf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 04:04:24 2009 -0400

    [HB] More buffer cleanup

 src/hb-buffer-private.h	     |	39 +++--------
 src/hb-buffer.c		     | 136
 ++++++++++++++++++------------------
 src/hb-buffer.h		     |	22 +++---
 src/hb-ot-layout-gpos-private.h     |	29 ++++----
 src/hb-ot-layout-gsub-private.h     |	10 +--
 src/hb-ot-layout-gsubgpos-private.h |	 8 +--
 src/hb-ot-layout-private.h	     |	13 ++--
 src/hb-ot-layout.cc		     |	16 ++---
 src/hb-private.h		     |	29 --------
 9 files changed, 125 insertions(+), 177 deletions(-)

commit 88a5f5a49b6809d88560791f9cf6b8f78f22a4ad
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:39:11 2009 -0400

    [HB] Cleanup buffer

 src/hb-buffer-private.h	     |	2 +-
 src/hb-buffer.c		     | 26 ++++++++------
 src/hb-ot-layout-gsub-private.h     | 26 +++++---------
 src/hb-ot-layout-gsubgpos-private.h |	2 +-
 src/hb-ot-layout.cc		     | 71
 -------------------------------------
 5 files changed, 25 insertions(+), 102 deletions(-)

commit 347f0b8621d3adfec157e5634ff3defc818ea37f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:30:31 2009 -0400

    [HB] Clean more

 src/hb-ot-layout-private.h | 10 ++++------
 src/hb-ot-layout.cc	    |  8 ++++----
 2 files changed, 8 insertions(+), 10 deletions(-)

commit d9d2a07f4a8696666a12f5a206aa9cfb56dc2b35
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:24:19 2009 -0400

    [HB] Remove one XXX, add another

 src/hb-buffer.h	    | 2 ++
 src/hb-ot-layout-private.h | 3 +--
 2 files changed, 3 insertions(+), 2 deletions(-)

commit 6c78683c042250a7b5a6fc6ebae4717b03fadf9e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:22:19 2009 -0400

    [HB] Update copyright years

 src/hb-buffer-private.h    | 2 +-
 src/hb-buffer.h	    | 2 +-
 src/hb-common.h	    | 2 +-
 src/hb-ot-layout-private.h | 2 +-
 src/hb-ot-layout.h	    | 2 +-
 src/hb-private.h	    | 2 +-
 6 files changed, 6 insertions(+), 6 deletions(-)

commit 4497af0069a94c69fc1518b1db2c1282721b732a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:20:18 2009 -0400

    [HB] Would have helped if I actually knew C++ before using it...

 src/hb-ot-layout-gsubgpos-private.h |	4 ++--
 src/hb-ot-layout-open-private.h     | 24 ++++++++++++------------
 2 files changed, 14 insertions(+), 14 deletions(-)

commit cc6c644ff2af5f6669b6ec100ff13e904872b21c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 03:10:06 2009 -0400

    [HB] More cleanup

 src/hb-ot-layout-common-private.h | 4 ++--
 src/hb-ot-layout-open-private.h   | 9 +++++----
 2 files changed, 7 insertions(+), 6 deletions(-)

commit 20cc86b3592db33731de671f008d7d222776be49
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 02:41:49 2009 -0400

    [HB] Simplify Tag

 src/hb-ot-layout-open-private.h | 46
 ++++++++++++++++-------------------------
 1 file changed, 18 insertions(+), 28 deletions(-)

commit 3ec0092c5e2d48e8c4fc1618d3bee427adddb1e7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 02:34:25 2009 -0400

    [HB] Simplify more

 src/hb-ot-layout-open-private.h | 31 ++++++++++---------------------
 1 file changed, 10 insertions(+), 21 deletions(-)

commit 6ad8d5f3c7028147b371137ae4bca6aae66b3489
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 25 02:27:29 2009 -0400

    [HB] Simplify some basic things

 src/hb-ot-layout-open-private.h | 90
 +++++++++++++++++++++++++++--------------
 src/main.cc			 |  8 ++--
 2 files changed, 64 insertions(+), 34 deletions(-)

commit f96ffd43bce0ac6d9c897933c9be0e51d543e570
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 15:01:16 2009 -0400

    [HB] simplify macros

 src/hb-buffer-private.h    | 4 ++--
 src/hb-buffer.h	    | 4 ++--
 src/hb-common.h	    | 8 ++++----
 src/hb-ot-layout-private.h | 4 ++--
 src/hb-ot-layout.h	    | 4 ++--
 5 files changed, 12 insertions(+), 12 deletions(-)

commit 8e7b30782a12f3997b9a5a18e6b9d01f6bff8b46
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 14:27:24 2009 -0400

    [HB] Update text files

 src/COPYING |	7 -------
 src/README  | 13 ++-----------
 2 files changed, 2 insertions(+), 18 deletions(-)

commit fa7d47249496fe00ea1ab6943b385c8dd80e5ce6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 14:24:35 2009 -0400

    [HB] Remove stale makefile.msc too

 src/makefile.msc | 19 -------------------
 1 file changed, 19 deletions(-)

commit da2c52abcd75d46929b34cad55c4fb2c8892bc08
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 14:22:22 2009 -0400

    [HB] Remove old code!

    Goodbye 16 thousand lines of ten-year old code!

 src/harfbuzz-dump-main.c      |   97 -
 src/harfbuzz-dump.c	       |  768 ------
 src/harfbuzz-dump.h	       |   41 -
 src/harfbuzz-gdef-private.h   |  124 -
 src/harfbuzz-gdef.c	       | 1160 --------
 src/harfbuzz-gdef.h	       |  135 -
 src/harfbuzz-global.h	       |   84 -
 src/harfbuzz-gpos-private.h   |  712 -----
 src/harfbuzz-gpos.c	       | 6071
 -----------------------------------------
 src/harfbuzz-gpos.h	       |  174 --
 src/harfbuzz-gsub-private.h   |  476 ----
 src/harfbuzz-gsub.c	       | 4304 -----------------------------
 src/harfbuzz-gsub.h	       |  140 -
 src/harfbuzz-impl.c	       |   84 -
 src/harfbuzz-impl.h	       |  126 -
 src/harfbuzz-open-private.h   |  102 -
 src/harfbuzz-open.c	       | 1405 ----------
 src/harfbuzz-open.h	       |  282 --
 src/harfbuzz-stream-private.h |   83 -
 src/harfbuzz-stream.c	       |  257 --
 src/harfbuzz.c		       |   31 -
 src/harfbuzz.h		       |   35 -
 22 files changed, 16691 deletions(-)

commit e5372f1621602dcee4e14a4b22dc182c21502a50
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 14:21:27 2009 -0400

    [HB] Remove stale TODO mark

 src/hb-ot-layout-open-private.h | 1 -
 1 file changed, 1 deletion(-)

commit 96908b898476ca5d7da5f386b15be76f9e83d76e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 12:30:40 2009 -0400

    [HB] Add FixedVersion cast to int

 src/hb-ot-layout-open-private.h | 2 ++
 1 file changed, 2 insertions(+)

commit 957740dd253475020a94a62ec5dfcd03e3358176
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 12:29:55 2009 -0400

    [HB] Simplify tag

 src/hb-ot-layout-open-private.h | 10 +++++-----
 1 file changed, 5 insertions(+), 5 deletions(-)

commit 87fcdcbe3644da10154688765db2d62eb9ac079a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 01:03:24 2009 -0400

    [HB] Remove unused data types

 src/hb-ot-layout-gdef-private.h     |	2 +-
 src/hb-ot-layout-gsubgpos-private.h |	2 +-
 src/hb-ot-layout-open-private.h     | 54
 ++++---------------------------------
 3 files changed, 7 insertions(+), 51 deletions(-)

commit 5876bf1b73fcb56cc41b4d348248a4817f9688cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 00:53:28 2009 -0400

    [HB] Simplify version check in GSUB/GPOS

 src/hb-ot-layout-gpos-private.h | 5 ++++-
 src/hb-ot-layout-gsub-private.h | 5 ++++-
 2 files changed, 8 insertions(+), 2 deletions(-)

commit 212aba6189d7aaac0bab169b77ae6bdab16800a5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 24 00:50:27 2009 -0400

    [HB] Check for GDEF/GSUB/GPOS versions

 src/hb-ot-layout-gdef-private.h     |	3 +--
 src/hb-ot-layout-gpos-private.h     |	3 +--
 src/hb-ot-layout-gsub-private.h     |	3 +--
 src/hb-ot-layout-gsubgpos-private.h |	5 ++---
 src/hb-ot-layout-open-private.h     | 11 ++++++++++-
 5 files changed, 15 insertions(+), 10 deletions(-)

commit a21b5062cc32c04eeee3c4b20d26c7e2b34133e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 23 22:39:42 2009 -0400

    [HB] Minor

 src/hb-ot-layout-gdef-private.h | 6 +++---
 src/hb-ot-layout-open-private.h | 4 ++--
 2 files changed, 5 insertions(+), 5 deletions(-)

commit a080b1cc2f66d6e109d431a1e09519d7cf53bb9a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 23 18:50:44 2009 -0400

    [HB] Add TODO items

 src/TODO | 6 ++++++
 1 file changed, 6 insertions(+)

commit e4efdd80a8fa4edbcdec9cd84f35f5f4521943c2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 22 18:54:24 2009 -0400

    [GDEF] Add some get_carret_value() code

 src/hb-ot-layout-gdef-private.h | 36 ++++++++++++++++++------------------
 1 file changed, 18 insertions(+), 18 deletions(-)

commit 9b006bc0322723d065271e4b0ea4f137f81101e1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 22 18:29:45 2009 -0400

    [GPOS] MarkLigPosFormat1

    GPOS is complete now!  Yay!

 src/hb-ot-layout-gpos-private.h | 128
 +++++++++++++++++++++++++++++-----------
 1 file changed, 92 insertions(+), 36 deletions(-)

commit 923923feb248250626c637c11a886804011197b0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 22 17:58:09 2009 -0400

    [HB] Remove apply_subtables() again

 src/hb-ot-layout-gpos-private.h | 31 +++++++++++--------------------
 src/hb-ot-layout-gsub-private.h | 33 ++++++++++++---------------------
 2 files changed, 23 insertions(+), 41 deletions(-)

commit d468f9af5b9fdc2713b0b86f28129e4190ee5053
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 22:31:33 2009 -0400

    [HB] Share Extension lookup code between GSUB and GPOS

 src/hb-ot-layout-gpos-private.h     | 64 +++++-----------------------
 src/hb-ot-layout-gsub-private.h     | 83
 +++++++------------------------------
 src/hb-ot-layout-gsubgpos-private.h | 52 +++++++++++++++++++++++
 3 files changed, 77 insertions(+), 122 deletions(-)

commit 498f1909e0f7a32484b2058622c4a018cbfc1334
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 15:51:04 2009 -0400

    [GPOS] Remove printf.  MarkMarkPos1 is working

    The "bug" was in the font.

 src/hb-ot-layout-gpos-private.h | 1 -
 1 file changed, 1 deletion(-)

commit c7d457aa3ae7138630f52ca7263f663a3ea284c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 12:46:29 2009 -0400

    [HB] Ouch.	Add files.

 src/hb-common.h  | 13 +++++-----
 src/hb-private.h | 74
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 2 files changed, 78 insertions(+), 9 deletions(-)

commit fe550f4dd815285e9de8c3cbff810b0a1c7b377f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 08:27:07 2009 -0400

    [GPOS] MarkMarkPosFormat1

    Still not quite working.

 src/TODO			 |   4 +-
 src/hb-ot-layout-gpos-private.h | 105
 +++++++++++++++++++++++++++++-----------
 2 files changed, 79 insertions(+), 30 deletions(-)

commit 357ccde36bba01a405d59b7da061fc5048cdc7b4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 06:32:01 2009 -0400

    [GPOS] MarkBasePosFormat1

 src/TODO			 |  1 +
 src/hb-ot-layout-gpos-private.h | 62
 +++++++++++++++++++++++++++++++++++++----
 2 files changed, 58 insertions(+), 5 deletions(-)

commit 377bfc5860ae018f54e4a2dd737b4b000383ab54
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 04:58:24 2009 -0400

    [GPOS] Implement MarkArray interface

 src/hb-ot-layout-gpos-private.h | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit c18ec2b1d7b8c7abe6ebf4b53c9ec75d5c9bb255
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 04:54:01 2009 -0400

    [GPOS] Implement Device support in AnchorFormat3

 src/hb-ot-layout-gpos-private.h | 11 ++++++++---
 1 file changed, 8 insertions(+), 3 deletions(-)

commit fca6a0d158b847181dcf67a13f34499177df899b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 04:49:04 2009 -0400

    [GPOS] Remove apply_value() return value

 src/hb-ot-layout-gpos-private.h | 75
 +++++++++++++++++++----------------------
 1 file changed, 34 insertions(+), 41 deletions(-)

commit fb3b5ccfefc4c38c9184d432703e81f73e1f5bc7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 21 04:47:05 2009 -0400

    [GPOS] Start MarkBasePosFormat1

 src/TODO			 |  1 +
 src/hb-ot-layout-gpos-private.h | 38
 +++++++++++++++++---------------------
 2 files changed, 18 insertions(+), 21 deletions(-)

commit ee8776d9e009a7fb8e1f3c1f9cf3ad42d9746a16
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 15:46:12 2009 -0400

    [HB] Add TODO item

 src/hb-ot-layout-gpos-private.h | 1 +
 src/hb-ot-layout-gsub-private.h | 1 +
 2 files changed, 2 insertions(+)

commit c6456ca5cfc35095378dcf29f8edc33ece9c3ea1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 06:15:23 2009 -0400

    [HB] Add TODO item

 src/TODO | 1 +
 1 file changed, 1 insertion(+)

commit 3015c4175179a1816aad2a4950da9a3b8baf2578
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 06:01:16 2009 -0400

    [HB] Remove last dependence on the old code base!

 src/hb-buffer-private.h	 | 88
 ++++++++++++++++++++---------------------
 src/hb-buffer.c		 | 47 +++++++++++-----------
 src/hb-ot-layout-gpos-private.h | 11 ++----
 src/hb-ot-layout-gsub-private.h | 12 +++---
 src/hb-ot-layout.cc		 | 16 ++++----
 5 files changed, 85 insertions(+), 89 deletions(-)

commit 5c0adce1ccc739415c4b26ff13ffd2d77ea4bc6c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 05:42:12 2009 -0400

    [HB] Rename harfbuzz-buffer to hb-buffer

 src/Makefile.am		     |	 5 +-
 src/harfbuzz-buffer-private.h	     | 106 -----------
 src/harfbuzz-buffer.c		     | 349
 ------------------------------------
 src/harfbuzz-buffer.h		     |	94 ----------
 src/hb-buffer-private.h	     | 106 +++++++++++
 src/hb-buffer.c		     | 347
 +++++++++++++++++++++++++++++++++++
 src/hb-buffer.h		     |	94 ++++++++++
 src/hb-ot-layout-gsubgpos-private.h |	 2 +-
 src/hb-ot-layout-private.h	     |	 2 +-
 src/hb-ot-layout.cc		     |	 5 +-
 src/hb-ot-layout.h		     |	 2 +-
 11 files changed, 556 insertions(+), 556 deletions(-)

commit b857b49c82782d29d6d189f1a9f4a84d39cd84ea
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 05:35:14 2009 -0400

    [HB] Remove all references to the old code!

 src/Makefile.am	    |  76 +++++++---------------
 src/harfbuzz-buffer.c	    | 154
 +++++++++++++++++++--------------------------
 src/harfbuzz-buffer.h	    |  80 +++++++++++------------
 src/hb-ot-layout-private.h |	6 +-
 src/hb-ot-layout.cc	    |  17 ++---
 src/hb-ot-layout.h	    |	1 +
 6 files changed, 137 insertions(+), 197 deletions(-)

commit e1593a6e620ee6a8184487185d1c95e0d1820ba5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 04:51:30 2009 -0400

    [GPOS] Finally it's working, up to Cursive

    Wow, IranNastaliq renders perfectly again!

 src/hb-ot-layout.cc | 24 ++++++++++++++++++++++++
 src/hb-ot-layout.h  | 12 ++++++++++++
 2 files changed, 36 insertions(+)

commit 0f7e6b2cead0c7d527ef68ededb27e0afd71d819
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 04:16:35 2009 -0400

    [GPOS] Fix more brokenness

 src/Makefile.am		 |  2 +-
 src/hb-ot-layout-gpos-private.h | 37
 ++++++++++++++++++++-----------------
 src/hb-ot-layout.cc		 |  7 +++++++
 src/hb-ot-layout.h		 |  5 +++++
 4 files changed, 33 insertions(+), 18 deletions(-)

commit ff05d257dd43221b7c8ebead188e78495daa8eda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 03:53:00 2009 -0400

    [HB] Move lookup types enum into subtable class

 src/hb-ot-layout-gpos-private.h | 66
 ++++++++++++++++++++---------------------
 src/hb-ot-layout-gsub-private.h | 44 +++++++++++++--------------
 2 files changed, 55 insertions(+), 55 deletions(-)

commit 263bbef7670b59aa88ef9ba910579dfa51226524
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 20 00:00:09 2009 -0400

    [GDEF] Simplify Device access

 src/hb-ot-layout-gdef-private.h | 12 +++---------
 1 file changed, 3 insertions(+), 9 deletions(-)

commit 60d77cf05fddc5304b4b1fc19cdedba15cbee1e9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 23:58:54 2009 -0400

    [HB] Indentation

 src/hb-ot-layout-common-private.h   | 170
 +++++++++++++++++-------------------
 src/hb-ot-layout-gdef-private.h     |	65 +++++++-------
 src/hb-ot-layout-gsubgpos-private.h | 150 +++++++++++++++++--------------
 src/hb-ot-layout-open-private.h     | 159
 ++++++++++++++++-----------------
 src/hb-ot-layout-private.h	     |	 9 +-
 5 files changed, 288 insertions(+), 265 deletions(-)

commit 90de3dfff9e82dae20b7517642511aebaf736b74
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 23:43:04 2009 -0400

    [HB] Remove unused methods

 src/hb-ot-layout-common-private.h | 6 ------
 1 file changed, 6 deletions(-)

commit 4c44d830d79431fcb143df2b5a29cdc8e8fccef3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 23:42:30 2009 -0400

    [HB] Indentation

 src/hb-ot-layout-gpos-private.h | 253
 +++++++++++++++++++++-----------------
 src/hb-ot-layout-gsub-private.h | 262
 ++++++++++++++++++++++------------------
 2 files changed, 284 insertions(+), 231 deletions(-)

commit d18fd8e3f7185f531fa4c4988d3f5d5c5282b8eb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 23:25:41 2009 -0400

    [GPOS] CursivePosFormat1

 src/hb-ot-layout-gpos-private.h | 174
 ++++++++++++++++++++++++++++++++++++++--
 src/hb-ot-layout-private.h	 |   2 +-
 2 files changed, 169 insertions(+), 7 deletions(-)

commit 70632add333e4ab38f8f485bb87b25116128cf92
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 22:30:09 2009 -0400

    [GSUB] PairPosFormat2

 src/hb-ot-layout-gpos-private.h | 43
 ++++++++++++++++++++++++++++++++++++-----
 1 file changed, 38 insertions(+), 5 deletions(-)

commit b24ecbadf44d56fd3286d1d3ff6928151ccec9bd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 19 22:16:04 2009 -0400

    [GPOS] PairPosFormat1

 src/hb-ot-layout-gpos-private.h | 91
 +++++++++++++++++++++++++++++++++--------
 1 file changed, 73 insertions(+), 18 deletions(-)

commit 056c7ec1aea1eca60a3b20b583b8a8072be9d758
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 19:47:52 2009 -0400

    [GPOS] Start filling apply() functions in

 src/harfbuzz-buffer-private.h	   |   1 +
 src/harfbuzz-buffer.c		   |   3 -
 src/hb-ot-layout-common-private.h |  35 ++++++-----
 src/hb-ot-layout-gpos-private.h   | 127
 ++++++++++++++++++++++++++++----------
 4 files changed, 116 insertions(+), 50 deletions(-)

commit 4fa77d3c4305a76b956de8c1a9b83a961d035a80
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 18:44:54 2009 -0400

    [HB] Use enums

 src/hb-ot-layout-common-private.h | 14 ++++++++------
 src/hb-ot-layout-gdef-private.h   | 22 +++++++++++++---------
 2 files changed, 21 insertions(+), 15 deletions(-)

commit 6b54c5d0446b514fbb6521e7e9e614d153435f0e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 18:30:25 2009 -0400

    [HB] More reference cast simplification

 src/hb-ot-layout-gsub-private.h     |	8 ++++----
 src/hb-ot-layout-gsubgpos-private.h | 28 ++++++++++++++--------------
 src/hb-ot-layout-open-private.h     |	2 +-
 3 files changed, 19 insertions(+), 19 deletions(-)

commit eb0dfc830e09405492f494c85380e133ac5d0ea3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 18:22:44 2009 -0400

    [HB] Rename LOOKUP_ARGS to APPLY_ARGS

 src/hb-ot-layout-gpos-private.h     | 88
 ++++++++++++++++++------------------
 src/hb-ot-layout-gsub-private.h     | 84
 +++++++++++++++++-----------------
 src/hb-ot-layout-gsubgpos-private.h | 90
 ++++++++++++++++++-------------------
 3 files changed, 131 insertions(+), 131 deletions(-)

commit 2a8e6accdf798a78ff180dcb593140592d62b872
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 18:21:44 2009 -0400

    [HB] Internally rename position() and substitute() to apply()

 src/hb-ot-layout-gpos-private.h | 110
 ++++++++++++++++++++--------------------
 src/hb-ot-layout-gsub-private.h | 104
 ++++++++++++++++++-------------------
 2 files changed, 107 insertions(+), 107 deletions(-)

commit f6c8a6eacf27fd1c509d07c85985f0367c5e475f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 18:01:19 2009 -0400

    [HB] Simplify casts

 src/hb-ot-layout-gdef-private.h |  2 +-
 src/hb-ot-layout-gpos-private.h |  6 +++---
 src/hb-ot-layout-gsub-private.h |  6 +++---
 src/hb-ot-layout-open-private.h | 10 +++++-----
 4 files changed, 12 insertions(+), 12 deletions(-)

commit 9c42f05a5ccbb48a9367b80ecdf3679e88088fcf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 17:43:49 2009 -0400

    Switch Pango to new, defunt, GPOS

 src/hb-ot-layout-gpos-private.h | 22 +++++++++++++++-------
 src/hb-ot-layout.cc		 | 13 +++++++++++++
 src/hb-ot-layout.h		 |  5 +++++
 3 files changed, 33 insertions(+), 7 deletions(-)

commit 5e5eb0573f7ea2ce2cf037fef0df70a4351e82c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 17:09:33 2009 -0400

    [HB] Start GPOS!

 src/hb-ot-layout-gpos-private.h | 915
 ++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gsub-private.h |   2 -
 src/hb-ot-layout-private.h	 |  15 +-
 src/hb-ot-layout.cc		 |   5 +-
 src/hb-ot-layout.h		 |   8 +-
 5 files changed, 936 insertions(+), 9 deletions(-)

commit 64e67f7599deeec98b104f8b70d0d321cf96799d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 15:32:40 2009 -0400

    [GSUB] Minor

 src/hb-ot-layout-gsub-private.h | 16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)

commit d79cae0b4eef8c2694ada791bb8e427c1202875e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 13:50:15 2009 -0400

    [HB] Minor

 src/hb-ot-layout-gsub-private.h | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit 8533bb985e6af2b656d7c45620d8f11f36330b85
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 06:00:12 2009 -0400

    [GSUB] Protect against mismatching Extension subtable types

 src/hb-ot-layout-gsub-private.h | 9 ++++++---
 1 file changed, 6 insertions(+), 3 deletions(-)

commit 969afd706e9b52adc79f6210c0088b2c6bbae9bc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 05:47:47 2009 -0400

    [GSUB] Implement ReverseChainSingleSubst

    GSUB is done!

 src/hb-ot-layout-gsub-private.h     | 55
 +++++++++++++++++++++++++++----------
 src/hb-ot-layout-gsubgpos-private.h | 43 +++++++++--------------------
 2 files changed, 54 insertions(+), 44 deletions(-)

commit 4acaffd786a11b5bd7d41b39fc65625fd8cd5077
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 05:29:29 2009 -0400

    [HB] Don't use G_LIKELY!

 src/hb-ot-layout-gsub-private.h     | 12 ++++++------
 src/hb-ot-layout-gsubgpos-private.h | 12 ++++++------
 src/hb-ot-layout-open-private.h     |	4 ++--
 src/hb-ot-layout.cc		     |	6 +++---
 4 files changed, 17 insertions(+), 17 deletions(-)

commit 3dcb12f171ebbf44461e6ce6439d286c9520dd88
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 05:22:32 2009 -0400

    [GSUB] Oops, fix Extension check

 src/hb-ot-layout-gsub-private.h | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

commit 2e8fb6c38dbc01cb77b384c0ae0212514dfbb588
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:37:37 2009 -0400

    [HB] Tweak some constants and fix Coverage

 src/hb-ot-layout-common-private.h   | 11 ++++++-----
 src/hb-ot-layout-gsubgpos-private.h |	2 ++
 src/hb-ot-layout-open-private.h     |	6 +++---
 3 files changed, 11 insertions(+), 8 deletions(-)

commit d6aae5f5cad54fc5dac8b0ff10a3921ebda533d4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:25:22 2009 -0400

    [HB] Cleanup TODOs

 src/hb-ot-layout-gsub-private.h | 12 ++++++------
 src/hb-ot-layout-open-private.h |  2 +-
 src/hb-ot-layout.cc		 |  4 ++--
 3 files changed, 9 insertions(+), 9 deletions(-)

commit 122f21fb9a3a0b914575929a3be11884f1ae00c0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:21:53 2009 -0400

    [GSUB] Fix context_length handling in Ligature too

 src/hb-ot-layout-gsub-private.h     | 9 ++++-----
 src/hb-ot-layout-gsubgpos-private.h | 5 +++--
 2 files changed, 7 insertions(+), 7 deletions(-)

commit 47958dea214fd55725bf04aa13d233870255fb03
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:17:47 2009 -0400

    [HB] Minor cleanup

 src/hb-ot-layout-gsubgpos-private.h | 10 ++++------
 1 file changed, 4 insertions(+), 6 deletions(-)

commit e73a0c2a903112ce9a35b95e14e10ab8ea2dc337
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:15:25 2009 -0400

    [HB] Correctly skip glyphs when applying (Chain)Context lookups

 src/hb-ot-layout-gsubgpos-private.h | 14 +++++++++++---
 1 file changed, 11 insertions(+), 3 deletions(-)

commit 7cff75babd64cd49dd2b3faaa15193d12c098f42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 04:09:05 2009 -0400

    [HB] Fix context_length checking

 src/hb-ot-layout-gsubgpos-private.h | 23 +++++++++++++----------
 src/hb-ot-layout-open-private.h     |	2 +-
 2 files changed, 14 insertions(+), 11 deletions(-)

commit d0ba0557007798db2c60ddd0b7a5a0624cd1698d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 03:56:39 2009 -0400

    [HB] ChainContext complete

    IranNastaliq renders perfectly again!

 src/hb-ot-layout-gsubgpos-private.h | 63
 +++++++++++++++++++++++++++----------
 1 file changed, 46 insertions(+), 17 deletions(-)

commit e072c24e79f0e7c1e078a87c782ab5dd8f21dcda
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 03:47:31 2009 -0400

    [HB] Implement backtrack matching

 src/hb-ot-layout-gsubgpos-private.h | 61
 +++++++++++++++++++++++++++----------
 1 file changed, 45 insertions(+), 16 deletions(-)

commit 02e1e5c63fa4f896053fa3c21e495239e1e9caa2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 02:47:57 2009 -0400

    [HB] One more step to go, for fully working GSUB and ChainContext

 src/hb-ot-layout-gsubgpos-private.h | 107
 ++++++++++++++++++++----------------
 1 file changed, 61 insertions(+), 46 deletions(-)

commit f14c2b7acfba75b8a6880f41ceec758f9a56abce
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 02:36:18 2009 -0400

    [HB] Further modularize Context matching

 src/hb-ot-layout-gsubgpos-private.h | 92
 +++++++++++++++++++++++++------------
 1 file changed, 63 insertions(+), 29 deletions(-)

commit 13ed4405c558e445b052360f1ed8ee27ecf48e6e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 02:14:37 2009 -0400

    [HB] A step closer to working ChainContext

 src/hb-ot-layout-gsubgpos-private.h | 36
 ++++++++++++++++++++++++++----------
 1 file changed, 26 insertions(+), 10 deletions(-)

commit e8cbaaf6d538036ff9b880b018db402e0895ed01
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 02:03:58 2009 -0400

    [HB] Add HeadlessArrayTo<>

 src/hb-ot-layout-gsub-private.h     | 10 ++++------
 src/hb-ot-layout-gsubgpos-private.h |	5 ++---
 src/hb-ot-layout-open-private.h     | 19 +++++++++++++++++++
 3 files changed, 25 insertions(+), 9 deletions(-)

commit dcb6b60254951a2831c03f3196962d229f7e556c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 18 01:49:57 2009 -0400

    [HB] More template goodness

 src/hb-ot-layout-gsubgpos-private.h | 37
 +++++++++++++++----------------------
 1 file changed, 15 insertions(+), 22 deletions(-)

commit aa3d7adca5c821c91a2a1b5380fd6b3d19656ab1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 23:17:56 2009 -0400

    [HB] More churning towards ChainContext lookups

 src/hb-ot-layout-common-private.h   |	 6 +-
 src/hb-ot-layout-gsub-private.h     |	15 +++-
 src/hb-ot-layout-gsubgpos-private.h | 174
 ++++++++++++++++++++++--------------
 3 files changed, 125 insertions(+), 70 deletions(-)

commit 48f16ed96ac7041b511d9e0864623d2aa09c6da3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 22:11:30 2009 -0400

    [HB] Towards sharing Context and ChainContext code

 src/hb-ot-layout-gsubgpos-private.h | 220
 ++++++++++++++++--------------------
 1 file changed, 99 insertions(+), 121 deletions(-)

commit 6cf2a52593cb4b23e3efe5e16228e3172bdcdd05
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 21:11:49 2009 -0400

    [HB] Add check to avoid infinite recursion

 src/hb-ot-layout-gsub-private.h | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

commit 887c4b44165eeb8ac7fb09bc4474d11720b94a9e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 21:06:08 2009 -0400

    [HB] Cosmetic

 src/hb-ot-layout-gsub-private.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ca5290f4994e1b2db4dac03f7a22b7071441ba06
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 20:48:27 2009 -0400

    [HB] Start ChainContext and ReverseChainSingleSubst lookups

 src/hb-ot-layout-gsub-private.h     | 269
 ++++++++----------------------------
 src/hb-ot-layout-gsubgpos-private.h | 214 +++++++++++++++++++++++++++-
 2 files changed, 268 insertions(+), 215 deletions(-)

commit 433f4aea741e39df079126769441b79ab64fd236
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 20:30:05 2009 -0400

    [HB] Remove stale TODO

 src/hb-ot-layout-private.h | 2 --
 1 file changed, 2 deletions(-)

commit 6f20f72e9c58ba23db2e31afa5d331acfea3d77e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 20:28:01 2009 -0400

    [HB] Split Layout-common tables into new files

 src/hb-ot-layout-common-private.h   | 429
 ++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-gdef-private.h     |	 3 +-
 src/hb-ot-layout-gsub-private.h     |	 1 +
 src/hb-ot-layout-gsubgpos-private.h |	 2 +
 src/hb-ot-layout-open-private.h     | 408
 ----------------------------------
 5 files changed, 434 insertions(+), 409 deletions(-)

commit f45107fe0904414f1266648a6c42849c494fe611
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 20:13:02 2009 -0400

    [HB] More shuffling

 src/hb-ot-layout-gsub-private.h     | 71
 +++++++++++++++++++++----------------
 src/hb-ot-layout-gsubgpos-private.h | 30 ++++++++++++++++
 src/hb-ot-layout-open-private.h     | 41 ---------------------
 3 files changed, 71 insertions(+), 71 deletions(-)

commit f8dc67b3c24dfc805da756a73cb217b36e16b4b8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 19:47:54 2009 -0400

    [HB] Cleanup format unions

 src/hb-ot-layout-gdef-private.h     | 18 ++++----
 src/hb-ot-layout-gsub-private.h     | 87
 +++++++++++++++++++------------------
 src/hb-ot-layout-gsubgpos-private.h | 16 +++----
 src/hb-ot-layout-open-private.h     | 41 +++++++----------
 4 files changed, 77 insertions(+), 85 deletions(-)

commit da1097bc3b1995776c205707fd2b17603b804646
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 19:31:18 2009 -0400

    [HB] Use four bytes for Null Tag, not 5

 src/hb-ot-layout-open-private.h | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 19fc24f268b985d30971307ac2055622d11cb21f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 09:45:32 2009 -0400

    [HB] Couple size checks

 src/hb-ot-layout-gsub-private.h     | 7 +++++--
 src/hb-ot-layout-gsubgpos-private.h | 4 ++--
 src/hb-ot-layout-open-private.h     | 4 ++--
 3 files changed, 9 insertions(+), 6 deletions(-)

commit ecf17e849db19599bbb816d0018380ebf979576b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 09:34:41 2009 -0400

    [HB] Propagate property of first glyph

    This slightly grows code size.

 src/hb-ot-layout-gsub-private.h     | 100
 +++++++++++++++++++-----------------
 src/hb-ot-layout-gsubgpos-private.h |	 7 +--
 2 files changed, 56 insertions(+), 51 deletions(-)

commit eca8e33710cfce51454e64d974ff0c28b0eefa14
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 09:07:27 2009 -0400

    [GSUB] Further optimize the main switch

 src/hb-ot-layout-gsub-private.h | 31 +++++++++++++++++--------------
 1 file changed, 17 insertions(+), 14 deletions(-)

commit 13068232e7054748ae5ba0d961ee5a95b959e92e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 08:59:01 2009 -0400

    [HB] Unify first glyph property checking

 src/hb-ot-layout-gsub-private.h     | 81
 ++++++++++++++++---------------------
 src/hb-ot-layout-gsubgpos-private.h | 12 ------
 2 files changed, 35 insertions(+), 58 deletions(-)

commit 66bf7ce4e3135535c110a917178b84c4a2b1d11f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 08:28:42 2009 -0400

    [HB] Move Context matching logic out of GSUB

 src/hb-ot-layout-gdef-private.h     |	 2 -
 src/hb-ot-layout-gsub-private.h     | 331
 +---------------------------------
 src/hb-ot-layout-gsubgpos-private.h | 347
 ++++++++++++++++++++++++++++++++++++
 3 files changed, 352 insertions(+), 328 deletions(-)

commit a1625528cd5ed94bc8f18903da3300e823ee5b54
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 07:52:11 2009 -0400

    [GSUB] Unify ContextSubst matching

 src/hb-ot-layout-gsub-private.h | 378
 ++++++++++++++++------------------------
 1 file changed, 154 insertions(+), 224 deletions(-)

commit c36238bea40e9e2b589028eb6de0710455b31585
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 07:39:34 2009 -0400

    [HB] Renames

 src/hb-ot-layout-gsub-private.h | 122
 ++++++++++++++++++++--------------------
 1 file changed, 61 insertions(+), 61 deletions(-)

commit 15c3e75b39797a153b6bc0598f87b27c4a487228
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 06:03:42 2009 -0400

    [HB] Simplify buffer

 src/harfbuzz-buffer-private.h	 | 14 ++++++--------
 src/harfbuzz-buffer.c		 | 35 ++++++++++++++++-------------------
 src/harfbuzz-gsub.c		 |  6 +++---
 src/hb-ot-layout-gsub-private.h | 12 ++++++------
 4 files changed, 31 insertions(+), 36 deletions(-)

commit 36f78446cef8a7cbae000d5e742c9d13e1cc7f83
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 05:52:32 2009 -0400

    [HB] Add TODO item

 src/TODO	       | 1 +
 src/harfbuzz-buffer.c | 2 +-
 2 files changed, 2 insertions(+), 1 deletion(-)

commit ee58aaebd296ea8237516754fd4e825d524b11b7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 05:14:33 2009 -0400

    [HB] Update copyright years

 src/hb-ot-layout-gdef-private.h | 2 +-
 src/hb-ot-layout-open-private.h | 2 +-
 src/hb-ot-layout.cc		 | 2 +-
 src/main.cc			 | 2 +-
 4 files changed, 4 insertions(+), 4 deletions(-)

commit f4c9514935cf97a58dcb3b1962ac3f3b5ba61264
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 04:59:56 2009 -0400

    [HB] Simplify more arrays

 src/hb-ot-layout-open-private.h | 241
 ++++++++++++++++------------------------
 src/hb-ot-layout.cc		 |   8 +-
 2 files changed, 100 insertions(+), 149 deletions(-)

commit c9a7cbe9cb52264af9954e5ce9ac7a45d7e310cd
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 01:22:51 2009 -0400

    [HB] Use ArrayOf<> in GSUB

 src/hb-ot-layout-gdef-private.h |   3 +-
 src/hb-ot-layout-gsub-private.h | 157
 +++++++++++++---------------------------
 src/hb-ot-layout-open-private.h |   5 --
 3 files changed, 53 insertions(+), 112 deletions(-)

commit 5f810363acc3ad3cba631a68620e3d37e54c95c4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 00:54:25 2009 -0400

    [HB] Add ArrayOf<>

 src/hb-ot-layout-gdef-private.h | 62 ++++++++-------------------------
 src/hb-ot-layout-open-private.h | 77
 ++++++++++++++++++++++++++++++-----------
 2 files changed, 71 insertions(+), 68 deletions(-)

commit 238c855fcd4f0ef97a94a8662d2a2f2bb5c21ecb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 00:22:37 2009 -0400

    [HB] Use OffsetTo<> for Coverage

 src/hb-ot-layout-gdef-private.h |  1 +
 src/hb-ot-layout-gsub-private.h | 55
 ++++++++++++++++-------------------------
 src/hb-ot-layout-open-private.h | 10 +-------
 3 files changed, 23 insertions(+), 43 deletions(-)

commit 3d54bd1293069fc3d3bdeeea8ad45036f3ee65f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 00:15:51 2009 -0400

    [HB] Use OffsetTo<> in more places

 src/hb-ot-layout-gdef-private.h | 12 +++++-------
 src/hb-ot-layout-open-private.h |  4 ++++
 2 files changed, 9 insertions(+), 7 deletions(-)

commit 9e4d9d7b2721859172bc9c59c1aea27b01eb9c07
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun May 17 00:09:20 2009 -0400

    [HB] Add OffsetTo template.

 src/hb-ot-layout-gdef-private.h | 26 ++++++++++++++------------
 src/hb-ot-layout-gsub-private.h |  6 +++---
 src/hb-ot-layout-open-private.h | 27 ++++++++++++++++++---------
 3 files changed, 35 insertions(+), 24 deletions(-)

commit e07f89295b9b38d233dfd4acec1f6b4a3416f267
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 16 23:20:48 2009 -0400

    [HB] Automate int-type size assertion

 src/hb-ot-layout-open-private.h | 13 +++----------
 1 file changed, 3 insertions(+), 10 deletions(-)

commit 8b8358033184198ff638ee1379093717596e162d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 16 22:48:14 2009 -0400

    [HB] Use templates for Null objects

    Also use a common pool for all nul-content ones.

 src/hb-ot-layout-gdef-private.h |  12 ++--
 src/hb-ot-layout-gsub-private.h |  28 ++++----
 src/hb-ot-layout-open-private.h | 142
 +++++++++++++++++++++++-----------------
 src/hb-ot-layout.cc		 |   8 +--
 4 files changed, 105 insertions(+), 85 deletions(-)

commit 6e13d4140158aff736647fc53d8c0ae3a02c2afc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 16 20:15:16 2009 -0400

    [HB] Remove obsolete comment

 src/hb-ot-layout-gdef-private.h | 1 -
 1 file changed, 1 deletion(-)

commit 9f721cf380954d67415dbfd0404a983cdd75b7df
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 16 19:59:15 2009 -0400

    [GSUB] Start ChainContextSubst

 src/hb-ot-layout-gsub-private.h | 50
 ++++++++++++++++++++++++++++++++---------
 1 file changed, 39 insertions(+), 11 deletions(-)

commit 7fca9e5245d2d283e8b5354eb1ddf553a7ffc033
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat May 16 19:44:24 2009 -0400

    [GSUB] Implement ContextSubstFormat3

 src/hb-ot-layout-gsub-private.h | 62
 ++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 61 insertions(+), 1 deletion(-)

commit 1ff926a5681b5d4bfce65351062cda9dc1ffeba2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 15 20:25:37 2009 -0400

    [GSUB] Implement ContextSubstFormat2

 src/hb-ot-layout-gsub-private.h | 105
 +++++++++++++++++++++++++++++++++++++---
 1 file changed, 97 insertions(+), 8 deletions(-)

commit fc36d9453ed7edb0a570abc44d7caa87aafb0fcf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 15 20:11:10 2009 -0400

    [GSUB] Add GSUB::substitute_lookup()

 src/hb-ot-layout-gsub-private.h | 7 +++++++
 src/hb-ot-layout.cc		 | 5 +----
 2 files changed, 8 insertions(+), 4 deletions(-)

commit c43562b2a7587fa3f9ef4c1c4338e4eda77368b5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 15 18:54:53 2009 -0400

    [GSUB] Finish ContextSubstFormat1

 src/hb-ot-layout-gsub-private.h | 77
 ++++++++++++++++++++++++++++++++---------
 src/hb-ot-layout-private.h	 | 14 ++++++++
 src/hb-ot-layout.cc		 | 13 -------
 3 files changed, 74 insertions(+), 30 deletions(-)

commit 5ee21896224e3a9835a9695037a94ccf1c35a217
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 15 13:28:56 2009 -0400

    [HB] Fix typo

 src/hb-ot-layout-open-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6b59c9b445b6d2454008c83a2c7d6a995ea5995e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 15 01:00:36 2009 -0400

    [HB] Add TODO item

 src/TODO | 1 +
 1 file changed, 1 insertion(+)

commit c5419b6cf28822e07f1ef9b0394825e9cb01a445
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 8 21:17:56 2009 -0400

    [HB] Remove DEFINE_NON_INSTANTIABLE

 src/hb-ot-layout-gdef-private.h |  2 --
 src/hb-ot-layout-gsub-private.h |  3 ---
 src/hb-ot-layout-open-private.h | 18 +-----------------
 3 files changed, 1 insertion(+), 22 deletions(-)

commit 0dff25f0368c5f14ebb0a4af35f3bb6658740d57
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 8 21:12:18 2009 -0400

    [HB] Remove get_size()

 src/hb-ot-layout-gdef-private.h |  9 ------
 src/hb-ot-layout-gsub-private.h | 63
 -----------------------------------------
 src/hb-ot-layout-open-private.h | 42 ++-------------------------
 3 files changed, 3 insertions(+), 111 deletions(-)

commit 25c6c9a3f6c062ec639d9202a8b9844be64d6fc0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 8 19:09:17 2009 -0400

    [GSUB] ContextSubst format 1

 src/hb-ot-layout-gsub-private.h | 52
 +++++++++++++++++++++++++++++++++++------
 1 file changed, 45 insertions(+), 7 deletions(-)

commit f70229510303109bd0f71423cdf13aa200066d17
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri May 8 18:45:53 2009 -0400

    [GSUB] Shuffle

 src/hb-ot-layout-gsub-private.h | 170
 ++++++++++++++++++++--------------------
 1 file changed, 86 insertions(+), 84 deletions(-)

commit a83e08f8728439ef75e3dfab2191ac913d8f907b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu May 7 12:53:02 2009 -0400

    [HarfBuzz] Start a TODO file

 src/TODO | 1 +
 1 file changed, 1 insertion(+)

commit eed05b04ebc2cbb3fa699c99200db12a0081cefb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 6 00:25:59 2009 -0400

    [GSUB] minor

 src/hb-ot-layout-open-private.h | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit cdb317bc4e188421cad997b448abb19223d39e96
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed May 6 00:12:29 2009 -0400

    [GSUB] Towards Context subtitutes

 src/hb-ot-layout-gsub-private.h | 137
 +++++++++++++++++++++++++++++++---------
 1 file changed, 108 insertions(+), 29 deletions(-)

commit c9c6a78aec2b16ac06dfca8cbfaf28a77a10bae2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 5 16:22:02 2009 -0400

    [GSUB] Minor refactoring

 src/hb-ot-layout-gsub-private.h | 42
 ++++++++++++++++++++++-------------------
 1 file changed, 23 insertions(+), 19 deletions(-)

commit bb3899a579b00134b24df8891b69bf1621a8190f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue May 5 13:25:13 2009 -0400

    [GSUB] Implement ligature substitutions

 src/Makefile.am		 |   2 +
 src/hb-ot-layout-gsub-private.h | 113
 ++++++++++++++++++++++++++++++++--------
 2 files changed, 93 insertions(+), 22 deletions(-)

commit 38b011a293181856463dd08d43e2106e5bf1d56e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon May 4 20:21:57 2009 -0400

    [GSUB] Hook new GSUB up in Pango

 src/hb-ot-layout-gsub-private.h | 15 ++++++++++-----
 1 file changed, 10 insertions(+), 5 deletions(-)

commit a84e71ad11a72feff47ead16772a8c4bcf4f69d5
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 16 16:53:40 2009 -0400

    [GSUB] Start Ligature subtable support

 src/hb-ot-layout-gsub-private.h | 132
 +++++++++++++++++++++++++++++-----------
 src/hb-ot-layout.h		 |   2 +-
 2 files changed, 96 insertions(+), 38 deletions(-)

commit 52886ca56b24a8335614b1df16a33dd4e2d7ae56
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 16 14:19:42 2009 -0400

    [GSUB] Implement Alternate subtables

 src/hb-ot-layout-gsub-private.h | 104
 ++++++++++++++++++++++++++++++++++++----
 src/hb-ot-layout-open-private.h |   2 +-
 2 files changed, 97 insertions(+), 9 deletions(-)

commit 4f27ce7e0213ac5ba356f0fd2ec0a175ffd002e6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 16 13:40:13 2009 -0400

    [GSUB] Implement Extension subtables

 src/hb-ot-layout-gsub-private.h | 169
 +++++++++++++++++++++++++---------------
 1 file changed, 108 insertions(+), 61 deletions(-)

commit 83e61ff4702121d3418fe82a8fe7ef6bb63bb5d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 16 12:30:51 2009 -0400

    [GSUB] Fix reverse lookup loop like we did in the old code before

 src/hb-ot-layout-gsub-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 5a0b791184cf6ef39eae0570e14aca21abc32845
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 16 04:45:30 2009 -0400

    [harfbuzz/GSUB] towards a partially working GSUB

 src/harfbuzz-buffer.c		 |   2 +-
 src/harfbuzz-impl.h		 |   2 +-
 src/harfbuzz.c			 |   1 -
 src/hb-ot-layout-gdef-private.h |   4 +-
 src/hb-ot-layout-gsub-private.h | 383
 +++++++++++++++++++++++++++++-----------
 src/hb-ot-layout-open-private.h |  31 +++-
 src/hb-ot-layout-private.h	 |   6 +-
 src/hb-ot-layout.cc		 |  94 +++++++---
 src/hb-ot-layout.h		 |   2 -
 9 files changed, 381 insertions(+), 144 deletions(-)

commit 30bd763fa2fa4aceee51433ec9fc8dc28480b5d7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 15 22:56:15 2009 -0400

    Implement the first substitute()

 src/harfbuzz-buffer-private.h	 |  8 ++--
 src/harfbuzz-buffer.c		 |  4 +-
 src/harfbuzz-buffer.h		 |  2 +-
 src/harfbuzz-gdef-private.h	 |  4 +-
 src/harfbuzz-gdef.c		 |  6 +--
 src/harfbuzz-gdef.h		 |  2 +-
 src/harfbuzz-gpos.c		 |  8 ++--
 src/harfbuzz-gpos.h		 |  2 +-
 src/harfbuzz-gsub.h		 |  2 +-
 src/hb-ot-layout-gsub-private.h | 88
 +++++++++++++++++++++++++++++++++++++----
 src/hb-ot-layout-open-private.h |  2 +-
 src/hb-ot-layout-private.h	 | 23 ++++++-----
 src/hb-ot-layout.cc		 | 54 +++++++++++++++++--------
 src/hb-ot-layout.h		 |  2 +-
 14 files changed, 151 insertions(+), 56 deletions(-)

commit ce48f03946bef895912019046bdbe62bb1301d0b
Merge: 0e13bee 2d15e72
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Nov 2 14:35:51 2009 -0500

    Merge harfbuzz-ng

commit 0e13beeb93077750183a8242780158b88df81e26
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Apr 17 17:03:39 2009 -0400

    Use git.mk

 src/Makefile.am | 2 ++
 1 file changed, 2 insertions(+)

commit 2d15e72c75931398db5e027e660f1320bb979117
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Apr 15 19:50:16 2009 -0400

    Give it a start at GSUB

 src/hb-common.h		 |   5 +-
 src/hb-ot-layout-gdef-private.h |  24 ++++----
 src/hb-ot-layout-gsub-private.h | 120
 +++++++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout-open-private.h |  51 ++++++++++-------
 src/hb-ot-layout-private.h	 |   2 +-
 src/hb-ot-layout.cc		 |  63 +++++++++++++++++++--
 src/hb-ot-layout.h		 |  29 +++++++++-
 src/main.cc			 |   4 +-
 8 files changed, 253 insertions(+), 45 deletions(-)

commit 9d870f2a558f4e463e3ff953312202a8d144158b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Apr 9 13:30:26 2009 -0400

    Bug 577952 – Error loading {GDEF,GSUB,GPOS} table 0x6EAD

    Detect TrueType Collections by checking the font data header instead
    of checking for "face->num_faces >1".

 src/harfbuzz-stream.c | 11 +++++++++--
 1 file changed, 9 insertions(+), 2 deletions(-)

commit d49caf1f77743550d83fc7feced1293ba34a4e99
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 2 15:16:11 2009 +0330

    [opentype] Protect against illegal access for arrays of length zero

 src/harfbuzz-gpos.c | 22 ++++++++++++++++++----
 src/harfbuzz-gsub.c |	6 ++++++
 2 files changed, 24 insertions(+), 4 deletions(-)

commit 66871797af194f9d2161faf8bfbc9684f09e207e
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 2 14:20:20 2009 +0330

    [opentype] Use size_t instead of uint for malloc wrappers

 src/harfbuzz-impl.c | 4 ++--
 src/harfbuzz-impl.h | 6 ++++--
 2 files changed, 6 insertions(+), 4 deletions(-)

commit 3664e59c52ed56486a3e38126c0c3abb78f42233
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Mar 2 11:09:29 2009 +0330

    Fix Bug 572529 – Poor -I ordering can break build

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit aca4d11388eedd532a73bd34747abb65c0ea9291
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Feb 2 00:13:07 2009 +0000

    Allocate all array rows in a single ALLOC call. Saves over 100
    alloc calls

    2009-01-31	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gpos.c (Load_Mark2Array),
	    (Free_Mark2Array):
	    Allocate all array rows in a single ALLOC call.  Saves over
	    100
	    alloc calls when loading DejaVu Sans,

 src/harfbuzz-gpos.c | 59
 +++++++++++++++--------------------------------------
 1 file changed, 17 insertions(+), 42 deletions(-)

commit c561d69c721105b78bb06d1e3c5f21ca314d924a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jan 29 09:20:08 2009 +0000

    Remove ClassDef->Defined field. This is the comment accompanying it:

    2009-01-29	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-open.h:
	    * pango/opentype/harfbuzz-gdef.c (Make_ClassRange),
	    (HB_GDEF_Build_ClassDefinition):
	    * pango/opentype/harfbuzz-gpos.c (Load_PosClassRule),
	    (Load_ChainPosClassRule):
	    * pango/opentype/harfbuzz-gsub.c (Load_SubClassRule),
	    (Load_ChainSubClassRule):
	    * pango/opentype/harfbuzz-open.c (Load_ClassDef1),
	    (Load_ClassDef2), (_HB_OPEN_Load_ClassDefinition),
	    (_HB_OPEN_Load_EmptyClassDefinition),
	    (_HB_OPEN_Free_ClassDefinition):
	    Remove ClassDef->Defined field.  This is the comment
	    accompanying it:

	      The `Defined' field is not defined in the OpenType
	      specification
	      but apparently needed for processing fonts like trado.ttf:
	      This
	      font refers to a class which contains not a single element.
	      We
	      map such classes to class 0.

	    The comment is correct that trado.ttf (MS Traditional
	    Arabic) uses
	    such classes.  However, in my testing I couldn't identify any
	    problems with the font if the special handling is removed.
	    I also
	    processed as many fonts as I could get my hand on and
	    trado.ttf was
	    the only not-totally-broken font hitting the special-case
	    code.
	    DejaVu fonts hit it too, but I'm sure they do not require the
	    special-handling code.  Most probably, that code introduces
	    bugs
	    in them.

	    The special-casing was consuming lots of memory.
	    EIGHT MEGABYTES
	    for loading DejaVu Sans!  While this could be complete
	    fixed, I
	    decided to remove the special-handling code altogether.
	    I don't
	    think it will make any real difference, and if it does,
	    we'll fix
	    fonts.  Such hacks will not be in harfbuzz-ng anyway.

	    Bug originally reported by nsf.

 src/harfbuzz-gdef.c |	8 --------
 src/harfbuzz-gpos.c | 32 --------------------------------
 src/harfbuzz-gsub.c | 31 -------------------------------
 src/harfbuzz-open.c | 30 +++---------------------------
 src/harfbuzz-open.h |	8 --------
 5 files changed, 3 insertions(+), 106 deletions(-)

commit 9372edd6f020c92609853609dcb504c72551c9c3
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jan 29 09:19:56 2009 +0000

    Use calloc(), instead of malloc()ing and memset()ing.

    2009-01-29	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-impl.c (_hb_alloc): Use calloc(),
	    instead of malloc()ing and memset()ing.

 src/harfbuzz-impl.c | 4 +---
 1 file changed, 1 insertion(+), 3 deletions(-)

commit 94c21d26ba878b3168a21f2e76f02bc52e8fe6fd
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jan 29 09:19:43 2009 +0000

    Remove old cruft.

    2009-01-29	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-dump-main.c (main): Remove old
	    cruft.

 src/harfbuzz-dump-main.c | 144
 +----------------------------------------------
 1 file changed, 1 insertion(+), 143 deletions(-)

commit 0a47c4f78e8a9e81cd305f24ec92ea61ead7dd8d
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jan 29 09:19:20 2009 +0000

    Allocate all array rows in a single ALLOC call. Saves over 2000 alloc

    2009-01-29	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gpos.c (Load_BaseArray),
	    (Free_BaseArray):
	    Allocate all array rows in a single ALLOC call.  Saves over
	    2000
	    alloc calls when loading DejaVu Sans!

 src/harfbuzz-gpos.c | 57
 ++++++++++++++++-------------------------------------
 1 file changed, 17 insertions(+), 40 deletions(-)

commit 549be924bccd187f53791dfa27647981ac909545
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Fri Dec 26 02:31:47 2008 +0000

    Bug 469049 – Fix all compiler warnings

    2008-12-25	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 469049 – Fix all compiler warnings

	    * pango-view/viewer-pangocairo.c (render_callback):
	    * pango/fonts.c (append_field),
	    (pango_font_description_to_string):
	    * pango/opentype/harfbuzz-dump.c:
	    * pango/pango-bidi-type.c
	    (pango_log2vis_get_embedding_levels):
	    * pango/pango-coverage.c (pango_coverage_set):
	    * pango/pango-markup.c (span_parse_func):
	    * pango/pango-renderer.c
	    (pango_renderer_default_draw_error_underline):
	    * pango/pango-utils.c (pango_scan_string):
	    * pango/pangocairo-render.c
	    (pango_cairo_renderer_draw_trapezoid),
	    (draw_error_underline), (pango_cairo_renderer_class_init):
	    Fix all the remaining warnings.

 src/harfbuzz-dump.c | 3 +++
 1 file changed, 3 insertions(+)

commit 719f9eaa755396ff377da10c5eeced01d3456b1b
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Fri Dec 26 02:31:35 2008 +0000

    Fix more warnings.

    2008-12-25	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/modules.c (pango_module_load), (script_info_free):
	    * pango/opentype/harfbuzz-gpos.c (HB_Load_GPOS_Table):
	    * pango/pango-bidi-type.c:
	    * pango/pango-coverage.c (pango_coverage_ref),
	    (pango_coverage_unref):
	    * pango/pango-engine.c (pango_engine_shape_real_covers),
	    (fallback_engine_shape), (fallback_engine_covers):
	    * pango/pango-fontmap.c (pango_font_map_init):
	    * pango/pango-ot-ruleset.c (pango_ot_ruleset_finalize),
	    (pango_ot_ruleset_new):
	    * pango/pangofc-decoder.c (pango_fc_decoder_init),
	    (pango_fc_decoder_class_init):
	    * pango/pangofc-font.c (pango_fc_font_find_shaper),
	    (pango_fc_font_get_coverage):
	    * pango/pangofc-fontmap.c (pango_fc_font_map_list_families),
	    (pango_fc_make_pattern), (pango_fc_font_map_get_patterns),
	    (get_first_font), (_pango_fc_font_map_get_coverage),
	    (cleanup_font), (pango_fc_font_description_from_pattern),
	    (pango_fc_face_list_sizes), (pango_fc_family_list_faces):
	    * pango/pangoft2-fontmap.c
	    (pango_ft2_font_map_get_resolution):
	    * pango/pangoft2-render.c (pango_ft2_renderer_init),
	    (pango_ft2_renderer_draw_trapezoid):
	    * pango/pangoft2.c (pango_ft2_font_get_face),
	    (pango_ft2_font_real_unlock_face),
	    (pango_ft2_free_glyph_info_callback):
	    Fix more warnings.

 src/harfbuzz-gpos.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 21f7d507f4b50e2743ab47954270f4c72d5a722a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Oct 15 03:45:29 2008 +0000

    Bug 528272 – "Error loading GPOS table 5503" when using katakana

    2008-10-14	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 528272 – "Error loading GPOS table 5503" when using
	    katakana
	    characters

	    * pango/opentype/harfbuzz-gpos.c (Load_Mark2Array): Skip
	    parsing
	    null anchor tables.

 src/harfbuzz-gpos.c | 7 +++++++
 1 file changed, 7 insertions(+)

commit a26c6ae70502b4d60c52a0648662b1619c688b9a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Sep 29 22:28:47 2008 +0000

    Fix left-to-right positioning. Reported by Peter Hunter.

    2008-09-29	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gpos.c (Position_CursiveChain):
	    Fix left-to-right positioning.  Reported by Peter Hunter.

 src/harfbuzz-gpos.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b6c06c56a33f1e1ec15e3b525ecafe8fadc679db
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sun Jun 29 18:30:14 2008 +0000

    Bug 540592 – Crash in HB_GSUB_Apply_String with Linux-Libertine font

    2008-06-29	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 540592 – Crash in HB_GSUB_Apply_String with
	    Linux-Libertine font

	    * pango/opentype/harfbuzz-gsub.c (GSUB_Do_String_Lookup):
	    Fix reverse
	    loops for type 8 lookups.

 src/harfbuzz-gsub.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit c44733596c6648e209c12349e18e35424edf3d59
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 18 21:14:23 2008 -0500

    [hb-ot-layout] Add proper namespace to accessors

 src/hb-ot-layout.cc | 165
 ++++++++++++++++++++++++++++++++++++++--------------
 src/hb-ot-layout.h  | 115 +++++++++++++++++++++++-------------
 2 files changed, 198 insertions(+), 82 deletions(-)

commit 57225672098ebdafb0c06ae091a1b55635daca29
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Feb 18 20:58:39 2008 -0500

    Fix typo, add TODOs

 src/hb-ot-layout-open-private.h | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

commit 4a26ea408c87f0bb59deca9ff44008d138471aa3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 28 07:40:10 2008 -0500

    Finish script, language, and feature public API

 src/hb-ot-layout-open-private.h |  22 ++++++---
 src/hb-ot-layout.cc		 | 107
 +++++++++++++++++++++++++++++++---------
 src/hb-ot-layout.h		 |  34 ++++++++++++-
 3 files changed, 132 insertions(+), 31 deletions(-)

commit 706ab25a4cb043d46e6088aa0a7184ee200276c9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 28 05:58:50 2008 -0500

    Add script and language public getter API

 src/hb-ot-layout-open-private.h |  40 ++++++++-----
 src/hb-ot-layout.cc		 | 127
 +++++++++++++++++++++++++++++++++++++++-
 src/hb-ot-layout.h		 |  56 ++++++++++++++++++
 src/main.cc			 |   2 +-
 4 files changed, 207 insertions(+), 18 deletions(-)

commit 40a81314fa3eb7c701aea47b43f81bfad985f717
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 28 02:30:48 2008 -0500

    Make main.cc compile again, which means finished getter API

 src/hb-ot-layout-open-private.h | 117
 +++++++++++++++++++++++++++++-----------
 src/main.cc			 |  99 +++++++++++++++++++++++-----------
 2 files changed, 155 insertions(+), 61 deletions(-)

commit e50c3978d37b2c0d6ddd4ced6a6196f6857cd596
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 28 00:16:49 2008 -0500

    Rename HB_OT_Layout to hb_ot_layout_t

 src/hb-ot-layout-private.h |  8 ++++----
 src/hb-ot-layout.cc	    | 34 +++++++++++++++++-----------------
 src/hb-ot-layout.h	    | 33 +++++++++++++++------------------
 3 files changed, 36 insertions(+), 39 deletions(-)

commit dfa811965133bc4d1696fa5a0166e17ed4142c98
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Jan 28 00:12:21 2008 -0500

    Rename hb_ot_layout_create() to hb_ot_layout_create_for_data()

 src/hb-ot-layout.cc | 4 ++--
 src/hb-ot-layout.h  | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 54e5aac5e2947d4e2864c6f2987e4d275da73100
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sun Jan 27 21:19:51 2008 -0500

    GDEF completely working now

 src/hb-ot-layout-open-private.h | 11 ++++++++---
 src/hb-ot-layout-private.h	 | 16 +++++++++-------
 src/hb-ot-layout.cc		 | 19 +++++++++----------
 src/hb-private.h		 |  7 +++++++
 src/main.cc			 | 12 ++++++------
 5 files changed, 39 insertions(+), 26 deletions(-)

commit 6f425b11799aa20dab553085f05744191b7318e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 24 19:38:56 2008 -0500

    [GDEF] Finish internal API

 src/hb-ot-layout-private.h | 15 +++++++-
 src/hb-ot-layout.cc	    | 95
 ++++++++++++++++++++++------------------------
 src/hb-ot-layout.h	    | 16 ++++----
 3 files changed, 66 insertions(+), 60 deletions(-)

commit 590d55cbb9e21ef74dfd88eee51fd0a763958cd2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 24 19:13:50 2008 -0500

    [GDEF] Finish public API

 src/hb-common.h		 |  11 ++++
 src/hb-ot-layout-gdef-private.h |  28 +++++----
 src/hb-ot-layout-open-private.h |  25 ++++----
 src/hb-ot-layout-private.h	 |  23 ++------
 src/hb-ot-layout.cc		 | 123
 +++++++++++++++++++++++++++++++++++++---
 src/hb-ot-layout.h		 |  29 ++++++----
 6 files changed, 176 insertions(+), 63 deletions(-)

commit aff831ed6787abe8e24a977e34d97ff2e0b7dc21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 24 06:03:45 2008 -0500

    Implement glyph properties

 src/hb-ot-layout-gdef-private.h | 10 ++++-
 src/hb-ot-layout-private.h	 | 16 +++++++-
 src/hb-ot-layout.cc		 | 84
 +++++++++++++++++++++++++++++++++++++----
 src/hb-ot-layout.h		 | 25 ++++++++----
 4 files changed, 117 insertions(+), 18 deletions(-)

commit ead428d7a0bf4dc84340a99f3959e5cc58123e99
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 24 03:54:09 2008 -0500

    More public api

 src/hb-ot-layout-open-private.h | 32 +++++++++++++++++++-------------
 src/hb-ot-layout-private.h	 |  9 ++++++---
 src/hb-ot-layout.cc		 | 21 ++++++++++++++-------
 src/hb-ot-layout.h		 |  2 --
 4 files changed, 39 insertions(+), 25 deletions(-)

commit fd92a3dde32fd10df30c9eeb97641bc3c15b1e9b
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jan 24 03:11:09 2008 -0500

    Starting public interface

 src/Makefile			 | 11 -----
 src/Makefile.ng		 | 11 +++++
 src/hb-ot-layout-gdef-private.h | 17 ++++----
 src/hb-ot-layout-gsub-private.h |  3 +-
 src/hb-ot-layout-open-private.h | 92
 +++++++++++++++++++++++++++++------------
 src/hb-ot-layout-private.h	 | 51 +++++++++++++++++++++++
 src/hb-ot-layout.cc		 | 67 ++++++++++++++++++++++++++++++
 src/hb-ot-layout.h		 | 35 ++++++++++++++--
 src/main.cc			 |  1 +
 9 files changed, 236 insertions(+), 52 deletions(-)

commit 7d6b95b000ec6cd8ca93113b2d81a049ad2f9bbe
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Thu Jan 24 04:42:24 2008 +0000

    Remove unused macro

 src/harfbuzz-impl.h | 2 --
 1 file changed, 2 deletions(-)

commit 7586089c6fa8185cad8387869d3703c637e5cbb1
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 18:02:28 2008 -0500

    Minor

 src/hb-ot-layout-gdef-private.h | 37 +++++++++++++++++++++++++------
 src/hb-ot-layout-gsub-private.h | 13 +++++++++++
 src/hb-ot-layout-open-private.h | 49
 ++++++++++++++++++++++++++++++++++-------
 src/hb-private.h		 |  2 ++
 4 files changed, 86 insertions(+), 15 deletions(-)

commit aefaafe5bc4fc6d37a412c135b1079c287be7045
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 17:25:29 2008 -0500

    Minor renaming

 src/hb-ot-layout-gdef-private.h | 10 +++++-----
 src/hb-ot-layout-open-private.h | 16 +++++++---------
 src/main.cc			 |  4 ++--
 3 files changed, 14 insertions(+), 16 deletions(-)

commit a16ecbf0564a6e2576da22c12827f3c0719da549
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 17:01:55 2008 -0500

    Initial gsub stub

 src/hb-ot-layout-gdef-private.h |   4 +
 src/hb-ot-layout-gsub-private.h | 453
 ++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout-open-private.h |   3 +
 src/main.cc			 |   1 +
 4 files changed, 461 insertions(+)

commit 64aef3a54999496fd1de4f5aa5b019e4c03b3836
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 16:14:38 2008 -0500

    Add copyright notices.

 src/hb-common.h		 | 26 ++++++++++++++++++++++++++
 src/hb-ot-layout-gdef-private.h | 26 ++++++++++++++++++++++++++
 src/hb-ot-layout-open-private.h | 26 ++++++++++++++++++++++++++
 src/hb-ot-layout.h		 | 26 ++++++++++++++++++++++++++
 src/hb-private.h		 | 26 ++++++++++++++++++++++++++
 src/main.cc			 | 26 ++++++++++++++++++++++++++
 6 files changed, 156 insertions(+)

commit 12360f7c159826ae72271b34486dee59d96aa8ca
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 15:50:38 2008 -0500

    Minor cleanup, add LIKELY and UNLIKELY annotations

 src/hb-ot-layout-gdef-private.h | 63
 +++++++++++++++++++++++------------------
 src/hb-ot-layout-open-private.h | 36 ++++++++---------------
 src/hb-private.h		 | 15 ++++++++++
 3 files changed, 63 insertions(+), 51 deletions(-)

commit 8dd1c8b8d6797d899d0f5b0a8015886bf6520ca2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 05:00:30 2008 -0500

    Clean up file names, add namespace

 src/harfbuzz-common.h		 |  14 -
 src/harfbuzz-gdef-private.h	 | 213 -----------
 src/harfbuzz-gdef.h		 |  11 -
 src/harfbuzz-open-private.h	 | 804
 ----------------------------------------
 src/harfbuzz-open.h		 |  17 -
 src/harfbuzz-private.h		 |  12 -
 src/hb-common.h		 |  14 +
 src/hb-ot-layout-gdef-private.h | 213 +++++++++++
 src/hb-ot-layout-open-private.h | 804
 ++++++++++++++++++++++++++++++++++++++++
 src/hb-ot-layout.h		 |  17 +
 src/hb-private.h		 |  12 +
 src/main.cc			 |   4 +-
 12 files changed, 1062 insertions(+), 1073 deletions(-)

commit 1f437e6f47fb6c15761021bd2078f31778f2179c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 04:36:40 2008 -0500

    Make all code NULL-free and assert-free

 src/harfbuzz-gdef-private.h | 125 ++++++++++---------
 src/harfbuzz-open-private.h | 285
 +++++++++++++++++++++++---------------------
 src/main.cc		     |	 8 +-
 3 files changed, 214 insertions(+), 204 deletions(-)

commit 600e5eb80f553ea8eb862e6784133574c74ca513
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 02:01:37 2008 -0500

    Define get_for_data() factories

 src/harfbuzz-gdef-private.h |	3 +++
 src/harfbuzz-open-private.h | 42
 +++++++++++++++++++++++++++++-------------
 src/main.cc		     | 10 ++++------
 3 files changed, 36 insertions(+), 19 deletions(-)

commit b9d7688fb3d45894901484b74095c4f11cab6196
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 01:38:10 2008 -0500

    Finish and test GDEF

 src/harfbuzz-gdef-private.h | 72
 ++++++++++++++++++++++++++++++++-------------
 src/harfbuzz-open-private.h | 23 ++++++++-------
 src/harfbuzz-open.h	     |	4 +++
 src/main.cc		     | 10 +++++++
 4 files changed, 77 insertions(+), 32 deletions(-)

commit 303fe62824d4e99df554b6bfaacba05d068522fb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Jan 23 00:20:48 2008 -0500

    Misc cleanup

 src/Makefile		     |	10 ++++-
 src/harfbuzz-gdef-private.h |	65 +++++++++++++++++++++-------
 src/harfbuzz-open-private.h | 102
 ++++++++++++++++++++++++++++++++++++++++----
 src/harfbuzz-private.h      |	 6 +++
 src/main.cc		     |	12 +++---
 5 files changed, 163 insertions(+), 32 deletions(-)

commit 17843245fde4cc8cddc7da8ef30357d3d8778187
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Jan 16 20:39:29 2008 +0000

    Remove COPYING.GPL and COPYING.FTL that are no longer there.

    2008-01-16	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/Makefile.am: Remove COPYING.GPL and
	    COPYING.FTL that
	    are no longer there.

 src/Makefile.am | 2 --
 1 file changed, 2 deletions(-)

commit a2a9a023f6472ba262f89e5327318996b8258d25
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Jan 15 22:46:32 2008 +0000

    HarfBuzz was relicensed to a more generous and simpler
    license. Adapt. See

    2008-01-15	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*:
	    HarfBuzz was relicensed to a more generous and simpler
	    license.
	    Adapt.  See pango/opentype/COPYING for the new license
	    which is
	    LGPL-compatible.

 src/COPYING		       |  39 +++--
 src/COPYING.FTL	       | 174 ---------------------
 src/COPYING.GPL	       | 340
 ------------------------------------------
 src/harfbuzz-buffer-private.h |  32 ++--
 src/harfbuzz-buffer.c	       |  27 +++-
 src/harfbuzz-buffer.h	       |  32 ++--
 src/harfbuzz-dump-main.c      |  34 +++--
 src/harfbuzz-dump.c	       |  34 +++--
 src/harfbuzz-dump.h	       |  35 +++--
 src/harfbuzz-gdef-private.h   |  29 +++-
 src/harfbuzz-gdef.c	       |  29 +++-
 src/harfbuzz-gdef.h	       |  29 +++-
 src/harfbuzz-global.h	       |  29 +++-
 src/harfbuzz-gpos-private.h   |  29 +++-
 src/harfbuzz-gpos.c	       |  31 +++-
 src/harfbuzz-gpos.h	       |  29 +++-
 src/harfbuzz-gsub-private.h   |  29 +++-
 src/harfbuzz-gsub.c	       |  31 +++-
 src/harfbuzz-gsub.h	       |  29 +++-
 src/harfbuzz-impl.c	       |  31 +++-
 src/harfbuzz-impl.h	       |  29 +++-
 src/harfbuzz-open-private.h   |  29 +++-
 src/harfbuzz-open.c	       |  29 +++-
 src/harfbuzz-open.h	       |  29 +++-
 src/harfbuzz-stream-private.h |  29 +++-
 src/harfbuzz-stream.c	       |  31 +++-
 src/harfbuzz.c		       |  28 +++-
 src/harfbuzz.h		       |  29 +++-
 28 files changed, 564 insertions(+), 741 deletions(-)

commit 4ccedd22eaa6e47bd8bbf255627a8b55fbb44736
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Dec 5 03:41:29 2007 +0000

    Bug 501575 – Compile errors Patch from Jens Granseuer

    2007-12-04	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 501575 – Compile errors
	    Patch from Jens Granseuer

	    * pango/opentype/harfbuzz-stream.c (_hb_font_goto_table):
	    * pango/pango-utils.c (handle_alias_line):
	    Fix C99ism.

 src/harfbuzz-stream.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit cd55cfa2b0a1fe35d5a4ad1c8feaa399d7fb7ab3
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Fri Nov 30 04:31:29 2007 +0000

    Undo accidental change.

 src/harfbuzz-impl.c | 2 --
 1 file changed, 2 deletions(-)

commit 3f05da638c8d7b13e7f860aeda1a6321e5ebd92e
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Fri Nov 30 04:29:58 2007 +0000

    Bug 485536 – underline_position can be zero

    2007-11-29	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 485536 – underline_position can be zero

	    * pango/pango-utils.c (pango_cairo_quantize_line_geometry):
	    Document that returned position may be zero.

	    * pango/pangocairo-win32font.c
	    (pango_cairo_win32_font_create_metrics_for_context):
	    * pango/pangofc-font.c (get_face_metrics):
	    Handle case of underline_position==0 after rounding.

 src/harfbuzz-impl.c | 2 ++
 1 file changed, 2 insertions(+)

commit e58278fedb67cbaac4bf4d6dfc33209cb22eec08
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sat Nov 24 01:40:13 2007 +0000

    Remove unused macro.

    2007-11-23	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-impl.c: Remove unused macro.

 src/harfbuzz-impl.c | 18 ------------------
 1 file changed, 18 deletions(-)

commit 3b047380aec4ccc707c4579327d54172c19820fd
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Sun Nov 18 22:34:08 2007 +0000

    Minor

 src/harfbuzz-dump-main.c |  4 +--
 src/harfbuzz-stream.c	  | 89
 ++++++++++++++++++++++++------------------------
 2 files changed, 46 insertions(+), 47 deletions(-)

commit 10d6a25a26bdbab4ece4edf0e34ffd3d22410ebe
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Wed Nov 7 10:04:11 2007 +0000

    Remove dead code.

 src/harfbuzz-gdef.c | 88
 -----------------------------------------------------
 src/harfbuzz-gpos.h |	4 +--
 2 files changed, 1 insertion(+), 91 deletions(-)

commit 47d2c33e3d099fae79e199367de5011bc5c12273
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 7 09:59:18 2007 +0000

    And some more.

    2007-11-07	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: And some more.

 src/harfbuzz-buffer.h	       |  8 ++---
 src/harfbuzz-dump-main.c      | 22 ++++++------
 src/harfbuzz-gdef.c	       | 14 ++++----
 src/harfbuzz-gdef.h	       |  4 +--
 src/harfbuzz-global.h	       | 21 +++++------
 src/harfbuzz-gpos.c	       | 82
 +++++++++++++++++++++----------------------
 src/harfbuzz-gpos.h	       | 12 +++----
 src/harfbuzz-gsub.c	       |  4 +--
 src/harfbuzz-gsub.h	       |  4 +--
 src/harfbuzz-stream-private.h |  4 +--
 src/harfbuzz-stream.c	       | 16 ++++-----
 11 files changed, 95 insertions(+), 96 deletions(-)

commit 78ef65ba08967fe1b5f97bcb27074bd635f4b898
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 7 08:06:01 2007 +0000

    Some more cleanup and merging.

    2007-11-07	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: Some more cleanup and merging.

 src/Makefile.am	       |   6 +-
 src/harfbuzz-buffer-private.h |  33 ++++++
 src/harfbuzz-buffer.c	       |   4 +-
 src/harfbuzz-dump-main.c      |   3 +-
 src/harfbuzz-gdef-private.h   |   9 +-
 src/harfbuzz-gdef.c	       |  39 +++++++
 src/harfbuzz-global.h	       |   2 +
 src/harfbuzz-gpos-private.h   |   1 +
 src/harfbuzz-gpos.c	       |  32 +-----
 src/harfbuzz-gsub-private.h   |   1 +
 src/harfbuzz-gsub.c	       |  33 +-----
 src/harfbuzz-impl.c	       | 216
 ++------------------------------------
 src/harfbuzz-impl.h	       | 100 +-----------------
 src/harfbuzz-open-private.h   |   4 +-
 src/harfbuzz-stream-private.h |  70 +++++++++++++
 src/harfbuzz-stream.c	       | 234
 ++++++++++++++++++++++++++++++++++++++++++
 src/harfbuzz.c		       |   1 +
 src/harfbuzz.h		       |   3 +-
 18 files changed, 419 insertions(+), 372 deletions(-)

commit 5c9bd379950d914982bdb91d0f82b8036908db37
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Mon Oct 29 23:51:48 2007 +0000

    Fix typo.

 src/Makefile.am | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit ef1f481752fa6e478f649e826c96927c98f21981
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 25 23:37:11 2007 +0000

    Even more cleanup and more type renames.

    2007-10-25	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: Even more cleanup and more type renames.

 src/harfbuzz-buffer.h |  3 +--
 src/harfbuzz-global.h |  6 ++++++
 src/harfbuzz-impl.c   | 16 ++++++++--------
 src/harfbuzz-impl.h   | 22 +++++++++++-----------
 src/harfbuzz-open.h   |  3 ---
 5 files changed, 26 insertions(+), 24 deletions(-)

commit 282c60a0eea0db784b0a094958bec35b5f3dc399
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 25 23:22:17 2007 +0000

    More cleanup, remove redundant error types.

    2007-10-25	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: More cleanup, remove redundant error
	    types.

 src/harfbuzz-dump-main.c |   4 +-
 src/harfbuzz-dump.c	  |  14 +++---
 src/harfbuzz-gdef.c	  |  25 +++++-----
 src/harfbuzz-gdef.h	  |   3 --
 src/harfbuzz-global.h	  |  31 ++++++------
 src/harfbuzz-gpos.c	  | 124
 +++++++++++++++++++++++------------------------
 src/harfbuzz-gpos.h	  |   3 --
 src/harfbuzz-gsub.c	  |  86 ++++++++++++++++----------------
 src/harfbuzz-gsub.h	  |   3 --
 src/harfbuzz-impl.c	  |  18 +++----
 src/harfbuzz-impl.h	  |   2 +
 src/harfbuzz-open.c	  |  24 ++++-----
 src/harfbuzz-open.h	  |   6 +--
 13 files changed, 170 insertions(+), 173 deletions(-)

commit 4280ec4df45ae86c10c3cd24ddb9c05e47223d39
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 25 00:23:46 2007 +0000

    Rename ftglue.c to harfbuzz-impl.c and more type renames and
    moving code

    2007-10-24	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: Rename ftglue.c to harfbuzz-impl.c
	    and more
	    type renames and moving code around.

 src/Makefile.am	     |	 3 +-
 src/ftglue.c		     | 287
 --------------------------------------------
 src/ftglue.h		     | 151 -----------------------
 src/harfbuzz-dump-main.c    |	48 +-------
 src/harfbuzz-dump.c	     |	30 ++---
 src/harfbuzz-gdef.c	     |	18 +--
 src/harfbuzz-global.h	     |	18 +++
 src/harfbuzz-gpos-private.h |	 2 +-
 src/harfbuzz-gpos.c	     |	90 +++++++-------
 src/harfbuzz-gsub-private.h |	 2 +-
 src/harfbuzz-gsub.c	     |	64 +++++-----
 src/harfbuzz-impl.c	     | 283
 +++++++++++++++++++++++++++++++++++++++++++
 src/harfbuzz-impl.h	     | 114 ++++++++++++++++--
 src/harfbuzz-open-private.h |	14 +--
 src/harfbuzz-open.c	     |	32 ++---
 src/harfbuzz-open.h	     |	16 ---
 src/harfbuzz.c		     |	 4 +-
 17 files changed, 542 insertions(+), 634 deletions(-)

commit 5716ae278a82d318ddbfeba01d0785d4efbe1454
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Oct 24 22:44:47 2007 +0000

    New header file harfbuzz-global.h. Rename FT_* int types to HB_*
    types.

    2007-10-24	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: New header file harfbuzz-global.h.  Rename
	    FT_* int types to HB_* types.

 src/Makefile.am	       |   1 +
 src/ftglue.c		       |  30 +--
 src/ftglue.h		       |  26 +-
 src/harfbuzz-buffer-private.h |  26 +-
 src/harfbuzz-buffer.c	       |  40 ++--
 src/harfbuzz-buffer.h	       |  42 ++--
 src/harfbuzz-dump-main.c      |  24 +-
 src/harfbuzz-dump.c	       |  14 +-
 src/harfbuzz-dump.h	       |   4 +-
 src/harfbuzz-gdef-private.h   |  30 +--
 src/harfbuzz-gdef.c	       | 104 ++++----
 src/harfbuzz-gdef.h	       |  32 +--
 src/harfbuzz-global.h	       |  34 +++
 src/harfbuzz-gpos-private.h   | 182 +++++++-------
 src/harfbuzz-gpos.c	       | 540
 +++++++++++++++++++++---------------------
 src/harfbuzz-gpos.h	       |  52 ++--
 src/harfbuzz-gsub-private.h   | 142 +++++------
 src/harfbuzz-gsub.c	       | 432 ++++++++++++++++-----------------
 src/harfbuzz-gsub.h	       |  50 ++--
 src/harfbuzz-impl.h	       |   6 +-
 src/harfbuzz-open-private.h   |  26 +-
 src/harfbuzz-open.c	       | 146 ++++++------
 src/harfbuzz-open.h	       |  88 +++----
 src/harfbuzz.h		       |   1 +
 24 files changed, 1056 insertions(+), 1016 deletions(-)

commit 2130d852c76cccb94350a4aea222359640ffa8a4
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Oct 24 21:35:03 2007 +0000

    Add commented-out dummy struct for Extension lookups.

    2007-10-24	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gpos-private.h:
	    * pango/opentype/harfbuzz-gsub-private.h:
	    Add commented-out dummy struct for Extension lookups.

 src/harfbuzz-gpos-private.h | 13 +++++++++++++
 src/harfbuzz-gsub-private.h | 13 +++++++++++++
 2 files changed, 26 insertions(+)

commit 13b2b963848ada169c2fe3d3669fbc1c337f7fe7
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sun Oct 21 18:17:02 2007 +0000

    Bug 488840 – harfbuzz: protect against ligid overflow

    2007-10-21	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 488840 – harfbuzz: protect against ligid overflow

	    * pango/opentype/harfbuzz-buffer.c
	    (_hb_buffer_allocate_ligid):
	    Never return zero, even in case of overflow.

	    * pango/opentype/harfbuzz-impl.h: Define dummy HB_LIKELY() and
	    HB_UNLIKELY(), to be filled later.

 src/harfbuzz-buffer.c | 6 +++++-
 src/harfbuzz-impl.h   | 3 +++
 2 files changed, 8 insertions(+), 1 deletion(-)

commit 6b347138b597c41af24453f630336ba2fc033dc5
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 08:30:50 2007 +0000

    Mark internal symbols as HB_INTERNAL and define that to static in

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: Mark internal symbols as HB_INTERNAL and
	    define that to static in harfbuzz.c.

	    * pango/opentype/harfbuzz-buffer-internal.h: New file.

 src/Makefile.am	       |   1 +
 src/ftglue.c		       |  18 +++----
 src/ftglue.h		       |  20 ++++----
 src/harfbuzz-buffer-private.h |  60 +++++++++++++++++++++++
 src/harfbuzz-buffer.c	       | 108
 +++++++++++++++++++++-------------------
 src/harfbuzz-buffer.h	       |  38 +--------------
 src/harfbuzz-gdef-private.h   |  17 ++++---
 src/harfbuzz-gdef.c	       |  20 ++++----
 src/harfbuzz-gpos-private.h   |  13 +++--
 src/harfbuzz-gpos.c	       |  16 +++---
 src/harfbuzz-gsub-private.h   |  14 +++---
 src/harfbuzz-gsub.c	       |  20 ++++----
 src/harfbuzz-impl.h	       |  12 +++--
 src/harfbuzz-open-private.h   |  81 +++++++++++++++++-------------
 src/harfbuzz-open.c	       | 111
 ++++++++++++++++++++++++------------------
 src/harfbuzz.c		       |   1 +
 16 files changed, 315 insertions(+), 235 deletions(-)

commit 7cdfb61deefd8f43edb5eb79d45d38dbbbef9051
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:46:33 2007 +0000

    Remove FTGLUE_API/APIDEF cruft.

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/ftglue.[ch]: Remove FTGLUE_API/APIDEF cruft.

 src/ftglue.c | 16 ++++++++--------
 src/ftglue.h | 24 ++++++++----------------
 2 files changed, 16 insertions(+), 24 deletions(-)

commit 61ddbafaaad31ccacde54cad7e60a84abffc0a9f
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:45:26 2007 +0000

    Build harfbuzz.c instead of individual source files, to let
    compiler go

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/Makefile.am: Build harfbuzz.c instead
	    of individual
	    source files, to let compiler go wild with optimizations!

 src/Makefile.am | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

commit a219b3d003d6727c79dc51282d21e9ac48c44458
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:34:08 2007 +0000

    Same here.

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz.c: Same here.

 src/harfbuzz.c | 1 -
 1 file changed, 1 deletion(-)

commit 6567e16e3b14c08659342bbcc9f2735e71f9114e
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:33:19 2007 +0000

    Don't include harfbuzz-dump.[ch] in libharfbuzz.a. Those are just
    used by

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/Makefile.am: Don't include harfbuzz-dump.[ch]
	    in
	    libharfbuzz.a.  Those are just used by the harfbuzz-dump tool.

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 0b032549ba7581c879a0fc4e794b0e9a4723ae85
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:24:47 2007 +0000

    Some more cleanup.

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-buffer.c: Some more cleanup.

 src/harfbuzz-buffer.c | 11 ++---------
 1 file changed, 2 insertions(+), 9 deletions(-)

commit 7a26864308bd1ca8d5f47d798411cac7239b7d38
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:21:31 2007 +0000

    Move some code around.

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-buffer.c: Move some code around.

 src/harfbuzz-buffer.c | 91
 +++++++++++++++++++++++++++------------------------
 1 file changed, 48 insertions(+), 43 deletions(-)

commit 7a5405c8261573a0f29d28fb533e800d698f6129
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Thu Oct 11 07:15:16 2007 +0000

    Minor.

 src/harfbuzz-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 986f4fd96892ebda550793941bb1daed862c4a34
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:12:49 2007 +0000

    Rename buffer->inplace to buffer->separate_out with the inverted
    meaning,

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-buffer.[ch]: Rename buffer->inplace
	    to
	    buffer->separate_out with the inverted meaning, such that
	    buffer
	    is initialization is memset(0).

 src/harfbuzz-buffer.c | 34 +++++++++++++++++-----------------
 src/harfbuzz-buffer.h |  2 +-
 2 files changed, 18 insertions(+), 18 deletions(-)

commit 06003908ccf2473366816935dd1b144cde587be9
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 07:05:09 2007 +0000

    Allocate buffer->positions lazily.

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/*: Allocate buffer->positions lazily.

 src/harfbuzz-buffer.c | 25 +++++++++++++++++++++++--
 src/harfbuzz-buffer.h |  3 +++
 src/harfbuzz-gpos.c   | 13 ++++++++-----
 src/harfbuzz-gsub.c   |  5 +++--
 4 files changed, 37 insertions(+), 9 deletions(-)

commit fc3d6f575826704a0ae9ee9018323f6a3c422f4b
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 06:52:07 2007 +0000

    Bug 485621 – Get rid of freetype memory allocator in harfbuzz

    2007-10-11	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 485621 – Get rid of freetype memory allocator in
	    harfbuzz

	    * pango/opentype/*: Remove all occurences of FT_Memory.  Use
	    malloc/realloc/free directly.

	    * pango/pango-ot*: Update to above.

 src/ftglue.c		     |	52 ++---
 src/ftglue.h		     |	28 ++-
 src/harfbuzz-buffer.c	     |	16 +-
 src/harfbuzz-buffer.h	     |	 4 +-
 src/harfbuzz-gdef.c	     | 106 ++++------
 src/harfbuzz-gdef.h	     |	 6 +-
 src/harfbuzz-gpos-private.h |	 1 -
 src/harfbuzz-gpos.c	     | 462
 ++++++++++++++++++--------------------------
 src/harfbuzz-gpos.h	     |	 2 -
 src/harfbuzz-gsub-private.h |	 1 -
 src/harfbuzz-gsub.c	     | 312 +++++++++++-------------------
 src/harfbuzz-gsub.h	     |	 2 -
 src/harfbuzz-open-private.h |	25 ++-
 src/harfbuzz-open.c	     | 127 ++++++------
 14 files changed, 441 insertions(+), 703 deletions(-)

commit a8abb8b994c3cd89808e8f7128a0c04b23eb3ede
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Oct 11 00:07:58 2007 +0000

    Bug 485559 – Boston Summit HarfBuzz optimizations

    2007-10-10	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 485559 – Boston Summit HarfBuzz optimizations

	    * pango/opentype/*: HarfBuzz hacking to:

	      - Rename last remaining FT_Err stuff to HB_Err.

	      - Fix a couple invalid table paths to be permissive so
		fonts work better.  Particularly GDEF table for Nafees
		Nastaliq is loaded and works great now.

	      - Optimize harfbuzz buffer to not copy/swap for simple
	      one-to-one and "copy" GSUB operations.

	    * pango/pango-ot*: Update to FT_Err to HB_Err renaming.

 src/ftglue.c		     |	51 ++-
 src/ftglue.h		     |	21 +-
 src/harfbuzz-buffer.c	     | 190 +++++++--
 src/harfbuzz-buffer.h	     |	26 +-
 src/harfbuzz-dump-main.c    |	14 +-
 src/harfbuzz-dump.c	     |	15 +-
 src/harfbuzz-gdef-private.h |	 4 +-
 src/harfbuzz-gdef.c	     | 149 +++----
 src/harfbuzz-gdef.h	     |	10 +-
 src/harfbuzz-gpos-private.h |	 2 +-
 src/harfbuzz-gpos.c	     | 810 ++++++++++++++++++--------------------
 src/harfbuzz-gpos.h	     |	30 +-
 src/harfbuzz-gsub-private.h |	 2 +-
 src/harfbuzz-gsub.c	     | 919
 +++++++++++++++++++-------------------------
 src/harfbuzz-gsub.h	     |	24 +-
 src/harfbuzz-impl.h	     |	22 +-
 src/harfbuzz-open-private.h |	20 +-
 src/harfbuzz-open.c	     | 238 ++++++------
 src/harfbuzz-open.h	     |	13 +-
 19 files changed, 1253 insertions(+), 1307 deletions(-)

commit dd810b76bc554278d3a226cf89901d16992cf56d
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Aug 29 08:46:50 2007 +0000

    Bug 302952 – The placement of a diacritic marks for an arabic
    ligature

    2007-08-29	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 302952 – The placement of a diacritic marks for an
	    arabic ligature
	    is not correct

	    * pango/opentype/harfbuzz-buffer.c (hb_buffer_allocate_ligid):
	    Don't
	    use zero as allocated ligature id.	Zero means no ligature id.

 src/harfbuzz-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit e90d19919434b90d79e67aaf199bddd991f8e5d8
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Aug 21 08:03:26 2007 +0000

    Bug 463430 – Gets stuck while "formatting message"

    2007-08-21	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 463430 – Gets stuck while "formatting message"

	    * pango/opentype/harfbuzz-gpos.c (Lookup_PairPos1),
	    (Lookup_PairPos2), (Lookup_PairPos), (Do_ContextPos):
	    * pango/opentype/harfbuzz-gsub.c (Do_ContextSubst):
	    Change type of intermediate index variable from FT_UShort to
	    FT_ULong as it was overlowing with more than 65536 glyphs.

 src/harfbuzz-gpos.c | 15 ++++++++++-----
 src/harfbuzz-gsub.c |	2 +-
 2 files changed, 11 insertions(+), 6 deletions(-)

commit 13b86ee398905f96f57df001309312f6dfdfea9a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Aug 21 01:38:07 2007 +0000

    Don't ignore error return value of
    hb_buffer_copy_output_glyph(). Patch

    2007-08-20	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gsub.c (GSUB_Do_String_Lookup):
	    Don't
	    ignore error return value of hb_buffer_copy_output_glyph().
	    Patch
	    sent to harfbuzz-list.

 src/harfbuzz-gsub.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 4c2556cb4c38a56c3a5087deb54aa6262ab3aff9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 6 11:29:21 2007 -0400

    [gdef] Initial implementation

 src/harfbuzz-gdef-private.h | 144
 +++++++++++++++++++++++++++++++++++++++++++-
 1 file changed, 142 insertions(+), 2 deletions(-)

commit 5b2e947fd2b7c5ea49b2bef1e0190d99a525058c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Jul 6 02:03:26 2007 -0400

    [open] small fixes, including not using unions for main structs

 src/harfbuzz-open-private.h | 54
 ++++++++++++++++++++++++---------------------
 1 file changed, 29 insertions(+), 25 deletions(-)

commit 151df44346990728b5dd249db5740a9543ae33b9
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Jul 5 17:22:07 2007 -0400

    Improve stupid Makefile

 src/Makefile | 2 ++
 1 file changed, 2 insertions(+)

commit 6c49bebc70a0118a803a5bc979f4436a82b48240
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue May 1 02:32:12 2007 +0000

    Link freetype to harfbuzz-dump, for those systems that don't track

    2007-04-30	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/Makefile.am: Link freetype to harfbuzz-dump,
	    for
	    those systems that don't track dependencies automatically.

 src/Makefile.am | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 7341a116916c8470f1211f0cb3c65b189b42ec9e
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Apr 3 22:45:29 2007 +0000

    Copy fixes from harfbuzz stable branch. Includes a leak fix, a kerning

    2007-04-03	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gdef.c (_HB_GDEF_Check_Property):
	    * pango/opentype/harfbuzz-gpos.c (HB_Done_GPOS_Table),
	    (Lookup_PairPos):
	    * pango/opentype/harfbuzz-open.c (Get_Class1):
	    Copy fixes from harfbuzz stable branch.  Includes a leak fix,
	    a kerning fix, and an array out-of-bound access fix.

 src/harfbuzz-gdef.c | 2 ++
 src/harfbuzz-gpos.c | 8 ++++++++
 src/harfbuzz-open.c | 2 +-
 3 files changed, 11 insertions(+), 1 deletion(-)

commit 999a6f05758c10a902354457ecbf6c943bfed514
Author: Hans Breuer <hans@breuer.org>
Date:	Sat Jan 13 21:31:41 2007 +0000

    updated

    2007-01-13	Hans Breuer  <hans@breuer.org>

	* pango/makefile.msc pango/opentype/makefile.msc : updated

 src/makefile.msc | 16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)

commit 3c038d40da4bfe5037cc4e9de22bad08fa408465
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Tue Jan 9 03:32:12 2007 +0000

    Remove .cvsignore files (moved to svn:ignore prop)

 src/.cvsignore | 7 -------
 1 file changed, 7 deletions(-)

commit 5b3f7702a64fe0513d08a67bdb72704e46fd7cd4
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 28 06:42:37 2006 -0500

    Add stub GDEF files

 src/harfbuzz-gdef-private.h |	8 ++++++++
 src/harfbuzz-gdef.h	     | 11 +++++++++++
 src/harfbuzz-open-private.h |	3 +--
 src/harfbuzz-private.h      |	6 ++++++
 src/main.cc		     |	1 +
 5 files changed, 27 insertions(+), 2 deletions(-)

commit b3395a7aa36ff1ba5a17f494fbf359ec317a7e69
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 28 06:31:18 2006 -0500

    Don't shift down the mark attachment type

 src/harfbuzz-open-private.h | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 193b66d52ae2cb5ced7969e15b7f56dc1978ca8a
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 28 06:12:18 2006 -0500

    Remove stale comment

 src/harfbuzz-open-private.h | 10 ----------
 1 file changed, 10 deletions(-)

commit 12c4568c680ea2b9b98a16a8b7402ca185c90ef6
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 28 06:10:59 2006 -0500

    Break and rename, in the layout of old HarfBuzz codebase

 src/.gitignore		     |	 1 +
 src/Makefile		     |	 2 +-
 src/harfbuzz-common.h	     |	14 +
 src/harfbuzz-ng.cc	     | 802
 --------------------------------------------
 src/harfbuzz-open-private.h | 697 ++++++++++++++++++++++++++++++++++++++
 src/harfbuzz-open.h	     |	13 +
 src/main.cc		     |	98 ++++++
 7 files changed, 824 insertions(+), 803 deletions(-)

commit 3158d84b0dfe5032e7c56c03f2da97b8ab549d94
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 20:08:07 2006 -0500

    Oops. s/OpenTypeFontFaceFile/OpenTypeFontFile/g

 src/harfbuzz-ng.cc | 22 +++++++++++-----------
 1 file changed, 11 insertions(+), 11 deletions(-)

commit bf0f9dd61375c5afce8e6b1664d0df5f6c8b2494
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 20:06:42 2006 -0500

    Use union for ClassDef

 src/harfbuzz-ng.cc | 12 +++++++-----
 1 file changed, 7 insertions(+), 5 deletions(-)

commit c46196d09c4ea879bf45182e8a0d649d4c750c39
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 20:05:16 2006 -0500

    Use union for Coverage

 src/harfbuzz-ng.cc | 21 +++++++++++----------
 1 file changed, 11 insertions(+), 10 deletions(-)

commit 86f450243dbaa82f187cf2d36364e9a59c0e64c7
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 19:59:07 2006 -0500

    Add GPOS stub

 src/harfbuzz-ng.cc | 3 +++
 1 file changed, 3 insertions(+)

commit 133466177e104ddcd2501a88735670540252167c
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 19:58:32 2006 -0500

    s/OpenTypeFont/OpenTypeFontFace/g

 src/harfbuzz-ng.cc | 44 +++++++++++++++++++++++---------------------
 1 file changed, 23 insertions(+), 21 deletions(-)

commit 71d62baab0429cdf56ba4019fd2a205f08188503
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 01:29:24 2006 -0500

    GSUBGPOSHeader

 src/harfbuzz-ng.cc | 103
 ++++++++++++++++++++++++++++++++++++++++++++++++++---
 1 file changed, 98 insertions(+), 5 deletions(-)

commit eebabd8b2ec5296deba6b09d7755933da0a7d9dc
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Wed Dec 27 00:21:31 2006 -0500

    Finished OpenType Common Table Formats

 src/harfbuzz-ng.cc | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 2b7374519766825971f9f4ff5b1cb49b74cfcaf8
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 20:55:37 2006 -0500

    Device tables.

 src/harfbuzz-ng.cc | 49 +++++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 45 insertions(+), 4 deletions(-)

commit eb32e374f4d6de8d428d36144f6eef93514820d2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 20:00:33 2006 -0500

    ClassDef

 src/harfbuzz-ng.cc | 121
 ++++++++++++++++++++++++++++++++++++++++++-----------
 1 file changed, 97 insertions(+), 24 deletions(-)

commit 53502c6723dbf9cd3b6ba91b733678b3c7871715
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 19:29:08 2006 -0500

    Rename CoverageFormat to Coverage

 src/harfbuzz-ng.cc | 18 +++++++++++++-----
 1 file changed, 13 insertions(+), 5 deletions(-)

commit 0d6db2abcbe98456569ccf7934ba0a8b37c7f6f3
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 18:53:55 2006 -0500

    Define more structs using DEFINE_INT_TYPE.

 src/harfbuzz-ng.cc | 39 +++++++++++++++++++--------------------
 1 file changed, 19 insertions(+), 20 deletions(-)

commit 915931b74a30e8652fac5fec153d499485513f63
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 15:30:14 2006 -0500

    s/DEFINE_NOT_INSTANTIABLE/DEFINE_NON_INSTANTIABLE/

 src/harfbuzz-ng.cc | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 0c0d55330ef4090f3e4864538e83a4344caaf3ba
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Tue Dec 26 15:29:38 2006 -0500

    Coverage.

 src/harfbuzz-ng.cc | 91
 +++++++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 79 insertions(+), 12 deletions(-)

commit 882e52f59196535495af8ca8069df32308ad52cf
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 10:28:31 2006 -0500

    Rename to harfbuzz-ng.cc

 src/Makefile		 |   2 +-
 src/harfbuzz-ng.cc	 | 513
 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/hb-types-private.cc | 513
 ------------------------------------------------
 3 files changed, 514 insertions(+), 514 deletions(-)

commit f8ba99f6f322800a915428ffc3b5eaf1be2e6c21
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 09:58:02 2006 -0500

    LookupFlags

 src/hb-types-private.cc | 52
 ++++++++++++++++++++++++++++++++++++++++++++-----
 1 file changed, 47 insertions(+), 5 deletions(-)

commit 25ad92c8a68bf72464601a644ed57b9213126a78
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 09:35:06 2006 -0500

    Implement Feature

 src/hb-types-private.cc | 46
 ++++++++++++++++++++++++++++++++++++++++++----
 1 file changed, 42 insertions(+), 4 deletions(-)

commit befc022affd2386b3f46cd7d11e4262f6c8bce9f
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 09:14:52 2006 -0500

    LangSys

 src/hb-types-private.cc | 51
 ++++++++++++++++++++++++++++++++++++++++++-------
 1 file changed, 44 insertions(+), 7 deletions(-)

commit c81efca149b08832d5d96a944fb5f303f3d0ca42
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 06:22:08 2006 -0500

    Use CamelCaseTags.

 src/hb-types-private.cc | 29 ++++++++++++++---------------
 1 file changed, 14 insertions(+), 15 deletions(-)

commit 808dbe283c1ad66091f2cb67380888b7cf265c01
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 06:18:52 2006 -0500

    Make types not instantiable

 src/hb-types-private.cc | 104
 ++++++++++++++++++++++++++----------------------
 1 file changed, 57 insertions(+), 47 deletions(-)

commit b739c05ca4b7acfa45bd4b0812ecbb3747f726f0
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Mon Dec 25 05:39:20 2006 -0500

    Add OpenTypeFontFile.

 src/Makefile		 |   2 +-
 src/hb-types-private.cc | 113
 +++++++++++++++++++++++++++++++++++++++++++++---
 2 files changed, 107 insertions(+), 8 deletions(-)

commit 8596944b7421f982960e825019fc0263442520cb
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Sat Dec 23 17:49:25 2006 -0500

    Add Makefile

 src/Makefile | 3 +++
 1 file changed, 3 insertions(+)

commit b6e62bc5db76ae342177b2b646c37f45eccad975
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Fri Dec 22 02:21:55 2006 -0500

    After DEFINE_SCRIPT_ARRAY

 src/hb-types-private.cc | 215
 +++++++++++++++++++++++++++++++-----------------
 1 file changed, 140 insertions(+), 75 deletions(-)

commit 01e4fcb032be601f272e62228881e2aabfb9d925
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 21 22:31:31 2006 -0500

    Remove the annoying HB_ prefix.

 src/hb-types-private.cc | 107
 +++++++++++++++++++++++-------------------------
 1 file changed, 52 insertions(+), 55 deletions(-)

commit 6b4ce01da121e12e1c78ad7eaedf469f35f3568d
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 21 22:31:10 2006 -0500

    Second version.  Complete redesign, based on C++ classes to ensure
    endian
    correctness.

 src/hb-types-private.cc | 300
 +++++++++++++++++++++++++++++++++---------------
 1 file changed, 205 insertions(+), 95 deletions(-)

commit f78e70c301311ffcfb007c7fc4125d71cbcff1e2
Author: Behdad Esfahbod <behdad@behdad.org>
Date:	Thu Dec 21 22:30:38 2006 -0500

    First version.

 src/hb-types-private.cc | 116
 ++++++++++++++++++++++++++++++++++++++++++++++++
 1 file changed, 116 insertions(+)

commit f726b20e56e8b1106dfde0bf8d575c73e83957c4
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Jul 25 01:02:27 2006 +0000

    Bug 347073 – Allow empty GPOS table

    2006-07-24	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 347073 – Allow empty GPOS table

	    * pango/opentype/harfbuzz-open.c (_HB_OPEN_Load_ScriptList):
	    Don't
	    err on empty GPOS/GSUB tables.

 src/harfbuzz-open.c | 5 +++++
 1 file changed, 5 insertions(+)

commit 52481a5c55d466f41654dcdc67245d0ca8cefbcf
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jun 22 18:09:04 2006 +0000

    Bug 345600 – cvs build error in pango/opentype/Makefile

    2006-06-22	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 345600 – cvs build error in pango/opentype/Makefile

	    * pango/opentype/Makefile.am: Rename variable SOURCES to
	    MAINSOURCES.
	    Some automake versions seem to use it or something.

 src/Makefile.am | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit ffb2d5c1e7af33644d0a4058befa4b8358c9a7bf
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed May 31 07:42:55 2006 +0000

    Bug 341138 – Using TTC font, Gtk2 programs begin to eating big
    memory

    2006-05-31	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 341138 – Using TTC font, Gtk2 programs begin to eating
	    big memory
	    and have many cpu usage.
	    Patch from Yong Li.

	    * pango/opentype/ftglue.c (_hb_ftglue_face_goto_table):
	    TrueType table
	    offsets are absolute, not relative.

 src/ftglue.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit f8f7bd2451eeafb57f5c80c7b4e88a1e50b97c4f
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed May 31 07:23:02 2006 +0000

    Bug 336153 – Mark to mark positioning (Lookup Type 6) isn't
    correct when

    2006-05-31	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 336153 – Mark to mark positioning (Lookup Type 6)
	    isn't correct
	    when using MarkAttchmentType
	    Patch from Tin Myo Htet.

	    * pango/opentype/harfbuzz-gpos.c (Lookup_MarkMarkPos):
	    Ignore marks
	    of non-matchin attachment type.

 src/harfbuzz-gpos.c | 37 ++++++++++++++++++++++---------------
 1 file changed, 22 insertions(+), 15 deletions(-)

commit d2a613187c1257371d62153b55c89336965e0754
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Apr 12 18:47:50 2006 +0000

    Fix loop variables. (coverity found bug.)

    2006-04-12	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-gpos.c: Fix loop
	    variables. (coverity
	    found bug.)

 src/harfbuzz-gpos.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 14022e826f63c48b689f9037645c9a3a3302d9b6
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Apr 11 08:31:44 2006 +0000

    Bug 337924 – cleanups for issues reported by various compilers Patch

    2006-04-11	Behdad Esfahbod  <behdad@gnome.org>

	    Bug 337924 – cleanups for issues reported by various
	    compilers
	    Patch from Kjartan Maraas.

	    * examples/viewer-x.c (update):
	    * modules/arabic/arabic-fc.c (fallback_shape),
	    (arabic_engine_shape):
	    * modules/basic/basic-fc.c (fallback_shape),
	    (basic_engine_shape):
	    * modules/basic/basic-x.c:
	    * modules/hangul/hangul-fc.c:
	    * modules/hebrew/hebrew-fc.c (hebrew_engine_shape):
	    * modules/indic/indic-fc.c:
	    * modules/khmer/khmer-fc.c:
	    * modules/syriac/syriac-fc.c:
	    * modules/thai/thai-fc.c:
	    * modules/tibetan/tibetan-fc.c:
	    * pango/break.c:
	    * pango/modules.c:
	    * pango/opentype/ftglue.c (_hb_ftglue_face_goto_table):
	    * pango/pango-attributes.c (pango_attr_list_filter):
	    * pango/pango-engine.c:
	    * pango/pango-fontset.c:
	    * pango/pango-layout.c (pango_layout_set_text),
	    (pango_layout_xy_to_index), (pango_layout_get_cursor_pos):
	    * pango/pango-markup.c (text_handler):
	    * pango/pango-utils.c (read_alias_file):
	    * pango/pangocairo-fcfont.c (G_DEFINE_TYPE_WITH_CODE):
	    * pango/pangocairo-fcfontmap.c (G_DEFINE_TYPE_WITH_CODE):
	    * pango/pangocairo-font.c
	    (_pango_cairo_font_get_hex_box_info):
	    * pango/pangox-fontmap.c (pango_x_make_matching_xlfd):
	    * tests/dump-boundaries.c (fail):
	    Remove unused variables.  Remove excess semicolon after
	    DEFINE_TYPE
	    macros.

 src/ftglue.c | 2 --
 1 file changed, 2 deletions(-)

commit 59aafd07806a2f0d4f399eff13aec74557f60522
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Apr 10 10:33:17 2006 +0000

    Fix minor bugs reported by the Coverity scan report.

    2006-04-10	Behdad Esfahbod  <behdad@gnome.org>

	    Fix minor bugs reported by the Coverity scan report.

	    * pango/opentype/harfbuzz-gdef.c
	    (HB_GDEF_Build_ClassDefinition):
	    * pango/opentype/harfbuzz-gpos.c (HB_GPOS_Query_Scripts),
	    (HB_GPOS_Query_Languages), (HB_GPOS_Query_Features): Do
	    not access
	    structs before we check them for nullity.

	    * pango/pango-layout.c (pango_layout_index_to_line),
	    (pango_layout_index_to_line_and_extents),
	    (pango_layout_index_to_pos): Check for invalid iterators
	    outside the
	    loop, so we don't crash.

	    * pango/pango-layout.c (pango_layout_line_x_to_index): Set
	    char_trailing instead of trailing in one of too many paths.
	    Should
	    have been a typo.

	    * pango/pangox.c (get_font_metrics_from_subfonts): Check
	    for nullity
	    somewhere.

 src/harfbuzz-gdef.c | 3 ++-
 src/harfbuzz-gpos.c | 9 ++++++---
 2 files changed, 8 insertions(+), 4 deletions(-)

commit b31d6def96ff99e89ba42e09661992498bda460d
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Apr 6 18:23:49 2006 +0000

    Update from HarfBuzz. Lars Knoll fixed all the warnings.

    2006-04-06	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype: Update from HarfBuzz.  Lars Knoll fixed
	    all the
	    warnings.

 src/harfbuzz-dump.c |	94 ++++++++++++++++++++++++++++---------------
 src/harfbuzz-gpos.c |	80 ++++++++++++++++++++++--------------
 src/harfbuzz-gsub.c | 114
 +++++++++++++++++++++++++++++-----------------------
 src/harfbuzz-impl.h |	 4 ++
 4 files changed, 179 insertions(+), 113 deletions(-)

commit ca57250bc9d9f92c88a2ea516e251b9cbfdebda0
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Apr 3 20:13:17 2006 +0000

    Make sure TTAG_GDEF and frineds are defined, needed for FreeType
    <= 2.1.7

    2006-04-03	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/harfbuzz-impl.h: Make sure TTAG_GDEF and
	    frineds are
	    defined, needed for FreeType <= 2.1.7 (pointed by Tim Janik).

 src/harfbuzz-gdef.c |	3 ---
 src/harfbuzz-gpos.c |	3 ---
 src/harfbuzz-gsub.c |	3 ---
 src/harfbuzz-impl.h | 11 +++++++++++
 4 files changed, 11 insertions(+), 9 deletions(-)

commit f618288e00914b6606ec977d506c18e4abdd3ce4
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Fri Mar 31 13:19:29 2006 +0000

    .

 src/.cvsignore | 2 --
 1 file changed, 2 deletions(-)

commit 5f1f943b9e6d753722ceadba7eb7ce1f14526ea5
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Fri Mar 31 13:18:23 2006 +0000

    .

 src/.cvsignore | 1 +
 1 file changed, 1 insertion(+)

commit bce3e0b0d4ee521767d80c5c21704337bf5ac716
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Fri Mar 31 12:45:40 2006 +0000

    Define NULL.

 src/harfbuzz-impl.h | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

commit 9f8da38cd108590514b71756b752d98952a9221f
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Fri Mar 31 12:28:09 2006 +0000

    Convert pango/opentype to the new project called HarfBuzz.

    2006-03-31	Behdad Esfahbod  <behdad@gnome.org>

	    Convert pango/opentype to the new project called HarfBuzz.

	    * pango/opentype/*: Restructured.

	    * pango/pango-ot-*: Updated to use HarfBuzz symbol names.

 src/COPYING		     |	 15 +
 src/COPYING.FTL	     |	174 ++
 src/COPYING.GPL	     |	340 +++
 src/FT-license.txt	     |	 28 -
 src/FTL.TXT		     |	174 --
 src/Makefile.am	     |	 89 +-
 src/README		     |	 44 +-
 src/disasm.c		     |	720 -----
 src/disasm.h		     |	 26 -
 src/ftglue.c		     |	 88 +-
 src/ftglue.h		     |	 68 +-
 src/ftxgdef.c		     | 1225 ---------
 src/ftxgdef.h		     |	224 --
 src/ftxgpos.c		     | 6199
 ------------------------------------------
 src/ftxgpos.h		     |	838 ------
 src/ftxgsub.c		     | 4533 -------------------------------
 src/ftxgsub.h		     |	594 ----
 src/ftxopen.c		     | 1552 -----------
 src/ftxopen.h		     |	317 ---
 src/ftxopenf.h		     |	166 --
 src/harfbuzz-buffer.c	     |	227 ++
 src/harfbuzz-buffer.h	     |	106 +
 src/harfbuzz-dump-main.c    |	272 ++
 src/harfbuzz-dump.c	     |	720 +++++
 src/harfbuzz-dump.h	     |	 34 +
 src/harfbuzz-gdef-private.h |	101 +
 src/harfbuzz-gdef.c	     | 1228 +++++++++
 src/harfbuzz-gdef.h	     |	127 +
 src/harfbuzz-gpos-private.h |	683 +++++
 src/harfbuzz-gpos.c	     | 6269
 +++++++++++++++++++++++++++++++++++++++++++
 src/harfbuzz-gpos.h	     |	168 ++
 src/harfbuzz-gsub-private.h |	448 ++++
 src/harfbuzz-gsub.c	     | 4581 +++++++++++++++++++++++++++++++
 src/harfbuzz-gsub.h	     |	132 +
 src/harfbuzz-impl.h	     |	 64 +
 src/harfbuzz-open-private.h |	 81 +
 src/harfbuzz-open.c	     | 1426 ++++++++++
 src/harfbuzz-open.h	     |	285 ++
 src/harfbuzz.c		     |	 19 +
 src/harfbuzz.h		     |	 23 +
 src/otlbuffer.c	     |	238 --
 src/otlbuffer.h	     |	103 -
 src/ottest.c		     |	274 --
 43 files changed, 17635 insertions(+), 17388 deletions(-)

commit dd2a8d4d490df1d310e7553ba6c7c8de661f28a1
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sat Mar 25 23:52:30 2006 +0000

    Don't err on Table_Missing.

    2006-03-25	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/ottest.c: Don't err on Table_Missing.

 src/ottest.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 434833b1b7b01d85a143f9ad4b04e7044dd72567
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Mar 13 05:06:05 2006 +0000

    === Released 1.12.0 ===

    2006-03-13	Behdad Esfahbod  <behdad@gnome.org>

	    * === Released 1.12.0 ===

	    * configure.in: Version 1.12.0

	    * NEWS, README: Updated.

 src/README | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 8228828e1e4c8dd6f9435fb718ad4394bba95655
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Mon Jan 30 22:37:48 2006 +0000

    Handle GSUB Lookup type 8, and ReverseChainContextualSubst table. (bug

    2006-01-30	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/ftxgsub.c: Handle GSUB Lookup type 8,
	    and ReverseChainContextualSubst table.  (bug #149696,
	    patch from Aamir Wali)

 src/ftxgsub.c	| 545
 ++++++++++++++++++++++++++++++++++++++++++++++-----------
 src/ftxgsub.h	|  47 +++--
 src/ftxopen.c	|   7 +
 src/ftxopenf.h |   5 +-
 4 files changed, 487 insertions(+), 117 deletions(-)

commit e040f681963d51eaadcd53a456100fde1a7addb6
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sat Jan 28 20:29:18 2006 +0000

    Removed.

    2006-01-28	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/pango-ot-*: Removed.

	    * pango/pango-ot-*: Added.

	    * pango/Makefile.am, pango/opentype/Makefile.am: Adjusted.

 src/Makefile.am	|  30 +--
 src/pango-ot-buffer.c	| 339 ------------------------
 src/pango-ot-info.c	| 681
 -------------------------------------------------
 src/pango-ot-private.h | 105 --------
 src/pango-ot-ruleset.c | 225 ----------------
 5 files changed, 13 insertions(+), 1367 deletions(-)

commit f45689bc655eb723f11a2eb65a41303221b80397
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Jan 25 19:33:58 2006 +0000

    If major.minor of required and available glib versions are the
    same, add

    2006-01-25	Behdad Esfahbod  <behdad@gnome.org>

	    * configure.in: If major.minor of required and available
	    glib versions
	    are the same, add -DG_DISABLE_DEPRECATED to GLIB_CFLAGS. (bug
	    #328617)

	    * */Makefile.am: Remove hardcoded -DG_DISABLE_DEPRECATED.

 src/Makefile.am | 1 -
 1 file changed, 1 deletion(-)

commit 6cc6c9a57c674787f278ea5b60705384fd72b4ad
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Sat Jan 14 07:00:13 2006 +0000

    Make sure #include <config.h> is the first include in the file. (bug

    2006-01-14	Behdad Esfahbod  <behdad@gnome.org>

	    * */*.c, */*/*.c: Make sure #include <config.h> is the
	    first include
	    in the file. (bug #158870, based on patch by Luis Menina)

 src/disasm.c		| 2 ++
 src/ftglue.c		| 1 +
 src/ftxgdef.c		| 1 +
 src/ftxgpos.c		| 2 ++
 src/ftxgsub.c		| 2 ++
 src/ftxopen.c		| 2 ++
 src/otlbuffer.c	| 3 +++
 src/ottest.c		| 1 +
 src/pango-ot-buffer.c	| 2 ++
 src/pango-ot-info.c	| 2 ++
 src/pango-ot-ruleset.c | 2 ++
 11 files changed, 20 insertions(+)

commit ca07fcf6ef61c09825e67ca7e2574a90e4f5a9a0
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Jan 5 16:14:49 2006 +0000

    pango/Makefile.am, pango/fonts.c, pango/glyphstring.c,

    2006-01-05	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/Makefile.am,
	    * pango/fonts.c,
	    * pango/glyphstring.c,
	    * pango/pango-attributes.c,
	    * pango/pango-color.c,
	    * pango/pango-impl-utils.h,
	    * pango/pango-item.c,
	    * pango/pango-layout.c,
	    * pango/pango-tabs.c,
	    * pango/pango-utils.c,
	    * pango/pango-utils.h,
	    * pango/pangoatsui-fontmap.c,
	    * pango/pangocairo-font.c,
	    * pango/pangocairo-fontmap.c,
	    * pango/pangofc-fontmap.c,
	    * pango/pangowin32-fontmap.c,
	    * pango/pangox-fontmap.c,
	    * pango/pangox.c,
	    * pango/opentype/pango-ot-info.c,
	    * pango/opentype/pango-ot-ruleset.c: Intern strings to avoid
	    unnecessary strdups in the type system. (bug #325832,
	    Matthias Clasen)

 src/pango-ot-info.c	| 3 ++-
 src/pango-ot-ruleset.c | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

commit 71524f1bc891bb4450507f769e5cc8f6f6cffa0c
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Tue Dec 27 09:55:48 2005 +0000

    Use g_slice for PangoOTBuffer allocation. (bug #325026, Matthias
    Clasen)

    2005-12-27	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/pango-ot-buffer.c: Use g_slice for
	    PangoOTBuffer
	    allocation. (bug #325026, Matthias Clasen)

 src/pango-ot-buffer.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit b5baa43d3a972ebd3ef82ede14b54c185b723a71
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Fri Nov 25 09:22:02 2005 +0000

    Tiny doc improvement.

 src/pango-ot-info.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 6f64314f7a031a5a5d6b7663c08b70c452961c89
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 23 19:48:10 2005 +0000

    Fix typo in docs.

    2005-11-23	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentyp/pango-ot-buffer.c: Fix typo in docs.

 src/pango-ot-buffer.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit f2bcf72296b57c8cd7d5a08228c3aef6c8f97d2d
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 23 17:54:55 2005 +0000

    Added "Since:" tags to all interfaces added after Pango 1.0. (#319116,

    2005-11-23	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/fonts.c pango/pango-attributes.c pango/pango-context.c
	    pango/pango-glyph-item.c pango/pango-layout.c
	    pango/pango-script.c pango/pango-utils.c pango/pangofc-font.c
	    pango/pangoft2-fontmap.c pango/opentype/pango-ot-buffer.c
	    pango/opentype/pango-ot-ruleset.c: Added "Since:" tags to all
	    interfaces added after Pango 1.0. (#319116, Brian Cameron)

 src/pango-ot-buffer.c	| 49
 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/pango-ot-ruleset.c | 14 ++++++++++++++
 2 files changed, 63 insertions(+)

commit 682db81c23d2116072d8550657c914afb7c26d2b
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 23 15:19:48 2005 +0000

    Protect against possible division by zeros (#316468, Steve Grubb)

    2005-11-23	Behdad Esfahbod  <behdad@gnome.org>

	    Protect against possible division by zeros (#316468,
	    Steve Grubb)

	    * pango/pango-context.c (update_metrics_from_items),
	    pango/pango-fontset.c (pango_fontset_real_get_metrics):
	    If count is
	    zero, do not alter approximate_{char,digit}_width.

	    * pango/opentype/disasm.c: Err on invalid DeltaFormat.

 src/disasm.c | 28 ++++++++++++++++++----------
 1 file changed, 18 insertions(+), 10 deletions(-)

commit e6e15352d154e1350340f8045759e5f7b0d86dc7
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 23 11:53:03 2005 +0000

    Reworked basic shaper with OpenType support. (#101079, based on
    patch from

    2005-11-23	Behdad Esfahbod  <behdad@gnome.org>

	    * modules/basic/basic-fc.c: Reworked basic shaper with
	    OpenType
	    support. (#101079, based on patch from Denis Jacquerye and
	    Noah Levitt)

	    * modules/basic/basic-fc.c (basic_scripts): Added Unicode
	    4.1 addition
	    script PANGO_SCRIPT_GLAGOLITIC that is a "simple" script.

	    * modules/arabic/arabic-fc.c, modules/syriac/syriac-fc.c:
	    Replace
	    g_utf8_to_ucs4_fast() with g_utf8_strlen()!

	    * pango/opentype/pango-ot-ruleset.c
	    (pango_ot_ruleset_add_feature):
	    Remove reference in docs to pango_ot_ruleset_shape() that was
	    removed long ago.

 src/pango-ot-ruleset.c | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

commit 612b6cf60928b356f4bbb59bc9d64886574322c3
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Nov 17 06:28:11 2005 +0000

    Part of #101079:

    2005-11-17	Behdad Esfahbod  <behdad@gnome.org>

	    Part of #101079:

	    * pango/opentype/ftxopen.c (Load_Lookup): In extension
	    subtables,
	    offset is relative to the extension subtable, not the original
	    table. (Greg Aumann)

	    * pango/opentype/ftxgpos.c (Load_BaseArray): When reading
	    BaseAnchor,
	    skip offsets that are zero.  Works around bug in Doulos
	    SIL Regular.

 src/ftxgpos.c | 6 ++++++
 src/ftxopen.c | 6 ++++--
 2 files changed, 10 insertions(+), 2 deletions(-)

commit 1b2c314b804da97b1d5e7adab64bdd4177702579
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Wed Nov 9 23:30:00 2005 +0000

    Remove debug line that got in accidentally.

    2005-11-09	Behdad Esfahbod  <behdad@gnome.org>

	    * pango/opentype/ftxgpos.c, pango/opentype/ftxopen.c:
	    Remove debug
	    line that got in accidentally.

 src/ftxgpos.c | 1 -
 src/ftxopen.c | 1 -
 2 files changed, 2 deletions(-)

commit 9717127a5be037e26afe52332a8b07f13474557a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Fri Nov 4 23:55:38 2005 +0000

    Turn various gcc warnings off. Adding const, adding static, fully

    2005-11-04	Behdad Esfahbod  <behdad@gnome.org>

	    * configure.in, examples/argcontext.c examples/cairoview.c,
	    examples/renderdemo.c, examples/renderdemo.h
	    examples/xftview.c,
	    modules/basic/basic-x.c, modules/hangul/hangul-fc.c,
	    modules/hebrew/hebrew-shaper.c,
	    modules/hebrew/hebrew-shaper.h,
	    modules/indic/indic-fc.c, modules/indic/mprefixups.c,
	    modules/syriac/syriac-fc.c, pango/break.c pango/fonts.c,
	    pango/modules.c, pango/pango-coverage.c pango/pango-engine.c,
	    pango/pango-engine.h, pango/pango-fontmap.c,
	    pango/pango-fontset.c, pango/pango-impl-utils.h,
	    pango/pango-layout.c, pango/pango-layout.h,
	    pango/pango-renderer.c, pango/pango-script.c,
	    pango/pango-utils.c, pango/pangocairo-fc.h,
	    pango/pangocairo-font.c, pango/pangocairo-fontmap.c,
	    pango/pangocairo-private.h, pango/pangofc-decoder.c,
	    pango/pangofc-font.c, pango/pangofc-fontmap.c
	    pango/pangoft2.c,
	    pango/pangox-fontcache.c, pango/pangox-fontmap.c
	    pango/pangox.c,
	    pango/pangoxft-font.c, pango/querymodules.c,
	    pango/opentype/ftglue.c, pango/opentype/ftxgpos.c,
	    pango/opentype/ftxopen.c, pango/opentype/pango-ot-buffer.c,
	    pango/opentype/pango-ot-info.c,
	    pango/opentype/pango-ot-ruleset.c, tests/dump-boundaries.c,
	    tests/testboundaries.c, tests/testcolor.c tests/testiter.c,
	    tests/testscript.c: Turn various gcc warnings off. Adding
	    const,
	    adding static, fully initializing structs, match signedness in
	    comparisons. (#317804)

	    * tests/testscript.c, tools/gen-script-for-lang.c:
	    (scripts_for_file): Pass error->message instead of error
	    to fail(),
	    which was wrong.
	    (compare_lang): Fix typo comparing a and a instead of a and b.

 src/ftglue.c		| 2 +-
 src/ftxgpos.c		| 4 ++++
 src/ftxopen.c		| 1 +
 src/pango-ot-buffer.c	| 4 ++--
 src/pango-ot-info.c	| 5 +++--
 src/pango-ot-ruleset.c | 5 +++--
 6 files changed, 14 insertions(+), 7 deletions(-)

commit c0505f3bb28feeba95b201e6464fb2fdac90194a
Author: Behdad Esfahbod <behdad@gnome.org>
Date:	Thu Nov 3 20:13:40 2005 +0000

    Patches from #170414. Reviewed by Matthias Clasen.

    2005-11-03	Behdad Esfahbod  <behdad@gnome.org>

	    Patches from #170414.  Reviewed by Matthias Clasen.

	    * pango/opentype/ftxgpos.c, pango/opentype/ftxgsub.c: Use
	    call table
	    to dispatch different lookup types.

	    * pango/opentype/pango-ot-buffer.c,
	    pango/opentype/pango-ot-ruleset.c:
	    Small cleanup.

 src/ftxgpos.c		| 143
 ++++++++++++++++++++++++-------------------------
 src/ftxgsub.c		| 115 +++++++++++++++++++++------------------
 src/pango-ot-buffer.c	|   3 +-
 src/pango-ot-ruleset.c |  75 +++++++++-----------------
 4 files changed, 159 insertions(+), 177 deletions(-)

commit c6b22b9119ef54ea8d0d2f08b74fdeb024289d73
Author: Behdad Esfahbod <pango@behdad.org>
Date:	Mon Aug 29 10:06:40 2005 +0000

    Generate valid XML output. Dump LookupFlag too.

    2005-08-29	Behdad Esfahbod  <pango@behdad.org>

	    * pango/opentype/ottest.c, pango/opentype/disasm.c:
	    Generate valid
	    XML output.  Dump LookupFlag too.

 src/disasm.c | 58
 ++++++++++++++++++++++++++++++----------------------------
 src/ottest.c | 23 ++++++++++++++---------
 2 files changed, 44 insertions(+), 37 deletions(-)

commit 1e3747ca5d1a6f607f8e56fb94e3daaf6ad623cb
Author: Behdad Esfahbod <pango@behdad.org>
Date:	Mon Aug 15 04:16:04 2005 +0000

    Replace perror with perror_. Remove FT_BEGIN_STMNT and FT_END_STMNT.

    2005-08-15	Behdad Esfahbod  <pango@behdad.org>

	    * pango/opentype/ftglue.h: Replace perror with perror_.
	    Remove FT_BEGIN_STMNT and FT_END_STMNT. (#313477)

 src/ftglue.h | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 3c60250875fa9d04ca96dea35eba23fc70690ff5
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Jul 26 18:33:27 2005 +0000

    Skip lookups with lookup index out of range. (Patch from Behdad
    Esfahbod,

    2005-07-26	  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c, pango/opentype/ftxgpos.c:
	    Skip lookups
	    with lookup index out of range. (Patch from Behdad Esfahbod,
	    #171170)

 src/ftxgpos.c | 30 ++++++++++++++++++++++++------
 src/ftxgsub.c | 30 ++++++++++++++++++++++++------
 2 files changed, 48 insertions(+), 12 deletions(-)

commit 91a3fa2e4bcdde8ae022d1264c783f133cd7e00d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Jul 22 18:03:58 2005 +0000

    Remove an unecessary set of block2.

    2005-07-22	Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftglue.c (ftglue_realloc): Remove
	    an unecessary set of block2.

 src/ftglue.c | 1 -
 1 file changed, 1 deletion(-)

commit ff7034787d79dcd1bec58a4e02602039313da00e
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Jul 22 17:56:37 2005 +0000

    Patch from David Turner. Review and testing by Behdad Esfahbod

    2005-07-22	Owen Taylor  <otaylor@redhat.com>

	    Patch from David Turner. Review and testing by Behdad Esfahbod

	    * pango/opentype/ftglue.[ch] Makefile.am: Glue layer that
	    provides
	    implementation of the internal functions that the opentype
	    code
	    expects in terms of publically exported FreeType API.

	    * pango/opentype/ftxgdef.c pango/opentype/ftxgpos.c
	    pango/opentype/ftxgsub.c pango/opentype/ftxopen.c
	    pango/opentype/otlbuffer.c pango/opentype/pango-ot-info.c
	    pango/opentype/pango-ot-ruleset.c: Remove includes of
	    internal headers. Small changes to work with ftglue.[ch]

	    * pango/opentype/fterrcompat.h: Remove: no longer needed.

	    * pango/opentype/ftxgpos.c: Use FT_IS_SFNT(face) rather
	    than poking at FT_MODULE_CLASS (face->driver)->module_name.

	    * pango/opentype/ftxopen.c (Free_FeatureList): Free
	    fl->ApplyOrder. (Found by Behdad)

 src/Makefile.am	|   3 +-
 src/fterrcompat.h	|  95 --------------
 src/ftglue.c		| 350
 +++++++++++++++++++++++++++++++++++++++++++++++++
 src/ftglue.h		| 156 ++++++++++++++++++++++
 src/ftxgdef.c		|   9 +-
 src/ftxgpos.c		|   9 +-
 src/ftxgsub.c		|  10 +-
 src/ftxopen.c		|   8 +-
 src/otlbuffer.c	|   4 +-
 src/pango-ot-info.c	|   6 +-
 src/pango-ot-ruleset.c |   2 -
 11 files changed, 520 insertions(+), 132 deletions(-)

commit 43dbec6f3a345ba0e4a43766610ed59622bbe4a0
Author: Owen Taylor <otaylor@redhat.com>
Date:	Thu Jul 21 18:15:45 2005 +0000

    Fix up places where there is missing or incomplete Copyright and
    License

    2005-07-21	Owen Taylor  <otaylor@redhat.com>

	    Fix up places where there is missing or incomplete
	    Copyright and License information (Reported by William N. Ray)

	    * pango/opentype/fterrcompat.h: Mark as FreeType/GPL licensed.

	    * pango/opentype/FT-license.txt: Make this the dual-licensing
	    description that covers the FreeType code (FreeType's
	    LICENSE.TXT) rather than the FTL.

	    * pango/opentype/FTL.TXT: Move the FTL (referenced from
	    FT-license.txt) to here.

	    * modules/basic/basic-common.h modules/hebrew/hebrew-shaper.h
	    modules/thai/thai-charprop.c modules/thai/thai-shaper.h
	    tools/gen-script-for-lang.c tests/testcolor.c:
	    Add LGPL header and copyright information.

	    * modules/indic/indic-ot.[ch]
	    modules/indic/indic-ot-class-tables.c
	    modules/thai/thai-ot.[ch]: Add LGPL header.

	    * modules/thai/thai-shaper.c modules/thai/thai-charprop.h:
	    Minor fixes to copyright information.

	    * modules/arabic/arabic-ot.c: Add Freetype license
	    boilerplate.

 src/FT-license.txt | 179
 +++++++----------------------------------------------
 src/FTL.TXT	    | 174
 +++++++++++++++++++++++++++++++++++++++++++++++++++
 src/fterrcompat.h  |  10 ++-
 3 files changed, 204 insertions(+), 159 deletions(-)

commit c55850d36d208c7aae8f6ed5c9e1e7927b988d6c
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Jun 14 19:54:19 2005 +0000

    Chain up from finalize. (#307547, Paolo Borelli)

    2005-06-14	Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-info.c (pango_ot_info_finalize)
	    pango/opentype/pango-ot-ruleset.c (pango_ot_ruleset_finalize):
	    Chain up from finalize. (#307547, Paolo Borelli)

	    * pango/opentype/pango-ot-info.c (pango_ot_info_finalizer):
	    make accidentally public function static.

 src/pango-ot-info.c	| 4 +++-
 src/pango-ot-ruleset.c | 2 ++
 2 files changed, 5 insertions(+), 1 deletion(-)

commit 44ff46a364fb7981804eb45329c4999b415711f9
Author: Tor Lillqvist <tml@novell.com>
Date:	Tue Apr 12 01:27:21 2005 +0000

    Rename LDADDS to libpango_ot_la_LIBADD to actually make libpango-ot.la

    2005-04-12	Tor Lillqvist  <tml@novell.com>

	* pango/opentype/Makefile.am: Rename LDADDS to
	libpango_ot_la_LIBADD to actually make libpango-ot.la link with
	it.

	* pango/pangowin32.def: Rename get_scale_factor to
	get_metrics_factor here, too. (#300222, Ivan Wong)

 src/Makefile.am | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

commit 0c349a032e5a52a9d0dcc8204f761b7cb28bfa6b
Author: Owen Taylor <otaylor@redhat.com>
Date:	Thu Mar 3 19:38:02 2005 +0000

    For all binary searches, handle the case where the number of items
    is 0.

    2005-03-03	Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxopen.c (Coverage_Index1, Coverage_Index2,
	    Get_Class2): For all binary searches, handle the case where
	    the number of items is 0. (#162977, Nick Lamb)

	    * pango/opentype/ftxgdef.c (TT_GDEF_Build_ClassDefinition):
	    Handle the case where glyph_count == 0 properly. Fix a problem
	    with cleanups on memory allocation failure.
	    (Get_New_Count, Add_Glyph_Property): Avoid reading off the
	    end of the ClassRangeRecord array.

 src/ftxgdef.c | 60
 +++++++++++++++++++++++++++++++++++------------------------
 src/ftxopen.c | 15 +++++++++++++++
 2 files changed, 51 insertions(+), 24 deletions(-)

commit 03838daaa9d485bffcb7bc46453a9a4c32a1f32f
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Nov 22 23:37:19 2004 +0000

    Set G_LOG_DOMAIN.

    Mon Nov 22 18:30:14 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/Makefile.am pango/Makefile.am
	    modules/*/Makefile.am: Set G_LOG_DOMAIN.

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 346d3b3cac253d2db41205151c185bf2fd9dda16
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Sep 22 18:14:55 2004 +0000

    Cleanups from 'sparse', #149922, Kjartan Maraas

    Wed Sep 22 14:07:47 2004  Owen Taylor  <otaylor@redhat.com>

	    Cleanups from 'sparse', #149922, Kjartan Maraas

	    * pango/pango-utils.c (read_config): () => (void) in
	    definition.

	    * pango/pangofc-fontmap.c (pango_fc_font_map_list_families):
	    Initialize *n_families, not n_families.

	    * pango/pangofc-fontmap.c pango/pangoft2.c opentype/ftxgdef.c
	    opentype/ftxgpos.c opentype/ftxgsub.c: : Fix various 0/NULL
	    confusion.

 src/ftxgdef.c | 2 +-
 src/ftxgpos.c | 6 +++---
 src/ftxgsub.c | 2 +-
 3 files changed, 5 insertions(+), 5 deletions(-)

commit 8b654dfb5ad6137ee9c5a48f5abe04bf7d28d8cd
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Sep 14 13:45:41 2004 +0000

    === Released 1.6.0 ===

    Mon Sep 13 17:38:58 2004  Owen Taylor  <otaylor@redhat.com>

	    * === Released 1.6.0 ===

	    * configure.in: Update versions for 1.6.0

	    * NEWS: Update.

	    * README: Minor tweak.

	    * pango/fonts.c pango/pango-context.c pango/pango-types.h
	    pango/pango-utils.c pango/pangoft2.c pango/pango-layout.c
	    pango/opentype/pango-ot-buffer.c: Add a bunch of missing
	    Since: 1.6.

 src/pango-ot-buffer.c | 2 ++
 1 file changed, 2 insertions(+)

commit d41089a5b691967fdd622f47c8397a80af104396
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Jul 30 21:23:04 2004 +0000

    Finish extending properties flags from FT_UShort =>
    FT_UInt. (OTLBuffer

    Fri Jul 30 17:17:05 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.[ch] pango/opentype/ftxgsub.[ch]
	    pango/opentype/ftxopen.[ch]: Finish extending properties
	    flags from FT_UShort => FT_UInt. (OTLBuffer was already
	    using an FT_UInt)

 src/ftxgpos.c | 8 ++++----
 src/ftxgpos.h | 2 +-
 src/ftxgsub.c | 8 ++++----
 src/ftxgsub.h | 2 +-
 src/ftxopen.c | 2 +-
 src/ftxopen.h | 2 +-
 6 files changed, 12 insertions(+), 12 deletions(-)

commit f42d5eca291dcdfb27d7fbf88391d6d381b8e9c4
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Jul 27 17:20:01 2004 +0000

    Save the order in which features were added and use that when applying

    Tue Jul 27 12:38:05 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxopen.[ch] pango/opentype/ftxgsub.c
	    pango/opentype/ftxpos.c: Save the order in which
	    features were added and use that when applying features.
	    (Patch from Soheil Hassas Yeganeh, #122330)

 src/ftxgpos.c | 41 ++++++++++++++++++++++++-----------------
 src/ftxgsub.c | 34 +++++++++++++++++++++-------------
 src/ftxopen.c | 14 +++++++++++---
 src/ftxopen.h |  2 ++
 4 files changed, 58 insertions(+), 33 deletions(-)

commit ae2daa972d74c5ecfe1d2f0057ce12682ad30b00
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Tue Jul 27 13:12:19 2004 +0000

    Remove the unused parameter from the IN_CURITEM() and IN_CURGLYPH
    macros.


	* pango/opentype/ftxgpos.c: Remove the unused parameter
	from the IN_CURITEM() and IN_CURGLYPH macros.

 src/ftxgpos.c | 68
 +++++++++++++++++++++++++++++------------------------------
 src/ftxgsub.c |  2 +-
 2 files changed, 35 insertions(+), 35 deletions(-)

commit 7d5435ea8cb345c79029b8a12d1bddbed28b1997
Author: Behdad Esfahbod <behdad@src.gnome.org>
Date:	Tue Jul 27 10:43:58 2004 +0000

    Fix bug to copy glyph from in_string, not out_string.


	* pango/opentype/otlbuffer.c (otl_buffer_copy_output_glyph):
	Fix bug to copy glyph from in_string, not out_string.

 src/otlbuffer.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 2ea2a55bdf7ef1caebcd0c5922b0f542ed8bb5bf
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 26 23:14:53 2004 +0000

    Fix allocation and indexing in NewGlyphClasses array. (#130661,
    Masatake

    Mon Jul 26 19:11:46 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgdef.c: Fix allocation and indexing
	    in NewGlyphClasses array. (#130661, Masatake YAMATO)

 src/ftxgdef.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 5d42695e5ed89f73fbc665792ebec82c29ae04ae
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 26 19:25:45 2004 +0000

    Remove the unused parameter from the IN_CURITEM() and IN_CURGLYPH
    macros.

    Mon Jul 26 15:24:11 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (ADD_Glyph): Remove the
	    unused parameter from the IN_CURITEM() and IN_CURGLYPH
	    macros.

 src/ftxgsub.c | 56
 ++++++++++++++++++++++++++++----------------------------
 1 file changed, 28 insertions(+), 28 deletions(-)

commit a00c4ea5626526980139b122977e367b8434d24a
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 26 19:23:06 2004 +0000

    Add missing macro to make the last change actually compile.

    Mon Jul 26 15:21:23 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c: Add missing macro to make the
	    last change actually compile.

 src/ftxgsub.c | 2 ++
 1 file changed, 2 insertions(+)

commit ed3e1f278d3ebfd224f0b57388502d4bb9fb1441
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 26 19:20:27 2004 +0000

    Match backtrack context against the output glyphs not the input glyphs

    Mon Jul 26 15:16:07 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_ChainContextSubst[123]):
	    Match backtrack context against the output glyphs not
	    the input glyphs (#145174, Aamir Wali)

 src/ftxgsub.c | 24 ++++++++++++------------
 1 file changed, 12 insertions(+), 12 deletions(-)

commit 78282cda004a88b2aadb2786dd3897884e22ed0b
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 26 18:59:02 2004 +0000

    Make Check_Property() take a OTL_GlyphItem, add a gproperties field to

    Mon Jul 26 14:49:22 2004  Owen Taylor  <otaylor@redhat.com>

	    * ftxgdef.[ch] otlbuffer.[ch]: Make Check_Property() take a
	    OTL_GlyphItem, add a gproperties field to OTLGlyphItem,
	    and use that to cache the properties for a glyph.

	    * ftxgsub.c ftxgdef.c: Adapt to Check_Property() changes.

	    * otlbuffer.[ch] ftxgsub.c: Add otl_buffer_copy_output_glyph()
	    to use when we are copying an unmodified glyph from input
	    to output that preserves the cached properties.

 src/ftxgdef.c	 | 16 ++++++++++------
 src/ftxgpos.c	 | 52 +++++++++++++++++++++++++++-------------------------
 src/ftxgsub.c	 | 54
 ++++++++++++++++++++++++++++--------------------------
 src/ftxopenf.h  |  2 +-
 src/otlbuffer.c | 21 +++++++++++++++++++--
 src/otlbuffer.h |  6 ++++++
 6 files changed, 91 insertions(+), 60 deletions(-)

commit 81b62af42313fb60db523374cd8c6901829f5c4e
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 19 21:13:23 2004 +0000

    Add support for ChainContextSubstFormat3.

    Mon Jul 19 17:09:11 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/disasm.c: Add support for
	    ChainContextSubstFormat3.

 src/disasm.c | 16 +++++++++++++++-
 1 file changed, 15 insertions(+), 1 deletion(-)

commit d4f773ef92fdbaa7e61e6577db5e9b2846a100a4
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 19 20:37:22 2004 +0000

    Fix pervasive buffer overruns when skipping glyphs when matching
    contexts.

    Mon Jul 19 16:29:45 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c pango/opentype/ftxgpos.c:
	    Fix pervasive buffer overruns when skipping glyphs
	    when matching contexts. (#118592, Kailash C. Chowksey)

 src/ftxgpos.c | 259 ++++++++++++++++++----------------------
 src/ftxgsub.c | 376
 ++++++++++++++++++++++++++--------------------------------
 2 files changed, 284 insertions(+), 351 deletions(-)

commit 99848cfafee8e598ef533f254cdb99fbae4c9364
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Jun 23 20:33:35 2004 +0000

    #143693, Sayamindu Dasgupta

    Wed Jun 23 16:13:53 2004  Owen Taylor  <otaylor@redhat.com>

	    #143693, Sayamindu Dasgupta

	    * pango/opentype/pango-ot-buffer.c
	    (pango_ot_buffer_set_zero_width_marks)
	    pango/opentype/pango-ot-private.h:
	    Allow setting for whether marks should be given zero width,
	    defaulting to FALSE.

	    * modules/arabic/arabic-fc.c (arabic_engine_shape): Turn
	    on zero-width-marks setting.

 src/pango-ot-buffer.c	| 22 +++++++++++++++++++++-
 src/pango-ot-private.h |  5 +++--
 2 files changed, 24 insertions(+), 3 deletions(-)

commit 68d4cedb8726fa239f56d62060d8fee7e09cb8be
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jun 21 18:04:02 2004 +0000

    Use the gcc-3.3 strict-aliasing compatible macros from fterrcompat.h

    Mon Jun 21 13:55:17 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/otlbuffer.c: Use the gcc-3.3
	    strict-aliasing compatible macros from fterrcompat.h
	    (#140495, reported by Stanislav Brabec)

 src/otlbuffer.c | 22 ++++++++++++++--------
 1 file changed, 14 insertions(+), 8 deletions(-)

commit b327765176dff81047f942ac56a1d206344e6039
Author: Theppitak Karoonboonyanan <tkaroonb@src.gnome.org>
Date:	Fri May 28 16:41:36 2004 +0000

    Negate y offset according to different conventions between

	* pango/opentype/pango-ot-buffer.c (apply_gpos_ltr): Negate
	y offset
	according to different conventions between PangoGlyphString
	and OTL
	(#142544)

 src/pango-ot-buffer.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 068763b547d791e28b892bcaee810f3d60a83018
Author: Owen Taylor <otaylor@redhat.com>
Date:	Thu May 27 21:55:50 2004 +0000

    Revert error return changes from last commit.

    Thu May 27 17:54:24 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/otlbuffer.c: Revert error return changes
	    from last commit.

 src/otlbuffer.c | 16 ++++++----------
 1 file changed, 6 insertions(+), 10 deletions(-)

commit ef07481025c5bbb9769b9f908d9dc78f44161bbb
Author: Owen Taylor <otaylor@redhat.com>
Date:	Thu May 27 21:03:42 2004 +0000

    Free buffer->positions, clean up error returns that were returning

    Thu May 27 16:57:30 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/otlbuffer.c: Free buffer->positions,
	    clean up error returns that were returning uninitialized
	    values. (#139239, Behdad Esfahbod)

 src/otlbuffer.c | 21 +++++++++++++--------
 1 file changed, 13 insertions(+), 8 deletions(-)

commit de568e7e6200c7a49bae1f78ac63858b8df01173
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Mar 16 19:23:43 2004 +0000

    === Released 1.4.0 ===

    Tue Mar 16 11:24:46 2004  Owen Taylor  <otaylor@redhat.com>

	    * === Released 1.4.0 ===

	    * configure.in: Version 1.4.0, interface ago 0. Require
	    glib-2.4.0.

	    * NEWS: Updates.

	    * README: Some updates; include details about the FreeType
	    license of the OpenType code.

 src/FT-license.txt | 77
 +++++++++++++++++++++++++++++-------------------------
 1 file changed, 42 insertions(+), 35 deletions(-)

commit 8b3554b3afe7c125b1a53171b01ac87de9c486fe
Author: Hans Breuer <hans@breuer.org>
Date:	Wed Mar 3 22:35:19 2004 +0000

    if PANGO_MODULE_PREFIX is defined include the basic backend shaper
    (should

    2004-03-03	Hans Breuer  <hans@breuer.org>

	* pango/module-defs-win32.c.win32 : if PANGO_MODULE_PREFIX is
	defined include the basic backend shaper (should have been
	commited at 2003-12-12, too)

	* pango/makefile.msc : generate correct type for PangoFontMask
	(bug #135892, John Ehresman)
	* pango/opentype/makefile.msc : updated

	* pango/pango.def pango/pangoft2.def : more updatd externals

 src/makefile.msc | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

commit a7e096c5de3ec5319bf9333c9ace0732d97c52c3
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Feb 29 15:44:50 2004 +0000

    Rework opentype interfaces and other changes to make GPOS work
    for Arabic.

    Sun Feb 29 09:25:13 2004  Owen Taylor  <otaylor@redhat.com>

	    Rework opentype interfaces and other changes to make GPOS
	    work for Arabic. (Most of #117282, #121060)

	    * pango/opentype/otlbuffer.[ch]: OTL_Buffer that
	    acts as a replacement for the separate GSUB and
	    GPOS string structures and hides many of the internal
	    details.

	    * pango/opentype/ftxgsub.[ch] pango/opentype/ftxgpos.[ch]:
	    Adapt to OTL_Buffer.

	    * pango/opentype/ftxgpos.c: Redo handling of cursive
	    chains so that it actually works.

	    * pango/pango-ot.h pango/opentype/pango-ot-buffer.c:
	    Pango wrapper around OTL_Buffer.

	    * pango/pango-ot.h pango/pango-ot-ruleset.c
	    pango/pango-ot-buffer.c:
	    Split pango_ot_ruleset_shape() into
	    pango_ot_ruleset_substitute(),
	    pango_ot_ruleset_position(), make them act on
	    PangoOTBuffer, add a separate pango_ot_buffer_output()
	    which does the default positioning and writes to a
	    PangoGlyphString.

	    * modules/arabic/arabic-fc.c modules/indic/indic-fc.c
	    modules/indic/mprefixups.[ch]: Adapt to new OpenType
	    interfaces; add GPOS features for Arabic.

	    * pango/opentype/pango-ot-info.c: Don't derive class
	    information
	    from Unicode properties for Arabic presentation forms,
	    let the shaping process derive the properties.

 src/Makefile.am	|   3 +
 src/ftxgdef.c		|   4 +-
 src/ftxgpos.c		| 573 ++++++++++++++++-----------------------
 src/ftxgpos.h		|  23 +-
 src/ftxgsub.c		| 719
 +++++++++++--------------------------------------
 src/ftxgsub.h		|  40 +--
 src/ftxopen.h		|   1 +
 src/otlbuffer.c	| 213 +++++++++++++++
 src/otlbuffer.h	|  97 +++++++
 src/ottest.c		|   2 +
 src/pango-ot-buffer.c	| 265 ++++++++++++++++++
 src/pango-ot-info.c	|  27 +-
 src/pango-ot-private.h |   8 +
 src/pango-ot-ruleset.c | 148 +++-------
 14 files changed, 1039 insertions(+), 1084 deletions(-)

commit d670ddf99192dd4999775a9215a818ae63fa3416
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Feb 21 14:53:12 2004 +0000

    Sign convention for y offsets is opposite between PangoGlyphString
    and FT

    Sat Feb 21 09:49:23 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-ruleset.c (pango_ot_ruleset_shape):
	    Sign convention for y offsets is opposite between
	    PangoGlyphString and FT code. (#132591)

 src/pango-ot-ruleset.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit b9b3c131c2b57c12a77124a52512fb19a1255f8e
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Feb 13 16:11:40 2004 +0000

    Memory leak fixes from Masatake YAMATO, #130652

    Fri Feb 13 10:54:18 2004  Owen Taylor  <otaylor@redhat.com>

	    Memory leak fixes from Masatake YAMATO, #130652

	    * pango/opentype/ftxgdef.c (TT_Done_GDEF_Table):
	    Free the gdef table as well as the contained data.

	    * pango/opentype/ftxgdef.c (TT_GDEF_Build_ClassDefinition):
	    Set gcd->loaded, so that the contents get freed later.

 src/ftxgdef.c | 4 ++++
 1 file changed, 4 insertions(+)

commit 926b8f322989298e43c8bac85f23e3525470a669
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jan 26 19:23:35 2004 +0000

    Suport CFF fonts as well. (#131202, Manjunath Sripadarao)

    Mon Jan 26 14:20:34 2004  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-info.c (is_truetype): Suport
	    CFF fonts as well. (#131202, Manjunath Sripadarao)

 src/pango-ot-info.c | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

commit 945e479a3a35769e5e7c792fdcf306892523a5f9
Author: Hans Breuer <hans@breuer.org>
Date:	Sat Dec 13 14:31:50 2003 +0000

    moved pango_fc_* to the latter where they live on *nix too.

    2003-12-13	Hans Breuer  <hans@breuer.org>

	* pango/pango.def pangoft2.def : moved pango_fc_*
	to the latter where they live on *nix too.

	* pango/makefile.msc : make it build again (including
	the Ft2 backend)

	* pango/module-defs-fc.c.win32 : if PANGO_MODULE_PREFIX is defined
	include the basic backend shaper

	* pango/pangowin32.c (pango_win32_render_layout) :
	initialize iter before first usage to avoid immediate crashing

	* pango/opentype/makefile.msc
		pango/modules/makefile.msc : finally build with mscv, too.
	[completely untested cause I'm not able to type, write or read
	any of these languages]

	* modules/modules.def : follow module function renaming/changes

	* modules/basic/basic-win32.c : register the right engine, i.e.
	make it compile

 src/makefile.msc | 21 +++++++++++++++++++++
 1 file changed, 21 insertions(+)

commit ba0ccd5cfcb514cdc45373158343138b7b190f9d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Nov 1 15:02:17 2003 +0000

    Switch over to recommended Freetype system of include ft2build.h then

    Sat Nov  1 09:32:15 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/pango-ot.h pango/pangofc-font.h
	    modules/indic/indic-ot.h
	    pango/pangoft2.c pango/opentype/pango-ot-info.c
	    pango/opentype/pango-ot-ruleset.c pango/opentype/ottest.c
	    pango/opentype/ftxopen.[ch] pango/opentype/ftxgdef.c
	    pango/opentype/ftxgsub.c pango/opentype/ftxgpos.c:
	    Switch over to recommended Freetype system of
	    include ft2build.h then #include FT_FREETYPE_H.
	    Fixes ftmodule.h problem with current Freetype CVS.
	    (#125548)

 src/ftxgdef.c		| 14 +++++++-------
 src/ftxgpos.c		| 17 ++++++++---------
 src/ftxgsub.c		| 13 ++++++-------
 src/ftxopen.c		| 10 +++++-----
 src/ftxopen.h		|  3 ++-
 src/ottest.c		|  1 -
 src/pango-ot-info.c	|  4 ++--
 src/pango-ot-private.h |  2 --
 src/pango-ot-ruleset.c |  4 ++--
 9 files changed, 32 insertions(+), 36 deletions(-)

commit 558171a7a3666999c679719ad0bfbdf7c6a52289
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Sep 15 22:04:55 2003 +0000

    Fix gcc-3.3 versions of macros to have the right return value.

    Mon Sep 15 17:16:59 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/fterrcompat.h: Fix gcc-3.3 versions of
	    macros to have the right return value.

 src/fterrcompat.h | 44 ++++++++++++++++++++++++++------------------
 1 file changed, 26 insertions(+), 18 deletions(-)

commit c99259bf7e08ccdc4130d4983e8d186021ea8e1a
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Aug 25 14:30:12 2003 +0000

    pango/opentype/ftxgsub.c (Lookup_ChainContextSubst3) Fix problems
    where

    Mon Aug 25 10:17:21 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_ChainContextSubst3)
	    * pango/opentype/ftxgpos.c (Lookup_ChainContextPos3):
	    Fix problems where the coverage wasn't being checked
	    for the first input glyph. (#118639, Kailash C. Chowksey)

 src/ftxgpos.c | 7 +++----
 src/ftxgsub.c | 7 +++----
 2 files changed, 6 insertions(+), 8 deletions(-)

commit bcf81bcc80c6235dfbc7eeaa34ed21ea329c7a3d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Aug 22 22:52:08 2003 +0000

    Add some macro definitions for gcc-3.3 that suppress the bogus

    Fri Aug 22 18:09:52 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/fterrcompat.h: Add some macro definitions
	    for gcc-3.3 that suppress the bogus strict-aliasing
	    warnings.

	    * pango/pango-utils.c (read_config_file): Use
	    g_hash_table_new_full() to simplify code and fix
	    gcc-3.3 warnings.

	    * pango/pangox-fontmap.c (pango_x_real_get_coverage_win)
	    * pango/querymodules.c (query_module): Suppress gcc-3.3
	    warnings.

	    * pango/modules.c (pango_find_map): Fix warning from
	    missing declaration of pango_module_get_type().

	    * pango/pango-context.c/pango-engine.c: Fix name confusion
	    for pango_get_fallback_shaper().

 src/fterrcompat.h | 36 ++++++++++++++++++++++++++++++++++--
 1 file changed, 34 insertions(+), 2 deletions(-)

commit 46d379596d7292a3b2e51f35fc8044b366d413a3
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Jul 29 14:21:54 2003 +0000

    Rewrite handling of IGNORE_SPECIAL_MARKS to be properly "ignore
    marks of

    Tue Jul 29 09:58:13 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgdef.c (Check_Property): Rewrite
	    handling of IGNORE_SPECIAL_MARKS to be properly
	    "ignore marks of attachment type different than
	    specified. (#118456, Kailash C. Chowksey)

 src/ftxgdef.c | 37 ++++++++++++++++++++++++++++---------
 1 file changed, 28 insertions(+), 9 deletions(-)

commit 8247acad79c1a4154e9337aed453eb3e4d23063d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Jul 28 22:28:37 2003 +0000

    Revert back out the FreeType patch preventing ligatures of
    not-originally

    Sat Jul 26 09:41:22 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_LigatureSubst):
	    Revert back out the FreeType patch preventing
	    ligatures of not-originally adjacent glyphs;
	    it doesn't work for all scripts. (#118472,
	    Kailash C. Chowksey)

 src/ftxgsub.c | 31 +++----------------------------
 1 file changed, 3 insertions(+), 28 deletions(-)

commit 825e6d7e86cac310161648601b09291fa05d5ba5
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Jul 27 02:40:31 2003 +0000

    Check for lookahead glyphs in the right place. (Patch from #116860)

    Sat Jul 26 22:30:59 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_ChainContextSubst{1,2,3}):
	    Check for lookahead glyphs in the right place. (Patch
	    from #116860)

	    * pango/opentype/ftxgpos.c (Lookup_ChainContextPos{1,2,3}):
	    Same fix here.

 src/ftxgpos.c | 6 +++---
 src/ftxgsub.c | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 03a0fe09c711b81c7eb4065fd4700b8cfd2c977a
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Jul 27 02:19:52 2003 +0000

    Fix return value to only contain TTO_Err_Not_Covered if *no* lookups

    Sat Jul 26 22:12:46 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Do_String_Lookup,
	    TT_GSUB_Apply_String): Fix return value to only
	    contain TTO_Err_Not_Covered if *no* lookups
	    matched. Fix memory leaks on error in Apply_String().

 src/ftxgsub.c | 120
 ++++++++++++++++++++++++++++++++++++----------------------
 1 file changed, 75 insertions(+), 45 deletions(-)

commit e10ea2afd9a5868d4ec1ff3a2b99bcd64ce45816
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Jul 27 01:10:15 2003 +0000

    Fix confusion between boolean and FT_Error return. (GSUB equivalent
    of fix

    Sat Jul 26 21:06:26 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Load_EmptyOrClassDefinition):
	    Fix confusion between boolean and FT_Error return.
	    (GSUB equivalent of fix for #108358)

 src/ftxgsub.c | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit a7305ab2624cbc08160dc11587ba3dc4e17781c2
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 15:02:13 2003 +0000

    Move allocation afer initial checks, fixing memory leak.

    Sat Jul 26 10:52:20 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c (Lookup_ContextPos2):
	    * pango/opentype/ftxgsub.c (Lookup_ContextSubst2): Move
	    allocation afer initial checks, fixing memory leak.

	    * pango/opentype/ftxgsub.c (Lookup_ChainContextSubst2):
	    Fix some more error return memory leaks that weren't
	    fixed in the Qt changes.

 src/ftxgpos.c |  8 ++++----
 src/ftxgsub.c | 12 ++++++------
 2 files changed, 10 insertions(+), 10 deletions(-)

commit f40b7c15e0bc4b71e706602c4e062f72d8f0fcdd
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 14:50:23 2003 +0000

    Fix various memory leaks from error returns that should have been
    jumps to

    Sat Jul 26 10:43:20 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c pango/opentype/ftxgpos.c:
	    Fix various memory leaks from error returns that should
	    have been jumps to cleanup blocks. (From Qt, Lars Knoll)

 src/ftxgpos.c | 8 ++++----
 src/ftxgsub.c | 4 ++--
 2 files changed, 6 insertions(+), 6 deletions(-)

commit 256d21970733483833b9cf31d5e0fa7ae853e944
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 14:35:29 2003 +0000

    Fix additional places where TTO_Err_Not_Covered wasn't considered a

    Sat Jul 26 10:30:24 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c: Fix additional places where
	    TTO_Err_Not_Covered wasn't considered a successful return
	    from Get_Class. (From Qt, Lars Knoll)

 src/ftxgpos.c | 8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

commit 374960681e2e36d0e4032623d8cb92a7910baf71
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 13:50:23 2003 +0000

    If applying a ligature lookup makes adjacent two glyphs that were not

    Sat Jul 26 09:41:22 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_LigatureSubst):
	    If applying a ligature lookup makes adjacent two glyphs
	    that were not originally adjacent, avoid making
	    subsequent ligatures between those glyphs.
	    (From FreeType, Werner Lemberg, 2001-08-22, 2001-08-23)

 src/ftxgsub.c | 31 ++++++++++++++++++++++++++++---
 1 file changed, 28 insertions(+), 3 deletions(-)

commit b682482df77608d67eca8a050db5b36f44953c13
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 13:20:52 2003 +0000

    Fix some FreeType1 variable declarations that snuck in from the last

    Sat Jul 26 09:16:57 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c pango/opentype/ftxopen.c:
	    Fix some FreeType1 variable declarations that snuck
	    in from the last commits (Christophe Fergeau,
	    118363)

 src/ftxgpos.c | 6 +++---
 src/ftxopen.c | 2 +-
 2 files changed, 4 insertions(+), 4 deletions(-)

commit 06c12109de061c357f46dcec82c4bee7160afede
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 03:45:44 2003 +0000

    OpenType-1.4 update: backtrack information is stored with the
    item closest

    Fri Jul 25 23:38:07 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c pango/opentype/ftxgsub.c:
	    OpenType-1.4 update: backtrack information is stored with the
	    item closest to the input first (From FreeType,
	    Werner Lemberg, 2002-09-26)

 src/ftxgpos.c | 26 ++++++++++++++++++--------
 src/ftxgsub.c | 24 +++++++++++++++++-------
 2 files changed, 35 insertions(+), 15 deletions(-)

commit 15a69e4a12739e7392f2a38d6f7bfdd96c0dc3ba
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 03:14:23 2003 +0000

    Update of GPOS and GSUB support to OpenType 1.3 (From FreeType, Werner

    Fri Jul 25 23:07:06 2003  Owen Taylor  <otaylor@redhat.com>

	    Update of GPOS and GSUB support to OpenType 1.3
	    (From FreeType, Werner Lemberg, 2001-08-08)

	    * pango/opentype/ftxopen.h: Add RIGHT_TO_LEFT LookupFlag

	    * pango/opentype/ftxgpos.c (GPOS_Instance): Add 'first'
	    member to mark the beginning of a chain of cursive
	    connections.

	    * pango/opentype/ftxgpos.c (Do_String_Lookup): If the
	    RIGHT_TO_FLAG flag is set, shift cursive chain up so
	    last glyph is on the baseline.

 src/ftxgpos.c | 25 ++++++++++++++++++++++++-
 src/ftxopen.h |  8 ++++++--
 2 files changed, 30 insertions(+), 3 deletions(-)

commit 6f74f18b77402f3adf5bfbae26e8f44de6543b4e
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 03:03:40 2003 +0000

    Add GPOS_LOOKUP_EXTENSION, GSUB_LOOKUP_EXTENSION, which allow lookup

    Fri Jul 25 22:59:13 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftx{gpos,gsub}.h pango/opentype/ftxgdef.c:
	    Add GPOS_LOOKUP_EXTENSION, GSUB_LOOKUP_EXTENSION, which
	    allow lookup information to be stored at 32-bit offets
	    via a double indirection. (From FreeType, Werner Lemberg,
	    2001-08-08)

 src/ftxgpos.h | 17 +++++++++--------
 src/ftxgsub.h |  1 +
 src/ftxopen.c | 19 +++++++++++++++++++
 3 files changed, 29 insertions(+), 8 deletions(-)

commit 375781c4546b5cfc453b99551ddf715bb162ffb9
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 02:44:19 2003 +0000

    Fix a couple of places where TTO_Err_Not_Covered wasn't considered a

    Fri Jul 25 22:25:48 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (Lookup_ContextSubst2,
	    Lookup_ChainContextSubst2): Fix a couple of
	    places where TTO_Err_Not_Covered wasn't considered
	    a successful return from Get_Class -- it means
	    use class index 0. (From FreeType, Werner Lemberg,
	    2001-08-06)

 src/ftxgsub.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 378e1889cd294cb77313ba7fdab3e52959bf2c40
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jul 26 02:10:42 2003 +0000

    Improvements to OpenType-dumping code, based on changes in Qt by Lars

    Fri Jul 25 20:12:00 2003  Owen Taylor  <otaylor@redhat.com>

	    Improvements to OpenType-dumping code, based on
	    changes in Qt by Lars Knoll.

	    * pango/opentype/ottest.c: Tweak the debugging output,
	    suppress some warnings.

	    * pango/opentype/disasm.c: Add support for
	    GSUB Context/Chain GPOS MarkBase lookups, improve
	    output in various ways.

 src/disasm.c | 242
 +++++++++++++++++++++++++++++++++++++++++++++++++++++++++--
 src/ottest.c |  12 +--
 2 files changed, 241 insertions(+), 13 deletions(-)

commit 07bad0e77c42b5f2535e3b018bf9074d2f4ecc7c
Author: Owen Taylor <otaylor@redhat.com>
Date:	Thu Jul 24 21:05:29 2003 +0000

    Fix uses of g_assert() around statements with side effects. (#115498,

    Thu Jul 24 17:04:21 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-ruleset.c (pango_ot_ruleset_shape):
	    Fix uses of g_assert() around statements with side effects.
	    (#115498, patch from David Cuthbert)

 src/pango-ot-ruleset.c | 14 +++++++++-----
 1 file changed, 9 insertions(+), 5 deletions(-)

commit f91deef2c9473da5c3cb5e120f2d4fbf0d638166
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Apr 16 21:48:29 2003 +0000

    More careful handling of face->charmap; if is NULL, try to set
    a unicode

    Wed Apr 16 03:46:42 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-info.c (synthesize_class_def):
	    More careful handling of face->charmap; if is NULL,
	    try to set a unicode charmap, if that doesn't succeed,
	    return. (Hopefully fixes #106550)

 src/pango-ot-info.c | 26 ++++++++++++++++++++++++--
 1 file changed, 24 insertions(+), 2 deletions(-)

commit 587b3940f3ce71e8e1c9950086923d4eb78d62db
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Apr 16 03:58:17 2003 +0000

    When loading in Load_Chain{Sub,Pos}ClassRule, the limit we have only

    Tue Apr 15 11:49:39 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxg{sub/pos}.c: When loading
	    in Load_Chain{Sub,Pos}ClassRule, the limit we
	    have only applies to the input ClassDef table.
	    Fixes problem with Arial Unicode. Much help from
	    Noah Levitt in tracing this down.

 src/ftxgpos.c | 7 ++++---
 src/ftxgsub.c | 7 ++++---
 2 files changed, 8 insertions(+), 6 deletions(-)

commit 0d7567f8eaa1f8d0ec9cb89218ce3a1475d258ac
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 15 23:01:19 2003 +0000

    Fix mispelled constant from last commit.

    Tue Apr 15 06:57:02 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c: Fix mispelled constant
	    from last commit.

 src/ftxgpos.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

commit 73cd600798a9a7225b2ac8241ea371d48cf7baf3
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 15 22:15:41 2003 +0000

    Fix confusion between boolean and FT_Error return. (#108358,
    Noah Levitt)

    Tue Apr 15 06:03:39 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c: Fix confusion between
	    boolean and FT_Error return. (#108358, Noah Levitt)

	    * pango/opentype/ftxopen.c (Get_Class1): index is
	    allowed to be NULL. (#108358, Noah Levitt)

 src/ftxgpos.c | 5 +++--
 src/ftxopen.c | 3 ++-
 2 files changed, 5 insertions(+), 3 deletions(-)

commit 462bd0be608c3d14e5b4c01099b02b3948a52369
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 15 21:05:53 2003 +0000

    Fix infinite loop in the case where the charmap contains a character >

    Tue Apr 15 05:00:39 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/pango-ot-info.c (synthesize_class_def):
	    Fix infinite loop in the case where the charmap contains
	    a character > 65535. (#106550, Morten Welinder.)

 src/pango-ot-info.c | 14 +++++++-------
 1 file changed, 7 insertions(+), 7 deletions(-)

commit 312e1c1cf9f2c1e2137b9aaa5181a541447923cb
Author: James Henstridge <james@daa.com.au>
Date:	Tue Mar 11 12:31:16 2003 +0000

    make similar changes to the ones on glib head (call gtk-docize, etc).

    2003-03-11	James Henstridge  <james@daa.com.au>

	* autogen.sh: make similar changes to the ones on glib head (call
	gtk-docize, etc).

	* configure.in: move some calculations into M4 macros, rather than
	calculating them when configure runs.
	Use AC_HELP_STRING where appropriate.
	Replace gtk-doc checks with a call to GTK_DOC_CHECK.
	Replace AC_OUTPUT_COMMANDS() call with a number of calls to
	AC_CONFIG_COMMANDS (once per created file).
	Get rid of the "chmod +x pango-config" bit, because there is no
	pango-config anymore.

	* Makefile.am: get rid of custom distcheck rule, and set
	DISTCHECK_CONFIGURE_FLAGS, which is equivalent.
	Use += to select which .pc files to install.

	* pango/Makefile.am: Add rules to rebuild module-defs* files, and
	remove them on clean.
	Reorder so that rules related to each individual library are next
	to each other.
	Use BUILT_SOURCES for built sources.

	* pango/opentype/Makefile.am: don't use STRIP_BEGIN/STRIP_END.

	* modules/*/Makefile.am: simplify module makefiles through use of
	+=, and regularise them a bit (fixed a few bugs in the process).

	* docs/Makefile.am: remove common rules, and instead include
	gtk-doc.make.

	* examples/Makefile.am: add pango.modules to CLEANFILES.

	* tests/Makefile.am: remove temporary files on clean.

 src/Makefile.am | 11 +++++------
 1 file changed, 5 insertions(+), 6 deletions(-)

commit 1aad15fd0c007c9075f2f7f4c4cacf576d726eea
Author: Owen Taylor <otaylor@redhat.com>
Date:	Mon Feb 17 22:04:29 2003 +0000

    Add an --enable-debug configure argument defaulting to 'yes'
    for unstable

    Mon Feb 17 13:06:39 2003  Owen Taylor  <otaylor@redhat.com>

	    * configure.in **/Makefile.am: Add an --enable-debug
	    configure argument defaulting to 'yes' for unstable
	    releases and 'minimum' for stable releases.
	    For minimum, -DG_DISABLE_CAST_CHECKS.

	    * pango/pangofc-fontmap.cI pango/pangoft2-fontmap.c
	    pango/pangoxft-fontmap.c: Add caching of fontsets
	    (#104495, initial patch and review by Soeren Sandmann)

	    * pango/pangofc-fontmap.cI pango/pangoft2-fontmap.c
	    pango/pangoxft-fontmap.c pango/pangoft2-private.h
	    pango/pangoxft-private.h: Remove cache of recently freed
	    fonts; not necessary now that we cache fontsets.

	    * pango/pangofc-fontmap.cI (pango_fc_pattern_set_free):
	    Rename from pango_fc_font_set_free to reflect
	    what it actually does.

	    * pango/pangofc-fontmap.cI pango/pangoft-fontmap.c
	    pango/pangoxft-fontmap.c: Combine clear-the-cache
	    functions; we didn't need separate clear-the-font-cache
	    and clear-the-pattern-cache functions.

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 5febce1ffc956ea44526d50be7cf14c69c66cb34
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Feb 12 22:12:55 2003 +0000

    Up the FreeType version requirement to 2.0.9. (2.2.1 had a compilation

    Wed Feb 12 16:59:23 2003  Owen Taylor  <otaylor@redhat.com>

	    * configure.in pango/opentype/fterrcompat.h README:
	    Up the FreeType version requirement to 2.0.9.
	    (2.2.1 had a compilation failure with older versions,
	    this catches it more cleanly, and removes some unneeded
	    checks. #105302, problem reported by Will Partain.)

 src/fterrcompat.h | 4 ----
 1 file changed, 4 deletions(-)

commit 54e85cc0cf3700d2c4af5396d79bd0e40df8f0da
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sat Jan 11 00:16:26 2003 +0000

    Export TT_New_GDEF_Table to create an empty GDEF table.

    Fri Jan 10 18:56:36 2003  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgdef.c: Export TT_New_GDEF_Table
	    to create an empty GDEF table.

	    * pango/opentype/pango-ot-info.c: If the font doesn't
	    have a class definition table, synthesize one using
	    the charmap and the unicode properties of characters
	    in the charmap. (Needed to make things work with various
	    old Arabic fonts, such as the KACST fonts)

 src/ftxgdef.c	     |	46 +++++++++++++++-------
 src/ftxgdef.h	     |	 4 ++
 src/pango-ot-info.c | 108
 ++++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 144 insertions(+), 14 deletions(-)

commit db6bb4b034d4d8d546fc9bdc4ad28b16bb7f1bb7
Author: Matthias Clasen <matthiasc@src.gnome.org>
Date:	Thu Nov 28 23:53:18 2002 +0000

    Add docs.

	* docs/tmpl/xft-fonts.sgml:
	* docs/tmpl/freetype-fonts.sgml: Add docs.

	* pango/pangoxft-fontmap.c (pango_xft_substitute_changed):
	* pango/pangoft2-fontmap.c
	(pango_ft2_font_map_set_default_substitute):
	Fix doc typos.

 src/pango-ot-info.c | 4 +++-
 1 file changed, 3 insertions(+), 1 deletion(-)

commit 226d9b67db852eb29ad37ec8121b79f3ea6f0b73
Author: Sebastian Wilhelmi <wilhelmi@ira.uka.de>
Date:	Tue Nov 26 13:37:10 2002 +0000

    Do not add GLIB_CFLAGS to CFLAGS.


    2002-11-26	Sebastian Wilhelmi  <wilhelmi@ira.uka.de>

	* configure.in: Do not add GLIB_CFLAGS to CFLAGS.

	* docs/Makefile.am, examples/Makefile.am,
	modules/arabic/Makefile.am, modules/basic/Makefile.am,
	modules/hangul/Makefile.am, modules/hebrew/Makefile.am,
	modules/indic/Makefile.am, modules/tamil/Makefile.am,
	modules/thai/Makefile.am, pango/Makefile.am,
	pango/mini-fribidi/Makefile.am, pango/opentype/Makefile.am:
	Instead add $(GLIB_CFLAGS) directly to INCLUDES (GTKDOC_CFLAGS for
	docs/Makefile.am). Also some cosmetic line wrapping and
	reindentation.

 src/Makefile.am | 5 +++--
 1 file changed, 3 insertions(+), 2 deletions(-)

commit 80634a30b9abdf575320bc6fdacdba4e1ea3903d
Author: Manish Singh <yosh@gimp.org>
Date:	Mon Oct 14 22:50:48 2002 +0000

    Get rid of unnecessary casts for g_object_{ref,unref}

    Mon Oct 14 15:39:41 2002  Manish Singh  <yosh@gimp.org>

	    * pango/pango-context.c pango/pango-layout.c pango/pangoft2.c
	    pango/pangowin32-fontmap.c pango/pangowin32.c
	    pango/pangox-fontmap.c
	    pango/pangox.c pango/pangoxft-font.c pango/pangoxft-fontmap.c
	    pango/testfonts.c pango/opentype/pango-ot-ruleset.c:
	    Get rid of unnecessary casts for g_object_{ref,unref}

 src/pango-ot-ruleset.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

commit 741993e0b15b4df86d76fa8df5055bd764c42c71
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Sep 29 19:06:58 2002 +0000

    ligatures can be also used in MarkBasePos lookups. (2001-03-17 Werner

    Sun Sep 29 14:55:36 2002  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgpos.c: ligatures can be also used in
	    MarkBasePos lookups. (2001-03-17  Werner Lemberg)

 src/ftxgpos.c | 13 ++++++++++---
 1 file changed, 10 insertions(+), 3 deletions(-)

commit a35dc445e86ab433fe9f3937c95f2c1f18f58110
Author: Owen Taylor <otaylor@redhat.com>
Date:	Sun Sep 29 19:05:01 2002 +0000

    Start of merges from freetype1 of OpenType fixes.

    Sun Sep 29 14:51:25 2002  Owen Taylor  <otaylor@redhat.com>

	    Start of merges from freetype1 of OpenType fixes.

	    (2001-03-17  Werner Lemberg)

	    * pango/opentype/ftxgdef.c pango/opentype/ftxgpos.c
	    pango/opentype/ftxg\sub.c:
	    More fixes for special marks.

 src/ftxgdef.c | 13 ++++++++-----
 src/ftxgpos.c |  6 +++---
 src/ftxgsub.c |  4 ++--
 3 files changed, 13 insertions(+), 10 deletions(-)

commit 5c53f14f371b349da65dfa3a848b17ab89ce3ba8
Author: Tor Lillqvist <tml@iki.fi>
Date:	Mon Sep 23 21:45:31 2002 +0000

    Remove. Not used. (A static library is built here. Exported entries
    are in

    2002-09-24	Tor Lillqvist  <tml@iki.fi>

	* pango/opentype/pango-ot.def: Remove. Not used. (A static library
	is built here. Exported entries are in ../pangoft2.def.)

	* pango/opentype/Makefile.am (EXTRA_DIST): Remove from here, too.

 src/Makefile.am  |  3 +--
 src/pango-ot.def | 50 --------------------------------------------------
 2 files changed, 1 insertion(+), 52 deletions(-)

commit 35e4593ccd9ea5ed78f1e6f32f04b3a13cee0145
Author: Tor Lillqvist <tml@iki.fi>
Date:	Mon Sep 23 21:19:30 2002 +0000

    pango/makefile.mingw.in pango/mini-fribidi/makefile.mingw Remove. Not

    2002-09-23	Tor Lillqvist  <tml@iki.fi>

	* pango/makefile.mingw.in
	* pango/mini-fribidi/makefile.mingw
	* pango/opentype/makefile.mingw.in: Remove. Not maintained.

	* pango/Makefile.am (EXTRA_DIST)
	* pango/mini-fribidi/Makefile.am (EXTRA_DIST)
	* pango/opentype/Makefile.am (EXTRA_DIST): Remove
	makefile.mingw(.in) from here, too.

	* configure.in (AC_OUTPUT): Don't try to output above removed
	files.

 src/Makefile.am       |  3 +--
 src/makefile.mingw.in | 43 -------------------------------------------
 2 files changed, 1 insertion(+), 45 deletions(-)

commit fb279cb0bf676bb1d225e6a296282523d839074d
Author: Eric Mader <emader@src.gnome.org>
Date:	Mon Sep 9 18:11:55 2002 +0000

    Correctly handle back, new_advance.

 src/pango-ot-ruleset.c | 25 ++++++++++++++++---------
 1 file changed, 16 insertions(+), 9 deletions(-)

commit c880e814a50100577811a8a51bc06b4275c55a7e
Author: Eric Mader <emader@src.gnome.org>
Date:	Fri Sep 6 22:45:23 2002 +0000

    Don't fail when reading an empty script.

 src/ftxopen.c | 36 +++++++++++++++++++++++++-----------
 src/ftxopen.h |  1 +
 2 files changed, 26 insertions(+), 11 deletions(-)

commit 441e7d0292bf1a06396daac80fcbad23976a824d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Aug 7 17:01:52 2002 +0000

    Offset to MarkAttachClassDef is offset to table, not offset to
    offset to

    Wed Aug  7 12:32:39 2002  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgsub.c (TT_Load_GSUB_Table):
	    Offset to MarkAttachClassDef is offset to table,
	    not offset to offset to table.

	    * pango/opentype/ftxopen.c (Get_Device): Handle
	    NULL device tables which we represent with
	    d->DeltaValue == NULL.

 src/ftxgsub.c | 13 -------------
 src/ftxopen.c |  2 +-
 2 files changed, 1 insertion(+), 14 deletions(-)

commit 48a16fa8090b67b046b2bb686ff4f6f038a2b8e8
Author: Owen Taylor <otaylor@src.gnome.org>
Date:	Tue Jun 4 00:20:51 2002 +0000

    on Jun  3 18:56:09 2002  Owen Taylor  <otaylor@redhat.com>

	    Xft2 and fontconfig conversion, based largely on a patch
	    from Keith Packard.

	    * configure.in acconfig.h: Add checks for fontconfig, switch
	    Xft checks to switch for Xft2 using pkg-config.

	    * pangoxft.pc.in pangoxft.pc.in
	    modules/{arabic,basic,hebrew,indic,tamil}/Makefile.am
	    pango/Makefile.am: Reflect new Xft/fontconfig dependencies.

	    * pango/pangoxft-private.h pango/pangoxft-fontmap.c
	    modules/arabic/arabic-xft.c modules/indic/indic-xft.c:
	    Switch over to using Xft2 and fontconfig.

	    * pango/pangoft2.c pango/pangoft2-fontmap.c
	    pango/pangoft2-private.h
	    pango/pango/Makefile.am: Remove usage of mini-xft in
	    favor of fontconfig.

	    * pango/pango-ot.h pango/opentype/pango-ot-info.c
	    pango/pangoxft.h
	    modules/arabic/arabic-{xft,ft2}.c modules/indic/indic-xft.c:
	    Attach OpenType information directly to the FT_Face
	    structure using FT_Generic.

	    * modules/tamil/Makefile.am modules/tamil/tamil-xft.c
	    configure.in: Remove this module, no longer needed.

	    * pango/pangoxft-font.c (pango_xft_real_render): Coalesce
	    calls to Xft rendering functions.

 src/pango-ot-info.c | 29 +++++++++++++++++++++++------
 1 file changed, 23 insertions(+), 6 deletions(-)

commit 9df9af0b3615dc6a52d784233a3410a9080d9369
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri May 10 18:44:47 2002 +0000

    Fix acess outside of a loaded frame and some memory leaks on failure.

    Fri May 10 14:41:27 2002  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxgdef.c (TT_Load_GDEF_Table): Fix acess
	    outside of a loaded frame and some memory leaks
	    on failure.

 src/ftxgdef.c | 12 ++++++++++--
 1 file changed, 10 insertions(+), 2 deletions(-)

commit a63dbbbeeb91ebf4ded2fc788f5810a3bd1e14fe
Author: Eric Mader <mader@jtcsv.com>
Date:	Tue May 7 20:39:14 2002 +0000

    Add modules modules/indic/indic-xft.c, indic-ot.c, indic-ot.h,

    Mon May 06 15:07:39 2002 Eric Mader <mader@jtcsv.com>
	* Add modules modules/indic/indic-xft.c, indic-ot.c, indic-ot.h,
	indic-ot-class-tables.c

	* pango/opentype/ftxgdef.c: Compute full offset for mark
	attachment class table

	* pango/opentype/ftxgpos.c: Only return TTO_Err_Not_Covered if
	nothing matches

	* pango/opentype/pango-ot-ruleset.c: enable GPOS processing

 src/ftxgdef.c		| 10 ++++++++--
 src/ftxgpos.c		| 33 ++++++++++++++-------------------
 src/pango-ot-ruleset.c | 35 ++++++++++++++++++++++++++++++++++-
 3 files changed, 56 insertions(+), 22 deletions(-)

commit cf00f8217c9dfcf50febbb06fad245d489a0abe6
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 23 20:20:29 2002 +0000

    Add compatibility defines for changes in FreeType 2.1.0.

    Tue Apr 23 16:15:07 2002  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/fterrcompat.h: Add compatibility
	    defines for changes in FreeType 2.1.0.

 src/fterrcompat.h | 39 +++++++++++++++++++++++++++++++++++++--
 1 file changed, 37 insertions(+), 2 deletions(-)

commit 6b1b04e3736fdca774052ac3cfbe9f027548c29d
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Mar 15 06:46:05 2002 +0000

    In Load_ChainContextSubst2, handle the case where an empty class

    Fri Mar 15 01:35:56 2002  Owen Taylor  <otaylor@redhat.com>

	* pango/opentype/ftxgsub.c pango/opentype/ftxopen.c
	pango/opentype/ftxopenf.h: In Load_ChainContextSubst2,
	handle the case where an empty class definition
	is represented by an offset of 0.

	* pango/opentype/ftxgpos.c: Same for Load_ChainContextPos2.

	* pango/opentype/{ftxopen.c,ftxgpos.c,ftxgsub.c,ftgdef.c}:
	Fix pervasive bug where on cleanups on failure of loading
	an array element, all array elements were freed, not
	just the ones that had been succesfully loaded.

 src/ftxgdef.c	|  24 +++---
 src/ftxgpos.c	| 259
 ++++++++++++++++++++++++++++++++++++---------------------
 src/ftxgsub.c	| 159 ++++++++++++++++++++---------------
 src/ftxopen.c	|  53 ++++++++----
 src/ftxopenf.h |   2 +
 5 files changed, 306 insertions(+), 191 deletions(-)

commit 6050933f336f43453e35246525cfec362bd23acb
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri Mar 15 04:22:14 2002 +0000

    Uncomment GPOS parts.

    Thu Mar 14 23:05:18 2002  Owen Taylor  <otaylor@redhat.com>

	    * pango/opentype/ftxopen.c: Uncomment GPOS parts.

	    * pango/opentype/disasm.c: Start adding some GPOS
	    dumping.

 src/disasm.c  | 146
 ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
 src/ftxopen.c |  20 ++++----
 2 files changed, 154 insertions(+), 12 deletions(-)

commit 973bd60a2526666f68138255b8536d1eaee3c2c2
Author: Sebastian Wilhelmi <wilhelmi@src.gnome.org>
Date:	Thu Dec 13 17:44:46 2001 +0000

    Resuming aborted commit


    Resuming aborted commit

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 6926ca94255e5d52d99d0d64d126165fc725432d
Author: Matthias Clasen <matthiasc@src.gnome.org>
Date:	Tue Oct 30 22:09:20 2001 +0000

    Remove declarations of unimplemented functions

	    * docs/pango-sections.txt, pango/pango-ot.h: Remove
	    declarations
	    of unimplemented functions pango_ot_ruleset_set_glyph_loader
	    and
	    pango_ot_ruleset_set_alternate_func and the related typedefs
	    PangoOTGlyphLoader and PangoOTAlternateFunc.

	    * pango/opentype/pango-ot-info.c,
	    pango/opentype/pango-ot-ruleset.c: Documentation updates.

 src/pango-ot-info.c	| 76
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 src/pango-ot-ruleset.c | 27 ++++++++++++++++++
 2 files changed, 103 insertions(+)

commit 87a475c09f6b9b391bca37de47a303a62a397b83
Author: Havoc Pennington <hp@redhat.com>
Date:	Wed Sep 19 21:20:36 2001 +0000

    header to abstract the difference between FreeType 2.0.3 and 2.0.4
    error

    2001-09-19	Havoc Pennington  <hp@redhat.com>

	* pango/opentype/fterrcompat.h: header to abstract the difference
	between FreeType 2.0.3 and 2.0.4 error codes, based on the
	configure check.

	* configure.in: check for the tterrors.h header in FreeType 2.0.3,
	and define HAVE_FREETYPE_2_0_3 if we have it

 src/Makefile.am     |	1 +
 src/fterrcompat.h   | 16 ++++++++++++++++
 src/ftxgdef.c	     |	3 ++-
 src/ftxgpos.c	     |	3 ++-
 src/ftxgsub.c	     |	3 ++-
 src/ftxopen.c	     |	3 ++-
 src/pango-ot-info.c |	2 +-
 7 files changed, 26 insertions(+), 5 deletions(-)

commit 9c37226efe2489b4cf9618ec98f581c998aaf9e4
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Sep 18 20:05:20 2001 +0000

    Up to 0.19.

    Tue Sep 18 15:47:08 2001  Owen Taylor  <otaylor@redhat.com>

	* configure.in (PANGO_MINOR_VERSION): Up to 0.19.

	* pango/pango-font.h pango/pango-fontmap.[ch] pango/fonts.c
	pango/pangoxft-fontmap.c pango/pangoft-fontmap.c
	pango/pango-context.[ch]
	pango/pangox-fontmap.c: Add new PangoFontFace and PangoFontFamily
	object types, and change the font listing API to list faces and
	families, instead of face names and font descriptions.

	* pango/pango-font.h pango/fonts.c: Make PangoFontDescription
	an opaque heap-allocated structure, add accessors and
	convenience functions.

	* pango/pango-font.h pango/pango-private.h: Make PangoFontMetrics
	heap allocated, protect the structure definition with
	#ifdef PANGO_ENABLE_BACKEND, and add getters for the fields.

	* pango/pango-attributes.[ch] ( pango_attr_iterator_get_font):
	instead of providing a base font description and one to fill
	in, provide a single font description to modify based on
	the attributes.

	* pango/pango-attributes.[ch]: Fix PangoAttrFontDesc to have
	a PangoFontDescription by reference, not by value.

	* pango/pango-utils.[ch]: make pango_parse_style() and friends
	take pointers to individual enumerations instead of to a
	PangoFontDescription structure.

	* pango/*.c: Fix for the PangoFontDescription and PangoFontMetrics
	changes.

	    * pango/pango-{break,engine,indic,ot,xft}.h pango/Makefile.am
	pango/opentype/Makefile.am: Protect portions with
	PANGO_ENABLE_ENGINE to shrink the public API.

	* modules/*/Makefile.am: -DPANGO_ENABLE_ENGINE.

	* pango/{pangox.h,pangox-private.h} modules/basic/basic-x.c: Move
	pango_x_font_get_unknown_glyph() into public header since it is
	used from modules.

	* pango/pango-{context,font,fontmap,modules.utils}.h
	pango/Makefile.am:
	Protect portions with PANGO_ENABLE_BACKEND to shrink the
	public API.

	* pango/*.h: Use G_BEGIN/END_DECLS

	* examples/viewer-qt.[cc,h]: Fix for changes to font listing API,
	PangoFontDescription.

	* pango/pango-indic.h modules/indic/*: Since we install this
	header fix it up to Pango conventions, namespece
	ZERO_WIDTH_JOINER, ZERO_WIDTH_NON_JOINER.

	* docs/pango-sections.txt: Updated.

 src/Makefile.am | 1 +
 1 file changed, 1 insertion(+)

commit 7dd0838863f65a8ff2e27d12679c9a289a76aec1
Author: Darin Adler <darin@src.gnome.org>
Date:	Thu Jul 12 16:34:40 2001 +0000

    Remove stray semicolon.

	* modules/arabic/arabic-x.c: (arabic_engine_shape): Remove stray
	semicolon.

	* modules/arabic/arconv.h:
	* modules/arabic/arconv.c: (shape), (doublelig), (arabic_reshape):
	Use long* instead of int* for parameter to match what's passed in.

	* modules/indic/bengali-x.c: Add missing <string.h> include.
	(pango_indic_make_ligs): Use local variable that was added but not
	ever used.
	(pango_indic_engine_shape): Remove unused locals.

	* modules/indic/devanagari-x.c: Add missing <string.h> include.
	(pango_indic_engine_shape): Remove unused local.

	* modules/indic/gujarati-x.c: Add missing <string.h> include.
	(pango_indic_engine_shape): Remove unused local

	* modules/tamil/tamil-x.c: (tamil_engine_shape): Initialize a
	variable to quiet the compiler's unused warning.

	* pango/.cvsignore: Ignore more generated files.

	* pango/opentype/ftxgpos.c: (Get_Anchor): Add code to set up the
	ap variable. The old code would just use the uninitialized value.

	* pango/opentype/ftxopen.c: (Load_Coverage): Remove unused local.

	* pango/opentype/pango-ot-ruleset.c: (pango_ot_ruleset_shape):
	Remove unused local.

	* pango/pango-attributes.c: (pango_attr_list_get_type),
	(pango_color_get_type): Add needed function type casts (just
	warnings under gcc, but could be errors in other compilers).

	* pango/pangoxft-font.c: (pango_xft_font_get_metrics),
	(pango_xft_font_get_coverage), (pango_xft_get_shaper_map),
	(pango_xft_font_find_shaper): Switch from lang char* to
	PangoLanguage*. The code was still compiling, but would not have
	worked.

 src/ftxgpos.c		| 2 ++
 src/ftxopen.c		| 1 -
 src/pango-ot-ruleset.c | 1 -
 3 files changed, 2 insertions(+), 2 deletions(-)

commit 68f8a64307441bd3b3d45971ac4dc93f63dedfe8
Author: Owen Taylor <otaylor@redhat.com>
Date:	Fri May 18 16:04:40 2001 +0000

    Use ISO C99 varargs when available.

    Fri May 18 11:30:57 2001  Owen Taylor  <otaylor@redhat.com>

	* pango/opentype/disasm.c: Use ISO C99 varargs when
	available.

    Thu May 17 11:16:23 2001  Owen Taylor  <otaylor@redhat.com>

	* pango/mapping.c: Fixup docs, remove some FIXMEs that are
	no longer applicable.

	* pango/pango-layout.c: Move by graphemes, not characters.

	* pango/pango-layout.c (pango_layout_line_x_to_index):
	Position at the closest grapheme boundary, not at character
	boundaries.

	* pango/pango-layout.c (pango_layout_line_index_to_x):
	Return positions of grapheme boundaries, not character
	boundaries.

 src/Makefile.am | 2 ++
 src/disasm.c	 | 5 +++++
 2 files changed, 7 insertions(+)

commit 89eb36ebc6591025c063cb98f0e1b3badde73e9e
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 24 15:47:22 2001 +0000

    Remove excess call to DONE_Stream left over from conversion from FT1.

    Tue Apr 24 11:45:55 2001  Owen Taylor  <otaylor@redhat.com>

	* pango/opentype/ftxgdef.c (TT_Load_GDEF_Table): Remove
	excess call to DONE_Stream left over from conversion
	from FT1. (reported by Michael Jansson)

 src/ftxgdef.c | 1 -
 1 file changed, 1 deletion(-)

commit c61a730aaebec751831f8423894de5f4b539d0ec
Author: Owen Taylor <otaylor@redhat.com>
Date:	Tue Apr 3 19:07:36 2001 +0000

    Release 0.14

    Tue Apr  3 15:05:19 2001  Owen Taylor  <otaylor@redhat.com>

	* Release 0.14

	* NEWS: updated.

	    * pango/pango/opentype/Makefile.am: make dist fixes.

	* configure.in (PANGO_MINOR_VERSION): Up to 0.14

 src/Makefile.am | 10 ++++++++--
 1 file changed, 8 insertions(+), 2 deletions(-)

commit 405b878923ed219617c6f643a9aec06175223d16
Author: Tor Lillqvist <tml@iki.fi>
Date:	Thu Dec 21 19:55:23 2000 +0000

    Only a script engine here.

    2000-12-21	Tor Lillqvist  <tml@iki.fi>

	* modules/basic/basic-win32.c (script_engine_load): Only a script
	engine here.

	* pango/makefile.mingw.in: Add the built pango-enum-types.[ch].

	* pango/pango.def
	* pango/pangoft2.def: Update.

	* pango/opentype/pango-ot.def
	* pango/opentype/makefile.mingw.in: New files.

	* pango/opentype/Makefile.am (EXTRA_DIST): Add them.

	* configure.in (included_modules): Generate
	pango/opentype/makefile.mingw.

 src/Makefile.am       |  4 +++-
 src/makefile.mingw.in | 43 +++++++++++++++++++++++++++++++++++++++++++
 src/pango-ot.def      | 50
 ++++++++++++++++++++++++++++++++++++++++++++++++++
 3 files changed, 96 insertions(+), 1 deletion(-)

commit 80a15829135065e16ce5b129c715d10d14b829ba
Author: Owen Taylor <otaylor@redhat.com>
Date:	Wed Dec 20 04:41:36 2000 +0000

    Since Xft may only be available statically without shlib deps,
    check for

    Tue Dec 19 22:47:16 2000  Owen Taylor  <otaylor@redhat.com>

	* configure.in pango-config.in pangoxft.pc.in
	modules/basic/Makefile.am: Since Xft may only be available
	statically without shlib deps, check for FreeType libs explicitly
	and include them when linking, otherwise things won't work. Also,
	define FREETYPE_CFLAGS from freetype-config --cflags.

	* modules/basic/basic-xft.c pango/pangoxft-font{,map}.c: Fool
	Xft into not converting glyph indices by loading the
	face unencoded then calling FT_Set_Charmap ourselves.

	* pango/Makefile.am pango/pango-ot.h pango/opentype/* :Add start
	of opentype handling - most of the actually meat of the code here
	is the OpenType layout code from FreeType 1 ported to freetype2
	and adapted slighlty for our purposes.	Also, includes a
	incomplete OpenType-table-dumping code useful for figuring
	out what is going on.

	* pango/pangoxft.h pango/pangoxft-font.h: Add calls for
	getting FT_Face and PangoOTInfo from PangoXftFont.

	* modules/arabic/{Makefile.am,arabic-ot.[ch],arabic-xft.c}:
	Initial support for rendering Arabic with OpenType fonts.

 src/.cvsignore		|    8 +
 src/FT-license.txt	|  158 ++
 src/Makefile.am	|   39 +
 src/README		|   36 +
 src/disasm.c		|  317 +++
 src/disasm.h		|   26 +
 src/ftxgdef.c		| 1155 +++++++++
 src/ftxgdef.h		|  220 ++
 src/ftxgpos.c		| 6222
 ++++++++++++++++++++++++++++++++++++++++++++++++
 src/ftxgpos.h		|  858 +++++++
 src/ftxgsub.c		| 4531 +++++++++++++++++++++++++++++++++++
 src/ftxgsub.h		|  612 +++++
 src/ftxopen.c		| 1467 ++++++++++++
 src/ftxopen.h		|  308 +++
 src/ftxopenf.h		|  161 ++
 src/ottest.c		|  265 +++
 src/pango-ot-info.c	|  438 ++++
 src/pango-ot-private.h |   98 +
 src/pango-ot-ruleset.c |  232 ++
 19 files changed, 17151 insertions(+)
